"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9612],{9612:function(e,i,t){t.r(i),t.d(i,{default:function(){return f}});var n=t(85893),r=t(1864),a=t(67294),o=t(10508).ZP.div.withConfig({componentId:"sc-16d5cff3-0"})`
  #vimjs-canvas {
    image-rendering: pixelated;
  }

  #vimjs-container {
    height: 100%;
    width: 100%;
  }

  #vimjs-file {
    display: none;
  }

  #vimjs-font-test {
    position: absolute;
    visibility: hidden;
  }
`,s=t(55785),l=t(7459),c=t(26724),u=t(56758),d=t(64358),m=t(34254),p=t(48764).Buffer,f=e=>{let{id:i}=e;const{closeWithTransition:t,processes:{[i]:f}}=(0,u.z)(),{readFile:v,updateFolder:w,writeFile:b}=(0,c.o)(),{prependFileToTitle:h}=(0,l.Z)(i),{libs:$=[],url:g=""}=f||{},[j,x]=(0,a.useState)([]),y=(0,a.useRef)(!1),F=(0,a.useCallback)((async()=>{const e=g||d.$Z,[,...n]=e.split("/");let a="";1===n.length&&(a="/root"),window.VimWrapperModule={},await(0,m.mb)($,!1,!!window.VimWrapperModule);const o=g?await v(e):p.from("");window.VimWrapperModule?.init?.({VIMJS_ALLOW_EXIT:!0,arguments:[`${a}${e}`],containerWindow:document.querySelector("#vimjs-container")?.closest("section"),memoryInitializerPrefixURL:"/Program Files/Vim.js/",postRun:[()=>{y.current=!1}],preRun:[()=>{let e="";[a,...n].forEach(((i,t,r)=>{let{[t+1]:a}=r;a&&t+1!==n.length?(window.VimWrapperModule?.VimModule?.FS_createPath?.(e,a,!0,!0),e+=`/${a}`):e?window.VimWrapperModule?.VimModule?.FS_createDataFile?.(e,i,o,!0,!0):e=i}))}],print:console.info,printErr:console.info,quitCallback:()=>t(i),writeCallback:i=>x((t=>[...t,{buffer:p.from(i),url:e}]))}),h((0,r.basename)(e))}),[t,i,$,h,v,g]);return(0,a.useEffect)((()=>{j.length>0&&([...j].forEach((e=>{let{buffer:i,url:t}=e;b(t,i,!0),w((0,r.dirname)(t),(0,r.basename)(t))})),x([]))}),[w,j,b]),(0,a.useEffect)((()=>(y.current||(y.current=!0,F()),()=>{!y&&window.VimWrapperModule?.VimModule?.asmLibraryArg?._vimjs_prepare_exit()&&window.VimWrapperModule?.VimModule?.exit?.()})),[F]),(0,n.jsxs)(o,{children:[(0,n.jsx)("div",{id:"vimjs-container",...(0,s.Z)({id:i}),children:(0,n.jsx)("canvas",{id:"vimjs-canvas",onContextMenuCapture:m.nK})}),(0,n.jsx)("div",{id:"vimjs-font-test"})]})}},55785:function(e,i,t){var n=t(1864),r=t(67294),a=t(62727),o=t(6529),s=t(42151),l=t(26724),c=t(56758),u=t(62065),d=t(64358),m=t(34254);i.Z=e=>{let{callback:i,directory:t=d.Ll,id:p,onDragLeave:f,onDragOver:v,updatePositions:w}=e;const{url:b}=(0,c.z)(),{iconPositions:h,sortOrders:$,setIconPositions:g}=(0,u.k)(),{mkdirRecursive:j,updateFolder:x,writeFile:y}=(0,l.o)(),F=(0,r.useCallback)((async(e,i,t)=>{if(p)if(i){const r=(0,n.join)(d.Ll,e);if(await j(d.Ll),await y(r,i,!0))return t===s.v.UPDATE_URL&&b(p,r),x(d.Ll,e),(0,n.basename)(r)}else t===s.v.UPDATE_URL&&b(p,e);return""}),[p,j,x,b,y]),{openTransferDialog:L}=(0,a.Z)();return{onDragLeave:f,onDragOver:e=>{v?.(e),(0,m.nK)(e)},onDrop:e=>{if(!d.my.has((0,m.RT)(t))){if(w&&e.target instanceof HTMLElement){const{files:i,text:r}=(0,o.p4)(e);if(0===i.length&&""===r)return;const a={x:e.clientX,y:e.clientY};let s=[];if(r){try{s=JSON.parse(r)}catch{}if(!Array.isArray(s))return;const[e]=s;if(!e)return;if(e.startsWith(t)&&(0,n.basename)(e)===(0,n.relative)(t,e))return;s=s.map((e=>(0,n.basename)(e)))}else s=i instanceof FileList?[...i].map((e=>e.name)):[...i].map((e=>e.getAsFile()?.name||"")).filter(Boolean);s=s.map((e=>{if(!h[`${t}/${e}`])return e;let i=0,r="";do{i+=1,r=`${t}/${(0,n.basename)(e,(0,n.extname)(e))} (${i})${(0,n.extname)(e)}`}while(h[r]);return(0,n.basename)(r)})),(0,m.vi)(t,e.target,h,$,a,s,g)}(0,o.WG)(e,i||F,t,L,Boolean(p))}}}}},7459:function(e,i,t){var n=t(67294),r=t(56758),a=t(25804),o=t(64358);i.Z=e=>{const{title:i}=(0,r.z)(),[t]=e.split(o.CC),{title:s}=a.Z[t]||{};return{appendFileToTitle:(0,n.useCallback)(((t,n)=>{const r=t?` - ${t}${n?` ${o.xy}`:""}`:"";i(e,`${s}${r}`)}),[e,s,i]),prependFileToTitle:(0,n.useCallback)(((t,n,r)=>{const a=t?`${n?`${o.xy} `:""}${t}${r?" ":" - "}`:"";i(e,`${a}${s}`)}),[e,s,i])}}}}]);