"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1953],{51953:function(e,t,a){a.r(t),a.d(t,{addFileSystemHandle:function(){return o},removeFileSystemHandle:function(){return c},requestPermission:function(){return u},resetStorage:function(){return d}});var s=a(1864),r=a(64358),n=a(33631);const i=["/classicube","/data/saves","ejs-bios","ejs-roms","ejs-romsdata","ejs-states","ejs-system","js-dos-cache (emulators-ui-saves)","keyval-store"],o=async(e,t,a)=>{if(!await(0,n.cT)())return;const i=await(0,n.cb)();try{i.put(n.t2,{...await(0,n.aA)(),[(0,s.join)(e,a)]:t},r.Sp)}catch{}},c=async e=>{if(!await(0,n.cT)())return;const{[e]:t,...a}=await(0,n.aA)(),s=await(0,n.cb)();await s.put(n.t2,a,r.Sp)},u=async e=>{const t=(await(0,n.aA)())[e];if(t){const e=await t.queryPermission();if("prompt"===e)await t.requestPermission();else if("granted"===e)throw new Error("Permission already granted");return t.queryPermission()}return!1},d=e=>new Promise(((t,s)=>{setTimeout(s,750),window.localStorage.clear(),window.sessionStorage.clear();const r=()=>{const a=e?._getFs("/")?.fs,r=a?.getOverlayedFileSystems(),n=r?.readable,i=r?.writable;n?.empty(),"InMemory"!==i?.getName()&&i?.empty?i.empty((e=>e?s(e):t())):t()};Promise.resolve().then(a.bind(a,26531)).then((e=>{let{deleteDB:t}=e;window.indexedDB.databases?window.indexedDB.databases().then((e=>e.filter((e=>{let{name:t}=e;return t&&"browserfs"!==t})).forEach((e=>{let{name:a}=e;return t(a)})))).then(r).catch(r):(i.forEach((e=>t(e))),r())}))}))}}]);