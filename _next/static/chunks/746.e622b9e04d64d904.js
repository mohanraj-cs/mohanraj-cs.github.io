"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[746],{746:function(e,t,n){n.r(t),n.d(t,{default:function(){return f}});var i=n(85893),s=n(10508);var a=s.ZP.div.withConfig({componentId:"sc-bf9d7d9b-0"})`
  height: ${e=>{let{theme:t}=e;return`calc(100% - ${t.sizes.titleBar.height}px)`}};
  width: 100%;

  canvas {
    height: 100%;
    width: 100%;
  }
`,r=n(67294),o=n(56758),l=n(62065),c=n(64358),u=n(34254);var d=e=>{let{containerRef:t,id:n,setLoading:i}=e;const{processes:{[n]:a}={}}=(0,o.z)(),{windowStates:{[n]:d}}=(0,l.k)(),{size:h}=d||{},{libs:f}=a||{},{sizes:{titleBar:g}}=(0,s.Fg)(),m=(0,r.useCallback)((()=>t.current?.querySelector("canvas")),[t]);(0,r.useEffect)((()=>{h&&(window.CCModule.setCanvasSize?.((0,u.Vy)(h.width),(0,u.Vy)(h.height)-g.height),window.CCModule.OnResize?.())}),[m,h,g.height]),(0,r.useEffect)((()=>{window.CCModule||setTimeout((()=>{const e=m();window.CCModule={arguments:["Singleplayer"],canvas:e,postRun:[()=>i(!1),()=>{const{width:t,height:n}=e.getBoundingClientRect()||{};e.width=t,e.height=n}],print:console.info,setStatus:console.info},(0,u.mb)(f)}),c.jx.WINDOW)}),[m,f,i])},h=n(2742);var f=e=>{let{id:t}=e;return(0,i.jsx)(h.Z,{StyledComponent:a,id:t,useHook:d,children:(0,i.jsx)("canvas",{onContextMenu:u.nK})})}},2742:function(e,t,n){var i=n(85893),s=n(5152),a=n.n(s),r=n(67294),o=n(56758),l=n(55785);const c=a()((()=>n.e(6753).then(n.bind(n,26753))),{loadableGenerated:{webpack:()=>[26753]}}),u=e=>{let{id:t,useHook:n,StyledComponent:s,children:a}=e;const{processes:{[t]:{url:u=""}={}}}=(0,o.z)(),d=(0,r.useRef)(null),[h,f]=(0,r.useState)(!0),g=(0,r.useMemo)((()=>({contain:"strict",visibility:h?"hidden":"visible"})),[h]);return n({containerRef:d,id:t,loading:h,setLoading:f,url:u}),(0,i.jsxs)(i.Fragment,{children:[h&&(0,i.jsx)(c,{}),(0,i.jsx)(s,{ref:d,style:g,...(0,l.Z)({id:t}),children:a})]})};t.Z=(0,r.memo)(u)},55785:function(e,t,n){var i=n(1864),s=n(67294),a=n(62727),r=n(6529),o=n(42151),l=n(26724),c=n(56758),u=n(62065),d=n(64358),h=n(34254);t.Z=e=>{let{callback:t,directory:n=d.Ll,id:f,onDragLeave:g,onDragOver:m,updatePositions:p}=e;const{url:v}=(0,c.z)(),{iconPositions:w,sortOrders:b,setIconPositions:C}=(0,u.k)(),{mkdirRecursive:y,updateFolder:k,writeFile:x}=(0,l.o)(),L=(0,s.useCallback)((async(e,t,n)=>{if(f)if(t){const s=(0,i.join)(d.Ll,e);if(await y(d.Ll),await x(s,t,!0))return n===o.v.UPDATE_URL&&v(f,s),k(d.Ll,e),(0,i.basename)(s)}else n===o.v.UPDATE_URL&&v(f,e);return""}),[f,y,k,v,x]),{openTransferDialog:R}=(0,a.Z)();return{onDragLeave:g,onDragOver:e=>{m?.(e),(0,h.nK)(e)},onDrop:e=>{if(!d.my.has((0,h.RT)(n))){if(p&&e.target instanceof HTMLElement){const{files:t,text:s}=(0,r.p4)(e);if(0===t.length&&""===s)return;const a={x:e.clientX,y:e.clientY};let o=[];if(s){try{o=JSON.parse(s)}catch{}if(!Array.isArray(o))return;const[e]=o;if(!e)return;if(e.startsWith(n)&&(0,i.basename)(e)===(0,i.relative)(n,e))return;o=o.map((e=>(0,i.basename)(e)))}else o=t instanceof FileList?[...t].map((e=>e.name)):[...t].map((e=>e.getAsFile()?.name||"")).filter(Boolean);o=o.map((e=>{if(!w[`${n}/${e}`])return e;let t=0,s="";do{t+=1,s=`${n}/${(0,i.basename)(e,(0,i.extname)(e))} (${t})${(0,i.extname)(e)}`}while(w[s]);return(0,i.basename)(s)})),(0,h.vi)(n,e.target,w,b,a,o,C)}(0,r.WG)(e,t||L,n,R,Boolean(f))}}}}}}]);