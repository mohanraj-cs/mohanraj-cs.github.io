"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9725],{29725:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var i=n(85893);var o=n(10508).ZP.div.withConfig({componentId:"sc-18f301cd-0"})`
  align-items: center;
  background-color: #000;
  display: flex;
  height: 100%;
  width: 100%;

  canvas {
    /* stylelint-disable declaration-block-no-duplicate-properties */
    image-rendering: pixelated;
    image-rendering: crisp-edges;
    position: absolute;
    top: 0 !important;
    touch-action: none;
    -webkit-touch-callout: none;
    user-select: none;
    width: 100%;
  }

  div,
  video {
    display: none;
  }

  .emulator-mouse-overlay {
    display: block;
    inset: 0;
    position: absolute;
  }
`,s=n(67294);const r={emulatorFunction:"dosWorker"},a=["__core-js_shared__","compiled","core","emulatorsUi","exports","WDOSBOX","worker"],c={".jsdos/dosbox.conf":"/Program Files/js-dos/dosbox.conf",".jsdos/jsdos.json":"/Program Files/js-dos/jsdos.json"},l=new Set(["Alt","ContextMenu","F1","F3","F5","F6","F7","F10","F11","F12"]);var d=n(1864),u=n(7459),h=n(26724),p=n(56758),f=n(64358),w=n(34254),m=n(11498),g=n(48764).Buffer;var b=(e,t,i,o)=>{const{appendFileToTitle:r}=(0,u.Z)(e),{exists:l,mkdirRecursive:b,readFile:y,updateFolder:x,writeFile:v}=(0,h.o)(),{linkElement:k,processes:{[e]:T}}=(0,p.z)(),{closing:F}=T||{},[E,z]=(0,s.useState)({}),L=(0,s.useCallback)((async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=`${(0,d.basename)(e)}.zip.save`;await l(f.Tl)||(await b(f.Tl),x((0,d.dirname)(f.Tl)));const s=(0,d.join)(f.Tl,i);if(void 0!==E[e]&&await v(s,g.from(await E[e].persist()),!0)){if(t){const e=(0,d.join)(f.Xo,f.Tl),n=(0,d.join)(f.Xo,`${s}${f.Qy}`);await l(e)||(await b(e),x((0,d.dirname)(f.Tl))),await v(n,t,!0)}n&&o?.stop(),x(f.Tl,i)}}),[E,o,l,b,x,v]),$=(0,s.useCallback)((async()=>{const[s]=Object.keys(E);s&&L(s);const u=t?await y(t):g.from(""),h=(0,w.RT)(t),{zipAsync:p}=await n.e(1264).then(n.bind(n,91264)),b=async e=>g.from(await p({[(0,d.basename)(t)]:e})),x=async e=>(0,w.YS)(await(async(e,t)=>{const{addFileToZip:i,isFileInZip:o}=await n.e(1264).then(n.bind(n,91264));return Object.entries(c).reduce((async(e,n)=>{let[s,r]=n;const a=await e;return a.length>0&&await o(a,s)?a:i(a,r,s,t)}),Promise.resolve(e))})(e,y)),v=".exe"===h?await b(u):u;let T;if(".jsdos"===h)T=(0,w.YS)(v);else try{T=await x(v)}catch{T=await x(await b(u))}const F=(0,d.join)(f.Tl,`${(0,d.basename)(t)}.zip.save`),$=await l(F)?(0,w.YS)(await y(F)):void 0,j=await(o?.run(T,$));if(j){const n=i.current?.querySelector("canvas");n instanceof HTMLCanvasElement&&(k(e,"peekElement",n),z({[t]:j}),r((0,d.basename)(t)),(0,w.EK)(T),$&&(0,w.EK)($),(0,m.od)(a))}}),[r,L,i,E,o,l,e,k,y,t]);return(0,s.useEffect)((()=>(T&&!F&&o&&!(t in E)&&(z({[t]:void 0}),$()),()=>{if(t&&F){const e=e=>{window.setTimeout((()=>L(t,e,F)),f.jx.WINDOW)};(async()=>{const e=await(E[t]?.screenshot());return e?(0,w.fv)(e):void 0})().then(e).catch(e)}})),[L,F,E,o,$,T,t]),E[t]},y=n(23615),x=n(62065);const v=e=>{l.has(e.key)&&e.preventDefault()};var k=e=>{let{containerRef:t,id:n,loading:i,setLoading:o,url:a}=e;const{updateWindowSize:c}=(0,y.Z)(n),[l,d]=(0,s.useState)(),u=(0,s.useRef)(!1),{foregroundId:h}=(0,x.k)(),m=b(n,a,t,l),{closeWithTransition:g,processes:{[n]:{libs:k=[]}={}}={}}=(0,p.z)();(0,s.useEffect)((()=>{l||u.current||(u.current=!0,(0,w.mb)(k).then((()=>{if(window.emulators&&(window.emulators.pathPrefix="/Program Files/js-dos/",t.current)){const e=t.current.closest("section");e?.addEventListener("keydown",v,{capture:!0}),e?.addEventListener("keyup",v,{capture:!0}),e?.addEventListener("focus",(()=>t.current?.focus(f.eS)),{passive:!0}),d(window.Dos(t.current,r))}})))}),[t,l,k]),(0,s.useEffect)((()=>{if(m&&i){c(m.height(),m.width());const e=m.events();e.onMessage(((e,t)=>{if(t.startsWith("[LOG_EXEC]")){const[,e]=t.split("[LOG_EXEC]"),[i]=e.replace("Parsing command line: ","").split(" ");"EXIT"===i.toUpperCase()&&g(n)}})),e.onFrameSize((()=>{const e=t.current?.querySelector("canvas"),[n,i]=[(0,w.Vy)(e?.style.width),(0,w.Vy)(e?.style.height)],{height:o=0,width:s=0}=e?.getBoundingClientRect()||{};i&&n&&(i!==o||n!==s)&&c(i,n)})),e.onExit((()=>window.SimpleKeyboardInstances?.emulatorKeyboard?.destroy())),o(!1)}}),[g,t,m,l?.layers,n,i,o,c]),(0,s.useLayoutEffect)((()=>{n!==h||i||t.current?.focus(f.eS)}),[t,i,h,n])},T=n(2742);var F=e=>{let{id:t}=e;return(0,i.jsx)(T.Z,{StyledComponent:o,id:t,useHook:k})}},2742:function(e,t,n){var i=n(85893),o=n(5152),s=n.n(o),r=n(67294),a=n(56758),c=n(55785);const l=s()((()=>n.e(6753).then(n.bind(n,26753))),{loadableGenerated:{webpack:()=>[26753]}}),d=e=>{let{id:t,useHook:n,StyledComponent:o,children:s}=e;const{processes:{[t]:{url:d=""}={}}}=(0,a.z)(),u=(0,r.useRef)(null),[h,p]=(0,r.useState)(!0),f=(0,r.useMemo)((()=>({contain:"strict",visibility:h?"hidden":"visible"})),[h]);return n({containerRef:u,id:t,loading:h,setLoading:p,url:d}),(0,i.jsxs)(i.Fragment,{children:[h&&(0,i.jsx)(l,{}),(0,i.jsx)(o,{ref:u,style:f,...(0,c.Z)({id:t}),children:s})]})};t.Z=(0,r.memo)(d)},55785:function(e,t,n){var i=n(1864),o=n(67294),s=n(62727),r=n(6529),a=n(42151),c=n(26724),l=n(56758),d=n(62065),u=n(64358),h=n(34254);t.Z=e=>{let{callback:t,directory:n=u.Ll,id:p,onDragLeave:f,onDragOver:w,updatePositions:m}=e;const{url:g}=(0,l.z)(),{iconPositions:b,sortOrders:y,setIconPositions:x}=(0,d.k)(),{mkdirRecursive:v,updateFolder:k,writeFile:T}=(0,c.o)(),F=(0,o.useCallback)((async(e,t,n)=>{if(p)if(t){const o=(0,i.join)(u.Ll,e);if(await v(u.Ll),await T(o,t,!0))return n===a.v.UPDATE_URL&&g(p,o),k(u.Ll,e),(0,i.basename)(o)}else n===a.v.UPDATE_URL&&g(p,e);return""}),[p,v,k,g,T]),{openTransferDialog:E}=(0,s.Z)();return{onDragLeave:f,onDragOver:e=>{w?.(e),(0,h.nK)(e)},onDrop:e=>{if(!u.my.has((0,h.RT)(n))){if(m&&e.target instanceof HTMLElement){const{files:t,text:o}=(0,r.p4)(e);if(0===t.length&&""===o)return;const s={x:e.clientX,y:e.clientY};let a=[];if(o){try{a=JSON.parse(o)}catch{}if(!Array.isArray(a))return;const[e]=a;if(!e)return;if(e.startsWith(n)&&(0,i.basename)(e)===(0,i.relative)(n,e))return;a=a.map((e=>(0,i.basename)(e)))}else a=t instanceof FileList?[...t].map((e=>e.name)):[...t].map((e=>e.getAsFile()?.name||"")).filter(Boolean);a=a.map((e=>{if(!b[`${n}/${e}`])return e;let t=0,o="";do{t+=1,o=`${n}/${(0,i.basename)(e,(0,i.extname)(e))} (${t})${(0,i.extname)(e)}`}while(b[o]);return(0,i.basename)(o)})),(0,h.vi)(n,e.target,b,y,s,a,x)}(0,r.WG)(e,t||F,n,E,Boolean(p))}}}}},99895:function(e,t,n){n.d(t,{BS:function(){return r},FC:function(){return o},F_:function(){return i},wV:function(){return s}});const i={bottom:!1,bottomLeft:!1,bottomRight:!1,left:!1,right:!1,top:!1,topLeft:!1,topRight:!1},o={bottom:!0,bottomLeft:!0,bottomRight:!0,left:!0,right:!0,top:!0,topLeft:!0,topRight:!0},s=30,r=166,a={cancel:".cancel",dragHandleClassName:"handle",enableUserSelectHack:!1,minHeight:`${s}px`,minWidth:`${r}px`,resizeHandleStyles:{bottom:{bottom:"-3px",cursor:"ns-resize",height:"6px"},bottomLeft:{bottom:"-3px",cursor:"nesw-resize",height:"12px",left:"-3px",width:"12px"},bottomRight:{bottom:"-3px",cursor:"nwse-resize",height:"12px",right:"-3px",width:"12px"},left:{cursor:"ew-resize",left:"-3px",width:"6px"},right:{cursor:"ew-resize",right:"-3px",width:"6px"},top:{cursor:"ns-resize",height:"6px",top:"-3px"},topLeft:{cursor:"nwse-resize",height:"12px",left:"-3px",top:"-3px",width:"12px"},topRight:{cursor:"nesw-resize",height:"12px",right:"-3px",top:"-3px",width:"12px"}}};t.ZP=a},4914:function(e,t,n){n.d(t,{Rf:function(){return a},b$:function(){return d},hu:function(){return r},ix:function(){return l},mZ:function(){return c}});var i=n(99895),o=n(64358),s=n(34254);const r=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const[r]=e.split(o.CC),a=`${r}${o.CC}`,c=n.find((e=>e.startsWith(a)))||"",{componentWindow:l}=t?.[c]||{},{x:d=0,y:u=0,width:h=0,height:p=0}=l?.getBoundingClientRect()||{},f=d+i+h>(0,s.E9)()||u+i+p>(0,s.sI)();return f||!d&&!u?void 0:{x:d+i,y:u+i}},a=e=>{let{height:t,width:n}=e;const[i,r]=[(0,s.sI)(),(0,s.E9)()];return{x:Math.floor(r/2-(0,s.Vy)(n)/2),y:Math.floor((i-o.bK)/2-(0,s.Vy)(t)/2)}},c={BOTTOM:15,LEFT:150,RIGHT:50,TOP:15},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{position:i,size:o}=e||{},{x:r=0,y:a=0}=i||{},{height:l=0,width:d=0}=o||{};return n?r+c.RIGHT>t.x||r+(0,s.Vy)(d)-c.LEFT<0||a+c.BOTTOM>t.y||a+c.TOP<0:r<0||a<0||r+(0,s.Vy)(d)>t.x||a+(0,s.Vy)(l)>t.y},d=(e,t)=>{const n=Number(e.height),r=Number(e.width),[a,c]=[(0,s.sI)(),(0,s.E9)()],l=a-o.bK,d=Math.max(i.wV,Math.min(n,l)),u=Math.max(i.BS,Math.min(r,c));if(!t)return{height:d,width:u};const h=n===d,p=r===u;return h||p?h?p?{height:d,width:u}:{height:Math.round(d/(r/u)),width:u}:{height:d,width:Math.round(u/(n/d))}:n>r?{height:d,width:Math.round(u/(l/d))}:{height:Math.round(d/(c/u)),width:u}}},7459:function(e,t,n){var i=n(67294),o=n(56758),s=n(25804),r=n(64358);t.Z=e=>{const{title:t}=(0,o.z)(),[n]=e.split(r.CC),{title:a}=s.Z[n]||{};return{appendFileToTitle:(0,i.useCallback)(((n,i)=>{const o=n?` - ${n}${i?` ${r.xy}`:""}`:"";t(e,`${a}${o}`)}),[e,a,t]),prependFileToTitle:(0,i.useCallback)(((n,i,o)=>{const s=n?`${i?`${r.xy} `:""}${n}${o?" ":" - "}`:"";t(e,`${s}${a}`)}),[e,a,t])}}},23615:function(e,t,n){var i=n(67294),o=n(10508),s=n(4914),r=n(56758),a=n(62065);t.Z=e=>{const{setWindowStates:t}=(0,a.k)(),{processes:{[e]:{lockAspectRatio:n=!1,maximized:c=!1}={}}={}}=(0,r.z)(),{sizes:{titleBar:l}}=(0,o.Fg)();return{updateWindowSize:(0,i.useCallback)(((i,o)=>t((t=>({...t,[e]:{...t?.[e],maximized:c,size:(0,s.b$)({height:i+l.height,width:o},n)}})))),[e,n,c,t,l.height])}}},11498:function(e,t,n){n.d(t,{H3:function(){return r},od:function(){return i},wz:function(){return s}});const i=e=>e.forEach((e=>{if(e in window)try{delete window[e]}finally{Object.assign(window,{[e]:void 0})}})),o=(e,t)=>{window.lockedGlobals={...window.lockedGlobals,[e]:t}},s=e=>o(e,!0),r=e=>{Object.getOwnPropertyDescriptor(window,e)||(e=>{let t;Object.defineProperty(window,e,{get:()=>window.lockedGlobals?.[e]?void 0:t,set(n){window.lockedGlobals?.[e]||(t=n)}})})(e),o(e,!1)}}}]);