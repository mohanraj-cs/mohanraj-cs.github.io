"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6789],{31626:function(n,e,t){t.d(e,{gF:function(){return p},wL:function(){return h},Hj:function(){return g},sE:function(){return y}});var r=t(85893),o=t(67294),i=t(35814);function s(){s=function(){return n};var n={},e=Object.prototype,t=e.hasOwnProperty,r=Object.defineProperty||function(n,e,t){n[e]=t.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{u({},"")}catch(n){u=function(n,e,t){return n[e]=t}}function l(n,e,t,o){var i=e&&e.prototype instanceof d?e:d,s=Object.create(i.prototype),a=new I(o||[]);return r(s,"_invoke",{value:x(n,t,a)}),s}function h(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=l;var f={};function d(){}function p(){}function g(){}var y={};u(y,i,(function(){return this}));var w=Object.getPrototypeOf,b=w&&w(w(L([])));b&&b!==e&&t.call(b,i)&&(y=b);var m=g.prototype=d.prototype=Object.create(y);function v(n){["next","throw","return"].forEach((function(e){u(n,e,(function(n){return this._invoke(e,n)}))}))}function E(n,e){function o(r,i,s,a){var c=h(n[r],n,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&t.call(l,"__await")?e.resolve(l.__await).then((function(n){o("next",n,s,a)}),(function(n){o("throw",n,s,a)})):e.resolve(l).then((function(n){u.value=n,s(u)}),(function(n){return o("throw",n,s,a)}))}a(c.arg)}var i;r(this,"_invoke",{value:function(n,t){function r(){return new e((function(e,r){o(n,t,e,r)}))}return i=i?i.then(r,r):r()}})}function x(n,e,t){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(t.method=o,t.arg=i;;){var s=t.delegate;if(s){var a=k(s,t);if(a){if(a===f)continue;return a}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=h(n,e,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}function k(n,e){var t=e.method,r=n.iterator[t];if(void 0===r)return e.delegate=null,"throw"===t&&n.iterator.return&&(e.method="return",e.arg=void 0,k(n,e),"throw"===e.method)||"return"!==t&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+t+"' method")),f;var o=h(r,n.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[n.resultName]=i.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function A(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function B(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function I(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(A,this),this.reset(!0)}function L(n){if(n){var e=n[i];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,o=function e(){for(;++r<n.length;)if(t.call(n,r))return e.value=n[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:U}}function U(){return{value:void 0,done:!0}}return p.prototype=g,r(m,"constructor",{value:g,configurable:!0}),r(g,"constructor",{value:p,configurable:!0}),p.displayName=u(g,c,"GeneratorFunction"),n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,g):(n.__proto__=g,u(n,c,"GeneratorFunction")),n.prototype=Object.create(m),n},n.awrap=function(n){return{__await:n}},v(E.prototype),u(E.prototype,a,(function(){return this})),n.AsyncIterator=E,n.async=function(e,t,r,o,i){void 0===i&&(i=Promise);var s=new E(l(e,t,r,o),i);return n.isGeneratorFunction(t)?s:s.next().then((function(n){return n.done?n.value:s.next()}))},v(m),u(m,c,"Generator"),u(m,i,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),n.keys=function(n){var e=Object(n),t=[];for(var r in e)t.push(r);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},n.values=L,I.prototype={constructor:I,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!n)for(var e in this)"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t,r){return s.type="throw",s.arg=n,e.next=t,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=t.call(i,"catchLoc"),c=t.call(i,"finallyLoc");if(a&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&t.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=n,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(s)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),f},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),B(t),f}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var o=r.arg;B(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:L(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=void 0),f}},n}function a(n,e,t,r,o,i,s){try{var a=n[i](s),c=a.value}catch(n){return void t(n)}a.done?e(c):Promise.resolve(c).then(r,o)}function c(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function s(n){a(i,r,o,s,c,"next",n)}function c(n){a(i,r,o,s,c,"throw",n)}s(void 0)}))}}function u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u.apply(this,arguments)}Symbol();var l=function(n,e){return Object.values(n.reduce((function(n,t){var r;return u({},n,((r={})[""+t[e]]=t,r))}),{}))},h=function(n){var e=n||new Date;return Math.floor(e.getTime()/1e3)},f=(0,o.createContext)({isLoading:!0,connectedRelays:[],onConnect:function(){return null},onDisconnect:function(){return null},publish:function(){return null}}),d=function(n,e){var t;if(n){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];(t=console)[e].apply(t,o)}};function p(n){var e=n.children,t=n.relayUrls,a=n.debug,u=(0,o.useState)(!0),h=u[0],p=u[1],g=(0,o.useState)([]),y=g[0],w=g[1],b=(0,o.useState)([]),m=b[0],v=b[1],E=(0,o.useRef)([]),x=null,k=null,A=(0,o.useCallback)((function(n){n.forEach(function(){var n=c(s().mark((function n(e){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null==(t=m.find((function(n){return n.url===e})))?void 0:t.close();case 2:v((function(n){return n.filter((function(n){return n.url!==e}))}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}),[m]),B=(0,o.useCallback)((function(n){n.forEach(function(){var n=c(s().mark((function n(e){var t;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=(0,i.L6)(e),!(y.findIndex((function(n){return n.url===e}))>=0)){n.next=3;break}return n.abrupt("return");case 3:v((function(n){return l([].concat(n,[t]),"url")})),t.connect(),t.on("connect",(function(){d(a,"info","‚úÖ nostr ("+e+"): Connected!"),p(!1),null==x||x(t),w((function(n){return l([].concat(n,[t]),"url")}))})),t.on("disconnect",(function(){d(a,"warn","üö™ nostr ("+e+"): Connection closed."),null==k||k(t),w((function(n){return n.filter((function(n){return n.url!==e}))}))})),t.on("error",(function(){d(a,"error","‚ùå nostr ("+e+"): Connection error!")}));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}),[y,a,x,k]);(0,o.useEffect)((function(){if(E.current!==t){var n=E.current.filter((function(n){return!t.includes(n)}));A(n),B(t),E.current=t}}),[t,B,A]);var I={debug:a,isLoading:h,connectedRelays:y,publish:function(n){return y.map((function(e){return d(a,"info","‚¨ÜÔ∏è nostr ("+e.url+"): Sending event:",n),e.publish(n)}))},onConnect:function(n){n&&(x=n)},onDisconnect:function(n){n&&(k=n)}};return(0,r.jsx)(f.Provider,{value:I,children:e})}function g(){return(0,o.useContext)(f)}function y(n){var e=n.filter,t=n.enabled,r=void 0===t||t,i=g(),s=i.isLoading,a=i.onConnect,c=i.debug,u=i.connectedRelays,h=(0,o.useState)(!0),f=h[0],p=h[1],y=(0,o.useState)([]),w=y[0],b=y[1],m=(0,o.useState)((function(){})),v=m[0],E=m[1],x=null,k=null,A=null,B="undefined"!=typeof window?window.btoa(JSON.stringify(e)):null,I=function(n,t){return d(c,"info","üôâ nostr ("+t.url+"): Unsubscribing from filter:",e),n.unsub()},L=(0,o.useCallback)((function(n,e){d(c,"info","üëÇ nostr ("+n.url+"): Subscribing to filter:",e);var t=n.sub([e]);p(!0);var r=function(){I(t,n)};return E((function(){return r})),t.on("event",(function(e){d(c,"info","‚¨áÔ∏è nostr ("+n.url+"): Received event:",e),null==x||x(e),b((function(n){return[e].concat(n)}))})),t.on("eose",(function(){p(!1),null==A||A()})),t}),[]);return(0,o.useEffect)((function(){if(r){var n=u.map((function(n){var t=L(n,e);return null==k||k(t,n),{sub:t,relay:n}}));return function(){n.forEach((function(n){var e=n.sub,t=n.relay;I(e,t)}))}}}),[u,B,r]),{isLoading:f||s,events:(w.length>0?l(w,"id"):[]).sort((function(n,e){return e.created_at-n.created_at})),onConnect:a,connectedRelays:u,unsubscribe:v,onSubscribe:function(n){n&&(k=n)},onEvent:function(n){n&&(x=n)},onDone:function(n){n&&(A=n)}}}},51526:function(n,e,t){t.d(e,{M:function(){return y}});var r=t(67294),o=t(58868);function i(){const n=(0,r.useRef)(!1);return(0,o.L)((()=>(n.current=!0,()=>{n.current=!1})),[]),n}var s=t(2074),a=t(240),c=t(96681);class u extends r.Component{getSnapshotBeforeUpdate(n){const e=this.props.childRef.current;if(e&&n.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function l({children:n,isPresent:e}){const t=(0,r.useId)(),o=(0,r.useRef)(null),i=(0,r.useRef)({width:0,height:0,top:0,left:0});return(0,r.useInsertionEffect)((()=>{const{width:n,height:r,top:s,left:a}=i.current;if(e||!o.current||!n||!r)return;o.current.dataset.motionPopId=t;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`\n          [data-motion-pop-id="${t}"] {\n            position: absolute !important;\n            width: ${n}px !important;\n            height: ${r}px !important;\n            top: ${s}px !important;\n            left: ${a}px !important;\n          }\n        `),()=>{document.head.removeChild(c)}}),[e]),r.createElement(u,{isPresent:e,childRef:o,sizeRef:i},r.cloneElement(n,{ref:o}))}const h=({children:n,initial:e,isPresent:t,onExitComplete:o,custom:i,presenceAffectsLayout:s,mode:u})=>{const h=(0,c.h)(f),d=(0,r.useId)(),p=(0,r.useMemo)((()=>({id:d,initial:e,isPresent:t,custom:i,onExitComplete:n=>{h.set(n,!0);for(const n of h.values())if(!n)return;o&&o()},register:n=>(h.set(n,!1),()=>h.delete(n))})),s?void 0:[t]);return(0,r.useMemo)((()=>{h.forEach(((n,e)=>h.set(e,!1)))}),[t]),r.useEffect((()=>{!t&&!h.size&&o&&o()}),[t]),"popLayout"===u&&(n=r.createElement(l,{isPresent:t},n)),r.createElement(a.O.Provider,{value:p},n)};function f(){return new Map}var d=t(25364),p=t(45487);const g=n=>n.key||"",y=({children:n,custom:e,initial:t=!0,onExitComplete:a,exitBeforeEnter:c,presenceAffectsLayout:u=!0,mode:l="sync"})=>{(0,p.k)(!c,"Replace exitBeforeEnter with mode='wait'");const f=(0,r.useContext)(d.p).forceRender||function(){const n=i(),[e,t]=(0,r.useState)(0),o=(0,r.useCallback)((()=>{n.current&&t(e+1)}),[e]);return[(0,r.useCallback)((()=>s.Wi.postRender(o)),[o]),e]}()[0],y=i(),w=function(n){const e=[];return r.Children.forEach(n,(n=>{(0,r.isValidElement)(n)&&e.push(n)})),e}(n);let b=w;const m=(0,r.useRef)(new Map).current,v=(0,r.useRef)(b),E=(0,r.useRef)(new Map).current,x=(0,r.useRef)(!0);var k;if((0,o.L)((()=>{x.current=!1,function(n,e){n.forEach((n=>{const t=g(n);e.set(t,n)}))}(w,E),v.current=b})),k=()=>{x.current=!0,E.clear(),m.clear()},(0,r.useEffect)((()=>()=>k()),[]),x.current)return r.createElement(r.Fragment,null,b.map((n=>r.createElement(h,{key:g(n),isPresent:!0,initial:!!t&&void 0,presenceAffectsLayout:u,mode:l},n))));b=[...b];const A=v.current.map(g),B=w.map(g),I=A.length;for(let n=0;n<I;n++){const e=A[n];-1!==B.indexOf(e)||m.has(e)||m.set(e,void 0)}return"wait"===l&&m.size&&(b=[]),m.forEach(((n,t)=>{if(-1!==B.indexOf(t))return;const o=E.get(t);if(!o)return;const i=A.indexOf(t);let s=n;if(!s){const n=()=>{E.delete(t),m.delete(t);const n=v.current.findIndex((n=>n.key===t));if(v.current.splice(n,1),!m.size){if(v.current=w,!1===y.current)return;f(),a&&a()}};s=r.createElement(h,{key:g(o),isPresent:!1,onExitComplete:n,custom:e,presenceAffectsLayout:u,mode:l},o),m.set(t,s)}b.splice(i,0,s)})),b=b.map((n=>{const e=n.key;return m.has(e)?n:r.createElement(h,{key:g(n),isPresent:!0,presenceAffectsLayout:u,mode:l},n)})),r.createElement(r.Fragment,null,m.size?b:b.map((n=>(0,r.cloneElement)(n))))}},35814:function(n,e,t){t.d(e,{wQ:function(){return to},s_:function(){return po},$3:function(){return ro},o$:function(){return wo},_J:function(){return Po},uD:function(){return Io},L6:function(){return Bo}});var r={};function o(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function i(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}t.r(r),t.d(r,{dQ:function(){return F},ci:function(){return _},bytesToNumberBE:function(){return N},ty:function(){return R},eV:function(){return P},n$:function(){return D},ql:function(){return K},hexToBytes:function(){return $},tL:function(){return j},S5:function(){return T},FF:function(){return G}});const s={number:o,bool:function(n){if("boolean"!=typeof n)throw new Error(`Expected boolean, not ${n}`)},bytes:i,hash:function(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");o(n.outputLen),o(n.blockLen)},exists:function(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")},output:function(n,e){i(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}};var a=s;const c="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,u=n=>n instanceof Uint8Array,l=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),h=(n,e)=>n<<32-e|n>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const f=Array.from({length:256},((n,e)=>e.toString(16).padStart(2,"0")));function d(n){if(!u(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=f[n[t]];return e}function p(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let e=0;e<t.length;e++){const r=2*e,o=n.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[e]=i}return t}function g(n){if("string"==typeof n&&(n=function(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}(n)),!u(n))throw new Error("expected Uint8Array, got "+typeof n);return n}function y(...n){const e=new Uint8Array(n.reduce(((n,e)=>n+e.length),0));let t=0;return n.forEach((n=>{if(!u(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length})),e}class w{clone(){return this._cloneInto()}}function b(n){const e=e=>n().update(g(e)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}function m(n=32){if(c&&"function"==typeof c.getRandomValues)return c.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}class v extends w{constructor(n,e,t,r){super(),this.blockLen=n,this.outputLen=e,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=l(this.buffer)}update(n){a.exists(this);const{view:e,buffer:t,blockLen:r}=this,o=(n=g(n)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)t.set(n.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=l(n);for(;r<=o-i;i+=r)this.process(e,i)}}return this.length+=n.length,this.roundClean(),this}digestInto(n){a.exists(this),a.output(n,this),this.finished=!0;const{buffer:e,view:t,blockLen:r,isLE:o}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(t,0),i=0);for(let n=i;n<r;n++)e[n]=0;!function(n,e,t,r){if("function"==typeof n.setBigUint64)return n.setBigUint64(e,t,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(t>>o&i),a=Number(t&i),c=r?4:0,u=r?0:4;n.setUint32(e+c,s,r),n.setUint32(e+u,a,r)}(t,r-8,BigInt(8*this.length),o),this.process(t,0);const s=l(n),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let n=0;n<u;n++)s.setUint32(4*n,h[n],o)}digest(){const{buffer:n,outputLen:e}=this;this.digestInto(n);const t=n.slice(0,e);return this.destroy(),t}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:e,buffer:t,length:r,finished:o,destroyed:i,pos:s}=this;return n.length=r,n.pos=s,n.finished=o,n.destroyed=i,r%e&&n.buffer.set(t),n}}const E=(n,e,t)=>n&e^n&t^e&t,x=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),k=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),A=new Uint32Array(64);class B extends v{constructor(){super(64,32,8,!1),this.A=0|k[0],this.B=0|k[1],this.C=0|k[2],this.D=0|k[3],this.E=0|k[4],this.F=0|k[5],this.G=0|k[6],this.H=0|k[7]}get(){const{A:n,B:e,C:t,D:r,E:o,F:i,G:s,H:a}=this;return[n,e,t,r,o,i,s,a]}set(n,e,t,r,o,i,s,a){this.A=0|n,this.B=0|e,this.C=0|t,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(n,e){for(let t=0;t<16;t++,e+=4)A[t]=n.getUint32(e,!1);for(let n=16;n<64;n++){const e=A[n-15],t=A[n-2],r=h(e,7)^h(e,18)^e>>>3,o=h(t,17)^h(t,19)^t>>>10;A[n]=o+A[n-7]+r+A[n-16]|0}let{A:t,B:r,C:o,D:i,E:s,F:a,G:c,H:u}=this;for(let n=0;n<64;n++){const e=u+(h(s,6)^h(s,11)^h(s,25))+((l=s)&a^~l&c)+x[n]+A[n]|0,f=(h(t,2)^h(t,13)^h(t,22))+E(t,r,o)|0;u=c,c=a,a=s,s=i+e|0,i=o,o=r,r=t,t=e+f|0}var l;t=t+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(t,r,o,i,s,a,c,u)}roundClean(){A.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class I extends B{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const L=b((()=>new B)),U=(b((()=>new I)),BigInt(0),BigInt(1)),S=BigInt(2),C=n=>n instanceof Uint8Array,H=Array.from({length:256},((n,e)=>e.toString(16).padStart(2,"0")));function _(n){if(!C(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=H[n[t]];return e}function O(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);return BigInt(""===n?"0":`0x${n}`)}function $(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let e=0;e<t.length;e++){const r=2*e,o=n.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[e]=i}return t}function N(n){return O(_(n))}function R(n){if(!C(n))throw new Error("Uint8Array expected");return O(_(Uint8Array.from(n).reverse()))}function j(n,e){return $(n.toString(16).padStart(2*e,"0"))}function T(n,e){return j(n,e).reverse()}function K(n,e,t){let r;if("string"==typeof e)try{r=$(e)}catch(t){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${t}`)}else{if(!C(e))throw new Error(`${n} must be hex string or Uint8Array`);r=Uint8Array.from(e)}const o=r.length;if("number"==typeof t&&o!==t)throw new Error(`${n} expected ${t} bytes, got ${o}`);return r}function P(...n){const e=new Uint8Array(n.reduce(((n,e)=>n+e.length),0));let t=0;return n.forEach((n=>{if(!C(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length})),e}const F=n=>(S<<BigInt(n-1))-U,z=n=>new Uint8Array(n),q=n=>Uint8Array.from(n);function D(n,e,t){if("number"!=typeof n||n<2)throw new Error("hashLen must be a number");if("number"!=typeof e||e<2)throw new Error("qByteLen must be a number");if("function"!=typeof t)throw new Error("hmacFn must be a function");let r=z(n),o=z(n),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},a=(...n)=>t(o,r,...n),c=(n=z())=>{o=a(q([0]),n),r=a(),0!==n.length&&(o=a(q([1]),n),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let n=0;const t=[];for(;n<e;){r=a();const e=r.slice();t.push(e),n+=r.length}return P(...t)};return(n,e)=>{let t;for(s(),c(n);!(t=e(u()));)c();return s(),t}}const V={bigint:n=>"bigint"==typeof n,function:n=>"function"==typeof n,boolean:n=>"boolean"==typeof n,string:n=>"string"==typeof n,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>"function"==typeof n&&Number.isSafeInteger(n.outputLen)};function G(n,e,t={}){const r=(e,t,r)=>{const o=V[t];if("function"!=typeof o)throw new Error(`Invalid validator "${t}", expected function`);const i=n[e];if(!(r&&void 0===i||o(i,n)))throw new Error(`Invalid param ${String(e)}=${i} (${typeof i}), expected ${t}`)};for(const[n,t]of Object.entries(e))r(n,t,!1);for(const[n,e]of Object.entries(t))r(n,e,!0);return n}const M=BigInt(0),W=BigInt(1),Z=BigInt(2),J=BigInt(3),Y=BigInt(4),Q=BigInt(5),X=BigInt(8);function nn(n,e){const t=n%e;return t>=M?t:e+t}function en(n,e,t){if(t<=M||e<M)throw new Error("Expected power/modulo > 0");if(t===W)return M;let r=W;for(;e>M;)e&W&&(r=r*n%t),n=n*n%t,e>>=W;return r}function tn(n,e,t){let r=n;for(;e-- >M;)r*=r,r%=t;return r}function rn(n,e){if(n===M||e<=M)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let t=nn(n,e),r=e,o=M,i=W,s=W,a=M;for(;t!==M;){const n=r/t,e=r%t,c=o-s*n,u=i-a*n;r=t,t=e,o=s,i=a,s=c,a=u}if(r!==W)throw new Error("invert: does not exist");return nn(o,e)}BigInt(9),BigInt(16);const on=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function sn(n,e){const t=void 0!==e?e:n.toString(2).length;return{nBitLength:t,nByteLength:Math.ceil(t/8)}}const an=BigInt(0),cn=BigInt(1);function un(n){return G(n.Fp,on.reduce(((n,e)=>(n[e]="function",n)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),G(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...sn(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}const{bytesToNumberBE:ln,hexToBytes:hn}=r,fn={Err:class extends Error{constructor(n=""){super(n)}},_parseInt(n){const{Err:e}=fn;if(n.length<2||2!==n[0])throw new e("Invalid signature integer tag");const t=n[1],r=n.subarray(2,t+2);if(!t||r.length!==t)throw new e("Invalid signature integer: wrong length");if(128&r[0])throw new e("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new e("Invalid signature integer: unnecessary leading zero");return{d:ln(r),l:n.subarray(t+2)}},toSig(n){const{Err:e}=fn,t="string"==typeof n?hn(n):n;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let r=t.length;if(r<2||48!=t[0])throw new e("Invalid signature tag");if(t[1]!==r-2)throw new e("Invalid signature: incorrect length");const{d:o,l:i}=fn._parseInt(t.subarray(2)),{d:s,l:a}=fn._parseInt(i);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(n){const e=n=>8&Number.parseInt(n[0],16)?"00"+n:n,t=n=>{const e=n.toString(16);return 1&e.length?`0${e}`:e},r=e(t(n.s)),o=e(t(n.r)),i=r.length/2,s=o.length/2,a=t(i),c=t(s);return`30${t(s+i+4)}02${c}${o}02${a}${r}`}},dn=BigInt(0),pn=BigInt(1),gn=(BigInt(2),BigInt(3));function yn(n){const e=function(n){const e=un(n);return G(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}(n),{Fp:t,n:r}=e,o=t.BYTES+1,i=2*t.BYTES+1;function s(n){return nn(n,r)}function a(n){return rn(n,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:u,weierstrassEquation:l,isWithinCurveOrder:h}=function(n){const e=function(n){const e=un(n);G(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:t,Fp:r,a:o}=e;if(t){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof t||"bigint"!=typeof t.beta||"function"!=typeof t.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}(n),{Fp:t}=e,r=e.toBytes||((n,e,r)=>{const o=e.toAffine();return P(Uint8Array.from([4]),t.toBytes(o.x),t.toBytes(o.y))}),o=e.fromBytes||(n=>{const e=n.subarray(1);return{x:t.fromBytes(e.subarray(0,t.BYTES)),y:t.fromBytes(e.subarray(t.BYTES,2*t.BYTES))}});function i(n){const{a:r,b:o}=e,i=t.sqr(n),s=t.mul(i,n);return t.add(t.add(s,t.mul(n,r)),o)}if(!t.eql(t.sqr(e.Gy),i(e.Gx)))throw new Error("bad generator point: equation left != right");function s(n){return"bigint"==typeof n&&dn<n&&n<e.n}function a(n){if(!s(n))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(n){const{allowedPrivateKeyLengths:t,nByteLength:r,wrapPrivateKey:o,n:i}=e;if(t&&"bigint"!=typeof n){if(n instanceof Uint8Array&&(n=_(n)),"string"!=typeof n||!t.includes(n.length))throw new Error("Invalid key");n=n.padStart(2*r,"0")}let s;try{s="bigint"==typeof n?n:N(K("private key",n,r))}catch(e){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof n}`)}return o&&(s=nn(s,i)),a(s),s}const u=new Map;function l(n){if(!(n instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(n,e,r){if(this.px=n,this.py=e,this.pz=r,null==n||!t.isValid(n))throw new Error("x required");if(null==e||!t.isValid(e))throw new Error("y required");if(null==r||!t.isValid(r))throw new Error("z required")}static fromAffine(n){const{x:e,y:r}=n||{};if(!n||!t.isValid(e)||!t.isValid(r))throw new Error("invalid affine point");if(n instanceof h)throw new Error("projective point not allowed");const o=n=>t.eql(n,t.ZERO);return o(e)&&o(r)?h.ZERO:new h(e,r,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(n){const e=t.invertBatch(n.map((n=>n.pz)));return n.map(((n,t)=>n.toAffine(e[t]))).map(h.fromAffine)}static fromHex(n){const e=h.fromAffine(o(K("pointHex",n)));return e.assertValidity(),e}static fromPrivateKey(n){return h.BASE.multiply(c(n))}_setWindowSize(n){this._WINDOW_SIZE=n,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint)return;throw new Error("bad point: ZERO")}const{x:n,y:r}=this.toAffine();if(!t.isValid(n)||!t.isValid(r))throw new Error("bad point: x or y not FE");const o=t.sqr(r),s=i(n);if(!t.eql(o,s))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:n}=this.toAffine();if(t.isOdd)return!t.isOdd(n);throw new Error("Field doesn't support isOdd")}equals(n){l(n);const{px:e,py:r,pz:o}=this,{px:i,py:s,pz:a}=n,c=t.eql(t.mul(e,a),t.mul(i,o)),u=t.eql(t.mul(r,a),t.mul(s,o));return c&&u}negate(){return new h(this.px,t.neg(this.py),this.pz)}double(){const{a:n,b:r}=e,o=t.mul(r,gn),{px:i,py:s,pz:a}=this;let c=t.ZERO,u=t.ZERO,l=t.ZERO,f=t.mul(i,i),d=t.mul(s,s),p=t.mul(a,a),g=t.mul(i,s);return g=t.add(g,g),l=t.mul(i,a),l=t.add(l,l),c=t.mul(n,l),u=t.mul(o,p),u=t.add(c,u),c=t.sub(d,u),u=t.add(d,u),u=t.mul(c,u),c=t.mul(g,c),l=t.mul(o,l),p=t.mul(n,p),g=t.sub(f,p),g=t.mul(n,g),g=t.add(g,l),l=t.add(f,f),f=t.add(l,f),f=t.add(f,p),f=t.mul(f,g),u=t.add(u,f),p=t.mul(s,a),p=t.add(p,p),f=t.mul(p,g),c=t.sub(c,f),l=t.mul(p,d),l=t.add(l,l),l=t.add(l,l),new h(c,u,l)}add(n){l(n);const{px:r,py:o,pz:i}=this,{px:s,py:a,pz:c}=n;let u=t.ZERO,f=t.ZERO,d=t.ZERO;const p=e.a,g=t.mul(e.b,gn);let y=t.mul(r,s),w=t.mul(o,a),b=t.mul(i,c),m=t.add(r,o),v=t.add(s,a);m=t.mul(m,v),v=t.add(y,w),m=t.sub(m,v),v=t.add(r,i);let E=t.add(s,c);return v=t.mul(v,E),E=t.add(y,b),v=t.sub(v,E),E=t.add(o,i),u=t.add(a,c),E=t.mul(E,u),u=t.add(w,b),E=t.sub(E,u),d=t.mul(p,v),u=t.mul(g,b),d=t.add(u,d),u=t.sub(w,d),d=t.add(w,d),f=t.mul(u,d),w=t.add(y,y),w=t.add(w,y),b=t.mul(p,b),v=t.mul(g,v),w=t.add(w,b),b=t.sub(y,b),b=t.mul(p,b),v=t.add(v,b),y=t.mul(w,v),f=t.add(f,y),y=t.mul(E,v),u=t.mul(m,u),u=t.sub(u,y),y=t.mul(m,w),d=t.mul(E,d),d=t.add(d,y),new h(u,f,d)}subtract(n){return this.add(n.negate())}is0(){return this.equals(h.ZERO)}wNAF(n){return d.wNAFCached(this,u,n,(n=>{const e=t.invertBatch(n.map((n=>n.pz)));return n.map(((n,t)=>n.toAffine(e[t]))).map(h.fromAffine)}))}multiplyUnsafe(n){const r=h.ZERO;if(n===dn)return r;if(a(n),n===pn)return this;const{endo:o}=e;if(!o)return d.unsafeLadder(this,n);let{k1neg:i,k1:s,k2neg:c,k2:u}=o.splitScalar(n),l=r,f=r,p=this;for(;s>dn||u>dn;)s&pn&&(l=l.add(p)),u&pn&&(f=f.add(p)),p=p.double(),s>>=pn,u>>=pn;return i&&(l=l.negate()),c&&(f=f.negate()),f=new h(t.mul(f.px,o.beta),f.py,f.pz),l.add(f)}multiply(n){a(n);let r,o,i=n;const{endo:s}=e;if(s){const{k1neg:n,k1:e,k2neg:a,k2:c}=s.splitScalar(i);let{p:u,f:l}=this.wNAF(e),{p:f,f:p}=this.wNAF(c);u=d.constTimeNegate(n,u),f=d.constTimeNegate(a,f),f=new h(t.mul(f.px,s.beta),f.py,f.pz),r=u.add(f),o=l.add(p)}else{const{p:n,f:e}=this.wNAF(i);r=n,o=e}return h.normalizeZ([r,o])[0]}multiplyAndAddUnsafe(n,e,t){const r=h.BASE,o=(n,e)=>e!==dn&&e!==pn&&n.equals(r)?n.multiply(e):n.multiplyUnsafe(e),i=o(this,e).add(o(n,t));return i.is0()?void 0:i}toAffine(n){const{px:e,py:r,pz:o}=this,i=this.is0();null==n&&(n=i?t.ONE:t.inv(o));const s=t.mul(e,n),a=t.mul(r,n),c=t.mul(o,n);if(i)return{x:t.ZERO,y:t.ZERO};if(!t.eql(c,t.ONE))throw new Error("invZ was invalid");return{x:s,y:a}}isTorsionFree(){const{h:n,isTorsionFree:t}=e;if(n===pn)return!0;if(t)return t(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:n,clearCofactor:t}=e;return n===pn?this:t?t(h,this):this.multiplyUnsafe(e.h)}toRawBytes(n=!0){return this.assertValidity(),r(h,this,n)}toHex(n=!0){return _(this.toRawBytes(n))}}h.BASE=new h(e.Gx,e.Gy,t.ONE),h.ZERO=new h(t.ZERO,t.ONE,t.ZERO);const f=e.nBitLength,d=function(n,e){const t=(n,e)=>{const t=e.negate();return n?t:e},r=n=>({windows:Math.ceil(e/n)+1,windowSize:2**(n-1)});return{constTimeNegate:t,unsafeLadder(e,t){let r=n.ZERO,o=e;for(;t>an;)t&cn&&(r=r.add(o)),o=o.double(),t>>=cn;return r},precomputeWindow(n,e){const{windows:t,windowSize:o}=r(e),i=[];let s=n,a=s;for(let n=0;n<t;n++){a=s,i.push(a);for(let n=1;n<o;n++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(e,o,i){const{windows:s,windowSize:a}=r(e);let c=n.ZERO,u=n.BASE;const l=BigInt(2**e-1),h=2**e,f=BigInt(e);for(let n=0;n<s;n++){const e=n*a;let r=Number(i&l);i>>=f,r>a&&(r-=h,i+=cn);const s=e,d=e+Math.abs(r)-1,p=n%2!=0,g=r<0;0===r?u=u.add(t(p,o[s])):c=c.add(t(g,o[d]))}return{p:c,f:u}},wNAFCached(n,e,t,r){const o=n._WINDOW_SIZE||1;let i=e.get(n);return i||(i=this.precomputeWindow(n,o),1!==o&&e.set(n,r(i))),this.wNAF(o,i,t)}}}(h,e.endo?Math.ceil(f/2):f);return{CURVE:e,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:s}}({...e,toBytes(n,e,r){const o=e.toAffine(),i=t.toBytes(o.x),s=P;return r?s(Uint8Array.from([e.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,t.toBytes(o.y))},fromBytes(n){const e=n.length,r=n[0],s=n.subarray(1);if(e!==o||2!==r&&3!==r){if(e===i&&4===r)return{x:t.fromBytes(s.subarray(0,t.BYTES)),y:t.fromBytes(s.subarray(t.BYTES,2*t.BYTES))};throw new Error(`Point of length ${e} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}{const n=N(s);if(!(dn<(a=n)&&a<t.ORDER))throw new Error("Point is not on curve");const e=l(n);let o=t.sqrt(e);return 1==(1&r)!=((o&pn)===pn)&&(o=t.neg(o)),{x:n,y:o}}var a}}),f=n=>_(j(n,e.nByteLength));function d(n){return n>r>>pn}const p=(n,e,t)=>N(n.slice(e,t));class g{constructor(n,e,t){this.r=n,this.s=e,this.recovery=t,this.assertValidity()}static fromCompact(n){const t=e.nByteLength;return n=K("compactSignature",n,2*t),new g(p(n,0,t),p(n,t,2*t))}static fromDER(n){const{r:e,s:t}=fn.toSig(K("DER",n));return new g(e,t)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(n){return new g(this.r,this.s,n)}recoverPublicKey(n){const{r,s:o,recovery:i}=this,u=m(K("msgHash",n));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const l=2===i||3===i?r+e.n:r;if(l>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0==(1&i)?"02":"03",d=c.fromHex(h+f(l)),p=a(l),g=s(-u*p),y=s(o*p),w=c.BASE.multiplyAndAddUnsafe(d,g,y);if(!w)throw new Error("point at infinify");return w.assertValidity(),w}hasHighS(){return d(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return $(this.toDERHex())}toDERHex(){return fn.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return $(this.toCompactHex())}toCompactHex(){return f(this.r)+f(this.s)}}const y={isValidPrivateKey(n){try{return u(n),!0}catch(n){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{const n=function(n,e,t=!1){const r=(n=K("privateHash",n)).length,o=sn(e).nByteLength+8;if(o<24||r<o||r>1024)throw new Error(`hashToPrivateScalar: expected ${o}-1024 bytes of input, got ${r}`);return nn(t?R(n):N(n),e-W)+W}(e.randomBytes(t.BYTES+8),r);return j(n,e.nByteLength)},precompute:(n=8,e=c.BASE)=>(e._setWindowSize(n),e.multiply(BigInt(3)),e)};function w(n){const e=n instanceof Uint8Array,t="string"==typeof n,r=(e||t)&&n.length;return e?r===o||r===i:t?r===2*o||r===2*i:n instanceof c}const b=e.bits2int||function(n){const t=N(n),r=8*n.length-e.nBitLength;return r>0?t>>BigInt(r):t},m=e.bits2int_modN||function(n){return s(b(n))},v=F(e.nBitLength);function E(n){if("bigint"!=typeof n)throw new Error("bigint expected");if(!(dn<=n&&n<v))throw new Error(`bigint expected < 2^${e.nBitLength}`);return j(n,e.nByteLength)}function x(n,r,o=k){if(["recovered","canonical"].some((n=>n in o)))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:l}=e;let{lowS:f,prehash:p,extraEntropy:y}=o;null==f&&(f=!0),n=K("msgHash",n),p&&(n=K("prehashed msgHash",i(n)));const w=m(n),v=u(r),x=[E(v),E(w)];if(null!=y){const n=!0===y?l(t.BYTES):y;x.push(K("extraEntropy",n,t.BYTES))}const A=P(...x),B=w;return{seed:A,k2sig:function(n){const e=b(n);if(!h(e))return;const t=a(e),r=c.BASE.multiply(e).toAffine(),o=s(r.x);if(o===dn)return;const i=s(t*s(B+o*v));if(i===dn)return;let u=(r.x===o?0:2)|Number(r.y&pn),l=i;return f&&d(i)&&(l=function(n){return d(n)?s(-n):n}(i),u^=1),new g(o,l,u)}}}const k={lowS:e.lowS,prehash:!1},A={lowS:e.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:e,getPublicKey:function(n,e=!0){return c.fromPrivateKey(n).toRawBytes(e)},getSharedSecret:function(n,e,t=!0){if(w(n))throw new Error("first arg must be private key");if(!w(e))throw new Error("second arg must be public key");return c.fromHex(e).multiply(u(n)).toRawBytes(t)},sign:function(n,t,r=k){const{seed:o,k2sig:i}=x(n,t,r),s=e;return D(s.hash.outputLen,s.nByteLength,s.hmac)(o,i)},verify:function(n,t,r,o=A){const i=n;if(t=K("msgHash",t),r=K("publicKey",r),"strict"in o)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:l}=o;let h,f;try{if("string"==typeof i||i instanceof Uint8Array)try{h=g.fromDER(i)}catch(n){if(!(n instanceof fn.Err))throw n;h=g.fromCompact(i)}else{if("object"!=typeof i||"bigint"!=typeof i.r||"bigint"!=typeof i.s)throw new Error("PARSE");{const{r:n,s:e}=i;h=new g(n,e)}}f=c.fromHex(r)}catch(n){if("PARSE"===n.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&h.hasHighS())return!1;l&&(t=e.hash(t));const{r:d,s:p}=h,y=m(t),w=a(p),b=s(y*w),v=s(d*w),E=c.BASE.multiplyAndAddUnsafe(f,b,v)?.toAffine();return!!E&&s(E.x)===d},ProjectivePoint:c,Signature:g,utils:y}}BigInt(4);class wn extends w{constructor(n,e){super(),this.finished=!1,this.destroyed=!1,a.hash(n);const t=g(e);if(this.iHash=n.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(t.length>r?n.create().update(t).digest():t);for(let n=0;n<o.length;n++)o[n]^=54;this.iHash.update(o),this.oHash=n.create();for(let n=0;n<o.length;n++)o[n]^=106;this.oHash.update(o),o.fill(0)}update(n){return a.exists(this),this.iHash.update(n),this}digestInto(n){a.exists(this),a.bytes(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:t,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return n.finished=r,n.destroyed=o,n.blockLen=i,n.outputLen=s,n.oHash=e._cloneInto(n.oHash),n.iHash=t._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const bn=(n,e,t)=>new wn(n,e).update(t).digest();function mn(n){return{hash:n,hmac:(e,...t)=>bn(n,e,y(...t)),randomBytes:m}}bn.create=(n,e)=>new wn(n,e);const vn=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),En=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),xn=BigInt(1),kn=BigInt(2),An=(n,e)=>(n+e/kn)/e;function Bn(n){const e=vn,t=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=n*n*n%e,l=u*u*n%e,h=tn(l,t,e)*l%e,f=tn(h,t,e)*l%e,d=tn(f,kn,e)*u%e,p=tn(d,o,e)*d%e,g=tn(p,i,e)*p%e,y=tn(g,a,e)*g%e,w=tn(y,c,e)*y%e,b=tn(w,a,e)*g%e,m=tn(b,t,e)*l%e,v=tn(m,s,e)*p%e,E=tn(v,r,e)*u%e,x=tn(E,kn,e);if(!In.eql(In.sqr(x),n))throw new Error("Cannot find square root");return x}const In=function(n,e,t=!1,r={}){if(n<=M)throw new Error(`Expected Fp ORDER > 0, got ${n}`);const{nBitLength:o,nByteLength:i}=sn(n,e);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=function(n){if(n%Y===J){const e=(n+W)/Y;return function(n,t){const r=n.pow(t,e);if(!n.eql(n.sqr(r),t))throw new Error("Cannot find square root");return r}}if(n%X===Q){const e=(n-Q)/X;return function(n,t){const r=n.mul(t,Z),o=n.pow(r,e),i=n.mul(t,o),s=n.mul(n.mul(i,Z),o),a=n.mul(i,n.sub(s,n.ONE));if(!n.eql(n.sqr(a),t))throw new Error("Cannot find square root");return a}}return function(n){const e=(n-W)/Z;let t,r,o;for(t=n-W,r=0;t%Z===M;t/=Z,r++);for(o=Z;o<n&&en(o,e,n)!==n-W;o++);if(1===r){const e=(n+W)/Y;return function(n,t){const r=n.pow(t,e);if(!n.eql(n.sqr(r),t))throw new Error("Cannot find square root");return r}}const i=(t+W)/Z;return function(n,s){if(n.pow(s,e)===n.neg(n.ONE))throw new Error("Cannot find square root");let a=r,c=n.pow(n.mul(n.ONE,o),t),u=n.pow(s,i),l=n.pow(s,t);for(;!n.eql(l,n.ONE);){if(n.eql(l,n.ZERO))return n.ZERO;let e=1;for(let t=n.sqr(l);e<a&&!n.eql(t,n.ONE);e++)t=n.sqr(t);const t=n.pow(c,W<<BigInt(a-e-1));c=n.sqr(t),u=n.mul(u,t),l=n.mul(l,c),a=e}return u}}(n)}(n),a=Object.freeze({ORDER:n,BITS:o,BYTES:i,MASK:F(o),ZERO:M,ONE:W,create:e=>nn(e,n),isValid:e=>{if("bigint"!=typeof e)throw new Error("Invalid field element: expected bigint, got "+typeof e);return M<=e&&e<n},is0:n=>n===M,isOdd:n=>(n&W)===W,neg:e=>nn(-e,n),eql:(n,e)=>n===e,sqr:e=>nn(e*e,n),add:(e,t)=>nn(e+t,n),sub:(e,t)=>nn(e-t,n),mul:(e,t)=>nn(e*t,n),pow:(n,e)=>function(n,e,t){if(t<M)throw new Error("Expected power > 0");if(t===M)return n.ONE;if(t===W)return e;let r=n.ONE,o=e;for(;t>M;)t&W&&(r=n.mul(r,o)),o=n.sqr(o),t>>=W;return r}(a,n,e),div:(e,t)=>nn(e*rn(t,n),n),sqrN:n=>n*n,addN:(n,e)=>n+e,subN:(n,e)=>n-e,mulN:(n,e)=>n*e,inv:e=>rn(e,n),sqrt:r.sqrt||(n=>s(a,n)),invertBatch:n=>function(n,e){const t=new Array(e.length),r=e.reduce(((e,r,o)=>n.is0(r)?e:(t[o]=e,n.mul(e,r))),n.ONE),o=n.inv(r);return e.reduceRight(((e,r,o)=>n.is0(r)?e:(t[o]=n.mul(e,t[o]),n.mul(e,r))),o),t}(a,n),cmov:(n,e,t)=>t?e:n,toBytes:n=>t?T(n,i):j(n,i),fromBytes:n=>{if(n.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${n.length}`);return t?R(n):N(n)}});return Object.freeze(a)}(vn,void 0,void 0,{sqrt:Bn}),Ln=function(n,e){const t=e=>yn({...n,...mn(e)});return Object.freeze({...t(e),create:t})}({a:BigInt(0),b:BigInt(7),Fp:In,n:En,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=En,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-xn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=t,s=BigInt("0x100000000000000000000000000000000"),a=An(i*n,e),c=An(-r*n,e);let u=nn(n-a*t-c*o,e),l=nn(-a*r-c*i,e);const h=u>s,f=l>s;if(h&&(u=e-u),f&&(l=e-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:h,k1:u,k2neg:f,k2:l}}}},L),Un=BigInt(0),Sn=n=>"bigint"==typeof n&&Un<n&&n<vn,Cn={};function Hn(n,...e){let t=Cn[n];if(void 0===t){const e=L(Uint8Array.from(n,(n=>n.charCodeAt(0))));t=P(e,e),Cn[n]=t}return L(P(t,...e))}const _n=n=>n.toRawBytes(!0).slice(1),On=n=>j(n,32),$n=n=>nn(n,vn),Nn=n=>nn(n,En),Rn=Ln.ProjectivePoint;function jn(n){let e=Ln.utils.normPrivateKeyToScalar(n),t=Rn.fromPrivateKey(e);return{scalar:t.hasEvenY()?e:Nn(-e),bytes:_n(t)}}function Tn(n){if(!Sn(n))throw new Error("bad x: need 0 < x < p");const e=$n(n*n);let t=Bn($n(e*n+BigInt(7)));t%kn!==Un&&(t=$n(-t));const r=new Rn(n,t,xn);return r.assertValidity(),r}function Kn(...n){return Nn(N(Hn("BIP0340/challenge",...n)))}function Pn(n){return jn(n).bytes}function Fn(n,e,t=m(32)){const r=K("message",n),{bytes:o,scalar:i}=jn(e),s=K("auxRand",t,32),a=On(i^N(Hn("BIP0340/aux",s))),c=Hn("BIP0340/nonce",a,o,r),u=Nn(N(c));if(u===Un)throw new Error("sign failed: k is zero");const{bytes:l,scalar:h}=jn(u),f=Kn(l,o,r),d=new Uint8Array(64);if(d.set(l,0),d.set(On(Nn(h+f*i)),32),!zn(d,r,o))throw new Error("sign: Invalid signature produced");return d}function zn(n,e,t){const r=K("signature",n,64),o=K("message",e),i=K("publicKey",t,32);try{const n=Tn(N(i)),e=N(r.subarray(0,32));if(!Sn(e))return!1;const t=N(r.subarray(32,64));if(!("bigint"==typeof(u=t)&&Un<u&&u<En))return!1;const l=Kn(On(e),_n(n),o),h=(s=n,a=t,c=Nn(-l),Rn.BASE.multiplyAndAddUnsafe(s,a,c));return!(!h||!h.hasEvenY()||h.toAffine().x!==e)}catch(n){return!1}var s,a,c,u}const qn={getPublicKey:Pn,sign:Fn,verify:zn,utils:{randomPrivateKey:Ln.utils.randomPrivateKey,lift_x:Tn,pointToBytes:_n,numberToBytesBE:j,bytesToNumberBE:N,taggedHash:Hn,mod:nn}};function Dn(n){if(!Number.isSafeInteger(n))throw new Error(`Wrong integer: ${n}`)}function Vn(...n){const e=(n,e)=>t=>n(e(t));return{encode:Array.from(n).reverse().reduce(((n,t)=>n?e(n,t.encode):t.encode),void 0),decode:n.reduce(((n,t)=>n?e(n,t.decode):t.decode),void 0)}}function Gn(n){return{encode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("alphabet.encode input should be an array of numbers");return e.map((e=>{if(Dn(e),e<0||e>=n.length)throw new Error(`Digit index outside alphabet: ${e} (alphabet: ${n.length})`);return n[e]}))},decode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("alphabet.decode input should be array of strings");return e.map((e=>{if("string"!=typeof e)throw new Error(`alphabet.decode: not string element=${e}`);const t=n.indexOf(e);if(-1===t)throw new Error(`Unknown letter: "${e}". Allowed: ${n}`);return t}))}}}function Mn(n=""){if("string"!=typeof n)throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("join.encode input should be array of strings");for(let n of e)if("string"!=typeof n)throw new Error(`join.encode: non-string input=${n}`);return e.join(n)},decode:e=>{if("string"!=typeof e)throw new Error("join.decode input should be string");return e.split(n)}}}function Wn(n,e="="){if(Dn(n),"string"!=typeof e)throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let n of t)if("string"!=typeof n)throw new Error(`padding.encode: non-string input=${n}`);for(;t.length*n%8;)t.push(e);return t},decode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let n of t)if("string"!=typeof n)throw new Error(`padding.decode: non-string input=${n}`);let r=t.length;if(r*n%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&t[r-1]===e;r--)if(!((r-1)*n%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,r)}}}function Zn(n){if("function"!=typeof n)throw new Error("normalize fn should be function");return{encode:n=>n,decode:e=>n(e)}}function Jn(n,e,t){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: wrong to=${t}, base cannot be less than 2`);if(!Array.isArray(n))throw new Error("convertRadix: data should be array");if(!n.length)return[];let r=0;const o=[],i=Array.from(n);for(i.forEach((n=>{if(Dn(n),n<0||n>=e)throw new Error(`Wrong integer: ${n}`)}));;){let n=0,s=!0;for(let o=r;o<i.length;o++){const a=i[o],c=e*n+a;if(!Number.isSafeInteger(c)||e*n/e!==n||c-a!=e*n)throw new Error("convertRadix: carry overflow");if(n=c%t,i[o]=Math.floor(c/t),!Number.isSafeInteger(i[o])||i[o]*t+n!==c)throw new Error("convertRadix: carry overflow");s&&(i[o]?s=!1:r=o)}if(o.push(n),s)break}for(let e=0;e<n.length-1&&0===n[e];e++)o.push(0);return o.reverse()}const Yn=(n,e)=>e?Yn(e,n%e):n,Qn=(n,e)=>n+(e-Yn(n,e));function Xn(n,e,t,r){if(!Array.isArray(n))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(Qn(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${Qn(e,t)}`);let o=0,i=0;const s=2**t-1,a=[];for(const r of n){if(Dn(r),r>=2**e)throw new Error(`convertRadix2: invalid data word=${r} from=${e}`);if(o=o<<e|r,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=t;i-=t)a.push((o>>i-t&s)>>>0);o&=2**i-1}if(o=o<<t-i&s,!r&&i>=e)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&a.push(o>>>0),a}function ne(n,e=!1){if(Dn(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(Qn(8,n)>32||Qn(n,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Xn(Array.from(t),8,n,!e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Xn(t,n,8,e))}}}function ee(n){if("function"!=typeof n)throw new Error("unsafeWrapper fn should be function");return function(...e){try{return n.apply(null,e)}catch(n){}}}Vn(ne(4),Gn("0123456789ABCDEF"),Mn("")),Vn(ne(5),Gn("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Wn(5),Mn(""));const te=(Vn(ne(5),Gn("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Wn(5),Mn("")),Vn(ne(5),Gn("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Mn(""),Zn((n=>n.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),Vn(ne(6),Gn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Wn(6),Mn(""))),re=(Vn(ne(6),Gn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Wn(6),Mn("")),n=>Vn(function(n){return Dn(n),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Jn(Array.from(e),256,n)},decode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Jn(e,n,256))}}}(58),Gn(n),Mn(""))),oe=(re("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),re("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),re("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),Vn(Gn("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Mn(""))),ie=[996825010,642813549,513874426,1027748829,705979059];function se(n){const e=n>>25;let t=(33554431&n)<<5;for(let n=0;n<ie.length;n++)1==(e>>n&1)&&(t^=ie[n]);return t}function ae(n,e,t=1){const r=n.length;let o=1;for(let e=0;e<r;e++){const t=n.charCodeAt(e);if(t<33||t>126)throw new Error(`Invalid prefix (${n})`);o=se(o)^t>>5}o=se(o);for(let e=0;e<r;e++)o=se(o)^31&n.charCodeAt(e);for(let n of e)o=se(o)^n;for(let n=0;n<6;n++)o=se(o);return o^=t,oe.encode(Xn([o%2**30],30,5,!1))}function ce(n){const e="bech32"===n?1:734539939,t=ne(5),r=t.decode,o=t.encode,i=ee(r);function s(n,t=90){if("string"!=typeof n)throw new Error("bech32.decode input should be string, not "+typeof n);if(n.length<8||!1!==t&&n.length>t)throw new TypeError(`Wrong string length: ${n.length} (${n}). Expected (8..${t})`);const r=n.toLowerCase();if(n!==r&&n!==n.toUpperCase())throw new Error("String must be lowercase or uppercase");const o=(n=r).lastIndexOf("1");if(0===o||-1===o)throw new Error('Letter "1" must be present between prefix and data only');const i=n.slice(0,o),s=n.slice(o+1);if(s.length<6)throw new Error("Data must be at least 6 characters long");const a=oe.decode(s).slice(0,-6),c=ae(i,a,e);if(!s.endsWith(c))throw new Error(`Invalid checksum in ${n}: expected "${c}"`);return{prefix:i,words:a}}return{encode:function(n,t,r=90){if("string"!=typeof n)throw new Error("bech32.encode prefix should be string, not "+typeof n);if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof t);const o=n.length+7+t.length;if(!1!==r&&o>r)throw new TypeError(`Length ${o} exceeds limit ${r}`);return`${n=n.toLowerCase()}1${oe.encode(t)}${ae(n,t,e)}`},decode:s,decodeToBytes:function(n){const{prefix:e,words:t}=s(n,!1);return{prefix:e,words:t,bytes:r(t)}},decodeUnsafe:ee(s),fromWords:r,fromWordsUnsafe:i,toWords:o}}const ue=ce("bech32"),le=(ce("bech32m"),Vn(ne(4),Gn("0123456789abcdef"),Mn(""),Zn((n=>{if("string"!=typeof n||n.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof n} with length ${n.length}`);return n.toLowerCase()}))),"abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n"));function he(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function fe(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function de(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");he(n.outputLen),he(n.blockLen)}function pe(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function ge(n,e){fe(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}var ye={number:he,bool:function(n){if("boolean"!=typeof n)throw new Error(`Expected boolean, not ${n}`)},bytes:fe,hash:de,exists:pe,output:ge};const we="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,be=n=>n instanceof Uint8Array,me=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),ve=(n,e)=>n<<32-e|n>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Ee(n){if("string"==typeof n&&(n=function(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}(n)),!be(n))throw new Error("expected Uint8Array, got "+typeof n);return n}class xe{clone(){return this._cloneInto()}}const ke={}.toString;function Ae(n){const e=e=>n().update(Ee(e)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}class Be extends xe{constructor(n,e){super(),this.finished=!1,this.destroyed=!1,de(n);const t=Ee(e);if(this.iHash=n.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(t.length>r?n.create().update(t).digest():t);for(let n=0;n<o.length;n++)o[n]^=54;this.iHash.update(o),this.oHash=n.create();for(let n=0;n<o.length;n++)o[n]^=106;this.oHash.update(o),o.fill(0)}update(n){return pe(this),this.iHash.update(n),this}digestInto(n){pe(this),fe(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:t,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return n.finished=r,n.destroyed=o,n.blockLen=i,n.outputLen=s,n.oHash=e._cloneInto(n.oHash),n.iHash=t._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ie=(n,e,t)=>new Be(n,e).update(t).digest();Ie.create=(n,e)=>new Be(n,e);class Le extends xe{constructor(n,e,t,r){super(),this.blockLen=n,this.outputLen=e,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=me(this.buffer)}update(n){pe(this);const{view:e,buffer:t,blockLen:r}=this,o=(n=Ee(n)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)t.set(n.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=me(n);for(;r<=o-i;i+=r)this.process(e,i)}}return this.length+=n.length,this.roundClean(),this}digestInto(n){pe(this),ge(n,this),this.finished=!0;const{buffer:e,view:t,blockLen:r,isLE:o}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(t,0),i=0);for(let n=i;n<r;n++)e[n]=0;!function(n,e,t,r){if("function"==typeof n.setBigUint64)return n.setBigUint64(e,t,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(t>>o&i),a=Number(t&i),c=r?4:0,u=r?0:4;n.setUint32(e+c,s,r),n.setUint32(e+u,a,r)}(t,r-8,BigInt(8*this.length),o),this.process(t,0);const s=me(n),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let n=0;n<c;n++)s.setUint32(4*n,u[n],o)}digest(){const{buffer:n,outputLen:e}=this;this.digestInto(n);const t=n.slice(0,e);return this.destroy(),t}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:e,buffer:t,length:r,finished:o,destroyed:i,pos:s}=this;return n.length=r,n.pos=s,n.finished=o,n.destroyed=i,r%e&&n.buffer.set(t),n}}const Ue=(n,e,t)=>n&e^n&t^e&t,Se=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ce=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),He=new Uint32Array(64);class _e extends Le{constructor(){super(64,32,8,!1),this.A=0|Ce[0],this.B=0|Ce[1],this.C=0|Ce[2],this.D=0|Ce[3],this.E=0|Ce[4],this.F=0|Ce[5],this.G=0|Ce[6],this.H=0|Ce[7]}get(){const{A:n,B:e,C:t,D:r,E:o,F:i,G:s,H:a}=this;return[n,e,t,r,o,i,s,a]}set(n,e,t,r,o,i,s,a){this.A=0|n,this.B=0|e,this.C=0|t,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(n,e){for(let t=0;t<16;t++,e+=4)He[t]=n.getUint32(e,!1);for(let n=16;n<64;n++){const e=He[n-15],t=He[n-2],r=ve(e,7)^ve(e,18)^e>>>3,o=ve(t,17)^ve(t,19)^t>>>10;He[n]=o+He[n-7]+r+He[n-16]|0}let{A:t,B:r,C:o,D:i,E:s,F:a,G:c,H:u}=this;for(let n=0;n<64;n++){const e=u+(ve(s,6)^ve(s,11)^ve(s,25))+((l=s)&a^~l&c)+Se[n]+He[n]|0,h=(ve(t,2)^ve(t,13)^ve(t,22))+Ue(t,r,o)|0;u=c,c=a,a=s,s=i+e|0,i=o,o=r,r=t,t=e+h|0}var l;t=t+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(t,r,o,i,s,a,c,u)}roundClean(){He.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Oe=Ae((()=>new _e)),$e=BigInt(2**32-1),Ne=BigInt(32);function Re(n,e=!1){return e?{h:Number(n&$e),l:Number(n>>Ne&$e)}:{h:0|Number(n>>Ne&$e),l:0|Number(n&$e)}}var je=function(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let o=0;o<n.length;o++){const{h:i,l:s}=Re(n[o],e);[t[o],r[o]]=[i,s]}return[t,r]},Te=(n,e,t)=>n>>>t,Ke=(n,e,t)=>n<<32-t|e>>>t,Pe=(n,e,t)=>n>>>t|e<<32-t,Fe=(n,e,t)=>n<<32-t|e>>>t,ze=(n,e,t)=>n<<64-t|e>>>t-32,qe=(n,e,t)=>n>>>t-32|e<<64-t,De=function(n,e,t,r){const o=(e>>>0)+(r>>>0);return{h:n+t+(o/2**32|0)|0,l:0|o}},Ve=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),Ge=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,Me=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),We=(n,e,t,r,o)=>e+t+r+o+(n/2**32|0)|0,Ze=(n,e,t,r,o,i)=>e+t+r+o+i+(n/2**32|0)|0,Je=(n,e,t,r,o)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(o>>>0);const[Ye,Qe]=je(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((n=>BigInt(n)))),Xe=new Uint32Array(80),nt=new Uint32Array(80);class et extends Le{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:n,Al:e,Bh:t,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[n,e,t,r,o,i,s,a,c,u,l,h,f,d,p,g]}set(n,e,t,r,o,i,s,a,c,u,l,h,f,d,p,g){this.Ah=0|n,this.Al=0|e,this.Bh=0|t,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(n,e){for(let t=0;t<16;t++,e+=4)Xe[t]=n.getUint32(e),nt[t]=n.getUint32(e+=4);for(let n=16;n<80;n++){const e=0|Xe[n-15],t=0|nt[n-15],r=Pe(e,t,1)^Pe(e,t,8)^Te(e,t,7),o=Fe(e,t,1)^Fe(e,t,8)^Ke(e,t,7),i=0|Xe[n-2],s=0|nt[n-2],a=Pe(i,s,19)^ze(i,s,61)^Te(i,s,6),c=Fe(i,s,19)^qe(i,s,61)^Ke(i,s,6),u=Me(o,c,nt[n-7],nt[n-16]),l=We(u,r,a,Xe[n-7],Xe[n-16]);Xe[n]=0|l,nt[n]=0|u}let{Ah:t,Al:r,Bh:o,Bl:i,Ch:s,Cl:a,Dh:c,Dl:u,Eh:l,El:h,Fh:f,Fl:d,Gh:p,Gl:g,Hh:y,Hl:w}=this;for(let n=0;n<80;n++){const e=Pe(l,h,14)^Pe(l,h,18)^ze(l,h,41),b=Fe(l,h,14)^Fe(l,h,18)^qe(l,h,41),m=l&f^~l&p,v=Je(w,b,h&d^~h&g,Qe[n],nt[n]),E=Ze(v,y,e,m,Ye[n],Xe[n]),x=0|v,k=Pe(t,r,28)^ze(t,r,34)^ze(t,r,39),A=Fe(t,r,28)^qe(t,r,34)^qe(t,r,39),B=t&o^t&s^o&s,I=r&i^r&a^i&a;y=0|p,w=0|g,p=0|f,g=0|d,f=0|l,d=0|h,({h:l,l:h}=De(0|c,0|u,0|E,0|x)),c=0|s,u=0|a,s=0|o,a=0|i,o=0|t,i=0|r;const L=Ve(x,A,I);t=Ge(L,E,k,B),r=0|L}({h:t,l:r}=De(0|this.Ah,0|this.Al,0|t,0|r)),({h:o,l:i}=De(0|this.Bh,0|this.Bl,0|o,0|i)),({h:s,l:a}=De(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=De(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:h}=De(0|this.Eh,0|this.El,0|l,0|h)),({h:f,l:d}=De(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=De(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:w}=De(0|this.Hh,0|this.Hl,0|y,0|w)),this.set(t,r,o,i,s,a,c,u,l,h,f,d,p,g,y,w)}roundClean(){Xe.fill(0),nt.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const tt=Ae((()=>new et));function rt(n){if(!Number.isSafeInteger(n))throw new Error(`Wrong integer: ${n}`)}function ot(...n){const e=(n,e)=>t=>n(e(t));return{encode:Array.from(n).reverse().reduce(((n,t)=>n?e(n,t.encode):t.encode),void 0),decode:n.reduce(((n,t)=>n?e(n,t.decode):t.decode),void 0)}}function it(n){return{encode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("alphabet.encode input should be an array of numbers");return e.map((e=>{if(rt(e),e<0||e>=n.length)throw new Error(`Digit index outside alphabet: ${e} (alphabet: ${n.length})`);return n[e]}))},decode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("alphabet.decode input should be array of strings");return e.map((e=>{if("string"!=typeof e)throw new Error(`alphabet.decode: not string element=${e}`);const t=n.indexOf(e);if(-1===t)throw new Error(`Unknown letter: "${e}". Allowed: ${n}`);return t}))}}}function st(n=""){if("string"!=typeof n)throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&"string"!=typeof e[0])throw new Error("join.encode input should be array of strings");for(let n of e)if("string"!=typeof n)throw new Error(`join.encode: non-string input=${n}`);return e.join(n)},decode:e=>{if("string"!=typeof e)throw new Error("join.decode input should be string");return e.split(n)}}}function at(n,e="="){if(rt(n),"string"!=typeof e)throw new Error("padding chr should be string");return{encode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let n of t)if("string"!=typeof n)throw new Error(`padding.encode: non-string input=${n}`);for(;t.length*n%8;)t.push(e);return t},decode(t){if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("padding.encode input should be array of strings");for(let n of t)if("string"!=typeof n)throw new Error(`padding.decode: non-string input=${n}`);let r=t.length;if(r*n%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&t[r-1]===e;r--)if(!((r-1)*n%8))throw new Error("Invalid padding: string has too much padding");return t.slice(0,r)}}}function ct(n){if("function"!=typeof n)throw new Error("normalize fn should be function");return{encode:n=>n,decode:e=>n(e)}}function ut(n,e,t){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(t<2)throw new Error(`convertRadix: wrong to=${t}, base cannot be less than 2`);if(!Array.isArray(n))throw new Error("convertRadix: data should be array");if(!n.length)return[];let r=0;const o=[],i=Array.from(n);for(i.forEach((n=>{if(rt(n),n<0||n>=e)throw new Error(`Wrong integer: ${n}`)}));;){let n=0,s=!0;for(let o=r;o<i.length;o++){const a=i[o],c=e*n+a;if(!Number.isSafeInteger(c)||e*n/e!==n||c-a!=e*n)throw new Error("convertRadix: carry overflow");n=c%t;const u=Math.floor(c/t);if(i[o]=u,!Number.isSafeInteger(u)||u*t+n!==c)throw new Error("convertRadix: carry overflow");s&&(u?s=!1:r=o)}if(o.push(n),s)break}for(let e=0;e<n.length-1&&0===n[e];e++)o.push(0);return o.reverse()}const lt=(n,e)=>e?lt(e,n%e):n,ht=(n,e)=>n+(e-lt(n,e));function ft(n,e,t,r){if(!Array.isArray(n))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(t<=0||t>32)throw new Error(`convertRadix2: wrong to=${t}`);if(ht(e,t)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${t} carryBits=${ht(e,t)}`);let o=0,i=0;const s=2**t-1,a=[];for(const r of n){if(rt(r),r>=2**e)throw new Error(`convertRadix2: invalid data word=${r} from=${e}`);if(o=o<<e|r,i+e>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${e}`);for(i+=e;i>=t;i-=t)a.push((o>>i-t&s)>>>0);o&=2**i-1}if(o=o<<t-i&s,!r&&i>=e)throw new Error("Excess padding");if(!r&&o)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&a.push(o>>>0),a}function dt(n){return rt(n),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return ut(Array.from(e),256,n)},decode:e=>{if(!Array.isArray(e)||e.length&&"number"!=typeof e[0])throw new Error("radix.decode input should be array of strings");return Uint8Array.from(ut(e,n,256))}}}function pt(n,e=!1){if(rt(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(ht(8,n)>32||ht(n,8)>32)throw new Error("radix2: carry overflow");return{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return ft(Array.from(t),8,n,!e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(ft(t,n,8,e))}}}function gt(n,e){if(rt(n),"function"!=typeof e)throw new Error("checksum fn should be function");return{encode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const r=e(t).slice(0,n),o=new Uint8Array(t.length+n);return o.set(t),o.set(r,t.length),o},decode(t){if(!(t instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const r=t.slice(0,-n),o=e(r).slice(0,n),i=t.slice(-n);for(let e=0;e<n;e++)if(o[e]!==i[e])throw new Error("Invalid checksum");return r}}}const yt={alphabet:it,chain:ot,checksum:gt,radix:dt,radix2:pt,join:st,padding:at},wt=(ot(pt(4),it("0123456789ABCDEF"),st("")),ot(pt(5),it("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),at(5),st("")),pt(5),it("0123456789ABCDEFGHIJKLMNOPQRSTUV"),at(5),st(""),pt(5),it("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),st(""),ct((n=>n.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),ot(pt(6),it("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),at(6),st("")),ot(pt(6),it("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),at(6),st("")),pt(6),it("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),st(""),n=>ot(dt(58),it(n),st(""))),bt=wt("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");it("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),st("");function mt(n){if("string"!=typeof n)throw new TypeError("Invalid mnemonic type: "+typeof n);return n.normalize("NFKD")}function vt(n){const e=mt(n),t=e.split(" ");if(![12,15,18,21,24].includes(t.length))throw new Error("Invalid mnemonic");return{nfkd:e,words:t}}function Et(n){ye.bytes(n,16,20,24,28,32)}pt(4),it("0123456789abcdef"),st(""),ct((n=>{if("string"!=typeof n||n.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof n} with length ${n.length}`);return n.toLowerCase()}));const xt=n=>{const e=8-n.length/4;return new Uint8Array([Oe(n)[0]>>e<<e])};function kt(n){if(!Array.isArray(n)||2048!==n.length||"string"!=typeof n[0])throw new Error("Worlist: expected array of 2048 strings");return n.forEach((n=>{if("string"!=typeof n)throw new Error(`Wordlist: non-string element: ${n}`)})),yt.chain(yt.checksum(1,xt),yt.radix2(11,!0),yt.alphabet(n))}const At=n=>mt(`mnemonic${n}`);function Bt(n,e=""){return function(n,e,t,r){const{c:o,dkLen:i,DK:s,PRF:a,PRFSalt:c}=function(n,e,t,r){de(n);const o=function(n,e){if(void 0!==e&&"[object Object]"!==ke.call(e))throw new Error("Options should be object or undefined");return Object.assign({dkLen:32,asyncTick:10},e)}(0,r),{c:i,dkLen:s,asyncTick:a}=o;if(he(i),he(s),he(a),i<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const c=Ee(e),u=Ee(t),l=new Uint8Array(s),h=Ie.create(n,c),f=h._cloneInto().update(u);return{c:i,dkLen:s,asyncTick:a,DK:l,PRF:h,PRFSalt:f}}(n,e,t,{c:2048,dkLen:64});let u;const l=new Uint8Array(4),h=me(l),f=new Uint8Array(a.outputLen);for(let n=1,e=0;e<i;n++,e+=a.outputLen){const t=s.subarray(e,e+a.outputLen);h.setInt32(0,n,!1),(u=c._cloneInto(u)).update(l).digestInto(f),t.set(f.subarray(0,t.length));for(let n=1;n<o;n++){a._cloneInto(u).update(f).digestInto(f);for(let n=0;n<t.length;n++)t[n]^=f[n]}}return function(n,e,t,r,o){return n.destroy(),e.destroy(),r&&r.destroy(),o.fill(0),t}(a,c,s,u,f)}(tt,vt(n).nfkd,At(e))}function It(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Lt(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function Ut(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}const St=n=>n instanceof Uint8Array,Ct=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),Ht=(n,e)=>n<<32-e|n>>>e;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");const _t=Array.from({length:256},((n,e)=>e.toString(16).padStart(2,"0")));function Ot(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}function $t(n){if("string"==typeof n&&(n=Ot(n)),!St(n))throw new Error("expected Uint8Array, got "+typeof n);return n}function Nt(...n){const e=new Uint8Array(n.reduce(((n,e)=>n+e.length),0));let t=0;return n.forEach((n=>{if(!St(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length})),e}class Rt{clone(){return this._cloneInto()}}function jt(n){const e=e=>n().update($t(e)).digest(),t=n();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>n(),e}class Tt extends Rt{constructor(n,e){super(),this.finished=!1,this.destroyed=!1,function(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");It(n.outputLen),It(n.blockLen)}(n);const t=$t(e);if(this.iHash=n.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,o=new Uint8Array(r);o.set(t.length>r?n.create().update(t).digest():t);for(let n=0;n<o.length;n++)o[n]^=54;this.iHash.update(o),this.oHash=n.create();for(let n=0;n<o.length;n++)o[n]^=106;this.oHash.update(o),o.fill(0)}update(n){return Ut(this),this.iHash.update(n),this}digestInto(n){Ut(this),Lt(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){const n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:t,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return n.finished=r,n.destroyed=o,n.blockLen=i,n.outputLen=s,n.oHash=e._cloneInto(n.oHash),n.iHash=t._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Kt=(n,e,t)=>new Tt(n,e).update(t).digest();Kt.create=(n,e)=>new Tt(n,e);class Pt extends Rt{constructor(n,e,t,r){super(),this.blockLen=n,this.outputLen=e,this.padOffset=t,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(n),this.view=Ct(this.buffer)}update(n){Ut(this);const{view:e,buffer:t,blockLen:r}=this,o=(n=$t(n)).length;for(let i=0;i<o;){const s=Math.min(r-this.pos,o-i);if(s!==r)t.set(n.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(e,0),this.pos=0);else{const e=Ct(n);for(;r<=o-i;i+=r)this.process(e,i)}}return this.length+=n.length,this.roundClean(),this}digestInto(n){Ut(this),function(n,e){Lt(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}(n,this),this.finished=!0;const{buffer:e,view:t,blockLen:r,isLE:o}=this;let{pos:i}=this;e[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(t,0),i=0);for(let n=i;n<r;n++)e[n]=0;!function(n,e,t,r){if("function"==typeof n.setBigUint64)return n.setBigUint64(e,t,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(t>>o&i),a=Number(t&i),c=r?4:0,u=r?0:4;n.setUint32(e+c,s,r),n.setUint32(e+u,a,r)}(t,r-8,BigInt(8*this.length),o),this.process(t,0);const s=Ct(n),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let n=0;n<c;n++)s.setUint32(4*n,u[n],o)}digest(){const{buffer:n,outputLen:e}=this;this.digestInto(n);const t=n.slice(0,e);return this.destroy(),t}_cloneInto(n){n||(n=new this.constructor),n.set(...this.get());const{blockLen:e,buffer:t,length:r,finished:o,destroyed:i,pos:s}=this;return n.length=r,n.pos=s,n.finished=o,n.destroyed=i,r%e&&n.buffer.set(t),n}}const Ft=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),zt=Uint8Array.from({length:16},((n,e)=>e));let qt=[zt],Dt=[zt.map((n=>(9*n+5)%16))];for(let n=0;n<4;n++)for(let e of[qt,Dt])e.push(e[n].map((n=>Ft[n])));const Vt=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((n=>new Uint8Array(n))),Gt=qt.map(((n,e)=>n.map((n=>Vt[e][n])))),Mt=Dt.map(((n,e)=>n.map((n=>Vt[e][n])))),Wt=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Zt=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]),Jt=(n,e)=>n<<e|n>>>32-e;function Yt(n,e,t,r){return 0===n?e^t^r:1===n?e&t|~e&r:2===n?(e|~t)^r:3===n?e&r|t&~r:e^(t|~r)}const Qt=new Uint32Array(16);class Xt extends Pt{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:n,h1:e,h2:t,h3:r,h4:o}=this;return[n,e,t,r,o]}set(n,e,t,r,o){this.h0=0|n,this.h1=0|e,this.h2=0|t,this.h3=0|r,this.h4=0|o}process(n,e){for(let t=0;t<16;t++,e+=4)Qt[t]=n.getUint32(e,!0);let t=0|this.h0,r=t,o=0|this.h1,i=o,s=0|this.h2,a=s,c=0|this.h3,u=c,l=0|this.h4,h=l;for(let n=0;n<5;n++){const e=4-n,f=Wt[n],d=Zt[n],p=qt[n],g=Dt[n],y=Gt[n],w=Mt[n];for(let e=0;e<16;e++){const r=Jt(t+Yt(n,o,s,c)+Qt[p[e]]+f,y[e])+l|0;t=l,l=c,c=0|Jt(s,10),s=o,o=r}for(let n=0;n<16;n++){const t=Jt(r+Yt(e,i,a,u)+Qt[g[n]]+d,w[n])+h|0;r=h,h=u,u=0|Jt(a,10),a=i,i=t}}this.set(this.h1+s+u|0,this.h2+c+h|0,this.h3+l+r|0,this.h4+t+i|0,this.h0+o+a|0)}roundClean(){Qt.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const nr=jt((()=>new Xt)),er=(n,e,t)=>n&e^n&t^e&t,tr=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),or=new Uint32Array(64);class ir extends Pt{constructor(){super(64,32,8,!1),this.A=0|rr[0],this.B=0|rr[1],this.C=0|rr[2],this.D=0|rr[3],this.E=0|rr[4],this.F=0|rr[5],this.G=0|rr[6],this.H=0|rr[7]}get(){const{A:n,B:e,C:t,D:r,E:o,F:i,G:s,H:a}=this;return[n,e,t,r,o,i,s,a]}set(n,e,t,r,o,i,s,a){this.A=0|n,this.B=0|e,this.C=0|t,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(n,e){for(let t=0;t<16;t++,e+=4)or[t]=n.getUint32(e,!1);for(let n=16;n<64;n++){const e=or[n-15],t=or[n-2],r=Ht(e,7)^Ht(e,18)^e>>>3,o=Ht(t,17)^Ht(t,19)^t>>>10;or[n]=o+or[n-7]+r+or[n-16]|0}let{A:t,B:r,C:o,D:i,E:s,F:a,G:c,H:u}=this;for(let n=0;n<64;n++){const e=u+(Ht(s,6)^Ht(s,11)^Ht(s,25))+((l=s)&a^~l&c)+tr[n]+or[n]|0,h=(Ht(t,2)^Ht(t,13)^Ht(t,22))+er(t,r,o)|0;u=c,c=a,a=s,s=i+e|0,i=o,o=r,r=t,t=e+h|0}var l;t=t+this.A|0,r=r+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(t,r,o,i,s,a,c,u)}roundClean(){or.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sr=jt((()=>new ir)),ar=BigInt(2**32-1),cr=BigInt(32);function ur(n,e=!1){return e?{h:Number(n&ar),l:Number(n>>cr&ar)}:{h:0|Number(n>>cr&ar),l:0|Number(n&ar)}}var lr=function(n,e=!1){let t=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let o=0;o<n.length;o++){const{h:i,l:s}=ur(n[o],e);[t[o],r[o]]=[i,s]}return[t,r]},hr=(n,e,t)=>n>>>t,fr=(n,e,t)=>n<<32-t|e>>>t,dr=(n,e,t)=>n>>>t|e<<32-t,pr=(n,e,t)=>n<<32-t|e>>>t,gr=(n,e,t)=>n<<64-t|e>>>t-32,yr=(n,e,t)=>n>>>t-32|e<<64-t,wr=function(n,e,t,r){const o=(e>>>0)+(r>>>0);return{h:n+t+(o/2**32|0)|0,l:0|o}},br=(n,e,t)=>(n>>>0)+(e>>>0)+(t>>>0),mr=(n,e,t,r)=>e+t+r+(n/2**32|0)|0,vr=(n,e,t,r)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0),Er=(n,e,t,r,o)=>e+t+r+o+(n/2**32|0)|0,xr=(n,e,t,r,o,i)=>e+t+r+o+i+(n/2**32|0)|0,kr=(n,e,t,r,o)=>(n>>>0)+(e>>>0)+(t>>>0)+(r>>>0)+(o>>>0);const[Ar,Br]=lr(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((n=>BigInt(n)))),Ir=new Uint32Array(80),Lr=new Uint32Array(80);class Ur extends Pt{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:n,Al:e,Bh:t,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:c,El:u,Fh:l,Fl:h,Gh:f,Gl:d,Hh:p,Hl:g}=this;return[n,e,t,r,o,i,s,a,c,u,l,h,f,d,p,g]}set(n,e,t,r,o,i,s,a,c,u,l,h,f,d,p,g){this.Ah=0|n,this.Al=0|e,this.Bh=0|t,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|h,this.Gh=0|f,this.Gl=0|d,this.Hh=0|p,this.Hl=0|g}process(n,e){for(let t=0;t<16;t++,e+=4)Ir[t]=n.getUint32(e),Lr[t]=n.getUint32(e+=4);for(let n=16;n<80;n++){const e=0|Ir[n-15],t=0|Lr[n-15],r=dr(e,t,1)^dr(e,t,8)^hr(e,t,7),o=pr(e,t,1)^pr(e,t,8)^fr(e,t,7),i=0|Ir[n-2],s=0|Lr[n-2],a=dr(i,s,19)^gr(i,s,61)^hr(i,s,6),c=pr(i,s,19)^yr(i,s,61)^fr(i,s,6),u=vr(o,c,Lr[n-7],Lr[n-16]),l=Er(u,r,a,Ir[n-7],Ir[n-16]);Ir[n]=0|l,Lr[n]=0|u}let{Ah:t,Al:r,Bh:o,Bl:i,Ch:s,Cl:a,Dh:c,Dl:u,Eh:l,El:h,Fh:f,Fl:d,Gh:p,Gl:g,Hh:y,Hl:w}=this;for(let n=0;n<80;n++){const e=dr(l,h,14)^dr(l,h,18)^gr(l,h,41),b=pr(l,h,14)^pr(l,h,18)^yr(l,h,41),m=l&f^~l&p,v=kr(w,b,h&d^~h&g,Br[n],Lr[n]),E=xr(v,y,e,m,Ar[n],Ir[n]),x=0|v,k=dr(t,r,28)^gr(t,r,34)^gr(t,r,39),A=pr(t,r,28)^yr(t,r,34)^yr(t,r,39),B=t&o^t&s^o&s,I=r&i^r&a^i&a;y=0|p,w=0|g,p=0|f,g=0|d,f=0|l,d=0|h,({h:l,l:h}=wr(0|c,0|u,0|E,0|x)),c=0|s,u=0|a,s=0|o,a=0|i,o=0|t,i=0|r;const L=br(x,A,I);t=mr(L,E,k,B),r=0|L}({h:t,l:r}=wr(0|this.Ah,0|this.Al,0|t,0|r)),({h:o,l:i}=wr(0|this.Bh,0|this.Bl,0|o,0|i)),({h:s,l:a}=wr(0|this.Ch,0|this.Cl,0|s,0|a)),({h:c,l:u}=wr(0|this.Dh,0|this.Dl,0|c,0|u)),({h:l,l:h}=wr(0|this.Eh,0|this.El,0|l,0|h)),({h:f,l:d}=wr(0|this.Fh,0|this.Fl,0|f,0|d)),({h:p,l:g}=wr(0|this.Gh,0|this.Gl,0|p,0|g)),({h:y,l:w}=wr(0|this.Hh,0|this.Hl,0|y,0|w)),this.set(t,r,o,i,s,a,c,u,l,h,f,d,p,g,y,w)}roundClean(){Ir.fill(0),Lr.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Sr=jt((()=>new Ur)),Cr=Ln.ProjectivePoint,Hr=(n=>ot(gt(4,(e=>n(n(e)))),bt))(sr);function _r(n){return BigInt(`0x${function(n){if(!St(n))throw new Error("Uint8Array expected");let e="";for(let t=0;t<n.length;t++)e+=_t[n[t]];return e}(n)}`)}const Or=Ot("Bitcoin seed"),$r={private:76066276,public:76067358},Nr=2147483648,Rr=n=>{if(!Number.isSafeInteger(n)||n<0||n>2**32-1)throw new Error(`Invalid number=${n}. Should be from 0 to 2 ** 32 - 1`);const e=new Uint8Array(4);return Ct(e).setUint32(0,n,!1),e};class jr{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return n=this.pubHash,Ct(n).getUint32(0,!1);var n}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const n=this.privateKey;if(!n)throw new Error("No private key");return Hr.encode(this.serialize(this.versions.private,Nt(new Uint8Array([0]),n)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return Hr.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(n,e=$r){if(Lt(n),8*n.length<128||8*n.length>512)throw new Error(`HDKey: wrong seed length=${n.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const t=Kt(Sr,Or,n);return new jr({versions:e,chainCode:t.slice(32),privateKey:t.slice(0,32)})}static fromExtendedKey(n,e=$r){const t=Hr.decode(n),r=Ct(t),o=r.getUint32(0,!1),i={versions:e,depth:t[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:t.slice(13,45)},s=t.slice(45),a=0===s[0];if(o!==e[a?"private":"public"])throw new Error("Version mismatch");return new jr(a?{...i,privateKey:s.slice(1)}:{...i,publicKey:s})}static fromJSON(n){return jr.fromExtendedKey(n.xpriv)}constructor(n){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!n||"object"!=typeof n)throw new Error("HDKey.constructor must not be called directly");if(this.versions=n.versions||$r,this.depth=n.depth||0,this.chainCode=n.chainCode,this.index=n.index||0,this.parentFingerprint=n.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(n.publicKey&&n.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(n.privateKey){if(!Ln.utils.isValidPrivateKey(n.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof n.privateKey?n.privateKey:_r(n.privateKey),this.privKeyBytes=function(n){return function(n){if("string"!=typeof n)throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const t=new Uint8Array(e/2);for(let e=0;e<t.length;e++){const r=2*e,o=n.slice(r,r+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[e]=i}return t}(n.toString(16).padStart(64,"0"))}(this.privKey),this.pubKey=Ln.getPublicKey(n.privateKey,!0)}else{if(!n.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=Cr.fromHex(n.publicKey).toRawBytes(!0)}var e;this.pubHash=(e=this.pubKey,nr(sr(e)))}derive(n){if(!/^[mM]'?/.test(n))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(n))return this;const e=n.replace(/^[mM]'?\//,"").split("/");let t=this;for(const n of e){const e=/^(\d+)('?)$/.exec(n);if(!e||3!==e.length)throw new Error(`Invalid child index: ${n}`);let r=+e[1];if(!Number.isSafeInteger(r)||r>=Nr)throw new Error("Invalid index");"'"===e[2]&&(r+=Nr),t=t.deriveChild(r)}return t}deriveChild(n){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let e=Rr(n);if(n>=Nr){const n=this.privateKey;if(!n)throw new Error("Could not derive hardened child key");e=Nt(new Uint8Array([0]),n,e)}else e=Nt(this.pubKey,e);const t=Kt(Sr,this.chainCode,e),r=_r(t.slice(0,32)),o=t.slice(32);if(!Ln.utils.isValidPrivateKey(r))throw new Error("Tweak bigger than curve order");const i={versions:this.versions,chainCode:o,depth:this.depth+1,parentFingerprint:this.fingerprint,index:n};try{if(this.privateKey){const n=nn(this.privKey+r,Ln.CURVE.n);if(!Ln.utils.isValidPrivateKey(n))throw new Error("The tweak was out of range or the resulted private key is invalid");i.privateKey=n}else{const n=Cr.fromHex(this.pubKey).add(Cr.fromPrivateKey(r));if(n.equals(Cr.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");i.publicKey=n.toRawBytes(!0)}return new jr(i)}catch(e){return this.deriveChild(n+1)}}sign(n){if(!this.privateKey)throw new Error("No privateKey set!");return Lt(n,32),Ln.sign(n,this.privKey).toCompactRawBytes()}verify(n,e){if(Lt(n,32),Lt(e,64),!this.publicKey)throw new Error("No publicKey set!");let t;try{t=Ln.Signature.fromCompact(e)}catch(n){return!1}return Ln.verify(t,n,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(n,e){if(!this.chainCode)throw new Error("No chainCode set");return Lt(e,33),Nt(Rr(n),new Uint8Array([this.depth]),Rr(this.parentFingerprint),Rr(this.index),this.chainCode,e)}}const Tr=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Kr(n){if("string"!=typeof n)throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array((new TextEncoder).encode(n))}function Pr(n){if("string"==typeof n&&(n=Kr(n)),!(n=>n instanceof Uint8Array)(n))throw new Error("expected Uint8Array, got "+typeof n);return n}function Fr(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function zr(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}const qr={number:Fr,bool:function(n){if("boolean"!=typeof n)throw new Error(`Expected boolean, not ${n}`)},bytes:zr,hash:function(n){if("function"!=typeof n||"function"!=typeof n.create)throw new Error("hash must be wrapped by utils.wrapConstructor");Fr(n.outputLen),Fr(n.blockLen)},exists:function(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")},output:function(n,e){zr(n);const t=e.outputLen;if(n.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}};var Dr=qr;const Vr=(n,e)=>255&n[e++]|(255&n[e++])<<8;class Gr{constructor(n){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,function(n,e){if(!(n instanceof Uint8Array))throw new Error("Uint8Array expected");if(32!==n.length)throw new Error("Uint8Array length 32 expected")}(n=Pr(n));const e=Vr(n,0),t=Vr(n,2),r=Vr(n,4),o=Vr(n,6),i=Vr(n,8),s=Vr(n,10),a=Vr(n,12),c=Vr(n,14);this.r[0]=8191&e,this.r[1]=8191&(e>>>13|t<<3),this.r[2]=7939&(t>>>10|r<<6),this.r[3]=8191&(r>>>7|o<<9),this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,this.r[6]=8191&(i>>>14|s<<2),this.r[7]=8065&(s>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let e=0;e<8;e++)this.pad[e]=Vr(n,16+2*e)}process(n,e,t=!1){const r=t?0:2048,{h:o,r:i}=this,s=i[0],a=i[1],c=i[2],u=i[3],l=i[4],h=i[5],f=i[6],d=i[7],p=i[8],g=i[9],y=Vr(n,e+0),w=Vr(n,e+2),b=Vr(n,e+4),m=Vr(n,e+6),v=Vr(n,e+8),E=Vr(n,e+10),x=Vr(n,e+12),k=Vr(n,e+14);let A=o[0]+(8191&y),B=o[1]+(8191&(y>>>13|w<<3)),I=o[2]+(8191&(w>>>10|b<<6)),L=o[3]+(8191&(b>>>7|m<<9)),U=o[4]+(8191&(m>>>4|v<<12)),S=o[5]+(v>>>1&8191),C=o[6]+(8191&(v>>>14|E<<2)),H=o[7]+(8191&(E>>>11|x<<5)),_=o[8]+(8191&(x>>>8|k<<8)),O=o[9]+(k>>>5|r),$=0,N=$+A*s+B*(5*g)+I*(5*p)+L*(5*d)+U*(5*f);$=N>>>13,N&=8191,N+=S*(5*h)+C*(5*l)+H*(5*u)+_*(5*c)+O*(5*a),$+=N>>>13,N&=8191;let R=$+A*a+B*s+I*(5*g)+L*(5*p)+U*(5*d);$=R>>>13,R&=8191,R+=S*(5*f)+C*(5*h)+H*(5*l)+_*(5*u)+O*(5*c),$+=R>>>13,R&=8191;let j=$+A*c+B*a+I*s+L*(5*g)+U*(5*p);$=j>>>13,j&=8191,j+=S*(5*d)+C*(5*f)+H*(5*h)+_*(5*l)+O*(5*u),$+=j>>>13,j&=8191;let T=$+A*u+B*c+I*a+L*s+U*(5*g);$=T>>>13,T&=8191,T+=S*(5*p)+C*(5*d)+H*(5*f)+_*(5*h)+O*(5*l),$+=T>>>13,T&=8191;let K=$+A*l+B*u+I*c+L*a+U*s;$=K>>>13,K&=8191,K+=S*(5*g)+C*(5*p)+H*(5*d)+_*(5*f)+O*(5*h),$+=K>>>13,K&=8191;let P=$+A*h+B*l+I*u+L*c+U*a;$=P>>>13,P&=8191,P+=S*s+C*(5*g)+H*(5*p)+_*(5*d)+O*(5*f),$+=P>>>13,P&=8191;let F=$+A*f+B*h+I*l+L*u+U*c;$=F>>>13,F&=8191,F+=S*a+C*s+H*(5*g)+_*(5*p)+O*(5*d),$+=F>>>13,F&=8191;let z=$+A*d+B*f+I*h+L*l+U*u;$=z>>>13,z&=8191,z+=S*c+C*a+H*s+_*(5*g)+O*(5*p),$+=z>>>13,z&=8191;let q=$+A*p+B*d+I*f+L*h+U*l;$=q>>>13,q&=8191,q+=S*u+C*c+H*a+_*s+O*(5*g),$+=q>>>13,q&=8191;let D=$+A*g+B*p+I*d+L*f+U*h;$=D>>>13,D&=8191,D+=S*l+C*u+H*c+_*a+O*s,$+=D>>>13,D&=8191,$=($<<2)+$|0,$=$+N|0,N=8191&$,$>>>=13,R+=$,o[0]=N,o[1]=R,o[2]=j,o[3]=T,o[4]=K,o[5]=P,o[6]=F,o[7]=z,o[8]=q,o[9]=D}finalize(){const{h:n,pad:e}=this,t=new Uint16Array(10);let r=n[1]>>>13;n[1]&=8191;for(let e=2;e<10;e++)n[e]+=r,r=n[e]>>>13,n[e]&=8191;n[0]+=5*r,r=n[0]>>>13,n[0]&=8191,n[1]+=r,r=n[1]>>>13,n[1]&=8191,n[2]+=r,t[0]=n[0]+5,r=t[0]>>>13,t[0]&=8191;for(let e=1;e<10;e++)t[e]=n[e]+r,r=t[e]>>>13,t[e]&=8191;t[9]-=8192;let o=(1^r)-1;for(let n=0;n<10;n++)t[n]&=o;o=~o;for(let e=0;e<10;e++)n[e]=n[e]&o|t[e];n[0]=65535&(n[0]|n[1]<<13),n[1]=65535&(n[1]>>>3|n[2]<<10),n[2]=65535&(n[2]>>>6|n[3]<<7),n[3]=65535&(n[3]>>>9|n[4]<<4),n[4]=65535&(n[4]>>>12|n[5]<<1|n[6]<<14),n[5]=65535&(n[6]>>>2|n[7]<<11),n[6]=65535&(n[7]>>>5|n[8]<<8),n[7]=65535&(n[8]>>>8|n[9]<<5);let i=n[0]+e[0];n[0]=65535&i;for(let t=1;t<8;t++)i=(n[t]+e[t]|0)+(i>>>16)|0,n[t]=65535&i}update(n){Dr.exists(this);const{buffer:e,blockLen:t}=this,r=(n=Pr(n)).length;for(let o=0;o<r;){const i=Math.min(t-this.pos,r-o);if(i!==t)e.set(n.subarray(o,o+i),this.pos),this.pos+=i,o+=i,this.pos===t&&(this.process(e,0,!1),this.pos=0);else for(;t<=r-o;o+=t)this.process(n,o)}return this}destroy(){this.h.fill(0),this.r.fill(0),this.buffer.fill(0),this.pad.fill(0)}digestInto(n){Dr.exists(this),Dr.output(n,this),this.finished=!0;const{buffer:e,h:t}=this;let{pos:r}=this;if(r){for(e[r++]=1;r<16;r++)e[r]=0;this.process(e,0,!0)}this.finalize();let o=0;for(let e=0;e<8;e++)n[o++]=t[e]>>>0,n[o++]=t[e]>>>8;return n}digest(){const{buffer:n,outputLen:e}=this;this.digestInto(n);const t=n.slice(0,e);return this.destroy(),t}}!function(n){const e=(e,t)=>n(t).update(Pr(e)).digest(),t=n(new Uint8Array(32));e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=e=>n(e)}((n=>new Gr(n)));const Mr=Kr("expand 16-byte k"),Wr=Kr("expand 32-byte k"),Zr=Tr(Mr),Jr=Tr(Wr),Yr=n=>!(n.byteOffset%4),Qr=(n,e)=>n<<e|n>>>32-e;const Xr=(n=>{const{core:e,rounds:t,counterRight:r,counterLen:o,allow128bitKeys:i,extendNonceFn:s,blockLen:a}=function(n,e){if(void 0!==e&&("object"!=typeof e||(t=e,"[object Object]"!==Object.prototype.toString.call(t)||t.constructor!==Object)))throw new Error("options must be object or undefined");var t;return Object.assign(n,e)}({rounds:20,counterRight:!1,counterLen:8,allow128bitKeys:!0,blockLen:64},n);Dr.number(o),Dr.number(t),Dr.number(a),Dr.bool(r),Dr.bool(i);const c=a/4;if(a%4!=0)throw new Error("Salsa/ChaCha: blockLen must be aligned to 4 bytes");return(n,u,l,h,f=0)=>{if(Dr.bytes(n),Dr.bytes(u),Dr.bytes(l),h||(h=new Uint8Array(l.length)),Dr.bytes(h),Dr.number(f),f<0||f>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");if(h.length<l.length)throw new Error(`Salsa/ChaCha: output (${h.length}) is shorter than data (${l.length})`);const d=[];let p,g;if(32===n.length)p=n,g=Jr;else{if(16!==n.length||!i)throw new Error(`Salsa/ChaCha: invalid 32-byte key, got length=${n.length}`);p=new Uint8Array(32),p.set(n),p.set(n,16),g=Zr,d.push(p)}if(s){if(u.length<=16)throw new Error("Salsa/ChaCha: extended nonce must be bigger than 16 bytes");p=s(g,p,u.subarray(0,16),new Uint8Array(32)),d.push(p),u=u.subarray(16)}const y=16-o;if(u.length!==y)throw new Error(`Salsa/ChaCha: nonce must be ${y} or 16 bytes`);if(12!==y){const n=new Uint8Array(12);n.set(u,r?0:12-u.length),d.push(u=n)}const w=new Uint8Array(a),b=Tr(w),m=Tr(p),v=Tr(u),E=Yr(l)&&Tr(l),x=Yr(h)&&Tr(h);d.push(b);const k=l.length;for(let n=0,r=f;n<k;r++){if(e(g,m,v,b,r,t),r>=2**32-1)throw new Error("Salsa/ChaCha: counter overflow");const o=Math.min(a,k-n);if(o===a&&x&&E){const e=n/4;if(n%4!=0)throw new Error("Salsa/ChaCha: invalid block position");for(let n=0;n<c;n++)x[e+n]=E[e+n]^b[n];n+=a}else{for(let e=0;e<o;e++)h[n+e]=l[n+e]^w[e];n+=o}}for(let n=0;n<d.length;n++)d[n].fill(0);return h}})({core:function(n,e,t,r,o,i=20){let s=n[0],a=n[1],c=n[2],u=n[3],l=e[0],h=e[1],f=e[2],d=e[3],p=e[4],g=e[5],y=e[6],w=e[7],b=o,m=t[0],v=t[1],E=t[2],x=s,k=a,A=c,B=u,I=l,L=h,U=f,S=d,C=p,H=g,_=y,O=w,$=b,N=m,R=v,j=E;for(let n=0;n<i;n+=2)x=x+I|0,$=Qr($^x,16),C=C+$|0,I=Qr(I^C,12),x=x+I|0,$=Qr($^x,8),C=C+$|0,I=Qr(I^C,7),k=k+L|0,N=Qr(N^k,16),H=H+N|0,L=Qr(L^H,12),k=k+L|0,N=Qr(N^k,8),H=H+N|0,L=Qr(L^H,7),A=A+U|0,R=Qr(R^A,16),_=_+R|0,U=Qr(U^_,12),A=A+U|0,R=Qr(R^A,8),_=_+R|0,U=Qr(U^_,7),B=B+S|0,j=Qr(j^B,16),O=O+j|0,S=Qr(S^O,12),B=B+S|0,j=Qr(j^B,8),O=O+j|0,S=Qr(S^O,7),x=x+L|0,j=Qr(j^x,16),_=_+j|0,L=Qr(L^_,12),x=x+L|0,j=Qr(j^x,8),_=_+j|0,L=Qr(L^_,7),k=k+U|0,$=Qr($^k,16),O=O+$|0,U=Qr(U^O,12),k=k+U|0,$=Qr($^k,8),O=O+$|0,U=Qr(U^O,7),A=A+S|0,N=Qr(N^A,16),C=C+N|0,S=Qr(S^C,12),A=A+S|0,N=Qr(N^A,8),C=C+N|0,S=Qr(S^C,7),B=B+I|0,R=Qr(R^B,16),H=H+R|0,I=Qr(I^H,12),B=B+I|0,R=Qr(R^B,8),H=H+R|0,I=Qr(I^H,7);let T=0;r[T++]=s+x|0,r[T++]=a+k|0,r[T++]=c+A|0,r[T++]=u+B|0,r[T++]=l+I|0,r[T++]=h+L|0,r[T++]=f+U|0,r[T++]=d+S|0,r[T++]=p+C|0,r[T++]=g+H|0,r[T++]=y+_|0,r[T++]=w+O|0,r[T++]=b+$|0,r[T++]=m+N|0,r[T++]=v+R|0,r[T++]=E+j|0},counterRight:!1,counterLen:8,extendNonceFn:function(n,e,t,r){const o=Tr(e),i=Tr(t),s=Tr(r);let a=n[0],c=n[1],u=n[2],l=n[3],h=o[0],f=o[1],d=o[2],p=o[3],g=o[4],y=o[5],w=o[6],b=o[7],m=i[0],v=i[1],E=i[2],x=i[3];for(let n=0;n<20;n+=2)a=a+h|0,m=Qr(m^a,16),g=g+m|0,h=Qr(h^g,12),a=a+h|0,m=Qr(m^a,8),g=g+m|0,h=Qr(h^g,7),c=c+f|0,v=Qr(v^c,16),y=y+v|0,f=Qr(f^y,12),c=c+f|0,v=Qr(v^c,8),y=y+v|0,f=Qr(f^y,7),u=u+d|0,E=Qr(E^u,16),w=w+E|0,d=Qr(d^w,12),u=u+d|0,E=Qr(E^u,8),w=w+E|0,d=Qr(d^w,7),l=l+p|0,x=Qr(x^l,16),b=b+x|0,p=Qr(p^b,12),l=l+p|0,x=Qr(x^l,8),b=b+x|0,p=Qr(p^b,7),a=a+f|0,x=Qr(x^a,16),w=w+x|0,f=Qr(f^w,12),a=a+f|0,x=Qr(x^a,8),w=w+x|0,f=Qr(f^w,7),c=c+d|0,m=Qr(m^c,16),b=b+m|0,d=Qr(d^b,12),c=c+d|0,m=Qr(m^c,8),b=b+m|0,d=Qr(d^b,7),u=u+p|0,v=Qr(v^u,16),g=g+v|0,p=Qr(p^g,12),u=u+p|0,v=Qr(v^u,8),g=g+v|0,p=Qr(p^g,7),l=l+h|0,E=Qr(E^l,16),y=y+E|0,h=Qr(h^y,12),l=l+h|0,E=Qr(E^l,8),y=y+E|0,h=Qr(h^y,7);return s[0]=a,s[1]=c,s[2]=u,s[3]=l,s[4]=m,s[5]=v,s[6]=E,s[7]=x,r},allow128bitKeys:!1});var no=Object.defineProperty,eo=(n,e)=>{for(var t in e)no(n,t,{get:e[t],enumerable:!0})};function to(){return d(qn.utils.randomPrivateKey())}function ro(n){return d(qn.getPublicKey(n))}eo({},{MessageNode:()=>uo,MessageQueue:()=>lo,insertEventIntoAscendingList:()=>co,insertEventIntoDescendingList:()=>ao,normalizeURL:()=>so,utf8Decoder:()=>oo,utf8Encoder:()=>io});var oo=new TextDecoder("utf-8"),io=new TextEncoder;function so(n){let e=new URL(n);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),("80"===e.port&&"ws:"===e.protocol||"443"===e.port&&"wss:"===e.protocol)&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}function ao(n,e){let t,r=0,o=n.length-1,i=r;if(o<0)i=0;else if(e.created_at<n[o].created_at)i=o+1;else if(e.created_at>=n[r].created_at)i=r;else for(;;){if(o<=r+1){i=o;break}if(t=Math.floor(r+(o-r)/2),n[t].created_at>e.created_at)r=t;else{if(!(n[t].created_at<e.created_at)){i=t;break}o=t}}return n[i]?.id!==e.id?[...n.slice(0,i),e,...n.slice(i)]:n}function co(n,e){let t,r=0,o=n.length-1,i=r;if(o<0)i=0;else if(e.created_at>n[o].created_at)i=o+1;else if(e.created_at<=n[r].created_at)i=r;else for(;;){if(o<=r+1){i=o;break}if(t=Math.floor(r+(o-r)/2),n[t].created_at<e.created_at)r=t;else{if(!(n[t].created_at>e.created_at)){i=t;break}o=t}}return n[i]?.id!==e.id?[...n.slice(0,i),e,...n.slice(i)]:n}var uo=class{_value;_next;get value(){return this._value}set value(n){this._value=n}get next(){return this._next}set next(n){this._next=n}constructor(n){this._value=n,this._next=null}},lo=class{_first;_last;get first(){return this._first}set first(n){this._first=n}get last(){return this._last}set last(n){this._last=n}_size;get size(){return this._size}set size(n){this._size=n}constructor(){this._first=null,this._last=null,this._size=0}enqueue(n){const e=new uo(n);return 0!==this._size&&this._last?(this._last.next=e,this._last=e):(this._first=e,this._last=e),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;let n=this._first;return this._first=n.next,n.next=null,this._size--,n.value}},ho=Symbol("verified");function fo(n,e){const t=n;return t.pubkey=ro(e),t.id=po(t),t.sig=wo(t,e),t[ho]=!0,t}function po(n){return d(L(io.encode(function(n){if(!go(n))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,n.pubkey,n.created_at,n.kind,n.tags,n.content])}(n))))}function go(n){if(!(n instanceof Object))return!1;if("number"!=typeof n.kind)return!1;if("string"!=typeof n.content)return!1;if("number"!=typeof n.created_at)return!1;if("string"!=typeof n.pubkey)return!1;if(!n.pubkey.match(/^[a-f0-9]{64}$/))return!1;if(!Array.isArray(n.tags))return!1;for(let e=0;e<n.tags.length;e++){let t=n.tags[e];if(!Array.isArray(t))return!1;for(let n=0;n<t.length;n++)if("object"==typeof t[n])return!1}return!0}function yo(n){if("boolean"==typeof n[ho])return n[ho];const e=po(n);if(e!==n.id)return n[ho]=!1;try{return n[ho]=qn.verify(n.sig,e,n.pubkey)}catch(e){return n[ho]=!1}}function wo(n,e){return d(qn.sign(po(n),e))}function bo(n,e){if(n.ids&&-1===n.ids.indexOf(e.id)&&!n.ids.some((n=>e.id.startsWith(n))))return!1;if(n.kinds&&-1===n.kinds.indexOf(e.kind))return!1;if(n.authors&&-1===n.authors.indexOf(e.pubkey)&&!n.authors.some((n=>e.pubkey.startsWith(n))))return!1;for(let t in n)if("#"===t[0]){let r=n[`#${t.slice(1)}`];if(r&&!e.tags.find((([n,e])=>n===t.slice(1)&&-1!==r.indexOf(e))))return!1}return!(n.since&&e.created_at<n.since||n.until&&e.created_at>n.until)}function mo(n,e){let t=e.length+3,r=n.indexOf(`"${e}":`)+t,o=n.slice(r).indexOf('"')+r+1;return n.slice(o,o+64)}function vo(n,e){let t=e.length,r=n.indexOf(`"${e}":`)+t+3,o=n.slice(r),i=Math.min(o.indexOf(","),o.indexOf("}"));return parseInt(o.slice(0,i),10)}function Eo(n){let e=n.slice(0,22).indexOf('"EVENT"');if(-1===e)return null;let t=n.slice(e+7+1).indexOf('"');if(-1===t)return null;let r=e+7+1+t,o=n.slice(r+1,80).indexOf('"');if(-1===o)return null;let i=r+1+o;return n.slice(r+1,i)}function xo(n,e){return e===mo(n,"id")}function ko(n,e){return e===mo(n,"pubkey")}function Ao(n,e){return e===vo(n,"kind")}function Bo(n,e={}){let{listTimeout:t=3e3,getTimeout:r=3e3,countTimeout:o=3e3}=e;var i,s,a={},c={connect:[],disconnect:[],error:[],notice:[],auth:[]},u={},l={};function h(){return 1===i?.readyState}async function f(n){let e=JSON.stringify(n);if(h()||(await new Promise((n=>setTimeout(n,1e3))),h()))try{i.send(e)}catch(n){console.log(n)}}const d=(n,{verb:e="REQ",skipVerification:t=!1,alreadyHaveEvent:r=null,id:o=Math.random().toString().slice(2)}={})=>{let i=o;a[i]={id:i,filters:n,skipVerification:t,alreadyHaveEvent:r},f([e,i,...n]);let s={sub:(e,o={})=>d(e||n,{skipVerification:o.skipVerification||t,alreadyHaveEvent:o.alreadyHaveEvent||r,id:i}),unsub:()=>{delete a[i],delete u[i],f(["CLOSE",i])},on:(n,e)=>{u[i]=u[i]||{event:[],count:[],eose:[]},u[i][n].push(e)},off:(n,e)=>{let t=u[i],r=t[n].indexOf(e);r>=0&&t[n].splice(r,1)},get events(){return async function*(n){let e;const t=[],r=n=>{e?(e(n),e=void 0):t.push(n)};n.on("event",r);try{for(;;)if(t.length>0)yield t.shift();else{const n=await new Promise((n=>{e=n}));yield n}}finally{n.off("event",r)}}(s)}};return s};function p(n,e){return new Promise(((t,r)=>{if(!n.id)return void r(new Error(`event ${n} has no id`));let o=n.id;f([e,n]),l[o]={resolve:t,reject:r}}))}return{url:n,sub:d,on:(n,e)=>{c[n].push(e),"connect"===n&&1===i?.readyState&&e()},off:(n,e)=>{let t=c[n].indexOf(e);-1!==t&&c[n].splice(t,1)},list:(n,e)=>new Promise((r=>{let o=d(n,e),i=[],s=setTimeout((()=>{o.unsub(),r(i)}),t);o.on("eose",(()=>{o.unsub(),clearTimeout(s),r(i)})),o.on("event",(n=>{i.push(n)}))})),get:(n,e)=>new Promise((t=>{let o=d([n],e),i=setTimeout((()=>{o.unsub(),t(null)}),r);o.on("event",(n=>{o.unsub(),clearTimeout(i),t(n)}))})),count:n=>new Promise((e=>{let t=d(n,{...d,verb:"COUNT"}),r=setTimeout((()=>{t.unsub(),e(null)}),o);t.on("count",(n=>{t.unsub(),clearTimeout(r),e(n)}))})),async publish(n){await p(n,"EVENT")},async auth(n){await p(n,"AUTH")},connect:async function(){h()||await async function(){return s||(s=new Promise(((e,t)=>{try{i=new WebSocket(n)}catch(n){t(n)}i.onopen=()=>{c.connect.forEach((n=>n())),e()},i.onerror=()=>{s=void 0,c.error.forEach((n=>n())),t()},i.onclose=async()=>{s=void 0,c.disconnect.forEach((n=>n()))};let r,o=new lo;function h(){if(0===o.size)return clearInterval(r),void(r=null);var e=o.dequeue();if(!e)return;let t=Eo(e);if(t){let r=a[t];if(r&&r.alreadyHaveEvent&&r.alreadyHaveEvent(mo(e,"id"),n))return}try{let n=JSON.parse(e);switch(n[0]){case"EVENT":{let e=n[1],t=n[2];return void(go(t)&&a[e]&&(a[e].skipVerification||yo(t))&&function(n,e){for(let t=0;t<n.length;t++)if(bo(n[t],e))return!0;return!1}(a[e].filters,t)&&(a[e],(u[e]?.event||[]).forEach((n=>n(t)))))}case"COUNT":let e=n[1],t=n[2];return void(a[e]&&(u[e]?.count||[]).forEach((n=>n(t))));case"EOSE":{let e=n[1];return void(e in u&&(u[e].eose.forEach((n=>n())),u[e].eose=[]))}case"OK":{let e=n[1],t=n[2],r=n[3]||"";if(e in l){let{resolve:n,reject:o}=l[e];t?n(null):o(new Error(r))}return}case"NOTICE":let r=n[1];return void c.notice.forEach((n=>n(r)));case"AUTH":{let e=n[1];return void c.auth?.forEach((n=>n(e)))}}}catch(n){return}}i.onmessage=n=>{o.enqueue(n.data),r||(r=setInterval(h,0))}})),s)}()},close(){c={connect:[],disconnect:[],error:[],notice:[],auth:[]},u={},l={},i?.readyState===WebSocket.OPEN&&i.close()},get status(){return i?.readyState??3}}}eo({},{getHex64:()=>mo,getInt:()=>vo,getSubscriptionId:()=>Eo,matchEventId:()=>xo,matchEventKind:()=>Ao,matchEventPubkey:()=>ko});var Io={};eo(Io,{BECH32_REGEX:()=>Lo,decode:()=>Uo,naddrEncode:()=>jo,neventEncode:()=>Ro,noteEncode:()=>_o,nprofileEncode:()=>No,npubEncode:()=>Ho,nrelayEncode:()=>To,nsecEncode:()=>Co});var Lo=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function Uo(n){let{prefix:e,words:t}=ue.decode(n,5e3),r=new Uint8Array(ue.fromWords(t));switch(e){case"nprofile":{let n=So(r);if(!n[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(32!==n[0][0].length)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:d(n[0][0]),relays:n[1]?n[1].map((n=>oo.decode(n))):[]}}}case"nevent":{let n=So(r);if(!n[0]?.[0])throw new Error("missing TLV 0 for nevent");if(32!==n[0][0].length)throw new Error("TLV 0 should be 32 bytes");if(n[2]&&32!==n[2][0].length)throw new Error("TLV 2 should be 32 bytes");return{type:"nevent",data:{id:d(n[0][0]),relays:n[1]?n[1].map((n=>oo.decode(n))):[],author:n[2]?.[0]?d(n[2][0]):void 0}}}case"naddr":{let n=So(r);if(!n[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!n[2]?.[0])throw new Error("missing TLV 2 for naddr");if(32!==n[2][0].length)throw new Error("TLV 2 should be 32 bytes");if(!n[3]?.[0])throw new Error("missing TLV 3 for naddr");if(4!==n[3][0].length)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:oo.decode(n[0][0]),pubkey:d(n[2][0]),kind:parseInt(d(n[3][0]),16),relays:n[1]?n[1].map((n=>oo.decode(n))):[]}}}case"nrelay":{let n=So(r);if(!n[0]?.[0])throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:oo.decode(n[0][0])}}case"nsec":case"npub":case"note":return{type:e,data:d(r)};default:throw new Error(`unknown prefix ${e}`)}}function So(n){let e={},t=n;for(;t.length>0;){let n=t[0],r=t[1];if(!r)throw new Error(`malformed TLV ${n}`);let o=t.slice(2,2+r);if(t=t.slice(2+r),o.length<r)throw new Error(`not enough data to read on TLV ${n}`);e[n]=e[n]||[],e[n].push(o)}return e}function Co(n){return $o("nsec",n)}function Ho(n){return $o("npub",n)}function _o(n){return $o("note",n)}function Oo(n,e){let t=ue.toWords(e);return ue.encode(n,t,5e3)}function $o(n,e){return Oo(n,p(e))}function No(n){return Oo("nprofile",Ko({0:[p(n.pubkey)],1:(n.relays||[]).map((n=>io.encode(n)))}))}function Ro(n){return Oo("nevent",Ko({0:[p(n.id)],1:(n.relays||[]).map((n=>io.encode(n))),2:n.author?[p(n.author)]:[]}))}function jo(n){let e=new ArrayBuffer(4);return new DataView(e).setUint32(0,n.kind,!1),Oo("naddr",Ko({0:[io.encode(n.identifier)],1:(n.relays||[]).map((n=>io.encode(n))),2:[p(n.pubkey)],3:[new Uint8Array(e)]}))}function To(n){return Oo("nrelay",Ko({0:[io.encode(n)]}))}function Ko(n){let e=[];return Object.entries(n).forEach((([n,t])=>{t.forEach((t=>{let r=new Uint8Array(t.length+2);r.set([parseInt(n)],0),r.set([t.length],1),r.set(t,2),e.push(r)}))})),y(...e)}var Po={};async function Fo(n,e,t){const r=qo(Ln.getSharedSecret(n,"02"+e));let o=Uint8Array.from(m(16)),i=io.encode(t),s=await crypto.subtle.importKey("raw",r,{name:"AES-CBC"},!1,["encrypt"]),a=await crypto.subtle.encrypt({name:"AES-CBC",iv:o},s,i);return`${te.encode(new Uint8Array(a))}?iv=${te.encode(new Uint8Array(o.buffer))}`}async function zo(n,e,t){let[r,o]=t.split("?iv="),i=qo(Ln.getSharedSecret(n,"02"+e)),s=await crypto.subtle.importKey("raw",i,{name:"AES-CBC"},!1,["decrypt"]),a=te.decode(r),c=te.decode(o),u=await crypto.subtle.decrypt({name:"AES-CBC",iv:c},s,a);return oo.decode(u)}function qo(n){return n.slice(1,33)}eo(Po,{decrypt:()=>zo,encrypt:()=>Fo}),"undefined"!=typeof crypto&&!crypto.subtle&&crypto.webcrypto&&(crypto.subtle=crypto.webcrypto.subtle),eo({},{NIP05_REGEX:()=>Vo,queryProfile:()=>Wo,searchDomain:()=>Mo,useFetchImplementation:()=>Go});var Do,Vo=/^(?:([\w.+-]+)@)?([\w.-]+)$/;try{Do=fetch}catch{}function Go(n){Do=n}async function Mo(n,e=""){try{return(await(await Do(`https://${n}/.well-known/nostr.json?name=${e}`)).json()).names}catch(n){return{}}}async function Wo(n){const e=n.match(Vo);if(!e)return null;const[t,r="_",o]=e;try{const n=await Do(`https://${o}/.well-known/nostr.json?name=${r}`),{names:e,relays:t}=function(n){const e={names:{}};for(const[t,r]of Object.entries(n.names))"string"==typeof t&&"string"==typeof r&&(e.names[t]=r);if(n.relays){e.relays={};for(const[t,r]of Object.entries(n.relays))"string"==typeof t&&Array.isArray(r)&&(e.relays[t]=r.filter((n=>"string"==typeof n)))}return e}(await n.json()),i=e[r];return i?{pubkey:i,relays:t?.[i]}:null}catch(n){return null}}function Zo(n,e){let t=jr.fromMasterSeed(Bt(n,e)).derive("m/44'/1237'/0'/0/0").privateKey;if(!t)throw new Error("could not derive private key");return d(t)}function Jo(){return function(n,e=128){if(ye.number(e),e%32!=0||e>256)throw new TypeError("Invalid entropy");return function(n,e){return Et(n),kt(e).encode(n).join((n=>"„ÅÇ„ÅÑ„Åì„Åè„Åó„Çì"===n[0])(e)?"„ÄÄ":" ")}(function(n=32){if(we&&"function"==typeof we.getRandomValues)return we.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}(e/8),n)}(le)}function Yo(n){return function(n,e){try{!function(n,e){const{words:t}=vt(n);Et(kt(e).decode(t))}(n,e)}catch(n){return!1}return!0}(n,le)}function Qo(n){const e={reply:void 0,root:void 0,mentions:[],profiles:[]},t=[];for(const r of n.tags)"e"===r[0]&&r[1]&&t.push(r),"p"===r[0]&&r[1]&&e.profiles.push({pubkey:r[1],relays:r[2]?[r[2]]:[]});for(let n=0;n<t.length;n++){const r=t[n],[o,i,s,a]=r,c={id:i,relays:s?[s]:[]},u=0===n,l=n===t.length-1;"root"!==a?"reply"!==a?"mention"!==a?u?e.root=c:l?e.reply=c:e.mentions.push(c):e.mentions.push(c):e.reply=c:e.root=c}return e}function Xo(n){let e=0;for(let t=0;t<n.length;t++){const r=parseInt(n[t],16);if(0!==r){e+=Math.clz32(r)-28;break}e+=4}return e}function ni(n,e,t,r){return fo({kind:6,tags:[...n.tags??[],["e",e.id,t],["p",e.pubkey]],content:""===n.content?"":JSON.stringify(e),created_at:n.created_at},r)}function ei(n){if(6!==n.kind)return;let e,t;for(let r=n.tags.length-1;r>=0&&(void 0===e||void 0===t);r--){const o=n.tags[r];o.length>=2&&("e"===o[0]&&void 0===e?e=o:"p"===o[0]&&void 0===t&&(t=o))}return void 0!==e?{id:e[1],relays:[e[2],t?.[2]].filter((n=>"string"==typeof n)),author:t?.[1]}:void 0}function ti(n,{skipVerification:e}={}){const t=ei(n);if(void 0===t||""===n.content)return;let r;try{r=JSON.parse(n.content)}catch(n){return}return r.id===t.id&&(e||yo(r))?r:void 0}eo({},{generateSeedWords:()=>Jo,privateKeyFromSeedWords:()=>Zo,validateWords:()=>Yo}),eo({},{parse:()=>Qo}),eo({},{getPow:()=>Xo}),eo({},{finishRepostEvent:()=>ni,getRepostedEvent:()=>ti,getRepostedEventPointer:()=>ei}),eo({},{NOSTR_URI_REGEX:()=>ri,parse:()=>ii,test:()=>oi});var ri=new RegExp(`nostr:(${Lo.source})`);function oi(n){return"string"==typeof n&&new RegExp(`^${ri.source}$`).test(n)}function ii(n){const e=n.match(new RegExp(`^${ri.source}$`));if(!e)throw new Error(`Invalid Nostr URI: ${n}`);return{uri:e[0],value:e[1],decoded:Uo(e[1])}}function si(n,e,t){const r=e.tags.filter((n=>n.length>=2&&("e"===n[0]||"p"===n[0])));return fo({...n,kind:7,tags:[...n.tags??[],...r,["e",e.id],["p",e.pubkey]],content:n.content??"+"},t)}function ai(n){if(7!==n.kind)return;let e,t;for(let r=n.tags.length-1;r>=0&&(void 0===e||void 0===t);r--){const o=n.tags[r];o.length>=2&&("e"===o[0]&&void 0===e?e=o:"p"===o[0]&&void 0===t&&(t=o))}return void 0!==e&&void 0!==t?{id:e[1],relays:[e[2],t[2]].filter((n=>void 0!==n)),author:t[1]}:void 0}function ci(n,e){let t=[];(e.kind||-1)>=0&&t.push(`kind=${e.kind}`),e.until&&t.push(`created_at<${e.until}`),e.since&&t.push(`created_at>${e.since}`);let r=t.join("&");if(""===r)throw new Error("refusing to create a delegation without any conditions");let o=L(io.encode(`nostr:delegation:${e.pubkey}:${r}`)),i=d(qn.sign(o,n));return{from:ro(n),to:e.pubkey,cond:r,sig:i}}function ui(n){let e=n.tags.find((n=>"delegation"===n[0]&&n.length>=4));if(!e)return null;let t=e[1],r=e[2],o=e[3],i=r.split("&");for(let e=0;e<i.length;e++){let[t,r,o]=i[e].split(/\b/);if(!("kind"===t&&"="===r&&n.kind===parseInt(o)||"created_at"===t&&"<"===r&&n.created_at<parseInt(o)||"created_at"===t&&">"===r&&n.created_at>parseInt(o)))return null}let s=L(io.encode(`nostr:delegation:${n.pubkey}:${r}`));return qn.verify(o,s,t)?t:null}eo({},{finishReactionEvent:()=>si,getReactedEventPointer:()=>ai}),eo({},{createDelegation:()=>ci,getDelegator:()=>ui}),eo({},{matchAll:()=>hi,regex:()=>li,replaceAll:()=>fi});var li=()=>new RegExp(`\\b${ri.source}\\b`,"g");function*hi(n){const e=n.matchAll(li());for(const n of e)try{const[e,t]=n;yield{uri:e,value:t,decoded:Uo(t),start:n.index,end:n.index+e.length}}catch(n){}}function fi(n,e){return n.replaceAll(li(),((n,t)=>e({uri:n,value:t,decoded:Uo(t)})))}eo({},{channelCreateEvent:()=>pi,channelHideMessageEvent:()=>wi,channelMessageEvent:()=>yi,channelMetadataEvent:()=>gi,channelMuteUserEvent:()=>bi});var di,pi=(n,e)=>{let t;if("object"==typeof n.content)t=JSON.stringify(n.content);else{if("string"!=typeof n.content)return;t=n.content}return fo({kind:40,tags:[...n.tags??[]],content:t,created_at:n.created_at},e)},gi=(n,e)=>{let t;if("object"==typeof n.content)t=JSON.stringify(n.content);else{if("string"!=typeof n.content)return;t=n.content}return fo({kind:41,tags:[["e",n.channel_create_event_id],...n.tags??[]],content:t,created_at:n.created_at},e)},yi=(n,e)=>{const t=[["e",n.channel_create_event_id,n.relay_url,"root"]];return n.reply_to_channel_message_event_id&&t.push(["e",n.reply_to_channel_message_event_id,n.relay_url,"reply"]),fo({kind:42,tags:[...t,...n.tags??[]],content:n.content,created_at:n.created_at},e)},wi=(n,e)=>{let t;if("object"==typeof n.content)t=JSON.stringify(n.content);else{if("string"!=typeof n.content)return;t=n.content}return fo({kind:43,tags:[["e",n.channel_message_event_id],...n.tags??[]],content:t,created_at:n.created_at},e)},bi=(n,e)=>{let t;if("object"==typeof n.content)t=JSON.stringify(n.content);else{if("string"!=typeof n.content)return;t=n.content}return fo({kind:44,tags:[["p",n.pubkey_to_mute],...n.tags??[]],content:t,created_at:n.created_at},e)};eo({},{useFetchImplementation:()=>mi,validateGithub:()=>vi});try{di=fetch}catch{}function mi(n){di=n}async function vi(n,e,t){try{return await(await di(`https://gist.github.com/${e}/${t}/raw`)).text()===`Verifying that I control the following Nostr public key: ${n}`}catch(n){return!1}}eo({},{authenticate:()=>Ei});var Ei=async({challenge:n,relay:e,sign:t})=>{const r={kind:22242,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e.url],["challenge",n]],content:""};return e.auth(await t(r))};eo({},{decrypt:()=>Bi,encrypt:()=>Ai,getSharedSecret:()=>ki});var xi,ki=(n,e)=>L(Ln.getSharedSecret(n,"02"+e).subarray(1,33));function Ai(n,e,t=1){if(1!==t)throw new Error("NIP44: unknown encryption version");const r=m(24),o=io.encode(e),i=Xr(n,r,o),s=new Uint8Array(25+i.length);return s.set([t],0),s.set(r,1),s.set(i,25),te.encode(s)}function Bi(n,e){let t=te.decode(e);if(1!==t[0])throw new Error(`NIP44: unknown encryption version: ${t[0]}`);const r=t.slice(1,25),o=t.slice(25),i=Xr(n,r,o);return oo.decode(i)}eo({},{getZapEndpoint:()=>Li,makeZapReceipt:()=>Ci,makeZapRequest:()=>Ui,useFetchImplementation:()=>Ii,validateZapRequest:()=>Si});try{xi=fetch}catch{}function Ii(n){xi=n}async function Li(n){try{let e="",{lud06:t,lud16:r}=JSON.parse(n.content);if(t){let{words:n}=ue.decode(t,1e3),r=ue.fromWords(n);e=oo.decode(r)}else{if(!r)return null;{let[n,t]=r.split("@");e=`https://${t}/.well-known/lnurlp/${n}`}}let o=await xi(e),i=await o.json();if(i.allowsNostr&&i.nostrPubkey)return i.callback}catch(n){}return null}function Ui({profile:n,event:e,amount:t,relays:r,comment:o=""}){if(!t)throw new Error("amount not given");if(!n)throw new Error("profile not given");let i={kind:9734,created_at:Math.round(Date.now()/1e3),content:o,tags:[["p",n],["amount",t.toString()],["relays",...r]]};return e&&i.tags.push(["e",e]),i}function Si(n){let e;try{e=JSON.parse(n)}catch(n){return"Invalid zap request JSON."}if(!go(e))return"Zap request is not a valid Nostr event.";if(!yo(e))return"Invalid signature on zap request.";let t=e.tags.find((([n,e])=>"p"===n&&e));if(!t)return"Zap request doesn't have a 'p' tag.";if(!t[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let r=e.tags.find((([n,e])=>"e"===n&&e));return r&&!r[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":e.tags.find((([n,e])=>"relays"===n&&e))?null:"Zap request doesn't have a 'relays' tag."}function Ci({zapRequest:n,preimage:e,bolt11:t,paidAt:r}){let o=JSON.parse(n).tags.filter((([n])=>"e"===n||"p"===n||"a"===n)),i={kind:9735,created_at:Math.round(r.getTime()/1e3),content:"",tags:[...o,["bolt11",t],["description",n]]};return e&&i.tags.push(["preimage",e]),i}eo({},{getToken:()=>_i,unpackEventFromToken:()=>$i,validateEvent:()=>Ni,validateToken:()=>Oi});var Hi="Nostr ";async function _i(n,e,t,r=!1){if(!n||!e)throw new Error("Missing loginUrl or httpMethod");const o=function(n=255){return{kind:n,content:"",tags:[],created_at:0}}(27235);o.tags=[["u",n],["method",e]],o.created_at=Math.round((new Date).getTime()/1e3);const i=await t(o);return(r?Hi:"")+te.encode(io.encode(JSON.stringify(i)))}async function Oi(n,e,t){const r=await $i(n).catch((n=>{throw n}));return await Ni(r,e,t).catch((n=>{throw n}))}async function $i(n){if(!n)throw new Error("Missing token");n=n.replace(Hi,"");const e=oo.decode(te.decode(n));if(!e||0===e.length||!e.startsWith("{"))throw new Error("Invalid token");return JSON.parse(e)}async function Ni(n,e,t){if(!n)throw new Error("Invalid nostr event");if(!yo(n))throw new Error("Invalid nostr event, signature invalid");if(27235!==n.kind)throw new Error("Invalid nostr event, kind invalid");if(!n.created_at)throw new Error("Invalid nostr event, created_at invalid");if(Math.round((new Date).getTime()/1e3)-n.created_at>60)throw new Error("Invalid nostr event, expired");const r=n.tags.find((n=>"u"===n[0]));if(1!==r?.length&&r?.[1]!==e)throw new Error("Invalid nostr event, url tag invalid");const o=n.tags.find((n=>"method"===n[0]));if(1!==o?.length&&o?.[1].toLowerCase()!==t.toLowerCase())throw new Error("Invalid nostr event, method tag invalid");return!0}}}]);