/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).tf=e.tf||{})}(this,(function(e){"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(e,t){return e(t={exports:{}},t.exports),t.exports}var r=function(e){return e&&e.Math==Math&&e},a=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||Function("return this")(),i=function(e){try{return!!e()}catch(e){return!0}},o=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),s={}.propertyIsEnumerable,u=Object.getOwnPropertyDescriptor,l=u&&!s.call({1:2},1)?function(e){var t=u(this,e);return!!t&&t.enumerable}:s,c={f:l},p=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},f={}.toString,h=function(e){return f.call(e).slice(8,-1)},d="".split,m=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==h(e)?d.call(e,""):Object(e)}:Object,v=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},g=function(e){return m(v(e))},y=function(e){return"object"==typeof e?null!==e:"function"==typeof e},b=function(e,t){if(!y(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!y(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!y(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!y(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},x={}.hasOwnProperty,w=function(e,t){return x.call(e,t)},k=a.document,N=y(k)&&y(k.createElement),I=function(e){return N?k.createElement(e):{}},S=!o&&!i((function(){return 7!=Object.defineProperty(I("div"),"a",{get:function(){return 7}}).a})),T=Object.getOwnPropertyDescriptor,C={f:o?T:function(e,t){if(e=g(e),t=b(t,!0),S)try{return T(e,t)}catch(e){}if(w(e,t))return p(!c.f.call(e,t),e[t])}},E=function(e){if(!y(e))throw TypeError(String(e)+" is not an object");return e},R=Object.defineProperty,A={f:o?R:function(e,t,n){if(E(e),t=b(t,!0),E(n),S)try{return R(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},F=o?function(e,t,n){return A.f(e,t,p(1,n))}:function(e,t,n){return e[t]=n,e},_=function(e,t){try{F(a,e,t)}catch(n){a[e]=t}return t},D="__core-js_shared__",O=a[D]||_(D,{}),M=Function.toString;"function"!=typeof O.inspectSource&&(O.inspectSource=function(e){return M.call(e)});var L,z,P,B=O.inspectSource,W=a.WeakMap,V="function"==typeof W&&/native code/.test(B(W)),U=n((function(e){(e.exports=function(e,t){return O[e]||(O[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),G=0,j=Math.random(),H=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++G+j).toString(36)},q=U("keys"),K=function(e){return q[e]||(q[e]=H(e))},X={},Y=a.WeakMap;if(V){var J=new Y,Z=J.get,Q=J.has,$=J.set;L=function(e,t){return $.call(J,e,t),t},z=function(e){return Z.call(J,e)||{}},P=function(e){return Q.call(J,e)}}else{var ee=K("state");X[ee]=!0,L=function(e,t){return F(e,ee,t),t},z=function(e){return w(e,ee)?e[ee]:{}},P=function(e){return w(e,ee)}}var te,ne={set:L,get:z,has:P,enforce:function(e){return P(e)?z(e):L(e,{})},getterFor:function(e){return function(t){var n;if(!y(t)||(n=z(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},re=n((function(e){var t=ne.get,n=ne.enforce,r=String(String).split("String");(e.exports=function(e,t,i,o){var s=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,l=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof t||w(i,"name")||F(i,"name",t),n(i).source=r.join("string"==typeof t?t:"")),e!==a?(s?!l&&e[t]&&(u=!0):delete e[t],u?e[t]=i:F(e,t,i)):u?e[t]=i:_(t,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||B(this)}))})),ae=a,ie=function(e){return"function"==typeof e?e:void 0},oe=function(e,t){return arguments.length<2?ie(ae[e])||ie(a[e]):ae[e]&&ae[e][t]||a[e]&&a[e][t]},se=Math.ceil,ue=Math.floor,le=function(e){return isNaN(e=+e)?0:(e>0?ue:se)(e)},ce=Math.min,pe=function(e){return e>0?ce(le(e),9007199254740991):0},fe=Math.max,he=Math.min,de=function(e,t){var n=le(e);return n<0?fe(n+t,0):he(n,t)},me=function(e){return function(t,n,r){var a,i=g(t),o=pe(i.length),s=de(r,o);if(e&&n!=n){for(;o>s;)if((a=i[s++])!=a)return!0}else for(;o>s;s++)if((e||s in i)&&i[s]===n)return e||s||0;return!e&&-1}},ve={includes:me(!0),indexOf:me(!1)},ge=ve.indexOf,ye=function(e,t){var n,r=g(e),a=0,i=[];for(n in r)!w(X,n)&&w(r,n)&&i.push(n);for(;t.length>a;)w(r,n=t[a++])&&(~ge(i,n)||i.push(n));return i},be=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],xe=be.concat("length","prototype"),we={f:Object.getOwnPropertyNames||function(e){return ye(e,xe)}},ke={f:Object.getOwnPropertySymbols},Ne=oe("Reflect","ownKeys")||function(e){var t=we.f(E(e)),n=ke.f;return n?t.concat(n(e)):t},Ie=function(e,t){for(var n=Ne(t),r=A.f,a=C.f,i=0;i<n.length;i++){var o=n[i];w(e,o)||r(e,o,a(t,o))}},Se=/#|\.prototype\./,Te=function(e,t){var n=Ee[Ce(e)];return n==Ae||n!=Re&&("function"==typeof t?i(t):!!t)},Ce=Te.normalize=function(e){return String(e).replace(Se,".").toLowerCase()},Ee=Te.data={},Re=Te.NATIVE="N",Ae=Te.POLYFILL="P",Fe=Te,_e=C.f,De=function(e,t){var n,r,i,o,s,u=e.target,l=e.global,c=e.stat;if(n=l?a:c?a[u]||_(u,{}):(a[u]||{}).prototype)for(r in t){if(o=t[r],i=e.noTargetGet?(s=_e(n,r))&&s.value:n[r],!Fe(l?r:u+(c?".":"#")+r,e.forced)&&void 0!==i){if(typeof o==typeof i)continue;Ie(o,i)}(e.sham||i&&i.sham)&&F(o,"sham",!0),re(n,r,o,e)}},Oe=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())})),Me=Oe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Le=Array.isArray||function(e){return"Array"==h(e)},ze=function(e){return Object(v(e))},Pe=Object.keys||function(e){return ye(e,be)},Be=o?Object.defineProperties:function(e,t){E(e);for(var n,r=Pe(t),a=r.length,i=0;a>i;)A.f(e,n=r[i++],t[n]);return e},We=oe("document","documentElement"),Ve="prototype",Ue="script",Ge=K("IE_PROTO"),je=function(){},He=function(e){return"<"+Ue+">"+e+"</"+Ue+">"},qe=function(){try{te=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t,n;qe=te?function(e){e.write(He("")),e.close();var t=e.parentWindow.Object;return e=null,t}(te):(t=I("iframe"),n="java"+Ue+":",t.style.display="none",We.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(He("document.F=Object")),e.close(),e.F);for(var r=be.length;r--;)delete qe[Ve][be[r]];return qe()};X[Ge]=!0;var Ke=Object.create||function(e,t){var n;return null!==e?(je[Ve]=E(e),n=new je,je[Ve]=null,n[Ge]=e):n=qe(),void 0===t?n:Be(n,t)},Xe=we.f,Ye={}.toString,Je="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Ze={f:function(e){return Je&&"[object Window]"==Ye.call(e)?function(e){try{return Xe(e)}catch(e){return Je.slice()}}(e):Xe(g(e))}},Qe=U("wks"),$e=a.Symbol,et=Me?$e:$e&&$e.withoutSetter||H,tt=function(e){return w(Qe,e)||(Oe&&w($e,e)?Qe[e]=$e[e]:Qe[e]=et("Symbol."+e)),Qe[e]},nt={f:tt},rt=A.f,at=function(e){var t=ae.Symbol||(ae.Symbol={});w(t,e)||rt(t,e,{value:nt.f(e)})},it=A.f,ot=tt("toStringTag"),st=function(e,t,n){e&&!w(e=n?e:e.prototype,ot)&&it(e,ot,{configurable:!0,value:t})},ut=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},lt=function(e,t,n){if(ut(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,a){return e.call(t,n,r,a)}}return function(){return e.apply(t,arguments)}},ct=tt("species"),pt=function(e,t){var n;return Le(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Le(n.prototype)?y(n)&&null===(n=n[ct])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},ft=[].push,ht=function(e){var t=1==e,n=2==e,r=3==e,a=4==e,i=6==e,o=5==e||i;return function(s,u,l,c){for(var p,f,h=ze(s),d=m(h),v=lt(u,l,3),g=pe(d.length),y=0,b=c||pt,x=t?b(s,g):n?b(s,0):void 0;g>y;y++)if((o||y in d)&&(f=v(p=d[y],y,h),e))if(t)x[y]=f;else if(f)switch(e){case 3:return!0;case 5:return p;case 6:return y;case 2:ft.call(x,p)}else if(a)return!1;return i?-1:r||a?a:x}},dt={forEach:ht(0),map:ht(1),filter:ht(2),some:ht(3),every:ht(4),find:ht(5),findIndex:ht(6)},mt=dt.forEach,vt=K("hidden"),gt="Symbol",yt="prototype",bt=tt("toPrimitive"),xt=ne.set,wt=ne.getterFor(gt),kt=Object[yt],Nt=a.Symbol,It=oe("JSON","stringify"),St=C.f,Tt=A.f,Ct=Ze.f,Et=c.f,Rt=U("symbols"),At=U("op-symbols"),Ft=U("string-to-symbol-registry"),_t=U("symbol-to-string-registry"),Dt=U("wks"),Ot=a.QObject,Mt=!Ot||!Ot[yt]||!Ot[yt].findChild,Lt=o&&i((function(){return 7!=Ke(Tt({},"a",{get:function(){return Tt(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=St(kt,t);r&&delete kt[t],Tt(e,t,n),r&&e!==kt&&Tt(kt,t,r)}:Tt,zt=function(e,t){var n=Rt[e]=Ke(Nt[yt]);return xt(n,{type:gt,tag:e,description:t}),o||(n.description=t),n},Pt=Me?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Nt},Bt=function(e,t,n){e===kt&&Bt(At,t,n),E(e);var r=b(t,!0);return E(n),w(Rt,r)?(n.enumerable?(w(e,vt)&&e[vt][r]&&(e[vt][r]=!1),n=Ke(n,{enumerable:p(0,!1)})):(w(e,vt)||Tt(e,vt,p(1,{})),e[vt][r]=!0),Lt(e,r,n)):Tt(e,r,n)},Wt=function(e,t){E(e);var n=g(t),r=Pe(n).concat(jt(n));return mt(r,(function(t){o&&!Vt.call(n,t)||Bt(e,t,n[t])})),e},Vt=function(e){var t=b(e,!0),n=Et.call(this,t);return!(this===kt&&w(Rt,t)&&!w(At,t))&&(!(n||!w(this,t)||!w(Rt,t)||w(this,vt)&&this[vt][t])||n)},Ut=function(e,t){var n=g(e),r=b(t,!0);if(n!==kt||!w(Rt,r)||w(At,r)){var a=St(n,r);return!a||!w(Rt,r)||w(n,vt)&&n[vt][r]||(a.enumerable=!0),a}},Gt=function(e){var t=Ct(g(e)),n=[];return mt(t,(function(e){w(Rt,e)||w(X,e)||n.push(e)})),n},jt=function(e){var t=e===kt,n=Ct(t?At:g(e)),r=[];return mt(n,(function(e){!w(Rt,e)||t&&!w(kt,e)||r.push(Rt[e])})),r};if(Oe||(Nt=function(){if(this instanceof Nt)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=H(e);return o&&Mt&&Lt(kt,t,{configurable:!0,set:function e(n){this===kt&&e.call(At,n),w(this,vt)&&w(this[vt],t)&&(this[vt][t]=!1),Lt(this,t,p(1,n))}}),zt(t,e)},re(Nt[yt],"toString",(function(){return wt(this).tag})),re(Nt,"withoutSetter",(function(e){return zt(H(e),e)})),c.f=Vt,A.f=Bt,C.f=Ut,we.f=Ze.f=Gt,ke.f=jt,nt.f=function(e){return zt(tt(e),e)},o&&(Tt(Nt[yt],"description",{configurable:!0,get:function(){return wt(this).description}}),re(kt,"propertyIsEnumerable",Vt,{unsafe:!0}))),De({global:!0,wrap:!0,forced:!Oe,sham:!Oe},{Symbol:Nt}),mt(Pe(Dt),(function(e){at(e)})),De({target:gt,stat:!0,forced:!Oe},{for:function(e){var t=String(e);if(w(Ft,t))return Ft[t];var n=Nt(t);return Ft[t]=n,_t[n]=t,n},keyFor:function(e){if(!Pt(e))throw TypeError(e+" is not a symbol");if(w(_t,e))return _t[e]},useSetter:function(){Mt=!0},useSimple:function(){Mt=!1}}),De({target:"Object",stat:!0,forced:!Oe,sham:!o},{create:function(e,t){return void 0===t?Ke(e):Wt(Ke(e),t)},defineProperty:Bt,defineProperties:Wt,getOwnPropertyDescriptor:Ut}),De({target:"Object",stat:!0,forced:!Oe},{getOwnPropertyNames:Gt,getOwnPropertySymbols:jt}),De({target:"Object",stat:!0,forced:i((function(){ke.f(1)}))},{getOwnPropertySymbols:function(e){return ke.f(ze(e))}}),It){var Ht=!Oe||i((function(){var e=Nt();return"[null]"!=It([e])||"{}"!=It({a:e})||"{}"!=It(Object(e))}));De({target:"JSON",stat:!0,forced:Ht},{stringify:function(e,t,n){for(var r,a=[e],i=1;arguments.length>i;)a.push(arguments[i++]);if(r=t,(y(t)||void 0!==e)&&!Pt(e))return Le(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Pt(t))return t}),a[1]=t,It.apply(null,a)}})}Nt[yt][bt]||F(Nt[yt],bt,Nt[yt].valueOf),st(Nt,gt),X[vt]=!0,at("asyncIterator");var qt=A.f,Kt=a.Symbol;if(o&&"function"==typeof Kt&&(!("description"in Kt.prototype)||void 0!==Kt().description)){var Xt={},Yt=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof Yt?new Kt(e):void 0===e?Kt():Kt(e);return""===e&&(Xt[t]=!0),t};Ie(Yt,Kt);var Jt=Yt.prototype=Kt.prototype;Jt.constructor=Yt;var Zt=Jt.toString,Qt="Symbol(test)"==String(Kt("test")),$t=/^Symbol\((.*)\)[^)]+$/;qt(Jt,"description",{configurable:!0,get:function(){var e=y(this)?this.valueOf():this,t=Zt.call(e);if(w(Xt,e))return"";var n=Qt?t.slice(7,-1):t.replace($t,"$1");return""===n?void 0:n}}),De({global:!0,forced:!0},{Symbol:Yt})}at("hasInstance"),at("isConcatSpreadable"),at("iterator"),at("match"),at("matchAll"),at("replace"),at("search"),at("species"),at("split"),at("toPrimitive"),at("toStringTag"),at("unscopables");var en=Object.assign,tn=Object.defineProperty,nn=!en||i((function(){if(o&&1!==en({b:1},en(tn({},"a",{enumerable:!0,get:function(){tn(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=en({},e)[n]||Pe(en({},t)).join("")!=r}))?function(e,t){for(var n=ze(e),r=arguments.length,a=1,i=ke.f,s=c.f;r>a;)for(var u,l=m(arguments[a++]),p=i?Pe(l).concat(i(l)):Pe(l),f=p.length,h=0;f>h;)u=p[h++],o&&!s.call(l,u)||(n[u]=l[u]);return n}:en;De({target:"Object",stat:!0,forced:Object.assign!==nn},{assign:nn}),De({target:"Object",stat:!0,sham:!o},{create:Ke}),De({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:A.f}),De({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperties:Be});var rn=c.f,an=function(e){return function(t){for(var n,r=g(t),a=Pe(r),i=a.length,s=0,u=[];i>s;)n=a[s++],o&&!rn.call(r,n)||u.push(e?[n,r[n]]:r[n]);return u}},on={entries:an(!0),values:an(!1)},sn=on.entries;De({target:"Object",stat:!0},{entries:function(e){return sn(e)}});var un=!i((function(){return Object.isExtensible(Object.preventExtensions({}))})),ln=n((function(e){var t=A.f,n=H("meta"),r=0,a=Object.isExtensible||function(){return!0},i=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},o=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!y(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!w(e,n)){if(!a(e))return"F";if(!t)return"E";i(e)}return e[n].objectID},getWeakData:function(e,t){if(!w(e,n)){if(!a(e))return!0;if(!t)return!1;i(e)}return e[n].weakData},onFreeze:function(e){return un&&o.REQUIRED&&a(e)&&!w(e,n)&&i(e),e}};X[n]=!0})),cn=(ln.REQUIRED,ln.fastKey,ln.getWeakData,ln.onFreeze,ln.onFreeze),pn=Object.freeze,fn=i((function(){pn(1)}));De({target:"Object",stat:!0,forced:fn,sham:!un},{freeze:function(e){return pn&&y(e)?pn(cn(e)):e}});var hn={},dn=tt("iterator"),mn=Array.prototype,vn=function(e){return void 0!==e&&(hn.Array===e||mn[dn]===e)},gn={};gn[tt("toStringTag")]="z";var yn="[object z]"===String(gn),bn=tt("toStringTag"),xn="Arguments"==h(function(){return arguments}()),wn=yn?h:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),bn))?n:xn?h(t):"Object"==(r=h(t))&&"function"==typeof t.callee?"Arguments":r},kn=tt("iterator"),Nn=function(e){if(null!=e)return e[kn]||e["@@iterator"]||hn[wn(e)]},In=function(e,t,n,r){try{return r?t(E(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&E(a.call(e)),t}},Sn=n((function(e){var t=function(e,t){this.stopped=e,this.result=t},n=e.exports=function(e,n,r,a,i){var o,s,u,l,c,p,f,h=lt(n,r,a?2:1);if(i)o=e;else{if("function"!=typeof(s=Nn(e)))throw TypeError("Target is not iterable");if(vn(s)){for(u=0,l=pe(e.length);l>u;u++)if((c=a?h(E(f=e[u])[0],f[1]):h(e[u]))&&c instanceof t)return c;return new t(!1)}o=s.call(e)}for(p=o.next;!(f=p.call(o)).done;)if("object"==typeof(c=In(o,h,f.value,a))&&c&&c instanceof t)return c;return new t(!1)};n.stop=function(e){return new t(!0,e)}})),Tn=function(e,t,n){var r=b(t);r in e?A.f(e,r,p(0,n)):e[r]=n};De({target:"Object",stat:!0},{fromEntries:function(e){var t={};return Sn(e,(function(e,n){Tn(t,e,n)}),void 0,!0),t}});var Cn=C.f,En=i((function(){Cn(1)}));De({target:"Object",stat:!0,forced:!o||En,sham:!o},{getOwnPropertyDescriptor:function(e,t){return Cn(g(e),t)}}),De({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var t,n,r=g(e),a=C.f,i=Ne(r),o={},s=0;i.length>s;)void 0!==(n=a(r,t=i[s++]))&&Tn(o,t,n);return o}});var Rn=Ze.f,An=i((function(){return!Object.getOwnPropertyNames(1)}));De({target:"Object",stat:!0,forced:An},{getOwnPropertyNames:Rn});var Fn=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),_n=K("IE_PROTO"),Dn=Object.prototype,On=Fn?Object.getPrototypeOf:function(e){return e=ze(e),w(e,_n)?e[_n]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Dn:null},Mn=i((function(){On(1)}));De({target:"Object",stat:!0,forced:Mn,sham:!Fn},{getPrototypeOf:function(e){return On(ze(e))}});var Ln=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};De({target:"Object",stat:!0},{is:Ln});var zn=Object.isExtensible,Pn=i((function(){zn(1)}));De({target:"Object",stat:!0,forced:Pn},{isExtensible:function(e){return!!y(e)&&(!zn||zn(e))}});var Bn=Object.isFrozen,Wn=i((function(){Bn(1)}));De({target:"Object",stat:!0,forced:Wn},{isFrozen:function(e){return!y(e)||!!Bn&&Bn(e)}});var Vn=Object.isSealed,Un=i((function(){Vn(1)}));De({target:"Object",stat:!0,forced:Un},{isSealed:function(e){return!y(e)||!!Vn&&Vn(e)}});var Gn=i((function(){Pe(1)}));De({target:"Object",stat:!0,forced:Gn},{keys:function(e){return Pe(ze(e))}});var jn=ln.onFreeze,Hn=Object.preventExtensions,qn=i((function(){Hn(1)}));De({target:"Object",stat:!0,forced:qn,sham:!un},{preventExtensions:function(e){return Hn&&y(e)?Hn(jn(e)):e}});var Kn=ln.onFreeze,Xn=Object.seal,Yn=i((function(){Xn(1)}));De({target:"Object",stat:!0,forced:Yn,sham:!un},{seal:function(e){return Xn&&y(e)?Xn(Kn(e)):e}});var Jn=function(e){if(!y(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e},Zn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return E(n),Jn(r),t?e.call(n,r):n.__proto__=r,n}}():void 0);De({target:"Object",stat:!0},{setPrototypeOf:Zn});var Qn=on.values;De({target:"Object",stat:!0},{values:function(e){return Qn(e)}});var $n=yn?{}.toString:function(){return"[object "+wn(this)+"]"};yn||re(Object.prototype,"toString",$n,{unsafe:!0});var er=!i((function(){var e=Math.random();__defineSetter__.call(null,e,(function(){})),delete a[e]}));o&&De({target:"Object",proto:!0,forced:er},{__defineGetter__:function(e,t){A.f(ze(this),e,{get:ut(t),enumerable:!0,configurable:!0})}}),o&&De({target:"Object",proto:!0,forced:er},{__defineSetter__:function(e,t){A.f(ze(this),e,{set:ut(t),enumerable:!0,configurable:!0})}});var tr=C.f;o&&De({target:"Object",proto:!0,forced:er},{__lookupGetter__:function(e){var t,n=ze(this),r=b(e,!0);do{if(t=tr(n,r))return t.get}while(n=On(n))}});var nr=C.f;o&&De({target:"Object",proto:!0,forced:er},{__lookupSetter__:function(e){var t,n=ze(this),r=b(e,!0);do{if(t=nr(n,r))return t.set}while(n=On(n))}});var rr=[].slice,ar={},ir=Function.bind||function(e){var t=ut(this),n=rr.call(arguments,1),r=function(){var a=n.concat(rr.call(arguments));return this instanceof r?function(e,t,n){if(!(t in ar)){for(var r=[],a=0;a<t;a++)r[a]="a["+a+"]";ar[t]=Function("C,a","return new C("+r.join(",")+")")}return ar[t](e,n)}(t,a.length,a):t.apply(e,a)};return y(t.prototype)&&(r.prototype=t.prototype),r};De({target:"Function",proto:!0},{bind:ir});var or=A.f,sr=Function.prototype,ur=sr.toString,lr=/^\s*function ([^ (]*)/,cr="name";o&&!(cr in sr)&&or(sr,cr,{configurable:!0,get:function(){try{return ur.call(this).match(lr)[1]}catch(e){return""}}});var pr=tt("hasInstance"),fr=Function.prototype;pr in fr||A.f(fr,pr,{value:function(e){if("function"!=typeof this||!y(e))return!1;if(!y(this.prototype))return e instanceof this;for(;e=On(e);)if(this.prototype===e)return!0;return!1}}),De({global:!0},{globalThis:a});var hr=function(e){var t,n,r,a,i,o,s=ze(e),u="function"==typeof this?this:Array,l=arguments.length,c=l>1?arguments[1]:void 0,p=void 0!==c,f=Nn(s),h=0;if(p&&(c=lt(c,l>2?arguments[2]:void 0,2)),null==f||u==Array&&vn(f))for(n=new u(t=pe(s.length));t>h;h++)o=p?c(s[h],h):s[h],Tn(n,h,o);else for(i=(a=f.call(s)).next,n=new u;!(r=i.call(a)).done;h++)o=p?In(a,c,[r.value,h],!0):r.value,Tn(n,h,o);return n.length=h,n},dr=tt("iterator"),mr=!1;try{var vr=0,gr={next:function(){return{done:!!vr++}},return:function(){mr=!0}};gr[dr]=function(){return this},Array.from(gr,(function(){throw 2}))}catch(e){}var yr=function(e,t){if(!t&&!mr)return!1;var n=!1;try{var r={};r[dr]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(e){}return n},br=!yr((function(e){Array.from(e)}));De({target:"Array",stat:!0,forced:br},{from:hr}),De({target:"Array",stat:!0},{isArray:Le});var xr=i((function(){function e(){}return!(Array.of.call(e)instanceof e)}));De({target:"Array",stat:!0,forced:xr},{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)Tn(n,e,arguments[e++]);return n.length=t,n}});var wr,kr,Nr=oe("navigator","userAgent")||"",Ir=a.process,Sr=Ir&&Ir.versions,Tr=Sr&&Sr.v8;Tr?kr=(wr=Tr.split("."))[0]+wr[1]:Nr&&(!(wr=Nr.match(/Edge\/(\d+)/))||wr[1]>=74)&&(wr=Nr.match(/Chrome\/(\d+)/))&&(kr=wr[1]);var Cr=kr&&+kr,Er=tt("species"),Rr=function(e){return Cr>=51||!i((function(){var t=[];return(t.constructor={})[Er]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Ar=tt("isConcatSpreadable"),Fr=9007199254740991,_r="Maximum allowed index exceeded",Dr=Cr>=51||!i((function(){var e=[];return e[Ar]=!1,e.concat()[0]!==e})),Or=Rr("concat"),Mr=function(e){if(!y(e))return!1;var t=e[Ar];return void 0!==t?!!t:Le(e)};De({target:"Array",proto:!0,forced:!Dr||!Or},{concat:function(e){var t,n,r,a,i,o=ze(this),s=pt(o,0),u=0;for(t=-1,r=arguments.length;t<r;t++)if(Mr(i=-1===t?o:arguments[t])){if(u+(a=pe(i.length))>Fr)throw TypeError(_r);for(n=0;n<a;n++,u++)n in i&&Tn(s,u,i[n])}else{if(u>=Fr)throw TypeError(_r);Tn(s,u++,i)}return s.length=u,s}});var Lr=Math.min,zr=[].copyWithin||function(e,t){var n=ze(this),r=pe(n.length),a=de(e,r),i=de(t,r),o=arguments.length>2?arguments[2]:void 0,s=Lr((void 0===o?r:de(o,r))-i,r-a),u=1;for(i<a&&a<i+s&&(u=-1,i+=s-1,a+=s-1);s-- >0;)i in n?n[a]=n[i]:delete n[a],a+=u,i+=u;return n},Pr=tt("unscopables"),Br=Array.prototype;null==Br[Pr]&&A.f(Br,Pr,{configurable:!0,value:Ke(null)});var Wr=function(e){Br[Pr][e]=!0};De({target:"Array",proto:!0},{copyWithin:zr}),Wr("copyWithin");var Vr=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))},Ur=Object.defineProperty,Gr={},jr=function(e){throw e},Hr=function(e,t){if(w(Gr,e))return Gr[e];t||(t={});var n=[][e],r=!!w(t,"ACCESSORS")&&t.ACCESSORS,a=w(t,0)?t[0]:jr,s=w(t,1)?t[1]:void 0;return Gr[e]=!!n&&!i((function(){if(r&&!o)return!0;var e={length:-1};r?Ur(e,1,{enumerable:!0,get:jr}):e[1]=1,n.call(e,a,s)}))},qr=dt.every,Kr=Vr("every"),Xr=Hr("every");De({target:"Array",proto:!0,forced:!Kr||!Xr},{every:function(e){return qr(this,e,arguments.length>1?arguments[1]:void 0)}});var Yr=function(e){for(var t=ze(this),n=pe(t.length),r=arguments.length,a=de(r>1?arguments[1]:void 0,n),i=r>2?arguments[2]:void 0,o=void 0===i?n:de(i,n);o>a;)t[a++]=e;return t};De({target:"Array",proto:!0},{fill:Yr}),Wr("fill");var Jr=dt.filter,Zr=Rr("filter"),Qr=Hr("filter");De({target:"Array",proto:!0,forced:!Zr||!Qr},{filter:function(e){return Jr(this,e,arguments.length>1?arguments[1]:void 0)}});var $r=dt.find,ea="find",ta=!0,na=Hr(ea);ea in[]&&Array(1)[ea]((function(){ta=!1})),De({target:"Array",proto:!0,forced:ta||!na},{find:function(e){return $r(this,e,arguments.length>1?arguments[1]:void 0)}}),Wr(ea);var ra=dt.findIndex,aa="findIndex",ia=!0,oa=Hr(aa);aa in[]&&Array(1)[aa]((function(){ia=!1})),De({target:"Array",proto:!0,forced:ia||!oa},{findIndex:function(e){return ra(this,e,arguments.length>1?arguments[1]:void 0)}}),Wr(aa);var sa=function e(t,n,r,a,i,o,s,u){for(var l,c=i,p=0,f=!!s&&lt(s,u,3);p<a;){if(p in r){if(l=f?f(r[p],p,n):r[p],o>0&&Le(l))c=e(t,n,l,pe(l.length),c,o-1)-1;else{if(c>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[c]=l}c++}p++}return c};De({target:"Array",proto:!0},{flat:function(){var e=arguments.length?arguments[0]:void 0,t=ze(this),n=pe(t.length),r=pt(t,0);return r.length=sa(r,t,t,n,0,void 0===e?1:le(e)),r}}),De({target:"Array",proto:!0},{flatMap:function(e){var t,n=ze(this),r=pe(n.length);return ut(e),(t=pt(n,0)).length=sa(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}});var ua=dt.forEach,la=Vr("forEach"),ca=Hr("forEach"),pa=la&&ca?[].forEach:function(e){return ua(this,e,arguments.length>1?arguments[1]:void 0)};De({target:"Array",proto:!0,forced:[].forEach!=pa},{forEach:pa});var fa=ve.includes,ha=Hr("indexOf",{ACCESSORS:!0,1:0});De({target:"Array",proto:!0,forced:!ha},{includes:function(e){return fa(this,e,arguments.length>1?arguments[1]:void 0)}}),Wr("includes");var da=ve.indexOf,ma=[].indexOf,va=!!ma&&1/[1].indexOf(1,-0)<0,ga=Vr("indexOf"),ya=Hr("indexOf",{ACCESSORS:!0,1:0});De({target:"Array",proto:!0,forced:va||!ga||!ya},{indexOf:function(e){return va?ma.apply(this,arguments)||0:da(this,e,arguments.length>1?arguments[1]:void 0)}});var ba=[].join,xa=m!=Object,wa=Vr("join",",");De({target:"Array",proto:!0,forced:xa||!wa},{join:function(e){return ba.call(g(this),void 0===e?",":e)}});var ka=Math.min,Na=[].lastIndexOf,Ia=!!Na&&1/[1].lastIndexOf(1,-0)<0,Sa=Vr("lastIndexOf"),Ta=Hr("indexOf",{ACCESSORS:!0,1:0}),Ca=Ia||!Sa||!Ta?function(e){if(Ia)return Na.apply(this,arguments)||0;var t=g(this),n=pe(t.length),r=n-1;for(arguments.length>1&&(r=ka(r,le(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}:Na;De({target:"Array",proto:!0,forced:Ca!==[].lastIndexOf},{lastIndexOf:Ca});var Ea=dt.map,Ra=Rr("map"),Aa=Hr("map");De({target:"Array",proto:!0,forced:!Ra||!Aa},{map:function(e){return Ea(this,e,arguments.length>1?arguments[1]:void 0)}});var Fa=function(e){return function(t,n,r,a){ut(n);var i=ze(t),o=m(i),s=pe(i.length),u=e?s-1:0,l=e?-1:1;if(r<2)for(;;){if(u in o){a=o[u],u+=l;break}if(u+=l,e?u<0:s<=u)throw TypeError("Reduce of empty array with no initial value")}for(;e?u>=0:s>u;u+=l)u in o&&(a=n(a,o[u],u,i));return a}},_a={left:Fa(!1),right:Fa(!0)},Da=_a.left,Oa=Vr("reduce"),Ma=Hr("reduce",{1:0});De({target:"Array",proto:!0,forced:!Oa||!Ma},{reduce:function(e){return Da(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var La=_a.right,za=Vr("reduceRight"),Pa=Hr("reduce",{1:0});De({target:"Array",proto:!0,forced:!za||!Pa},{reduceRight:function(e){return La(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Ba=[].reverse,Wa=[1,2];De({target:"Array",proto:!0,forced:String(Wa)===String(Wa.reverse())},{reverse:function(){return Le(this)&&(this.length=this.length),Ba.call(this)}});var Va=Rr("slice"),Ua=Hr("slice",{ACCESSORS:!0,0:0,1:2}),Ga=tt("species"),ja=[].slice,Ha=Math.max;De({target:"Array",proto:!0,forced:!Va||!Ua},{slice:function(e,t){var n,r,a,i=g(this),o=pe(i.length),s=de(e,o),u=de(void 0===t?o:t,o);if(Le(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Le(n.prototype)?y(n)&&null===(n=n[Ga])&&(n=void 0):n=void 0,n===Array||void 0===n))return ja.call(i,s,u);for(r=new(void 0===n?Array:n)(Ha(u-s,0)),a=0;s<u;s++,a++)s in i&&Tn(r,a,i[s]);return r.length=a,r}});var qa=dt.some,Ka=Vr("some"),Xa=Hr("some");De({target:"Array",proto:!0,forced:!Ka||!Xa},{some:function(e){return qa(this,e,arguments.length>1?arguments[1]:void 0)}});var Ya=[],Ja=Ya.sort,Za=i((function(){Ya.sort(void 0)})),Qa=i((function(){Ya.sort(null)})),$a=Vr("sort");De({target:"Array",proto:!0,forced:Za||!Qa||!$a},{sort:function(e){return void 0===e?Ja.call(ze(this)):Ja.call(ze(this),ut(e))}});var ei=Rr("splice"),ti=Hr("splice",{ACCESSORS:!0,0:0,1:2}),ni=Math.max,ri=Math.min;De({target:"Array",proto:!0,forced:!ei||!ti},{splice:function(e,t){var n,r,a,i,o,s,u=ze(this),l=pe(u.length),c=de(e,l),p=arguments.length;if(0===p?n=r=0:1===p?(n=0,r=l-c):(n=p-2,r=ri(ni(le(t),0),l-c)),l+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(a=pt(u,r),i=0;i<r;i++)(o=c+i)in u&&Tn(a,i,u[o]);if(a.length=r,n<r){for(i=c;i<l-r;i++)s=i+n,(o=i+r)in u?u[s]=u[o]:delete u[s];for(i=l;i>l-r+n;i--)delete u[i-1]}else if(n>r)for(i=l-r;i>c;i--)s=i+n-1,(o=i+r-1)in u?u[s]=u[o]:delete u[s];for(i=0;i<n;i++)u[i+c]=arguments[i+2];return u.length=l-r+n,a}});var ai=tt("species"),ii=function(e){var t=oe(e),n=A.f;o&&t&&!t[ai]&&n(t,ai,{configurable:!0,get:function(){return this}})};ii("Array"),Wr("flat"),Wr("flatMap");var oi,si,ui,li=tt("iterator"),ci=!1;[].keys&&("next"in(ui=[].keys())?(si=On(On(ui)))!==Object.prototype&&(oi=si):ci=!0),null==oi&&(oi={}),w(oi,li)||F(oi,li,(function(){return this}));var pi={IteratorPrototype:oi,BUGGY_SAFARI_ITERATORS:ci},fi=pi.IteratorPrototype,hi=function(){return this},di=function(e,t,n){var r=t+" Iterator";return e.prototype=Ke(fi,{next:p(1,n)}),st(e,r,!1),hn[r]=hi,e},mi=pi.IteratorPrototype,vi=pi.BUGGY_SAFARI_ITERATORS,gi=tt("iterator"),yi="keys",bi="values",xi="entries",wi=function(){return this},ki=function(e,t,n,r,a,i,o){di(n,t,r);var s,u,l,c=function(e){if(e===a&&m)return m;if(!vi&&e in h)return h[e];switch(e){case yi:case bi:case xi:return function(){return new n(this,e)}}return function(){return new n(this)}},p=t+" Iterator",f=!1,h=e.prototype,d=h[gi]||h["@@iterator"]||a&&h[a],m=!vi&&d||c(a),v="Array"==t&&h.entries||d;if(v&&(s=On(v.call(new e)),mi!==Object.prototype&&s.next&&(On(s)!==mi&&(Zn?Zn(s,mi):"function"!=typeof s[gi]&&F(s,gi,wi)),st(s,p,!0))),a==bi&&d&&d.name!==bi&&(f=!0,m=function(){return d.call(this)}),h[gi]!==m&&F(h,gi,m),hn[t]=m,a)if(u={values:c(bi),keys:i?m:c(yi),entries:c(xi)},o)for(l in u)(vi||f||!(l in h))&&re(h,l,u[l]);else De({target:t,proto:!0,forced:vi||f},u);return u},Ni="Array Iterator",Ii=ne.set,Si=ne.getterFor(Ni),Ti=ki(Array,"Array",(function(e,t){Ii(this,{type:Ni,target:g(e),index:0,kind:t})}),(function(){var e=Si(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");hn.Arguments=hn.Array,Wr("keys"),Wr("values"),Wr("entries");var Ci=String.fromCharCode,Ei=String.fromCodePoint,Ri=!!Ei&&1!=Ei.length;De({target:"String",stat:!0,forced:Ri},{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,a=0;r>a;){if(t=+arguments[a++],de(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?Ci(t):Ci(55296+((t-=65536)>>10),t%1024+56320))}return n.join("")}}),De({target:"String",stat:!0},{raw:function(e){for(var t=g(e.raw),n=pe(t.length),r=arguments.length,a=[],i=0;n>i;)a.push(String(t[i++])),i<r&&a.push(String(arguments[i]));return a.join("")}});var Ai=function(e){return function(t,n){var r,a,i=String(v(t)),o=le(n),s=i.length;return o<0||o>=s?e?"":void 0:(r=i.charCodeAt(o))<55296||r>56319||o+1===s||(a=i.charCodeAt(o+1))<56320||a>57343?e?i.charAt(o):r:e?i.slice(o,o+2):a-56320+(r-55296<<10)+65536}},Fi={codeAt:Ai(!1),charAt:Ai(!0)},_i=Fi.codeAt;De({target:"String",proto:!0},{codePointAt:function(e){return _i(this,e)}});var Di,Oi=tt("match"),Mi=function(e){var t;return y(e)&&(void 0!==(t=e[Oi])?!!t:"RegExp"==h(e))},Li=function(e){if(Mi(e))throw TypeError("The method doesn't accept regular expressions");return e},zi=tt("match"),Pi=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[zi]=!1,"/./"[e](t)}catch(e){}}return!1},Bi=C.f,Wi="".endsWith,Vi=Math.min,Ui=Pi("endsWith"),Gi=!(Ui||(Di=Bi(String.prototype,"endsWith"),!Di||Di.writable));De({target:"String",proto:!0,forced:!Gi&&!Ui},{endsWith:function(e){var t=String(v(this));Li(e);var n=arguments.length>1?arguments[1]:void 0,r=pe(t.length),a=void 0===n?r:Vi(pe(n),r),i=String(e);return Wi?Wi.call(t,i,a):t.slice(a-i.length,a)===i}}),De({target:"String",proto:!0,forced:!Pi("includes")},{includes:function(e){return!!~String(v(this)).indexOf(Li(e),arguments.length>1?arguments[1]:void 0)}});var ji=function(){var e=E(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function Hi(e,t){return RegExp(e,t)}var qi=i((function(){var e=Hi("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Ki=i((function(){var e=Hi("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),Xi={UNSUPPORTED_Y:qi,BROKEN_CARET:Ki},Yi=RegExp.prototype.exec,Ji=String.prototype.replace,Zi=Yi,Qi=function(){var e=/a/,t=/b*/g;return Yi.call(e,"a"),Yi.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),$i=Xi.UNSUPPORTED_Y||Xi.BROKEN_CARET,eo=void 0!==/()??/.exec("")[1];(Qi||eo||$i)&&(Zi=function(e){var t,n,r,a,i=this,o=$i&&i.sticky,s=ji.call(i),u=i.source,l=0,c=e;return o&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),c=String(e).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(u="(?: "+u+")",c=" "+c,l++),n=new RegExp("^(?:"+u+")",s)),eo&&(n=new RegExp("^"+u+"$(?!\\s)",s)),Qi&&(t=i.lastIndex),r=Yi.call(o?n:i,c),o?r?(r.input=r.input.slice(l),r[0]=r[0].slice(l),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:Qi&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),eo&&r&&r.length>1&&Ji.call(r[0],n,(function(){for(a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(r[a]=void 0)})),r});var to=Zi;De({target:"RegExp",proto:!0,forced:/./.exec!==to},{exec:to});var no=tt("species"),ro=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),ao="$0"==="a".replace(/./,"$0"),io=tt("replace"),oo=!!/./[io]&&""===/./[io]("a","$0"),so=!i((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),uo=function(e,t,n,r){var a=tt(e),o=!i((function(){var t={};return t[a]=function(){return 7},7!=""[e](t)})),s=o&&!i((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[no]=function(){return n},n.flags="",n[a]=/./[a]),n.exec=function(){return t=!0,null},n[a](""),!t}));if(!o||!s||"replace"===e&&(!ro||!ao||oo)||"split"===e&&!so){var u=/./[a],l=n(a,""[e],(function(e,t,n,r,a){return t.exec===to?o&&!a?{done:!0,value:u.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:ao,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:oo}),c=l[0],p=l[1];re(String.prototype,e,c),re(RegExp.prototype,a,2==t?function(e,t){return p.call(e,this,t)}:function(e){return p.call(e,this)})}r&&F(RegExp.prototype[a],"sham",!0)},lo=Fi.charAt,co=function(e,t,n){return t+(n?lo(e,t).length:1)},po=function(e,t){var n=e.exec;if("function"==typeof n){var r=n.call(e,t);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==h(e))throw TypeError("RegExp#exec called on incompatible receiver");return to.call(e,t)};uo("match",1,(function(e,t,n){return[function(t){var n=v(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=E(e),i=String(this);if(!a.global)return po(a,i);var o=a.unicode;a.lastIndex=0;for(var s,u=[],l=0;null!==(s=po(a,i));){var c=String(s[0]);u[l]=c,""===c&&(a.lastIndex=co(i,pe(a.lastIndex),o)),l++}return 0===l?null:u}]}));var fo=tt("species"),ho=function(e,t){var n,r=E(e).constructor;return void 0===r||null==(n=E(r)[fo])?t:ut(n)},mo=tt("matchAll"),vo="RegExp String",go=vo+" Iterator",yo=ne.set,bo=ne.getterFor(go),xo=RegExp.prototype,wo=xo.exec,ko="".matchAll,No=!!ko&&!i((function(){"a".matchAll(/./)})),Io=di((function(e,t,n,r){yo(this,{type:go,regexp:e,string:t,global:n,unicode:r,done:!1})}),vo,(function(){var e=bo(this);if(e.done)return{value:void 0,done:!0};var t=e.regexp,n=e.string,r=function(e,t){var n,r=e.exec;if("function"==typeof r){if("object"!=typeof(n=r.call(e,t)))throw TypeError("Incorrect exec result");return n}return wo.call(e,t)}(t,n);return null===r?{value:void 0,done:e.done=!0}:e.global?(""==String(r[0])&&(t.lastIndex=co(n,pe(t.lastIndex),e.unicode)),{value:r,done:!1}):(e.done=!0,{value:r,done:!1})})),So=function(e){var t,n,r,a,i,o,s=E(this),u=String(e);return t=ho(s,RegExp),void 0===(n=s.flags)&&s instanceof RegExp&&!("flags"in xo)&&(n=ji.call(s)),r=void 0===n?"":String(n),a=new t(t===RegExp?s.source:s,r),i=!!~r.indexOf("g"),o=!!~r.indexOf("u"),a.lastIndex=pe(s.lastIndex),new Io(a,u,i,o)};De({target:"String",proto:!0,forced:No},{matchAll:function(e){var t,n,r=v(this);if(null!=e){if(Mi(e)&&!~String(v("flags"in xo?e.flags:ji.call(e))).indexOf("g"))throw TypeError("`.matchAll` does not allow non-global regexes");if(No)return ko.apply(r,arguments);if(null!=(n=e[mo]))return ut(n).call(e,r)}else if(No)return ko.apply(r,arguments);return t=String(r),new RegExp(e,"g")[mo](t)}}),mo in xo||F(xo,mo,So);var To="".repeat||function(e){var t=String(v(this)),n="",r=le(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n},Co=Math.ceil,Eo=function(e){return function(t,n,r){var a,i,o=String(v(t)),s=o.length,u=void 0===r?" ":String(r),l=pe(n);return l<=s||""==u?o:(a=l-s,(i=To.call(u,Co(a/u.length))).length>a&&(i=i.slice(0,a)),e?o+i:i+o)}},Ro={start:Eo(!1),end:Eo(!0)},Ao=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(Nr),Fo=Ro.end;De({target:"String",proto:!0,forced:Ao},{padEnd:function(e){return Fo(this,e,arguments.length>1?arguments[1]:void 0)}});var _o=Ro.start;De({target:"String",proto:!0,forced:Ao},{padStart:function(e){return _o(this,e,arguments.length>1?arguments[1]:void 0)}}),De({target:"String",proto:!0},{repeat:To});var Do=Math.max,Oo=Math.min,Mo=Math.floor,Lo=/\$([$&'`]|\d\d?|<[^>]*>)/g,zo=/\$([$&'`]|\d\d?)/g;uo("replace",2,(function(e,t,n,r){var a=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=r.REPLACE_KEEPS_$0,o=a?"$":"$0";return[function(n,r){var a=v(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,a,r):t.call(String(a),n,r)},function(e,r){if(!a&&i||"string"==typeof r&&-1===r.indexOf(o)){var u=n(t,e,this,r);if(u.done)return u.value}var l=E(e),c=String(this),p="function"==typeof r;p||(r=String(r));var f=l.global;if(f){var h=l.unicode;l.lastIndex=0}for(var d=[];;){var m=po(l,c);if(null===m)break;if(d.push(m),!f)break;""===String(m[0])&&(l.lastIndex=co(c,pe(l.lastIndex),h))}for(var v,g="",y=0,b=0;b<d.length;b++){m=d[b];for(var x=String(m[0]),w=Do(Oo(le(m.index),c.length),0),k=[],N=1;N<m.length;N++)k.push(void 0===(v=m[N])?v:String(v));var I=m.groups;if(p){var S=[x].concat(k,w,c);void 0!==I&&S.push(I);var T=String(r.apply(void 0,S))}else T=s(x,c,w,k,I,r);w>=y&&(g+=c.slice(y,w)+T,y=w+x.length)}return g+c.slice(y)}];function s(e,n,r,a,i,o){var s=r+e.length,u=a.length,l=zo;return void 0!==i&&(i=ze(i),l=Lo),t.call(o,l,(function(t,o){var l;switch(o.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":l=i[o.slice(1,-1)];break;default:var c=+o;if(0===c)return t;if(c>u){var p=Mo(c/10);return 0===p?t:p<=u?void 0===a[p-1]?o.charAt(1):a[p-1]+o.charAt(1):t}l=a[c-1]}return void 0===l?"":l}))}})),uo("search",1,(function(e,t,n){return[function(t){var n=v(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;var a=E(e),i=String(this),o=a.lastIndex;Ln(o,0)||(a.lastIndex=0);var s=po(a,i);return Ln(a.lastIndex,o)||(a.lastIndex=o),null===s?-1:s.index}]}));var Po=[].push,Bo=Math.min,Wo=4294967295,Vo=!i((function(){return!RegExp(Wo,"y")}));uo("split",2,(function(e,t,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var r=String(v(this)),a=void 0===n?Wo:n>>>0;if(0===a)return[];if(void 0===e)return[r];if(!Mi(e))return t.call(r,e,a);for(var i,o,s,u=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),c=0,p=new RegExp(e.source,l+"g");(i=to.call(p,r))&&!((o=p.lastIndex)>c&&(u.push(r.slice(c,i.index)),i.length>1&&i.index<r.length&&Po.apply(u,i.slice(1)),s=i[0].length,c=o,u.length>=a));)p.lastIndex===i.index&&p.lastIndex++;return c===r.length?!s&&p.test("")||u.push(""):u.push(r.slice(c)),u.length>a?u.slice(0,a):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=v(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,a,n):r.call(String(a),t,n)},function(e,a){var i=n(r,e,this,a,r!==t);if(i.done)return i.value;var o=E(e),s=String(this),u=ho(o,RegExp),l=o.unicode,c=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(Vo?"y":"g"),p=new u(Vo?o:"^(?:"+o.source+")",c),f=void 0===a?Wo:a>>>0;if(0===f)return[];if(0===s.length)return null===po(p,s)?[s]:[];for(var h=0,d=0,m=[];d<s.length;){p.lastIndex=Vo?d:0;var v,g=po(p,Vo?s:s.slice(d));if(null===g||(v=Bo(pe(p.lastIndex+(Vo?0:d)),s.length))===h)d=co(s,d,l);else{if(m.push(s.slice(h,d)),m.length===f)return m;for(var y=1;y<=g.length-1;y++)if(m.push(g[y]),m.length===f)return m;d=h=v}}return m.push(s.slice(h)),m}]}),!Vo);var Uo=C.f,Go="".startsWith,jo=Math.min,Ho=Pi("startsWith"),qo=!Ho&&!!function(){var e=Uo(String.prototype,"startsWith");return e&&!e.writable}();De({target:"String",proto:!0,forced:!qo&&!Ho},{startsWith:function(e){var t=String(v(this));Li(e);var n=pe(jo(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return Go?Go.call(t,r,n):t.slice(n,n+r.length)===r}});var Ko="\t\n\v\f\r                　\u2028\u2029\ufeff",Xo="["+Ko+"]",Yo=RegExp("^"+Xo+Xo+"*"),Jo=RegExp(Xo+Xo+"*$"),Zo=function(e){return function(t){var n=String(v(t));return 1&e&&(n=n.replace(Yo,"")),2&e&&(n=n.replace(Jo,"")),n}},Qo={start:Zo(1),end:Zo(2),trim:Zo(3)},$o=function(e){return i((function(){return!!Ko[e]()||"​᠎"!="​᠎"[e]()||Ko[e].name!==e}))},es=Qo.trim;De({target:"String",proto:!0,forced:$o("trim")},{trim:function(){return es(this)}});var ts=Qo.start,ns=$o("trimStart"),rs=ns?function(){return ts(this)}:"".trimStart;De({target:"String",proto:!0,forced:ns},{trimStart:rs,trimLeft:rs});var as=Qo.end,is=$o("trimEnd"),os=is?function(){return as(this)}:"".trimEnd;De({target:"String",proto:!0,forced:is},{trimEnd:os,trimRight:os});var ss=Fi.charAt,us="String Iterator",ls=ne.set,cs=ne.getterFor(us);ki(String,"String",(function(e){ls(this,{type:us,string:String(e),index:0})}),(function(){var e,t=cs(this),n=t.string,r=t.index;return r>=n.length?{value:void 0,done:!0}:(e=ss(n,r),t.index+=e.length,{value:e,done:!1})}));var ps=/"/g,fs=function(e,t,n,r){var a=String(v(e)),i="<"+t;return""!==n&&(i+=" "+n+'="'+String(r).replace(ps,"&quot;")+'"'),i+">"+a+"</"+t+">"},hs=function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))};De({target:"String",proto:!0,forced:hs("anchor")},{anchor:function(e){return fs(this,"a","name",e)}}),De({target:"String",proto:!0,forced:hs("big")},{big:function(){return fs(this,"big","","")}}),De({target:"String",proto:!0,forced:hs("blink")},{blink:function(){return fs(this,"blink","","")}}),De({target:"String",proto:!0,forced:hs("bold")},{bold:function(){return fs(this,"b","","")}}),De({target:"String",proto:!0,forced:hs("fixed")},{fixed:function(){return fs(this,"tt","","")}}),De({target:"String",proto:!0,forced:hs("fontcolor")},{fontcolor:function(e){return fs(this,"font","color",e)}}),De({target:"String",proto:!0,forced:hs("fontsize")},{fontsize:function(e){return fs(this,"font","size",e)}}),De({target:"String",proto:!0,forced:hs("italics")},{italics:function(){return fs(this,"i","","")}}),De({target:"String",proto:!0,forced:hs("link")},{link:function(e){return fs(this,"a","href",e)}}),De({target:"String",proto:!0,forced:hs("small")},{small:function(){return fs(this,"small","","")}}),De({target:"String",proto:!0,forced:hs("strike")},{strike:function(){return fs(this,"strike","","")}}),De({target:"String",proto:!0,forced:hs("sub")},{sub:function(){return fs(this,"sub","","")}}),De({target:"String",proto:!0,forced:hs("sup")},{sup:function(){return fs(this,"sup","","")}});var ds=function(e,t,n){var r,a;return Zn&&"function"==typeof(r=t.constructor)&&r!==n&&y(a=r.prototype)&&a!==n.prototype&&Zn(e,a),e},ms=A.f,vs=we.f,gs=ne.set,ys=tt("match"),bs=a.RegExp,xs=bs.prototype,ws=/a/g,ks=/a/g,Ns=new bs(ws)!==ws,Is=Xi.UNSUPPORTED_Y;if(o&&Fe("RegExp",!Ns||Is||i((function(){return ks[ys]=!1,bs(ws)!=ws||bs(ks)==ks||"/a/i"!=bs(ws,"i")})))){for(var Ss=function(e,t){var n,r=this instanceof Ss,a=Mi(e),i=void 0===t;if(!r&&a&&e.constructor===Ss&&i)return e;Ns?a&&!i&&(e=e.source):e instanceof Ss&&(i&&(t=ji.call(e)),e=e.source),Is&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var o=ds(Ns?new bs(e,t):bs(e,t),r?this:xs,Ss);return Is&&n&&gs(o,{sticky:n}),o},Ts=function(e){e in Ss||ms(Ss,e,{configurable:!0,get:function(){return bs[e]},set:function(t){bs[e]=t}})},Cs=vs(bs),Es=0;Cs.length>Es;)Ts(Cs[Es++]);xs.constructor=Ss,Ss.prototype=xs,re(a,"RegExp",Ss)}ii("RegExp"),o&&("g"!=/./g.flags||Xi.UNSUPPORTED_Y)&&A.f(RegExp.prototype,"flags",{configurable:!0,get:ji});var Rs=Xi.UNSUPPORTED_Y,As=A.f,Fs=ne.get,_s=RegExp.prototype;o&&Rs&&As(RegExp.prototype,"sticky",{configurable:!0,get:function(){if(this!==_s){if(this instanceof RegExp)return!!Fs(this).sticky;throw TypeError("Incompatible receiver, RegExp required")}}});var Ds=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),Os=/./.test;De({target:"RegExp",proto:!0,forced:!Ds},{test:function(e){if("function"!=typeof this.exec)return Os.call(this,e);var t=this.exec(e);if(null!==t&&!y(t))throw new Error("RegExp exec method returned something other than an Object or null");return!!t}});var Ms="toString",Ls=RegExp.prototype,zs=Ls[Ms],Ps=i((function(){return"/a/b"!=zs.call({source:"a",flags:"b"})})),Bs=zs.name!=Ms;(Ps||Bs)&&re(RegExp.prototype,Ms,(function(){var e=E(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in Ls)?ji.call(e):n)}),{unsafe:!0});var Ws=Qo.trim,Vs=a.parseInt,Us=/^[+-]?0[Xx]/,Gs=8!==Vs(Ko+"08")||22!==Vs(Ko+"0x16")?function(e,t){var n=Ws(String(e));return Vs(n,t>>>0||(Us.test(n)?16:10))}:Vs;De({global:!0,forced:parseInt!=Gs},{parseInt:Gs});var js=Qo.trim,Hs=a.parseFloat,qs=1/Hs(Ko+"-0")!=-1/0?function(e){var t=js(String(e)),n=Hs(t);return 0===n&&"-"==t.charAt(0)?-0:n}:Hs;De({global:!0,forced:parseFloat!=qs},{parseFloat:qs});var Ks=we.f,Xs=C.f,Ys=A.f,Js=Qo.trim,Zs="Number",Qs=a[Zs],$s=Qs.prototype,eu=h(Ke($s))==Zs,tu=function(e){var t,n,r,a,i,o,s,u,l=b(e,!1);if("string"==typeof l&&l.length>2)if(43===(t=(l=Js(l)).charCodeAt(0))||45===t){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:r=2,a=49;break;case 79:case 111:r=8,a=55;break;default:return+l}for(o=(i=l.slice(2)).length,s=0;s<o;s++)if((u=i.charCodeAt(s))<48||u>a)return NaN;return parseInt(i,r)}return+l};if(Fe(Zs,!Qs(" 0o1")||!Qs("0b1")||Qs("+0x1"))){for(var nu,ru=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof ru&&(eu?i((function(){$s.valueOf.call(n)})):h(n)!=Zs)?ds(new Qs(tu(t)),n,ru):tu(t)},au=o?Ks(Qs):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),iu=0;au.length>iu;iu++)w(Qs,nu=au[iu])&&!w(ru,nu)&&Ys(ru,nu,Xs(Qs,nu));ru.prototype=$s,$s.constructor=ru,re(a,Zs,ru)}De({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)});var ou=a.isFinite,su=Number.isFinite||function(e){return"number"==typeof e&&ou(e)};De({target:"Number",stat:!0},{isFinite:su});var uu=Math.floor,lu=function(e){return!y(e)&&isFinite(e)&&uu(e)===e};De({target:"Number",stat:!0},{isInteger:lu}),De({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var cu=Math.abs;De({target:"Number",stat:!0},{isSafeInteger:function(e){return lu(e)&&cu(e)<=9007199254740991}}),De({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),De({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991}),De({target:"Number",stat:!0,forced:Number.parseFloat!=qs},{parseFloat:qs}),De({target:"Number",stat:!0,forced:Number.parseInt!=Gs},{parseInt:Gs});var pu=function(e){if("number"!=typeof e&&"Number"!=h(e))throw TypeError("Incorrect invocation");return+e},fu=1..toFixed,hu=Math.floor,du=function e(t,n,r){return 0===n?r:n%2==1?e(t,n-1,r*t):e(t*t,n/2,r)},mu=fu&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i((function(){fu.call({})}));De({target:"Number",proto:!0,forced:mu},{toFixed:function(e){var t,n,r,a,i=pu(this),o=le(e),s=[0,0,0,0,0,0],u="",l="0",c=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*s[n],s[n]=r%1e7,r=hu(r/1e7)},p=function(e){for(var t=6,n=0;--t>=0;)n+=s[t],s[t]=hu(n/e),n=n%e*1e7},f=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==s[e]){var n=String(s[e]);t=""===t?n:t+To.call("0",7-n.length)+n}return t};if(o<0||o>20)throw RangeError("Incorrect fraction digits");if(i!=i)return"NaN";if(i<=-1e21||i>=1e21)return String(i);if(i<0&&(u="-",i=-i),i>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(i*du(2,69,1))-69)<0?i*du(2,-t,1):i/du(2,t,1),n*=4503599627370496,(t=52-t)>0){for(c(0,n),r=o;r>=7;)c(1e7,0),r-=7;for(c(du(10,r,1),0),r=t-1;r>=23;)p(1<<23),r-=23;p(1<<r),c(1,1),p(2),l=f()}else c(0,n),c(1<<-t,0),l=f()+To.call("0",o);return l=o>0?u+((a=l.length)<=o?"0."+To.call("0",o-a)+l:l.slice(0,a-o)+"."+l.slice(a-o)):u+l}});var vu=1..toPrecision,gu=i((function(){return"1"!==vu.call(1,void 0)}))||!i((function(){vu.call({})}));De({target:"Number",proto:!0,forced:gu},{toPrecision:function(e){return void 0===e?vu.call(pu(this)):vu.call(pu(this),e)}});var yu=Math.log,bu=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:yu(1+e)},xu=Math.acosh,wu=Math.log,ku=Math.sqrt,Nu=Math.LN2,Iu=!xu||710!=Math.floor(xu(Number.MAX_VALUE))||xu(1/0)!=1/0;De({target:"Math",stat:!0,forced:Iu},{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?wu(e)+Nu:bu(e-1+ku(e-1)*ku(e+1))}});var Su=Math.asinh,Tu=Math.log,Cu=Math.sqrt;De({target:"Math",stat:!0,forced:!(Su&&1/Su(0)>0)},{asinh:function e(t){return isFinite(t=+t)&&0!=t?t<0?-e(-t):Tu(t+Cu(t*t+1)):t}});var Eu=Math.atanh,Ru=Math.log;De({target:"Math",stat:!0,forced:!(Eu&&1/Eu(-0)<0)},{atanh:function(e){return 0==(e=+e)?e:Ru((1+e)/(1-e))/2}});var Au=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1},Fu=Math.abs,_u=Math.pow;De({target:"Math",stat:!0},{cbrt:function(e){return Au(e=+e)*_u(Fu(e),1/3)}});var Du=Math.floor,Ou=Math.log,Mu=Math.LOG2E;De({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-Du(Ou(e+.5)*Mu):32}});var Lu=Math.expm1,zu=Math.exp,Pu=!Lu||Lu(10)>22025.465794806718||Lu(10)<22025.465794806718||-2e-17!=Lu(-2e-17)?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:zu(e)-1}:Lu,Bu=Math.cosh,Wu=Math.abs,Vu=Math.E;De({target:"Math",stat:!0,forced:!Bu||Bu(710)===1/0},{cosh:function(e){var t=Pu(Wu(e)-1)+1;return(t+1/(t*Vu*Vu))*(Vu/2)}}),De({target:"Math",stat:!0,forced:Pu!=Math.expm1},{expm1:Pu});var Uu=Math.abs,Gu=Math.pow,ju=Gu(2,-52),Hu=Gu(2,-23),qu=Gu(2,127)*(2-Hu),Ku=Gu(2,-126),Xu=Math.fround||function(e){var t,n,r=Uu(e),a=Au(e);return r<Ku?a*(r/Ku/Hu+1/ju-1/ju)*Ku*Hu:(n=(t=(1+Hu/ju)*r)-(t-r))>qu||n!=n?a*(1/0):a*n};De({target:"Math",stat:!0},{fround:Xu});var Yu=Math.hypot,Ju=Math.abs,Zu=Math.sqrt,Qu=!!Yu&&Yu(1/0,NaN)!==1/0;De({target:"Math",stat:!0,forced:Qu},{hypot:function(e,t){for(var n,r,a=0,i=0,o=arguments.length,s=0;i<o;)s<(n=Ju(arguments[i++]))?(a=a*(r=s/n)*r+1,s=n):a+=n>0?(r=n/s)*r:n;return s===1/0?1/0:s*Zu(a)}});var $u=Math.imul,el=i((function(){return-5!=$u(4294967295,5)||2!=$u.length}));De({target:"Math",stat:!0,forced:el},{imul:function(e,t){var n=65535,r=+e,a=+t,i=n&r,o=n&a;return 0|i*o+((n&r>>>16)*o+i*(n&a>>>16)<<16>>>0)}});var tl=Math.log,nl=Math.LOG10E;De({target:"Math",stat:!0},{log10:function(e){return tl(e)*nl}}),De({target:"Math",stat:!0},{log1p:bu});var rl=Math.log,al=Math.LN2;De({target:"Math",stat:!0},{log2:function(e){return rl(e)/al}}),De({target:"Math",stat:!0},{sign:Au});var il=Math.abs,ol=Math.exp,sl=Math.E,ul=i((function(){return-2e-17!=Math.sinh(-2e-17)}));De({target:"Math",stat:!0,forced:ul},{sinh:function(e){return il(e=+e)<1?(Pu(e)-Pu(-e))/2:(ol(e-1)-ol(-e-1))*(sl/2)}});var ll=Math.exp;De({target:"Math",stat:!0},{tanh:function(e){var t=Pu(e=+e),n=Pu(-e);return t==1/0?1:n==1/0?-1:(t-n)/(ll(e)+ll(-e))}}),st(Math,"Math",!0);var cl=Math.ceil,pl=Math.floor;De({target:"Math",stat:!0},{trunc:function(e){return(e>0?pl:cl)(e)}}),De({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}});var fl=i((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));De({target:"Date",proto:!0,forced:fl},{toJSON:function(e){var t=ze(this),n=b(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}});var hl=Ro.start,dl=Math.abs,ml=Date.prototype,vl=ml.getTime,gl=ml.toISOString,yl=i((function(){return"0385-07-25T07:06:39.999Z"!=gl.call(new Date(-50000000000001))}))||!i((function(){gl.call(new Date(NaN))}))?function(){if(!isFinite(vl.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+hl(dl(t),r?6:4,0)+"-"+hl(e.getUTCMonth()+1,2,0)+"-"+hl(e.getUTCDate(),2,0)+"T"+hl(e.getUTCHours(),2,0)+":"+hl(e.getUTCMinutes(),2,0)+":"+hl(e.getUTCSeconds(),2,0)+"."+hl(n,3,0)+"Z"}:gl;De({target:"Date",proto:!0,forced:Date.prototype.toISOString!==yl},{toISOString:yl});var bl=Date.prototype,xl="Invalid Date",wl="toString",kl=bl[wl],Nl=bl.getTime;new Date(NaN)+""!=xl&&re(bl,wl,(function(){var e=Nl.call(this);return e==e?kl.call(this):xl}));var Il=tt("toPrimitive"),Sl=Date.prototype;Il in Sl||F(Sl,Il,(function(e){if("string"!==e&&"number"!==e&&"default"!==e)throw TypeError("Incorrect hint");return b(E(this),"number"!==e)}));var Tl=oe("JSON","stringify"),Cl=/[\uD800-\uDFFF]/g,El=/^[\uD800-\uDBFF]$/,Rl=/^[\uDC00-\uDFFF]$/,Al=function(e,t,n){var r=n.charAt(t-1),a=n.charAt(t+1);return El.test(e)&&!Rl.test(a)||Rl.test(e)&&!El.test(r)?"\\u"+e.charCodeAt(0).toString(16):e},Fl=i((function(){return'"\\udf06\\ud834"'!==Tl("\udf06\ud834")||'"\\udead"'!==Tl("\udead")}));Tl&&De({target:"JSON",stat:!0,forced:Fl},{stringify:function(e,t,n){var r=Tl.apply(null,arguments);return"string"==typeof r?r.replace(Cl,Al):r}}),st(a.JSON,"JSON",!0);var _l,Dl,Ol,Ml=a.Promise,Ll=function(e,t,n){for(var r in t)re(e,r,t[r],n);return e},zl=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},Pl=/(iphone|ipod|ipad).*applewebkit/i.test(Nr),Bl=a.location,Wl=a.setImmediate,Vl=a.clearImmediate,Ul=a.process,Gl=a.MessageChannel,jl=a.Dispatch,Hl=0,ql={},Kl="onreadystatechange",Xl=function(e){if(ql.hasOwnProperty(e)){var t=ql[e];delete ql[e],t()}},Yl=function(e){return function(){Xl(e)}},Jl=function(e){Xl(e.data)},Zl=function(e){a.postMessage(e+"",Bl.protocol+"//"+Bl.host)};Wl&&Vl||(Wl=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return ql[++Hl]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},_l(Hl),Hl},Vl=function(e){delete ql[e]},"process"==h(Ul)?_l=function(e){Ul.nextTick(Yl(e))}:jl&&jl.now?_l=function(e){jl.now(Yl(e))}:Gl&&!Pl?(Ol=(Dl=new Gl).port2,Dl.port1.onmessage=Jl,_l=lt(Ol.postMessage,Ol,1)):!a.addEventListener||"function"!=typeof postMessage||a.importScripts||i(Zl)||"file:"===Bl.protocol?_l=Kl in I("script")?function(e){We.appendChild(I("script"))[Kl]=function(){We.removeChild(this),Xl(e)}}:function(e){setTimeout(Yl(e),0)}:(_l=Zl,a.addEventListener("message",Jl,!1)));var Ql,$l,ec,tc,nc,rc,ac,ic,oc={set:Wl,clear:Vl},sc=C.f,uc=oc.set,lc=a.MutationObserver||a.WebKitMutationObserver,cc=a.process,pc=a.Promise,fc="process"==h(cc),hc=sc(a,"queueMicrotask"),dc=hc&&hc.value;dc||(Ql=function(){var e,t;for(fc&&(e=cc.domain)&&e.exit();$l;){t=$l.fn,$l=$l.next;try{t()}catch(e){throw $l?tc():ec=void 0,e}}ec=void 0,e&&e.enter()},fc?tc=function(){cc.nextTick(Ql)}:lc&&!Pl?(nc=!0,rc=document.createTextNode(""),new lc(Ql).observe(rc,{characterData:!0}),tc=function(){rc.data=nc=!nc}):pc&&pc.resolve?(ac=pc.resolve(void 0),ic=ac.then,tc=function(){ic.call(ac,Ql)}):tc=function(){uc.call(a,Ql)});var mc,vc,gc,yc,bc=dc||function(e){var t={fn:e,next:void 0};ec&&(ec.next=t),$l||($l=t,tc()),ec=t},xc=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=ut(t),this.reject=ut(n)},wc={f:function(e){return new xc(e)}},kc=function(e,t){if(E(e),y(t)&&t.constructor===e)return t;var n=wc.f(e);return(0,n.resolve)(t),n.promise},Nc=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},Ic=oc.set,Sc=tt("species"),Tc="Promise",Cc=ne.get,Ec=ne.set,Rc=ne.getterFor(Tc),Ac=Ml,Fc=a.TypeError,_c=a.document,Dc=a.process,Oc=oe("fetch"),Mc=wc.f,Lc=Mc,zc="process"==h(Dc),Pc=!!(_c&&_c.createEvent&&a.dispatchEvent),Bc="unhandledrejection",Wc=Fe(Tc,(function(){if(!(B(Ac)!==String(Ac))){if(66===Cr)return!0;if(!zc&&"function"!=typeof PromiseRejectionEvent)return!0}if(Cr>=51&&/native code/.test(Ac))return!1;var e=Ac.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Sc]=t,!(e.then((function(){}))instanceof t)})),Vc=Wc||!yr((function(e){Ac.all(e).catch((function(){}))})),Uc=function(e){var t;return!(!y(e)||"function"!=typeof(t=e.then))&&t},Gc=function(e,t,n){if(!t.notified){t.notified=!0;var r=t.reactions;bc((function(){for(var a=t.value,i=1==t.state,o=0;r.length>o;){var s,u,l,c=r[o++],p=i?c.ok:c.fail,f=c.resolve,h=c.reject,d=c.domain;try{p?(i||(2===t.rejection&&Kc(e,t),t.rejection=1),!0===p?s=a:(d&&d.enter(),s=p(a),d&&(d.exit(),l=!0)),s===c.promise?h(Fc("Promise-chain cycle")):(u=Uc(s))?u.call(s,f,h):f(s)):h(a)}catch(e){d&&!l&&d.exit(),h(e)}}t.reactions=[],t.notified=!1,n&&!t.rejection&&Hc(e,t)}))}},jc=function(e,t,n){var r,i;Pc?((r=_c.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),a.dispatchEvent(r)):r={promise:t,reason:n},(i=a["on"+e])?i(r):e===Bc&&function(e,t){var n=a.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Hc=function(e,t){Ic.call(a,(function(){var n,r=t.value;if(qc(t)&&(n=Nc((function(){zc?Dc.emit("unhandledRejection",r,e):jc(Bc,e,r)})),t.rejection=zc||qc(t)?2:1,n.error))throw n.value}))},qc=function(e){return 1!==e.rejection&&!e.parent},Kc=function(e,t){Ic.call(a,(function(){zc?Dc.emit("rejectionHandled",e):jc("rejectionhandled",e,t.value)}))},Xc=function(e,t,n,r){return function(a){e(t,n,a,r)}},Yc=function(e,t,n,r){t.done||(t.done=!0,r&&(t=r),t.value=n,t.state=2,Gc(e,t,!0))},Jc=function e(t,n,r,a){if(!n.done){n.done=!0,a&&(n=a);try{if(t===r)throw Fc("Promise can't be resolved itself");var i=Uc(r);i?bc((function(){var a={done:!1};try{i.call(r,Xc(e,t,a,n),Xc(Yc,t,a,n))}catch(e){Yc(t,a,e,n)}})):(n.value=r,n.state=1,Gc(t,n,!1))}catch(e){Yc(t,{done:!1},e,n)}}};Wc&&(Ac=function(e){zl(this,Ac,Tc),ut(e),mc.call(this);var t=Cc(this);try{e(Xc(Jc,this,t),Xc(Yc,this,t))}catch(e){Yc(this,t,e)}},(mc=function(e){Ec(this,{type:Tc,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Ll(Ac.prototype,{then:function(e,t){var n=Rc(this),r=Mc(ho(this,Ac));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=zc?Dc.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Gc(this,n,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),vc=function(){var e=new mc,t=Cc(e);this.promise=e,this.resolve=Xc(Jc,e,t),this.reject=Xc(Yc,e,t)},wc.f=Mc=function(e){return e===Ac||e===gc?new vc(e):Lc(e)},"function"==typeof Ml&&(yc=Ml.prototype.then,re(Ml.prototype,"then",(function(e,t){var n=this;return new Ac((function(e,t){yc.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof Oc&&De({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return kc(Ac,Oc.apply(a,arguments))}}))),De({global:!0,wrap:!0,forced:Wc},{Promise:Ac}),st(Ac,Tc,!1),ii(Tc),gc=oe(Tc),De({target:Tc,stat:!0,forced:Wc},{reject:function(e){var t=Mc(this);return t.reject.call(void 0,e),t.promise}}),De({target:Tc,stat:!0,forced:Wc},{resolve:function(e){return kc(this,e)}}),De({target:Tc,stat:!0,forced:Vc},{all:function(e){var t=this,n=Mc(t),r=n.resolve,a=n.reject,i=Nc((function(){var n=ut(t.resolve),i=[],o=0,s=1;Sn(e,(function(e){var u=o++,l=!1;i.push(void 0),s++,n.call(t,e).then((function(e){l||(l=!0,i[u]=e,--s||r(i))}),a)})),--s||r(i)}));return i.error&&a(i.value),n.promise},race:function(e){var t=this,n=Mc(t),r=n.reject,a=Nc((function(){var a=ut(t.resolve);Sn(e,(function(e){a.call(t,e).then(n.resolve,r)}))}));return a.error&&r(a.value),n.promise}}),De({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=wc.f(t),r=n.resolve,a=n.reject,i=Nc((function(){var n=ut(t.resolve),a=[],i=0,o=1;Sn(e,(function(e){var s=i++,u=!1;a.push(void 0),o++,n.call(t,e).then((function(e){u||(u=!0,a[s]={status:"fulfilled",value:e},--o||r(a))}),(function(e){u||(u=!0,a[s]={status:"rejected",reason:e},--o||r(a))}))})),--o||r(a)}));return i.error&&a(i.value),n.promise}});var Zc=!!Ml&&i((function(){Ml.prototype.finally.call({then:function(){}},(function(){}))}));De({target:"Promise",proto:!0,real:!0,forced:Zc},{finally:function(e){var t=ho(this,oe("Promise")),n="function"==typeof e;return this.then(n?function(n){return kc(t,e()).then((function(){return n}))}:e,n?function(n){return kc(t,e()).then((function(){throw n}))}:e)}}),"function"!=typeof Ml||Ml.prototype.finally||re(Ml.prototype,"finally",oe("Promise").prototype.finally);var Qc=function(e,t,n){var r=-1!==e.indexOf("Map"),o=-1!==e.indexOf("Weak"),s=r?"set":"add",u=a[e],l=u&&u.prototype,c=u,p={},f=function(e){var t=l[e];re(l,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(o&&!y(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return o&&!y(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(o&&!y(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Fe(e,"function"!=typeof u||!(o||l.forEach&&!i((function(){(new u).entries().next()})))))c=n.getConstructor(t,e,r,s),ln.REQUIRED=!0;else if(Fe(e,!0)){var h=new c,d=h[s](o?{}:-0,1)!=h,m=i((function(){h.has(1)})),v=yr((function(e){new u(e)})),g=!o&&i((function(){for(var e=new u,t=5;t--;)e[s](t,t);return!e.has(-0)}));v||((c=t((function(t,n){zl(t,c,e);var a=ds(new u,t,c);return null!=n&&Sn(n,a[s],a,r),a}))).prototype=l,l.constructor=c),(m||g)&&(f("delete"),f("has"),r&&f("get")),(g||d)&&f(s),o&&l.clear&&delete l.clear}return p[e]=c,De({global:!0,forced:c!=u},p),st(c,e),o||n.setStrong(c,e,r),c},$c=A.f,ep=ln.fastKey,tp=ne.set,np=ne.getterFor,rp={getConstructor:function(e,t,n,r){var a=e((function(e,i){zl(e,a,t),tp(e,{type:t,index:Ke(null),first:void 0,last:void 0,size:0}),o||(e.size=0),null!=i&&Sn(i,e[r],e,n)})),i=np(t),s=function(e,t,n){var r,a,s=i(e),l=u(e,t);return l?l.value=n:(s.last=l={index:a=ep(t,!0),key:t,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=l),r&&(r.next=l),o?s.size++:e.size++,"F"!==a&&(s.index[a]=l)),e},u=function(e,t){var n,r=i(e),a=ep(t);if("F"!==a)return r.index[a];for(n=r.first;n;n=n.next)if(n.key==t)return n};return Ll(a.prototype,{clear:function(){for(var e=i(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,o?e.size=0:this.size=0},delete:function(e){var t=this,n=i(t),r=u(t,e);if(r){var a=r.next,s=r.previous;delete n.index[r.index],r.removed=!0,s&&(s.next=a),a&&(a.previous=s),n.first==r&&(n.first=a),n.last==r&&(n.last=s),o?n.size--:t.size--}return!!r},forEach:function(e){for(var t,n=i(this),r=lt(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!u(this,e)}}),Ll(a.prototype,n?{get:function(e){var t=u(this,e);return t&&t.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),o&&$c(a.prototype,"size",{get:function(){return i(this).size}}),a},setStrong:function(e,t,n){var r=t+" Iterator",a=np(t),i=np(r);ki(e,t,(function(e,t){tp(this,{type:r,target:e,state:a(e),kind:t,last:void 0})}),(function(){for(var e=i(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),ii(t)}},ap=(Qc("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),rp),Qc("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),rp),ln.getWeakData),ip=ne.set,op=ne.getterFor,sp=dt.find,up=dt.findIndex,lp=0,cp=function(e){return e.frozen||(e.frozen=new pp)},pp=function(){this.entries=[]},fp=function(e,t){return sp(e.entries,(function(e){return e[0]===t}))};pp.prototype={get:function(e){var t=fp(this,e);if(t)return t[1]},has:function(e){return!!fp(this,e)},set:function(e,t){var n=fp(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=up(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}};var hp={getConstructor:function(e,t,n,r){var a=e((function(e,i){zl(e,a,t),ip(e,{type:t,id:lp++,frozen:void 0}),null!=i&&Sn(i,e[r],e,n)})),i=op(t),o=function(e,t,n){var r=i(e),a=ap(E(t),!0);return!0===a?cp(r).set(t,n):a[r.id]=n,e};return Ll(a.prototype,{delete:function(e){var t=i(this);if(!y(e))return!1;var n=ap(e);return!0===n?cp(t).delete(e):n&&w(n,t.id)&&delete n[t.id]},has:function(e){var t=i(this);if(!y(e))return!1;var n=ap(e);return!0===n?cp(t).has(e):n&&w(n,t.id)}}),Ll(a.prototype,n?{get:function(e){var t=i(this);if(y(e)){var n=ap(e);return!0===n?cp(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return o(this,e,t)}}:{add:function(e){return o(this,e,!0)}}),a}};n((function(e){var t,n=ne.enforce,r=!a.ActiveXObject&&"ActiveXObject"in a,i=Object.isExtensible,o=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},s=e.exports=Qc("WeakMap",o,hp);if(V&&r){t=hp.getConstructor(o,"WeakMap",!0),ln.REQUIRED=!0;var u=s.prototype,l=u.delete,c=u.has,p=u.get,f=u.set;Ll(u,{delete:function(e){if(y(e)&&!i(e)){var r=n(this);return r.frozen||(r.frozen=new t),l.call(this,e)||r.frozen.delete(e)}return l.call(this,e)},has:function(e){if(y(e)&&!i(e)){var r=n(this);return r.frozen||(r.frozen=new t),c.call(this,e)||r.frozen.has(e)}return c.call(this,e)},get:function(e){if(y(e)&&!i(e)){var r=n(this);return r.frozen||(r.frozen=new t),c.call(this,e)?p.call(this,e):r.frozen.get(e)}return p.call(this,e)},set:function(e,r){if(y(e)&&!i(e)){var a=n(this);a.frozen||(a.frozen=new t),c.call(this,e)?f.call(this,e,r):a.frozen.set(e,r)}else f.call(this,e,r);return this}})}}));Qc("WeakSet",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),hp);var dp="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,mp=function(e){if(void 0===e)return 0;var t=le(e),n=pe(t);if(t!==n)throw RangeError("Wrong length or index");return n},vp=1/0,gp=Math.abs,yp=Math.pow,bp=Math.floor,xp=Math.log,wp=Math.LN2,kp=function(e,t,n){var r,a,i,o=new Array(n),s=8*n-t-1,u=(1<<s)-1,l=u>>1,c=23===t?yp(2,-24)-yp(2,-77):0,p=e<0||0===e&&1/e<0?1:0,f=0;for((e=gp(e))!=e||e===vp?(a=e!=e?1:0,r=u):(r=bp(xp(e)/wp),e*(i=yp(2,-r))<1&&(r--,i*=2),(e+=r+l>=1?c/i:c*yp(2,1-l))*i>=2&&(r++,i/=2),r+l>=u?(a=0,r=u):r+l>=1?(a=(e*i-1)*yp(2,t),r+=l):(a=e*yp(2,l-1)*yp(2,t),r=0));t>=8;o[f++]=255&a,a/=256,t-=8);for(r=r<<t|a,s+=t;s>0;o[f++]=255&r,r/=256,s-=8);return o[--f]|=128*p,o},Np=function(e,t){var n,r=e.length,a=8*r-t-1,i=(1<<a)-1,o=i>>1,s=a-7,u=r-1,l=e[u--],c=127&l;for(l>>=7;s>0;c=256*c+e[u],u--,s-=8);for(n=c&(1<<-s)-1,c>>=-s,s+=t;s>0;n=256*n+e[u],u--,s-=8);if(0===c)c=1-o;else{if(c===i)return n?NaN:l?-1/0:vp;n+=yp(2,t),c-=o}return(l?-1:1)*n*yp(2,c-t)},Ip=we.f,Sp=A.f,Tp=ne.get,Cp=ne.set,Ep="ArrayBuffer",Rp="DataView",Ap="prototype",Fp="Wrong index",_p=a[Ep],Dp=_p,Op=a[Rp],Mp=Op&&Op[Ap],Lp=Object.prototype,zp=a.RangeError,Pp=kp,Bp=Np,Wp=function(e){return[255&e]},Vp=function(e){return[255&e,e>>8&255]},Up=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},Gp=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},jp=function(e){return Pp(e,23,4)},Hp=function(e){return Pp(e,52,8)},qp=function(e,t){Sp(e[Ap],t,{get:function(){return Tp(this)[t]}})},Kp=function(e,t,n,r){var a=mp(n),i=Tp(e);if(a+t>i.byteLength)throw zp(Fp);var o=Tp(i.buffer).bytes,s=a+i.byteOffset,u=o.slice(s,s+t);return r?u:u.reverse()},Xp=function(e,t,n,r,a,i){var o=mp(n),s=Tp(e);if(o+t>s.byteLength)throw zp(Fp);for(var u=Tp(s.buffer).bytes,l=o+s.byteOffset,c=r(+a),p=0;p<t;p++)u[l+p]=c[i?p:t-p-1]};if(dp){if(!i((function(){_p(1)}))||!i((function(){new _p(-1)}))||i((function(){return new _p,new _p(1.5),new _p(NaN),_p.name!=Ep}))){for(var Yp,Jp=(Dp=function(e){return zl(this,Dp),new _p(mp(e))})[Ap]=_p[Ap],Zp=Ip(_p),Qp=0;Zp.length>Qp;)(Yp=Zp[Qp++])in Dp||F(Dp,Yp,_p[Yp]);Jp.constructor=Dp}Zn&&On(Mp)!==Lp&&Zn(Mp,Lp);var $p=new Op(new Dp(2)),ef=Mp.setInt8;$p.setInt8(0,2147483648),$p.setInt8(1,2147483649),!$p.getInt8(0)&&$p.getInt8(1)||Ll(Mp,{setInt8:function(e,t){ef.call(this,e,t<<24>>24)},setUint8:function(e,t){ef.call(this,e,t<<24>>24)}},{unsafe:!0})}else Dp=function(e){zl(this,Dp,Ep);var t=mp(e);Cp(this,{bytes:Yr.call(new Array(t),0),byteLength:t}),o||(this.byteLength=t)},Op=function(e,t,n){zl(this,Op,Rp),zl(e,Dp,Rp);var r=Tp(e).byteLength,a=le(t);if(a<0||a>r)throw zp("Wrong offset");if(a+(n=void 0===n?r-a:pe(n))>r)throw zp("Wrong length");Cp(this,{buffer:e,byteLength:n,byteOffset:a}),o||(this.buffer=e,this.byteLength=n,this.byteOffset=a)},o&&(qp(Dp,"byteLength"),qp(Op,"buffer"),qp(Op,"byteLength"),qp(Op,"byteOffset")),Ll(Op[Ap],{getInt8:function(e){return Kp(this,1,e)[0]<<24>>24},getUint8:function(e){return Kp(this,1,e)[0]},getInt16:function(e){var t=Kp(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Kp(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return Gp(Kp(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return Gp(Kp(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return Bp(Kp(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return Bp(Kp(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){Xp(this,1,e,Wp,t)},setUint8:function(e,t){Xp(this,1,e,Wp,t)},setInt16:function(e,t){Xp(this,2,e,Vp,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){Xp(this,2,e,Vp,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){Xp(this,4,e,Up,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){Xp(this,4,e,Up,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){Xp(this,4,e,jp,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){Xp(this,8,e,Hp,t,arguments.length>2?arguments[2]:void 0)}});st(Dp,Ep),st(Op,Rp);var tf={ArrayBuffer:Dp,DataView:Op},nf="ArrayBuffer",rf=tf[nf],af=a[nf];De({global:!0,forced:af!==rf},{ArrayBuffer:rf}),ii(nf);var of,sf=A.f,uf=a.Int8Array,lf=uf&&uf.prototype,cf=a.Uint8ClampedArray,pf=cf&&cf.prototype,ff=uf&&On(uf),hf=lf&&On(lf),df=Object.prototype,mf=df.isPrototypeOf,vf=tt("toStringTag"),gf=H("TYPED_ARRAY_TAG"),yf=dp&&!!Zn&&"Opera"!==wn(a.opera),bf=!1,xf={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},wf=function(e){return y(e)&&w(xf,wn(e))};for(of in xf)a[of]||(yf=!1);if((!yf||"function"!=typeof ff||ff===Function.prototype)&&(ff=function(){throw TypeError("Incorrect invocation")},yf))for(of in xf)a[of]&&Zn(a[of],ff);if((!yf||!hf||hf===df)&&(hf=ff.prototype,yf))for(of in xf)a[of]&&Zn(a[of].prototype,hf);if(yf&&On(pf)!==hf&&Zn(pf,hf),o&&!w(hf,vf))for(of in bf=!0,sf(hf,vf,{get:function(){return y(this)?this[gf]:void 0}}),xf)a[of]&&F(a[of],gf,of);var kf={NATIVE_ARRAY_BUFFER_VIEWS:yf,TYPED_ARRAY_TAG:bf&&gf,aTypedArray:function(e){if(wf(e))return e;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(e){if(Zn){if(mf.call(ff,e))return e}else for(var t in xf)if(w(xf,of)){var n=a[t];if(n&&(e===n||mf.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n){if(o){if(n)for(var r in xf){var i=a[r];i&&w(i.prototype,e)&&delete i.prototype[e]}hf[e]&&!n||re(hf,e,n?t:yf&&lf[e]||t)}},exportTypedArrayStaticMethod:function(e,t,n){var r,i;if(o){if(Zn){if(n)for(r in xf)(i=a[r])&&w(i,e)&&delete i[e];if(ff[e]&&!n)return;try{return re(ff,e,n?t:yf&&uf[e]||t)}catch(e){}}for(r in xf)!(i=a[r])||i[e]&&!n||re(i,e,t)}},isView:function(e){var t=wn(e);return"DataView"===t||w(xf,t)},isTypedArray:wf,TypedArray:ff,TypedArrayPrototype:hf};De({target:"ArrayBuffer",stat:!0,forced:!kf.NATIVE_ARRAY_BUFFER_VIEWS},{isView:kf.isView});var Nf=tf.ArrayBuffer,If=tf.DataView,Sf=Nf.prototype.slice,Tf=i((function(){return!new Nf(2).slice(1,void 0).byteLength}));De({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Tf},{slice:function(e,t){if(void 0!==Sf&&void 0===t)return Sf.call(E(this),e);for(var n=E(this).byteLength,r=de(e,n),a=de(void 0===t?n:t,n),i=new(ho(this,Nf))(pe(a-r)),o=new If(this),s=new If(i),u=0;r<a;)s.setUint8(u++,o.getUint8(r++));return i}}),De({global:!0,forced:!dp},{DataView:tf.DataView});var Cf=kf.NATIVE_ARRAY_BUFFER_VIEWS,Ef=a.ArrayBuffer,Rf=a.Int8Array,Af=!Cf||!i((function(){Rf(1)}))||!i((function(){new Rf(-1)}))||!yr((function(e){new Rf,new Rf(null),new Rf(1.5),new Rf(e)}),!0)||i((function(){return 1!==new Rf(new Ef(2),1,void 0).length})),Ff=function(e,t){var n=function(e){var t=le(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}(e);if(n%t)throw RangeError("Wrong offset");return n},_f=kf.aTypedArrayConstructor,Df=function(e){var t,n,r,a,i,o,s=ze(e),u=arguments.length,l=u>1?arguments[1]:void 0,c=void 0!==l,p=Nn(s);if(null!=p&&!vn(p))for(o=(i=p.call(s)).next,s=[];!(a=o.call(i)).done;)s.push(a.value);for(c&&u>2&&(l=lt(l,arguments[2],2)),n=pe(s.length),r=new(_f(this))(n),t=0;n>t;t++)r[t]=c?l(s[t],t):s[t];return r},Of=n((function(e){var t=we.f,n=dt.forEach,r=ne.get,i=ne.set,s=A.f,u=C.f,l=Math.round,c=a.RangeError,f=tf.ArrayBuffer,h=tf.DataView,d=kf.NATIVE_ARRAY_BUFFER_VIEWS,m=kf.TYPED_ARRAY_TAG,v=kf.TypedArray,g=kf.TypedArrayPrototype,x=kf.aTypedArrayConstructor,k=kf.isTypedArray,N="BYTES_PER_ELEMENT",I="Wrong length",S=function(e,t){for(var n=0,r=t.length,a=new(x(e))(r);r>n;)a[n]=t[n++];return a},T=function(e,t){s(e,t,{get:function(){return r(this)[t]}})},E=function(e){var t;return e instanceof f||"ArrayBuffer"==(t=wn(e))||"SharedArrayBuffer"==t},R=function(e,t){return k(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},_=function(e,t){return R(e,t=b(t,!0))?p(2,e[t]):u(e,t)},D=function(e,t,n){return!(R(e,t=b(t,!0))&&y(n)&&w(n,"value"))||w(n,"get")||w(n,"set")||n.configurable||w(n,"writable")&&!n.writable||w(n,"enumerable")&&!n.enumerable?s(e,t,n):(e[t]=n.value,e)};o?(d||(C.f=_,A.f=D,T(g,"buffer"),T(g,"byteOffset"),T(g,"byteLength"),T(g,"length")),De({target:"Object",stat:!0,forced:!d},{getOwnPropertyDescriptor:_,defineProperty:D}),e.exports=function(e,o,u){var p=e.match(/\d+$/)[0]/8,b=e+(u?"Clamped":"")+"Array",x="get"+e,w="set"+e,T=a[b],C=T,R=C&&C.prototype,A={},_=function(e,t){s(e,t,{get:function(){return function(e,t){var n=r(e);return n.view[x](t*p+n.byteOffset,!0)}(this,t)},set:function(e){return function(e,t,n){var a=r(e);u&&(n=(n=l(n))<0?0:n>255?255:255&n),a.view[w](t*p+a.byteOffset,n,!0)}(this,t,e)},enumerable:!0})};d?Af&&(C=o((function(e,t,n,r){return zl(e,C,b),ds(y(t)?E(t)?void 0!==r?new T(t,Ff(n,p),r):void 0!==n?new T(t,Ff(n,p)):new T(t):k(t)?S(C,t):Df.call(C,t):new T(mp(t)),e,C)})),Zn&&Zn(C,v),n(t(T),(function(e){e in C||F(C,e,T[e])})),C.prototype=R):(C=o((function(e,t,n,r){zl(e,C,b);var a,o,s,u=0,l=0;if(y(t)){if(!E(t))return k(t)?S(C,t):Df.call(C,t);a=t,l=Ff(n,p);var d=t.byteLength;if(void 0===r){if(d%p)throw c(I);if((o=d-l)<0)throw c(I)}else if((o=pe(r)*p)+l>d)throw c(I);s=o/p}else s=mp(t),a=new f(o=s*p);for(i(e,{buffer:a,byteOffset:l,byteLength:o,length:s,view:new h(a)});u<s;)_(e,u++)})),Zn&&Zn(C,v),R=C.prototype=Ke(g)),R.constructor!==C&&F(R,"constructor",C),m&&F(R,m,b),A[b]=C,De({global:!0,forced:C!=T,sham:!d},A),N in C||F(C,N,p),N in R||F(R,N,p),ii(b)}):e.exports=function(){}}));Of("Int8",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Of("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Of("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}),!0),Of("Int16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Of("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Of("Int32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Of("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Of("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Of("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}})),(0,kf.exportTypedArrayStaticMethod)("from",Df,Af);var Mf=kf.aTypedArrayConstructor;(0,kf.exportTypedArrayStaticMethod)("of",(function(){for(var e=0,t=arguments.length,n=new(Mf(this))(t);t>e;)n[e]=arguments[e++];return n}),Af);var Lf=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("copyWithin",(function(e,t){return zr.call(Lf(this),e,t,arguments.length>2?arguments[2]:void 0)}));var zf=dt.every,Pf=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("every",(function(e){return zf(Pf(this),e,arguments.length>1?arguments[1]:void 0)}));var Bf=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("fill",(function(e){return Yr.apply(Bf(this),arguments)}));var Wf=dt.filter,Vf=kf.aTypedArray,Uf=kf.aTypedArrayConstructor;(0,kf.exportTypedArrayMethod)("filter",(function(e){for(var t=Wf(Vf(this),e,arguments.length>1?arguments[1]:void 0),n=ho(this,this.constructor),r=0,a=t.length,i=new(Uf(n))(a);a>r;)i[r]=t[r++];return i}));var Gf=dt.find,jf=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("find",(function(e){return Gf(jf(this),e,arguments.length>1?arguments[1]:void 0)}));var Hf=dt.findIndex,qf=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("findIndex",(function(e){return Hf(qf(this),e,arguments.length>1?arguments[1]:void 0)}));var Kf=dt.forEach,Xf=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("forEach",(function(e){Kf(Xf(this),e,arguments.length>1?arguments[1]:void 0)}));var Yf=ve.includes,Jf=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("includes",(function(e){return Yf(Jf(this),e,arguments.length>1?arguments[1]:void 0)}));var Zf=ve.indexOf,Qf=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("indexOf",(function(e){return Zf(Qf(this),e,arguments.length>1?arguments[1]:void 0)}));var $f=tt("iterator"),eh=a.Uint8Array,th=Ti.values,nh=Ti.keys,rh=Ti.entries,ah=kf.aTypedArray,ih=kf.exportTypedArrayMethod,oh=eh&&eh.prototype[$f],sh=!!oh&&("values"==oh.name||null==oh.name),uh=function(){return th.call(ah(this))};ih("entries",(function(){return rh.call(ah(this))})),ih("keys",(function(){return nh.call(ah(this))})),ih("values",uh,!sh),ih($f,uh,!sh);var lh=kf.aTypedArray,ch=[].join;(0,kf.exportTypedArrayMethod)("join",(function(e){return ch.apply(lh(this),arguments)}));var ph=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("lastIndexOf",(function(e){return Ca.apply(ph(this),arguments)}));var fh=dt.map,hh=kf.aTypedArray,dh=kf.aTypedArrayConstructor;(0,kf.exportTypedArrayMethod)("map",(function(e){return fh(hh(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(dh(ho(e,e.constructor)))(t)}))}));var mh=_a.left,vh=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("reduce",(function(e){return mh(vh(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var gh=_a.right,yh=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("reduceRight",(function(e){return gh(yh(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}));var bh=kf.aTypedArray,xh=kf.exportTypedArrayMethod,wh=Math.floor;xh("reverse",(function(){for(var e,t=this,n=bh(t).length,r=wh(n/2),a=0;a<r;)e=t[a],t[a++]=t[--n],t[n]=e;return t}));var kh=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("set",(function(e){kh(this);var t=Ff(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=ze(e),a=pe(r.length),i=0;if(a+t>n)throw RangeError("Wrong length");for(;i<a;)this[t+i]=r[i++]}),i((function(){new Int8Array(1).set({})})));var Nh=kf.aTypedArray,Ih=kf.aTypedArrayConstructor,Sh=[].slice;(0,kf.exportTypedArrayMethod)("slice",(function(e,t){for(var n=Sh.call(Nh(this),e,t),r=ho(this,this.constructor),a=0,i=n.length,o=new(Ih(r))(i);i>a;)o[a]=n[a++];return o}),i((function(){new Int8Array(1).slice()})));var Th=dt.some,Ch=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("some",(function(e){return Th(Ch(this),e,arguments.length>1?arguments[1]:void 0)}));var Eh=kf.aTypedArray,Rh=[].sort;(0,kf.exportTypedArrayMethod)("sort",(function(e){return Rh.call(Eh(this),e)}));var Ah=kf.aTypedArray;(0,kf.exportTypedArrayMethod)("subarray",(function(e,t){var n=Ah(this),r=n.length,a=de(e,r);return new(ho(n,n.constructor))(n.buffer,n.byteOffset+a*n.BYTES_PER_ELEMENT,pe((void 0===t?r:de(t,r))-a))}));var Fh=a.Int8Array,_h=kf.aTypedArray,Dh=kf.exportTypedArrayMethod,Oh=[].toLocaleString,Mh=[].slice,Lh=!!Fh&&i((function(){Oh.call(new Fh(1))}));Dh("toLocaleString",(function(){return Oh.apply(Lh?Mh.call(_h(this)):_h(this),arguments)}),i((function(){return[1,2].toLocaleString()!=new Fh([1,2]).toLocaleString()}))||!i((function(){Fh.prototype.toLocaleString.call([1,2])})));var zh=kf.exportTypedArrayMethod,Ph=a.Uint8Array,Bh=Ph&&Ph.prototype||{},Wh=[].toString,Vh=[].join;i((function(){Wh.call({})}))&&(Wh=function(){return Vh.call(this)});var Uh=Bh.toString!=Wh;zh("toString",Wh,Uh);var Gh=oe("Reflect","apply"),jh=Function.apply,Hh=!i((function(){Gh((function(){}))}));De({target:"Reflect",stat:!0,forced:Hh},{apply:function(e,t,n){return ut(e),E(n),Gh?Gh(e,t,n):jh.call(e,t,n)}});var qh=oe("Reflect","construct"),Kh=i((function(){function e(){}return!(qh((function(){}),[],e)instanceof e)})),Xh=!i((function(){qh((function(){}))})),Yh=Kh||Xh;De({target:"Reflect",stat:!0,forced:Yh,sham:Yh},{construct:function(e,t){ut(e),E(t);var n=arguments.length<3?e:ut(arguments[2]);if(Xh&&!Kh)return qh(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(ir.apply(e,r))}var a=n.prototype,i=Ke(y(a)?a:Object.prototype),o=Function.apply.call(e,i,t);return y(o)?o:i}});var Jh=i((function(){Reflect.defineProperty(A.f({},1,{value:1}),1,{value:2})}));De({target:"Reflect",stat:!0,forced:Jh,sham:!o},{defineProperty:function(e,t,n){E(e);var r=b(t,!0);E(n);try{return A.f(e,r,n),!0}catch(e){return!1}}});var Zh=C.f;De({target:"Reflect",stat:!0},{deleteProperty:function(e,t){var n=Zh(E(e),t);return!(n&&!n.configurable)&&delete e[t]}}),De({target:"Reflect",stat:!0},{get:function e(t,n){var r,a,i=arguments.length<3?t:arguments[2];return E(t)===i?t[n]:(r=C.f(t,n))?w(r,"value")?r.value:void 0===r.get?void 0:r.get.call(i):y(a=On(t))?e(a,n,i):void 0}}),De({target:"Reflect",stat:!0,sham:!o},{getOwnPropertyDescriptor:function(e,t){return C.f(E(e),t)}}),De({target:"Reflect",stat:!0,sham:!Fn},{getPrototypeOf:function(e){return On(E(e))}}),De({target:"Reflect",stat:!0},{has:function(e,t){return t in e}});var Qh=Object.isExtensible;De({target:"Reflect",stat:!0},{isExtensible:function(e){return E(e),!Qh||Qh(e)}}),De({target:"Reflect",stat:!0},{ownKeys:Ne}),De({target:"Reflect",stat:!0,sham:!un},{preventExtensions:function(e){E(e);try{var t=oe("Object","preventExtensions");return t&&t(e),!0}catch(e){return!1}}});var $h=i((function(){var e=A.f({},"a",{configurable:!0});return!1!==Reflect.set(On(e),"a",1,e)}));De({target:"Reflect",stat:!0,forced:$h},{set:function e(t,n,r){var a,i,o=arguments.length<4?t:arguments[3],s=C.f(E(t),n);if(!s){if(y(i=On(t)))return e(i,n,r,o);s=p(0)}if(w(s,"value")){if(!1===s.writable||!y(o))return!1;if(a=C.f(o,n)){if(a.get||a.set||!1===a.writable)return!1;a.value=r,A.f(o,n,a)}else A.f(o,n,p(0,r));return!0}return void 0!==s.set&&(s.set.call(o,r),!0)}}),Zn&&De({target:"Reflect",stat:!0},{setPrototypeOf:function(e,t){E(e),Jn(t);try{return Zn(e,t),!0}catch(e){return!1}}});var ed={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var td in ed){var nd=a[td],rd=nd&&nd.prototype;if(rd&&rd.forEach!==pa)try{F(rd,"forEach",pa)}catch(e){rd.forEach=pa}}var ad=tt("iterator"),id=tt("toStringTag"),od=Ti.values;for(var sd in ed){var ud=a[sd],ld=ud&&ud.prototype;if(ld){if(ld[ad]!==od)try{F(ld,ad,od)}catch(e){ld[ad]=od}if(ld[id]||F(ld,id,sd),ed[sd])for(var cd in Ti)if(ld[cd]!==Ti[cd])try{F(ld,cd,Ti[cd])}catch(e){ld[cd]=Ti[cd]}}}var pd=!a.setImmediate||!a.clearImmediate;De({global:!0,bind:!0,enumerable:!0,forced:pd},{setImmediate:oc.set,clearImmediate:oc.clear});var fd=a.process,hd="process"==h(fd);De({global:!0,enumerable:!0,noTargetGet:!0},{queueMicrotask:function(e){var t=hd&&fd.domain;bc(t?t.bind(e):e)}});var dd=[].slice,md=/MSIE .\./.test(Nr),vd=function(e){return function(t,n){var r=arguments.length>2,a=r?dd.call(arguments,2):void 0;return e(r?function(){("function"==typeof t?t:Function(t)).apply(this,a)}:t,n)}};De({global:!0,bind:!0,forced:md},{setTimeout:vd(a.setTimeout),setInterval:vd(a.setInterval)});var gd=tt("iterator"),yd=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,r){t.delete("b"),n+=r+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[gd]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),bd=2147483647,xd=/[^\0-\u007E]/,wd=/[.\u3002\uFF0E\uFF61]/g,kd="Overflow: input needs wider integers to process",Nd=Math.floor,Id=String.fromCharCode,Sd=function(e){return e+22+75*(e<26)},Td=function(e,t,n){var r=0;for(e=n?Nd(e/700):e>>1,e+=Nd(e/t);e>455;r+=36)e=Nd(e/35);return Nd(r+36*e/(e+38))},Cd=function(e){var t=[];e=function(e){for(var t=[],n=0,r=e.length;n<r;){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){var i=e.charCodeAt(n++);56320==(64512&i)?t.push(((1023&a)<<10)+(1023&i)+65536):(t.push(a),n--)}else t.push(a)}return t}(e);var n,r,a=e.length,i=128,o=0,s=72;for(n=0;n<e.length;n++)(r=e[n])<128&&t.push(Id(r));var u=t.length,l=u;for(u&&t.push("-");l<a;){var c=bd;for(n=0;n<e.length;n++)(r=e[n])>=i&&r<c&&(c=r);var p=l+1;if(c-i>Nd((bd-o)/p))throw RangeError(kd);for(o+=(c-i)*p,i=c,n=0;n<e.length;n++){if((r=e[n])<i&&++o>bd)throw RangeError(kd);if(r==i){for(var f=o,h=36;;h+=36){var d=h<=s?1:h>=s+26?26:h-s;if(f<d)break;var m=f-d,v=36-d;t.push(Id(Sd(d+m%v))),f=Nd(m/v)}t.push(Id(Sd(f))),s=Td(o,p,l==u),o=0,++l}}++o,++i}return t.join("")},Ed=function(e){var t=Nn(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return E(t.call(e))},Rd=oe("fetch"),Ad=oe("Headers"),Fd=tt("iterator"),_d="URLSearchParams",Dd=_d+"Iterator",Od=ne.set,Md=ne.getterFor(_d),Ld=ne.getterFor(Dd),zd=/\+/g,Pd=Array(4),Bd=function(e){return Pd[e-1]||(Pd[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},Wd=function(e){try{return decodeURIComponent(e)}catch(t){return e}},Vd=function(e){var t=e.replace(zd," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace(Bd(n--),Wd);return t}},Ud=/[!'()~]|%20/g,Gd={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},jd=function(e){return Gd[e]},Hd=function(e){return encodeURIComponent(e).replace(Ud,jd)},qd=function(e,t){if(t)for(var n,r,a=t.split("&"),i=0;i<a.length;)(n=a[i++]).length&&(r=n.split("="),e.push({key:Vd(r.shift()),value:Vd(r.join("="))}))},Kd=function(e){this.entries.length=0,qd(this.entries,e)},Xd=function(e,t){if(e<t)throw TypeError("Not enough arguments")},Yd=di((function(e,t){Od(this,{type:Dd,iterator:Ed(Md(e).entries),kind:t})}),"Iterator",(function(){var e=Ld(this),t=e.kind,n=e.iterator.next(),r=n.value;return n.done||(n.value="keys"===t?r.key:"values"===t?r.value:[r.key,r.value]),n})),Jd=function(){zl(this,Jd,_d);var e,t,n,r,a,i,o,s,u,l=arguments.length>0?arguments[0]:void 0,c=[];if(Od(this,{type:_d,entries:c,updateURL:function(){},updateSearchParams:Kd}),void 0!==l)if(y(l))if("function"==typeof(e=Nn(l)))for(n=(t=e.call(l)).next;!(r=n.call(t)).done;){if((o=(i=(a=Ed(E(r.value))).next).call(a)).done||(s=i.call(a)).done||!i.call(a).done)throw TypeError("Expected sequence with length 2");c.push({key:o.value+"",value:s.value+""})}else for(u in l)w(l,u)&&c.push({key:u,value:l[u]+""});else qd(c,"string"==typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")},Zd=Jd.prototype;Ll(Zd,{append:function(e,t){Xd(arguments.length,2);var n=Md(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){Xd(arguments.length,1);for(var t=Md(this),n=t.entries,r=e+"",a=0;a<n.length;)n[a].key===r?n.splice(a,1):a++;t.updateURL()},get:function(e){Xd(arguments.length,1);for(var t=Md(this).entries,n=e+"",r=0;r<t.length;r++)if(t[r].key===n)return t[r].value;return null},getAll:function(e){Xd(arguments.length,1);for(var t=Md(this).entries,n=e+"",r=[],a=0;a<t.length;a++)t[a].key===n&&r.push(t[a].value);return r},has:function(e){Xd(arguments.length,1);for(var t=Md(this).entries,n=e+"",r=0;r<t.length;)if(t[r++].key===n)return!0;return!1},set:function(e,t){Xd(arguments.length,1);for(var n,r=Md(this),a=r.entries,i=!1,o=e+"",s=t+"",u=0;u<a.length;u++)(n=a[u]).key===o&&(i?a.splice(u--,1):(i=!0,n.value=s));i||a.push({key:o,value:s}),r.updateURL()},sort:function(){var e,t,n,r=Md(this),a=r.entries,i=a.slice();for(a.length=0,n=0;n<i.length;n++){for(e=i[n],t=0;t<n;t++)if(a[t].key>e.key){a.splice(t,0,e);break}t===n&&a.push(e)}r.updateURL()},forEach:function(e){for(var t,n=Md(this).entries,r=lt(e,arguments.length>1?arguments[1]:void 0,3),a=0;a<n.length;)r((t=n[a++]).value,t.key,this)},keys:function(){return new Yd(this,"keys")},values:function(){return new Yd(this,"values")},entries:function(){return new Yd(this,"entries")}},{enumerable:!0}),re(Zd,Fd,Zd.entries),re(Zd,"toString",(function(){for(var e,t=Md(this).entries,n=[],r=0;r<t.length;)e=t[r++],n.push(Hd(e.key)+"="+Hd(e.value));return n.join("&")}),{enumerable:!0}),st(Jd,_d),De({global:!0,forced:!yd},{URLSearchParams:Jd}),yd||"function"!=typeof Rd||"function"!=typeof Ad||De({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,r,a=[e];return arguments.length>1&&(y(t=arguments[1])&&(n=t.body,wn(n)===_d&&((r=t.headers?new Ad(t.headers):new Ad).has("content-type")||r.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=Ke(t,{body:p(0,String(n)),headers:p(0,r)}))),a.push(t)),Rd.apply(this,a)}});var Qd,$d={URLSearchParams:Jd,getState:Md},em=Fi.codeAt,tm=a.URL,nm=$d.URLSearchParams,rm=$d.getState,am=ne.set,im=ne.getterFor("URL"),om=Math.floor,sm=Math.pow,um="Invalid scheme",lm="Invalid host",cm="Invalid port",pm=/[A-Za-z]/,fm=/[\d+-.A-Za-z]/,hm=/\d/,dm=/^(0x|0X)/,mm=/^[0-7]+$/,vm=/^\d+$/,gm=/^[\dA-Fa-f]+$/,ym=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,bm=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,xm=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,wm=/[\u0009\u000A\u000D]/g,km=function(e,t){var n,r,a;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return lm;if(!(n=Im(t.slice(1,-1))))return lm;e.host=n}else if(_m(e)){if(t=function(e){var t,n,r=[],a=e.toLowerCase().replace(wd,".").split(".");for(t=0;t<a.length;t++)n=a[t],r.push(xd.test(n)?"xn--"+Cd(n):n);return r.join(".")}(t),ym.test(t))return lm;if(null===(n=Nm(t)))return lm;e.host=n}else{if(bm.test(t))return lm;for(n="",r=hr(t),a=0;a<r.length;a++)n+=Am(r[a],Tm);e.host=n}},Nm=function(e){var t,n,r,a,i,o,s,u=e.split(".");if(u.length&&""==u[u.length-1]&&u.pop(),(t=u.length)>4)return e;for(n=[],r=0;r<t;r++){if(""==(a=u[r]))return e;if(i=10,a.length>1&&"0"==a.charAt(0)&&(i=dm.test(a)?16:8,a=a.slice(8==i?1:2)),""===a)o=0;else{if(!(10==i?vm:8==i?mm:gm).test(a))return e;o=parseInt(a,i)}n.push(o)}for(r=0;r<t;r++)if(o=n[r],r==t-1){if(o>=sm(256,5-t))return null}else if(o>255)return null;for(s=n.pop(),r=0;r<n.length;r++)s+=n[r]*sm(256,3-r);return s},Im=function(e){var t,n,r,a,i,o,s,u=[0,0,0,0,0,0,0,0],l=0,c=null,p=0,f=function(){return e.charAt(p)};if(":"==f()){if(":"!=e.charAt(1))return;p+=2,c=++l}for(;f();){if(8==l)return;if(":"!=f()){for(t=n=0;n<4&&gm.test(f());)t=16*t+parseInt(f(),16),p++,n++;if("."==f()){if(0==n)return;if(p-=n,l>6)return;for(r=0;f();){if(a=null,r>0){if(!("."==f()&&r<4))return;p++}if(!hm.test(f()))return;for(;hm.test(f());){if(i=parseInt(f(),10),null===a)a=i;else{if(0==a)return;a=10*a+i}if(a>255)return;p++}u[l]=256*u[l]+a,2!=++r&&4!=r||l++}if(4!=r)return;break}if(":"==f()){if(p++,!f())return}else if(f())return;u[l++]=t}else{if(null!==c)return;p++,c=++l}}if(null!==c)for(o=l-c,l=7;0!=l&&o>0;)s=u[l],u[l--]=u[c+o-1],u[c+--o]=s;else if(8!=l)return;return u},Sm=function(e){var t,n,r,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=om(e/256);return t.join(".")}if("object"==typeof e){for(t="",r=function(e){for(var t=null,n=1,r=null,a=0,i=0;i<8;i++)0!==e[i]?(a>n&&(t=r,n=a),r=null,a=0):(null===r&&(r=i),++a);return a>n&&(t=r,n=a),t}(e),n=0;n<8;n++)a&&0===e[n]||(a&&(a=!1),r===n?(t+=n?":":"::",a=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},Tm={},Cm=nn({},Tm,{" ":1,'"':1,"<":1,">":1,"`":1}),Em=nn({},Cm,{"#":1,"?":1,"{":1,"}":1}),Rm=nn({},Em,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Am=function(e,t){var n=em(e,0);return n>32&&n<127&&!w(t,e)?e:encodeURIComponent(e)},Fm={ftp:21,file:null,http:80,https:443,ws:80,wss:443},_m=function(e){return w(Fm,e.scheme)},Dm=function(e){return""!=e.username||""!=e.password},Om=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},Mm=function(e,t){var n;return 2==e.length&&pm.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},Lm=function(e){var t;return e.length>1&&Mm(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},zm=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&Mm(t[0],!0)||t.pop()},Pm=function(e){return"."===e||"%2e"===e.toLowerCase()},Bm={},Wm={},Vm={},Um={},Gm={},jm={},Hm={},qm={},Km={},Xm={},Ym={},Jm={},Zm={},Qm={},$m={},ev={},tv={},nv={},rv={},av={},iv={},ov=function(e,t,n,r){var a,i,o,s,u,l=n||Bm,c=0,p="",f=!1,h=!1,d=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(xm,"")),t=t.replace(wm,""),a=hr(t);c<=a.length;){switch(i=a[c],l){case Bm:if(!i||!pm.test(i)){if(n)return um;l=Vm;continue}p+=i.toLowerCase(),l=Wm;break;case Wm:if(i&&(fm.test(i)||"+"==i||"-"==i||"."==i))p+=i.toLowerCase();else{if(":"!=i){if(n)return um;p="",l=Vm,c=0;continue}if(n&&(_m(e)!=w(Fm,p)||"file"==p&&(Dm(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,n)return void(_m(e)&&Fm[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?l=Qm:_m(e)&&r&&r.scheme==e.scheme?l=Um:_m(e)?l=qm:"/"==a[c+1]?(l=Gm,c++):(e.cannotBeABaseURL=!0,e.path.push(""),l=rv)}break;case Vm:if(!r||r.cannotBeABaseURL&&"#"!=i)return um;if(r.cannotBeABaseURL&&"#"==i){e.scheme=r.scheme,e.path=r.path.slice(),e.query=r.query,e.fragment="",e.cannotBeABaseURL=!0,l=iv;break}l="file"==r.scheme?Qm:jm;continue;case Um:if("/"!=i||"/"!=a[c+1]){l=jm;continue}l=Km,c++;break;case Gm:if("/"==i){l=Xm;break}l=nv;continue;case jm:if(e.scheme=r.scheme,i==Qd)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query;else if("/"==i||"\\"==i&&_m(e))l=Hm;else if("?"==i)e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query="",l=av;else{if("#"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.path.pop(),l=nv;continue}e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,e.path=r.path.slice(),e.query=r.query,e.fragment="",l=iv}break;case Hm:if(!_m(e)||"/"!=i&&"\\"!=i){if("/"!=i){e.username=r.username,e.password=r.password,e.host=r.host,e.port=r.port,l=nv;continue}l=Xm}else l=Km;break;case qm:if(l=Km,"/"!=i||"/"!=p.charAt(c+1))continue;c++;break;case Km:if("/"!=i&&"\\"!=i){l=Xm;continue}break;case Xm:if("@"==i){f&&(p="%40"+p),f=!0,o=hr(p);for(var m=0;m<o.length;m++){var v=o[m];if(":"!=v||d){var g=Am(v,Rm);d?e.password+=g:e.username+=g}else d=!0}p=""}else if(i==Qd||"/"==i||"?"==i||"#"==i||"\\"==i&&_m(e)){if(f&&""==p)return"Invalid authority";c-=hr(p).length+1,p="",l=Ym}else p+=i;break;case Ym:case Jm:if(n&&"file"==e.scheme){l=ev;continue}if(":"!=i||h){if(i==Qd||"/"==i||"?"==i||"#"==i||"\\"==i&&_m(e)){if(_m(e)&&""==p)return lm;if(n&&""==p&&(Dm(e)||null!==e.port))return;if(s=km(e,p))return s;if(p="",l=tv,n)return;continue}"["==i?h=!0:"]"==i&&(h=!1),p+=i}else{if(""==p)return lm;if(s=km(e,p))return s;if(p="",l=Zm,n==Jm)return}break;case Zm:if(!hm.test(i)){if(i==Qd||"/"==i||"?"==i||"#"==i||"\\"==i&&_m(e)||n){if(""!=p){var y=parseInt(p,10);if(y>65535)return cm;e.port=_m(e)&&y===Fm[e.scheme]?null:y,p=""}if(n)return;l=tv;continue}return cm}p+=i;break;case Qm:if(e.scheme="file","/"==i||"\\"==i)l=$m;else{if(!r||"file"!=r.scheme){l=nv;continue}if(i==Qd)e.host=r.host,e.path=r.path.slice(),e.query=r.query;else if("?"==i)e.host=r.host,e.path=r.path.slice(),e.query="",l=av;else{if("#"!=i){Lm(a.slice(c).join(""))||(e.host=r.host,e.path=r.path.slice(),zm(e)),l=nv;continue}e.host=r.host,e.path=r.path.slice(),e.query=r.query,e.fragment="",l=iv}}break;case $m:if("/"==i||"\\"==i){l=ev;break}r&&"file"==r.scheme&&!Lm(a.slice(c).join(""))&&(Mm(r.path[0],!0)?e.path.push(r.path[0]):e.host=r.host),l=nv;continue;case ev:if(i==Qd||"/"==i||"\\"==i||"?"==i||"#"==i){if(!n&&Mm(p))l=nv;else if(""==p){if(e.host="",n)return;l=tv}else{if(s=km(e,p))return s;if("localhost"==e.host&&(e.host=""),n)return;p="",l=tv}continue}p+=i;break;case tv:if(_m(e)){if(l=nv,"/"!=i&&"\\"!=i)continue}else if(n||"?"!=i)if(n||"#"!=i){if(i!=Qd&&(l=nv,"/"!=i))continue}else e.fragment="",l=iv;else e.query="",l=av;break;case nv:if(i==Qd||"/"==i||"\\"==i&&_m(e)||!n&&("?"==i||"#"==i)){if(".."===(u=(u=p).toLowerCase())||"%2e."===u||".%2e"===u||"%2e%2e"===u?(zm(e),"/"==i||"\\"==i&&_m(e)||e.path.push("")):Pm(p)?"/"==i||"\\"==i&&_m(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&Mm(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(i==Qd||"?"==i||"#"==i))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==i?(e.query="",l=av):"#"==i&&(e.fragment="",l=iv)}else p+=Am(i,Em);break;case rv:"?"==i?(e.query="",l=av):"#"==i?(e.fragment="",l=iv):i!=Qd&&(e.path[0]+=Am(i,Tm));break;case av:n||"#"!=i?i!=Qd&&("'"==i&&_m(e)?e.query+="%27":e.query+="#"==i?"%23":Am(i,Tm)):(e.fragment="",l=iv);break;case iv:i!=Qd&&(e.fragment+=Am(i,Cm))}c++}},sv=function(e){var t,n,r=zl(this,sv,"URL"),a=arguments.length>1?arguments[1]:void 0,i=String(e),s=am(r,{type:"URL"});if(void 0!==a)if(a instanceof sv)t=im(a);else if(n=ov(t={},String(a)))throw TypeError(n);if(n=ov(s,i,null,t))throw TypeError(n);var u=s.searchParams=new nm,l=rm(u);l.updateSearchParams(s.query),l.updateURL=function(){s.query=String(u)||null},o||(r.href=lv.call(r),r.origin=cv.call(r),r.protocol=pv.call(r),r.username=fv.call(r),r.password=hv.call(r),r.host=dv.call(r),r.hostname=mv.call(r),r.port=vv.call(r),r.pathname=gv.call(r),r.search=yv.call(r),r.searchParams=bv.call(r),r.hash=xv.call(r))},uv=sv.prototype,lv=function(){var e=im(this),t=e.scheme,n=e.username,r=e.password,a=e.host,i=e.port,o=e.path,s=e.query,u=e.fragment,l=t+":";return null!==a?(l+="//",Dm(e)&&(l+=n+(r?":"+r:"")+"@"),l+=Sm(a),null!==i&&(l+=":"+i)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(l+="?"+s),null!==u&&(l+="#"+u),l},cv=function(){var e=im(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&_m(e)?t+"://"+Sm(e.host)+(null!==n?":"+n:""):"null"},pv=function(){return im(this).scheme+":"},fv=function(){return im(this).username},hv=function(){return im(this).password},dv=function(){var e=im(this),t=e.host,n=e.port;return null===t?"":null===n?Sm(t):Sm(t)+":"+n},mv=function(){var e=im(this).host;return null===e?"":Sm(e)},vv=function(){var e=im(this).port;return null===e?"":String(e)},gv=function(){var e=im(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},yv=function(){var e=im(this).query;return e?"?"+e:""},bv=function(){return im(this).searchParams},xv=function(){var e=im(this).fragment;return e?"#"+e:""},wv=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&Be(uv,{href:wv(lv,(function(e){var t=im(this),n=String(e),r=ov(t,n);if(r)throw TypeError(r);rm(t.searchParams).updateSearchParams(t.query)})),origin:wv(cv),protocol:wv(pv,(function(e){var t=im(this);ov(t,String(e)+":",Bm)})),username:wv(fv,(function(e){var t=im(this),n=hr(String(e));if(!Om(t)){t.username="";for(var r=0;r<n.length;r++)t.username+=Am(n[r],Rm)}})),password:wv(hv,(function(e){var t=im(this),n=hr(String(e));if(!Om(t)){t.password="";for(var r=0;r<n.length;r++)t.password+=Am(n[r],Rm)}})),host:wv(dv,(function(e){var t=im(this);t.cannotBeABaseURL||ov(t,String(e),Ym)})),hostname:wv(mv,(function(e){var t=im(this);t.cannotBeABaseURL||ov(t,String(e),Jm)})),port:wv(vv,(function(e){var t=im(this);Om(t)||(""==(e=String(e))?t.port=null:ov(t,e,Zm))})),pathname:wv(gv,(function(e){var t=im(this);t.cannotBeABaseURL||(t.path=[],ov(t,e+"",tv))})),search:wv(yv,(function(e){var t=im(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",ov(t,e,av)),rm(t.searchParams).updateSearchParams(t.query)})),searchParams:wv(bv),hash:wv(xv,(function(e){var t=im(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",ov(t,e,iv)):t.fragment=null}))}),re(uv,"toJSON",(function(){return lv.call(this)}),{enumerable:!0}),re(uv,"toString",(function(){return lv.call(this)}),{enumerable:!0}),tm){var kv=tm.createObjectURL,Nv=tm.revokeObjectURL;kv&&re(sv,"createObjectURL",(function(e){return kv.apply(tm,arguments)})),Nv&&re(sv,"revokeObjectURL",(function(e){return Nv.apply(tm,arguments)}))}st(sv,"URL"),De({global:!0,forced:!yd,sham:!o},{URL:sv}),De({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});n((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),o=new C(r||[]);return i._invoke=function(e,t,n){var r=c;return function(a,i){if(r===f)throw new Error("Generator is already running");if(r===h){if("throw"===a)throw i;return R()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=I(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===c)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var u=l(e,t,n);if("normal"===u.type){if(r=n.done?h:p,u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var c="suspendedStart",p="suspendedYield",f="executing",h="completed",d={};function m(){}function v(){}function g(){}var y={};y[i]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(E([])));x&&x!==n&&r.call(x,i)&&(y=x);var w=g.prototype=m.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function N(e,t){function n(a,i,o,s){var u=l(e[a],e,i);if("throw"!==u.type){var c=u.arg,p=c.value;return p&&"object"==typeof p&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(p).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,s)}))}s(u.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function I(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,I(e,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,d;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,d):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function E(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:R}}function R(){return{value:t,done:!0}}return v.prototype=w.constructor=g,g.constructor=v,g[s]=v.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},k(N.prototype),N.prototype[o]=function(){return this},e.AsyncIterator=N,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new N(u(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(w),w[s]="Generator",w[i]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=E,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return s.type="throw",s.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(u&&l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;T(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:E(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),d}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function Iv(e){this.wrapped=e}function Sv(e){var t,n;function r(t,n){try{var i=e[t](n),o=i.value,s=o instanceof Iv;Promise.resolve(s?o.wrapped:o).then((function(e){s?r("return"===t?"return":"next",e):a(i.done?"return":"normal",e)}),(function(e){r("throw",e)}))}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise((function(i,o){var s={key:e,arg:a,resolve:i,reject:o,next:null};n?n=n.next=s:(t=n=s,r(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function Tv(e,t,n,r,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,a)}function Cv(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){Tv(i,r,a,o,s,"next",e)}function s(e){Tv(i,r,a,o,s,"throw",e)}o(void 0)}))}}function Ev(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rv(e,t,n){return t&&Ev(e.prototype,t),n&&Ev(e,n),e}function Av(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Fv(e){return Fv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Fv(e)}function _v(e,t){return _v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},_v(e,t)}function Dv(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Ov(e,t,n){return Ov=Dv()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return n&&_v(a,n.prototype),a},Ov.apply(null,arguments)}function Mv(e){var t="function"==typeof Map?new Map:void 0;return Mv=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return Ov(e,arguments,Fv(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),_v(r,e)},Mv(e)}function Lv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zv(e,t){if(e){if("string"==typeof e)return Pv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pv(e,t):void 0}}function Pv(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Bv(e){var t=0;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=zv(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(t=e[Symbol.iterator]()).next.bind(t)}"function"==typeof Symbol&&Symbol.asyncIterator&&(Sv.prototype[Symbol.asyncIterator]=function(){return this}),Sv.prototype.next=function(e){return this._invoke("next",e)},Sv.prototype.throw=function(e){return this._invoke("throw",e)},Sv.prototype.return=function(e){return this._invoke("return",e)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var Wv=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}var t=e.prototype;return t.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},t.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},t.has=function(e){return this.data.has(e)},t.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},t.numDataIds=function(){return this.dataIdsCount},e}(),Vv=function(){function e(){}var t=e.prototype;return t.time=function(e){return Uv("time")},t.read=function(e){return Uv("read")},t.readSync=function(e){return Uv("readSync")},t.numDataIds=function(){return Uv("numDataIds")},t.disposeData=function(e){return Uv("disposeData")},t.write=function(e,t,n){return Uv("write")},t.move=function(e,t,n,r){return Uv("move")},t.memory=function(){return Uv("memory")},t.floatPrecision=function(){return Uv("floatPrecision")},t.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},t.batchMatMul=function(e,t,n,r){return Uv("batchMatMul")},t.fusedBatchMatMul=function(e){e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights;return Uv("fusedBatchMatMul")},t.slice=function(e,t,n){return Uv("slice")},t.stridedSlice=function(e,t,n,r){return Uv("stridedSlice")},t.unstack=function(e,t){return Uv("unstack")},t.reverse=function(e,t){return Uv("reverse")},t.concat=function(e,t){return Uv("concat")},t.neg=function(e){return Uv("neg")},t.add=function(e,t){return Uv("add")},t.addN=function(e){return Uv("addN")},t.subtract=function(e,t){return Uv("subtract")},t.multiply=function(e,t){return Uv("multiply")},t.realDivide=function(e,t){return Uv("realDivide")},t.floorDiv=function(e,t){return Uv("floorDiv")},t.sum=function(e,t){return Uv("sum")},t.prod=function(e,t){return Uv("prod")},t.unsortedSegmentSum=function(e,t,n){return Uv("unsortedSegmentSum")},t.argMin=function(e,t){return Uv("argMin")},t.argMax=function(e,t){return Uv("argMax")},t.equal=function(e,t){return Uv("equal")},t.notEqual=function(e,t){return Uv("notEqual")},t.less=function(e,t){return Uv("less")},t.lessEqual=function(e,t){return Uv("lessEqual")},t.greater=function(e,t){return Uv("greater")},t.greaterEqual=function(e,t){return Uv("greaterEqual")},t.logicalNot=function(e){return Uv("logicalNot")},t.logicalAnd=function(e,t){return Uv("logicalAnd")},t.logicalOr=function(e,t){return Uv("logicalOr")},t.where=function(e){return Uv("where")},t.select=function(e,t,n){return Uv("select")},t.topk=function(e,t,n){return Uv("topk")},t.min=function(e,t){return Uv("min")},t.minimum=function(e,t){return Uv("minimum")},t.mod=function(e,t){return Uv("mod")},t.max=function(e,t){return Uv("max")},t.maximum=function(e,t){return Uv("maximum")},t.all=function(e,t){return Uv("all")},t.any=function(e,t){return Uv("any")},t.squaredDifference=function(e,t){return Uv("squaredDifference")},t.ceil=function(e){return Uv("ceil")},t.floor=function(e){return Uv("floor")},t.round=function(e){return Uv("round")},t.sign=function(e){return Uv("sign")},t.isNaN=function(e){return Uv("isNaN")},t.isInf=function(e){return Uv("isInf")},t.isFinite=function(e){return Uv("isFinite")},t.pow=function(e,t){return Uv("pow")},t.exp=function(e){return Uv("exp")},t.expm1=function(e){return Uv("expm1")},t.softmax=function(e,t){return Uv("softmax")},t.log=function(e){return Uv("log")},t.log1p=function(e){return Uv("log1p")},t.sqrt=function(e){return Uv("sqrt")},t.rsqrt=function(e){return Uv("rsqrt")},t.square=function(e){return Uv("square")},t.reciprocal=function(e){return Uv("reciprocal")},t.relu=function(e){return Uv("relu")},t.relu6=function(e){return Uv("relu6")},t.prelu=function(e,t){return Uv("prelu")},t.elu=function(e){return Uv("elu")},t.eluDer=function(e,t){return Uv("eluDer")},t.selu=function(e){return Uv("selu")},t.int=function(e){return Uv("int")},t.clip=function(e,t,n){return Uv("clip")},t.abs=function(e){return Uv("abs")},t.complexAbs=function(e){return Uv("complexAbs")},t.sigmoid=function(e){return Uv("sigmoid")},t.softplus=function(e){return Uv("softplus")},t.sin=function(e){return Uv("sin")},t.cos=function(e){return Uv("cos")},t.tan=function(e){return Uv("tan")},t.asin=function(e){return Uv("asin")},t.acos=function(e){return Uv("acos")},t.atan=function(e){return Uv("atan")},t.atan2=function(e,t){return Uv("atan2")},t.sinh=function(e){return Uv("sinh")},t.cosh=function(e){return Uv("cosh")},t.tanh=function(e){return Uv("tanh")},t.asinh=function(e){return Uv("asinh")},t.acosh=function(e){return Uv("acosh")},t.atanh=function(e){return Uv("atanh")},t.erf=function(e){return Uv("erf")},t.step=function(e,t){return Uv("step")},t.fusedConv2d=function(e){e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights;return Uv("fusedConv2d")},t.conv2d=function(e,t,n){return Uv("conv2d")},t.conv2dDerInput=function(e,t,n){return Uv("conv2dDerInput")},t.conv2dDerFilter=function(e,t,n){return Uv("conv2dDerFilter")},t.fusedDepthwiseConv2D=function(e){e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights;return Uv("fusedDepthwiseConv2D")},t.depthwiseConv2D=function(e,t,n){return Uv("depthwiseConv2D")},t.depthwiseConv2DDerInput=function(e,t,n){return Uv("depthwiseConv2DDerInput")},t.depthwiseConv2DDerFilter=function(e,t,n){return Uv("depthwiseConv2DDerFilter")},t.conv3d=function(e,t,n){return Uv("conv3d")},t.conv3dDerInput=function(e,t,n){return Uv("conv3dDerInput")},t.conv3dDerFilter=function(e,t,n){return Uv("conv3dDerFilter")},t.maxPool=function(e,t){return Uv("maxPool")},t.maxPoolBackprop=function(e,t,n,r){return Uv("maxPoolBackprop")},t.avgPool=function(e,t){return Uv("avgPool")},t.avgPoolBackprop=function(e,t,n){return Uv("avgPoolBackprop")},t.avgPool3d=function(e,t){return Uv("avgPool3d")},t.avgPool3dBackprop=function(e,t,n){return Uv("avgPool3dBackprop")},t.maxPool3d=function(e,t){return Uv("maxPool3d")},t.maxPool3dBackprop=function(e,t,n,r){return Uv("maxPool3dBackprop")},t.reshape=function(e,t){return Uv("reshape")},t.cast=function(e,t){return Uv("cast")},t.tile=function(e,t){return Uv("tile")},t.pad=function(e,t,n){return Uv("pad")},t.transpose=function(e,t){return Uv("transpose")},t.gather=function(e,t,n,r){return void 0===r&&(r=0),Uv("gather")},t.gatherND=function(e,t){return Uv("gatherND")},t.scatterND=function(e,t,n){return Uv("scatterND")},t.batchToSpaceND=function(e,t,n){return Uv("batchToSpaceND")},t.spaceToBatchND=function(e,t,n){return Uv("spaceToBatchND")},t.resizeBilinear=function(e,t,n,r,a){return Uv("resizeBilinear")},t.resizeBilinearBackprop=function(e,t,n){return Uv("resizeBilinearBackprop")},t.resizeNearestNeighbor=function(e,t,n,r,a){return Uv("resizeNearestNeighbor")},t.resizeNearestNeighborBackprop=function(e,t,n){return Uv("resizeNearestNeighborBackprop")},t.batchNorm=function(e,t,n,r,a,i){return Uv("batchNorm")},t.localResponseNormalization4D=function(e,t,n,r,a){return Uv("localResponseNormalization4D")},t.LRNGrad=function(e,t,n,r,a,i,o){return Uv("LRNGrad")},t.multinomial=function(e,t,n,r){return Uv("multinomial")},t.oneHot=function(e,t,n,r){return Uv("oneHot")},t.cumsum=function(e,t,n,r){return Uv("cumsum")},t.nonMaxSuppression=function(e,t,n,r,a){return Uv("nonMaxSuppression")},t.fft=function(e){return Uv("fft")},t.ifft=function(e){return Uv("ifft")},t.complex=function(e,t){return Uv("complex")},t.real=function(e){return Uv("real")},t.imag=function(e){return Uv("imag")},t.cropAndResize=function(e,t,n,r,a,i){return Uv("cropAndResize")},t.depthToSpace=function(e,t,n){return Uv("depthToSpace")},t.split=function(e,t,n){return Uv("split")},t.sparseToDense=function(e,t,n,r){return Uv("sparseToDense")},t.diag=function(e){return Uv("diag")},t.fill=function(e,t,n){return Uv("fill")},t.onesLike=function(e){return Uv("onesLike")},t.zerosLike=function(e){return Uv("zerosLike")},t.linspace=function(e,t,n){return Uv("linspace")},t.dispose=function(){return Uv("dispose")},e}();function Uv(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen")}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Gv(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function jv(e,t,n){return Math.max(e,Math.min(t,n))}function Hv(e){return e%2==0?e:e+1}function qv(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function Kv(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function Xv(e,t,n){void 0===n&&(n=""),Kv(Qv(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function Yv(e){Kv(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function Jv(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||pg(e)&&!n)for(var r=0;r<e.length;++r)Jv(e[r],t,n);else t.push(e);return t}function Zv(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Qv(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function $v(e){return e%1==0}function eg(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function tg(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function ng(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,a){var i=0;!function o(){if(e())r();else{i++;var s=t(i);null!=n&&i>=n?a():setTimeout(o,s)}}()}))}function rg(e,t){for(var n=1,r=-1,a=0;a<e.length;++a)if(e[a]>=0)n*=e[a];else if(-1===e[a]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(e[a]<0)throw Error("Shapes can not be < 0. Found "+e[a]+" at dim "+a);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var i=e.slice();return i[r]=t/n,i}function ag(e,t){var n=t.length;return Kv((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),Kv(e.every((function(e){return $v(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function ig(e,t){for(var n=[],r=[],a=null!=t&&Array.isArray(t)&&0===t.length,i=null==t||a?null:ag(t,e).sort(),o=0,s=0;s<e.length;++s){if(null!=i){if(i[o]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==i[o]||i[o]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),i[o]<=s&&o++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function og(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function sg(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function ug(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function lg(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function cg(e,t){return"complex64"!==t&&(("float32"!==t||"complex64"===e)&&(("int32"!==t||"float32"===e||"complex64"===e)&&("bool"!==t||"bool"!==e)))}function pg(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function fg(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function hg(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function dg(e){return"string"==typeof e||e instanceof String}function mg(e){return"boolean"==typeof e}function vg(e){return"number"==typeof e}function gg(e){return Array.isArray(e)?gg(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":vg(e)?"float32":dg(e)?"string":mg(e)?"bool":"float32"}function yg(e){return!!(e&&e.constructor&&e.call&&e.apply)}function bg(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function xg(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function wg(e,t,n){var r=new Array;if(1===t.length)for(var a=t[0],i=0;i<a;i++)r[i]=n[e+i];else for(var o=t[0],s=t.slice(1),u=s.reduce((function(e,t){return e*t})),l=0;l<o;l++)r[l]=wg(e+l*u,s,n);return r}function kg(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size "+t.length+".");return wg(0,e,t)}function Ng(e,t){for(var n=Ig(e,t),r=0;r<n.length;r++)n[r]=1;return n}function Ig(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Sg(e,t){var n=e.reduce((function(e,t){return e*t}),1);if(null==t||"float32"===t)return kg(e,new Float32Array(n));if("int32"===t)return kg(e,new Int32Array(n));if("bool"===t)return kg(e,new Uint8Array(n));throw new Error("Unknown data type "+t)}function Tg(e){e.forEach((function(t){Kv(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function Cg(e,t,n){if(0===t)return 0;if(1===t)return e[0];for(var r=e[e.length-1],a=0;a<e.length-1;++a)r+=n[a]*e[a];return r}function Eg(e,t,n){if(0===t)return[];if(1===t)return[e];for(var r=new Array(t),a=0;a<r.length-1;++a)r[a]=Math.floor(e/n[a]),e-=r[a]*n[a];return r[r.length-1]=e,r}function Rg(e){return e&&e.then&&"function"==typeof e.then}var Ag,Fg="tfjsflags",_g=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}var t=e.prototype;return t.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},t.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},t.getAsync=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in this.flags)){e.next=2;break}return e.abrupt("return",this.flags[t]);case 2:return e.next=4,this.evaluateFlag(t);case 4:return this.flags[t]=e.sent,e.abrupt("return",this.flags[t]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.get=function(e){if(e in this.flags)return this.flags[e];var t=this.evaluateFlag(e);if(Rg(t))throw new Error("Flag "+e+" cannot be synchronously evaluated. Please use getAsync() instead.");return this.flags[e]=t,this.flags[e]},t.getNumber=function(e){return this.get(e)},t.getBool=function(e){return this.get(e)},t.getFlags=function(){return this.flags},t.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},t.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.setFlags=function(e){this.flags=Object.assign({},e)},t.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(n,r[0],r[1]),r.join("=")})),n);if(Fg in r)r[Fg].split(",").forEach((function(t){var n=t.split(":"),r=n[0],a=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,a)}))}},Rv(e,[{key:"features",get:function(){return this.flags}}]),e}();function Dg(){return e.ENV}function Og(){if(null==Ag){var e;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}Ag=e}return Ag}function Mg(e,t){var n,r=(null==(n=Og())._tfGlobals&&(n._tfGlobals=new Map),n._tfGlobals);if(r.has(e))return r.get(e);var a=t();return r.set(e,a),r.get(e)}e.ENV=null;var Lg="Abs",zg="Acos",Pg="Acosh",Bg="Add",Wg="AddN",Vg="All",Ug="Any",Gg="ArgMax",jg="ArgMin",Hg="Asin",qg="Asinh",Kg="Atan",Xg="Atanh",Yg="Atan2",Jg="AvgPool",Zg="AvgPoolGrad",Qg="AvgPool3D",$g="AvgPool3DGrad",ey="BatchMatMul",ty="BatchToSpaceND",ny="Bincount",ry="BroadcastTo",ay="Cast",iy="Ceil",oy="ClipByValue",sy="Complex",uy="ComplexAbs",ly="Concat",cy="Conv2D",py="Conv2DBackpropFilter",fy="Conv2DBackpropInput",hy="Conv3D",dy="Conv3DBackpropFilterV2",my="Conv3DBackpropInputV2",vy="Cos",gy="Cosh",yy="Cumsum",by="CropAndResize",xy="DenseBincount",wy="DepthToSpace",ky="DepthwiseConv2dNative",Ny="DepthwiseConv2dNativeBackpropFilter",Iy="DepthwiseConv2dNativeBackpropInput",Sy="Diag",Ty="Dilation2D",Cy="Dilation2DBackpropInput",Ey="Dilation2DBackpropFilter",Ry="RealDiv",Ay="Elu",Fy="EluGrad",_y="Erf",Dy="Equal",Oy="Exp",My="ExpandDims",Ly="Expm1",zy="FFT",Py="Fill",By="FlipLeftRight",Wy="Floor",Vy="FloorDiv",Uy="FusedBatchNorm",Gy="GatherV2",jy="GatherNd",Hy="Greater",qy="GreaterEqual",Ky="Identity",Xy="IFFT",Yy="Imag",Jy="IsFinite",Zy="IsInf",Qy="IsNan",$y="LeakyRelu",eb="Less",tb="LessEqual",nb="LinSpace",rb="Log",ab="Log1p",ib="LogicalAnd",ob="LogicalNot",sb="LogicalOr",ub="LogSoftmax",lb="LRN",cb="LRNGrad",pb="Max",fb="Maximum",hb="MaxPool",db="MaxPoolGrad",mb="MaxPool3D",vb="MaxPool3DGrad",gb="MaxPoolWithArgmax",yb="Mean",bb="Min",xb="Minimum",wb="MirrorPad",kb="Mod",Nb="Multinomial",Ib="Multiply",Sb="Neg",Tb="NotEqual",Cb="NonMaxSuppressionV3",Eb="NonMaxSuppressionV4",Rb="NonMaxSuppressionV5",Ab="OnesLike",Fb="OneHot",_b="Pack",Db="PadV2",Ob="Pow",Mb="Prelu",Lb="Prod",zb="Range",Pb="Real",Bb="Reciprocal",Wb="Relu",Vb="Reshape",Ub="ResizeNearestNeighbor",Gb="ResizeNearestNeighborGrad",jb="ResizeBilinear",Hb="ResizeBilinearGrad",qb="Relu6",Kb="Reverse",Xb="Round",Yb="Rsqrt",Jb="ScatterNd",Zb="Select",Qb="Selu",$b="Slice",ex="Sin",tx="Sinh",nx="Sign",rx="Sigmoid",ax="Softplus",ix="Sqrt",ox="Sum",sx="SpaceToBatchND",ux="SplitV",lx="Softmax",cx="SquaredDifference",px="Square",fx="Sub",hx="SparseToDense",dx="StridedSlice",mx="Tan",vx="Tanh",gx="Tile",yx="TopK",bx="Transpose",xx="Unique",wx="Unpack",kx="UnsortedSegmentSum",Nx="ZerosLike",Ix="Step",Sx="FromPixels",Tx="RotateWithOffset",Cx="_FusedMatMul",Ex="FusedConv2D",Rx="FusedDepthwiseConv2D",Ax=Mg("kernelRegistry",(function(){return new Map})),Fx=Mg("gradRegistry",(function(){return new Map}));function _x(e,t){var n=zx(e,t);return Ax.get(n)}function Dx(e){return Fx.get(e)}function Ox(e){for(var t=Ax.entries(),n=[];;){var r=t.next(),a=r.done,i=r.value;if(a)break;var o=i[0],s=i[1];o.split("_")[0]===e&&n.push(s)}return n}function Mx(e){var t=e.kernelName,n=e.backendName,r=zx(t,n);Ax.has(r)&&console.warn("The kernel '"+t+"' for backend '"+n+"' is already registered"),Ax.set(r,e)}function Lx(e){var t=e.kernelName;Fx.has(t)&&Dg().getBool("DEBUG")&&console.warn("Overriding the gradient for '"+t+"'"),Fx.set(t,e)}function zx(e,t){return t+"_"+e}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Px(e,t){return"string"===t?Ux(e):Bx([e],t)}function Bx(e,t){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=Jv(e)),Dg().getBool("DEBUG")&&ug(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var n=new Uint8Array(e.length),r=0;r<n.length;++r)0!==Math.round(e[r])&&(n[r]=1);return n}throw new Error("Unknown data type "+t)}function Wx(){return Dg().platform.now()}function Vx(e,t){return Dg().platform.fetch(e,t)}function Ux(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Dg().platform.encode(e,t)}function Gx(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",Dg().platform.decode(e,t)}var jx={__proto__:null,createScalarValue:Px,toTypedArray:Bx,now:Wx,fetch:Vx,encodeString:Ux,decodeString:Gx,shuffle:Gv,clamp:jv,nearestLargerEven:Hv,sum:qv,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var a=Number(e[r])-Number(t[r]);n+=a*a}return n},assert:Kv,assertShapesMatch:Xv,assertNonNull:Yv,flatten:Jv,sizeFromShape:Zv,isScalarShape:function(e){return 0===e.length},arraysEqual:Qv,isInt:$v,tanh:function(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)},sizeToSquarishShape:eg,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Gv(t),t},rightPad:tg,repeatedTry:ng,inferFromImplicitShape:rg,parseAxisParam:ag,squeezeShape:ig,getTypedArrayFromDType:og,getArrayFromDType:sg,checkConversionForErrors:ug,isValidDtype:lg,hasEncodingLoss:cg,isTypedArray:pg,bytesPerElement:fg,bytesFromStringArray:hg,isString:dg,isBoolean:mg,isNumber:vg,inferDtype:gg,isFunction:yg,nearestDivisor:bg,computeStrides:xg,toNestedArray:kg,makeOnesTypedArray:Ng,makeZerosTypedArray:Ig,makeZerosNestedTypedArray:Sg,assertNonNegativeIntegerDimensions:Tg,locToIndex:Cg,indexToLoc:Eg,isPromise:Rg},Hx=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new qx)}var t=e.prototype;return t.profileKernel=function(e,t,n){var r,a=this.backendTimer.time((function(){r=n()}));if(Dg().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(var i=function(t){var n=r[t];n.data().then((function(t){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var a=e[r];if(isNaN(a)||!isFinite(a))return console.warn("Found "+a+" in the result of '"+n+"'"),!0}}(t,n.dtype,e)}))},o=0;o<r.length;o++)i(o);return{kernelName:e,outputs:r,inputs:t,timeMs:a.then((function(e){return e.kernelMs})),extraInfo:a.then((function(e){return null!=e.getExtraProfileInfo?e.getExtraProfileInfo():""}))}},t.logKernelProfile=function(e){var t=this,n=e.kernelName,r=e.outputs,a=e.timeMs,i=e.inputs,o=e.extraInfo;r.forEach((function(e){Promise.all([e.data(),a,o]).then((function(r){t.logger.logKernelProfile(n,e,r[0],r[1],i,r[2])}))}))},e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var qx=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,a,i){var o="number"==typeof r?tg(r+"ms",9):r.error,s=tg(e,25),u=t.rank,l=t.size,c=tg(t.shape.toString(),14),p="";for(var f in a){var h=a[f];if(null!=h){var d=h.shape||t.shape,m=d.length;p+=f+": "+m+"D "+(m>0?d:"")+" "}}console.log("%c"+s+"\t%c"+o+"\t%c"+u+"D "+c+"\t%c"+l+"\t%c"+p+"\t%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}();
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var Kx=20,Xx=3,Yx=7;function Jx(e,t,n,r){var a=xg(t),i=function(e,t,n,r){var a=Zv(t),i=r[r.length-1],o=new Array(i).fill(0),s=t.length,u="complex64"===n?ew(e):e;if(s>1)for(var l=0;l<a/i;l++)for(var c=l*i,p=0;p<i;p++)o[p]=Math.max(o[p],Zx(u[c+p],0,n).length);return o}(e,t,n,a),o=t.length,s=$x(e,t,n,a,i),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+o),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map((function(e){return"    "+e})).join("\n")),u.join("\n")}function Zx(e,t,n){return tg(Array.isArray(e)?parseFloat(e[0].toFixed(Yx))+" + "+parseFloat(e[1].toFixed(Yx))+"j":dg(e)?"'"+e+"'":"bool"===n?Qx(e):parseFloat(e.toFixed(Yx)).toString(),t)}function Qx(e){return 0===e?"false":"true"}function $x(e,t,n,r,a,i){void 0===i&&(i=!0);var o="complex64"===n?2:1,s=t[0],u=t.length;if(0===u)return"complex64"===n?[Zx(ew(e)[0],0,n)]:"bool"===n?[Qx(e[0])]:[e[0].toString()];if(1===u){if(s>Kx){var l=Xx*o,c=Array.from(e.slice(0,l)),p=Array.from(e.slice((s-Xx)*o,s*o));return"complex64"===n&&(c=ew(c),p=ew(p)),["["+c.map((function(e,t){return Zx(e,a[t],n)})).join(", ")+", ..., "+p.map((function(e,t){return Zx(e,a[s-Xx+t],n)})).join(", ")+"]"]}return["["+("complex64"===n?ew(e):Array.from(e)).map((function(e,t){return Zx(e,a[t],n)})).join(", ")+"]"]}var f=t.slice(1),h=r.slice(1),d=r[0]*o,m=[];if(s>Kx){for(var v=0;v<Xx;v++){var g=v*d,y=g+d;m.push.apply(m,$x(e.slice(g,y),f,n,h,a,!1))}m.push("...");for(var b=s-Xx;b<s;b++){var x=b*d,w=x+d;m.push.apply(m,$x(e.slice(x,w),f,n,h,a,b===s-1))}}else for(var k=0;k<s;k++){var N=k*d,I=N+d;m.push.apply(m,$x(e.slice(N,I),f,n,h,a,k===s-1))}var S=2===u?",":"";m[0]="["+m[0]+S;for(var T=1;T<m.length-1;T++)m[T]=" "+m[T]+S;for(var C=",\n",E=2;E<u;E++)C+="\n";return m[m.length-1]=" "+m[m.length-1]+"]"+(i?"":C),m}function ew(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var tw=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=Zv(e),null!=n){var a=n.length;Kv(a===this.size,(function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||sg(t,this.size),this.strides=xg(e)}var t=e.prototype;return t.set=function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];0===r.length&&(r=[0]),Kv(r.length===this.rank,(function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+t.rank+")"}));var i=this.locToIndex(r);this.values[i]=e},t.get=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];0===t.length&&(t=[0]);for(var r=0,a=0,i=t;a<i.length;a++){var o=i[a];if(o<0||o>=this.shape[r]){var s="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=t[t.length-1],l=0;l<t.length-1;++l)u+=this.strides[l]*t[l];return this.values[u]},t.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},t.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},t.toTensor=function(){return nw().makeTensor(this.values,this.shape,this.dtype)},Rv(e,[{key:"rank",get:function(){return this.shape.length}}]),e}(),nw=null,rw=null;var aw=function(){function e(e,t,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=Zv(e),this.strides=xg(e),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}var t=e.prototype;return t.buffer=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",rw.buffer(this.shape,this.dtype,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.bufferSync=function(){return rw.buffer(this.shape,this.dtype,this.dataSync())},t.array=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.data();case 2:return t=e.sent,e.abrupt("return",kg(this.shape,t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.arraySync=function(){return kg(this.shape,this.dataSync())},t.data=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.throwIfDisposed(),t=nw().read(this.dataId),"string"!==this.dtype){e.next=13;break}return e.next=5,t;case 5:return n=e.sent,e.prev=6,e.abrupt("return",n.map((function(e){return Gx(e)})));case 10:throw e.prev=10,e.t0=e.catch(6),new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().");case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,this,[[6,10]])})));return function(){return e.apply(this,arguments)}}(),t.dataSync=function(){this.throwIfDisposed();var e=nw().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return Gx(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.bytes=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.throwIfDisposed(),e.next=3,nw().read(this.dataId);case 3:if(t=e.sent,"string"!==this.dtype){e.next=8;break}return e.abrupt("return",t);case 8:return e.abrupt("return",new Uint8Array(t.buffer));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.dispose=function(){this.isDisposed||(nw().disposeTensor(this),this.isDisposedInternal=!0)},t.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.print=function(e){return void 0===e&&(e=!1),rw.print(this,e)},t.clone=function(){return this.throwIfDisposed(),rw.clone(this)},t.toString=function(e){return void 0===e&&(e=!1),Jx(this.dataSync(),this.shape,this.dtype,e)},t.cast=function(e){return this.throwIfDisposed(),rw.cast(this,e)},t.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),nw().makeVariable(this,e,t,n)},Rv(e,[{key:"rank",get:function(){return this.shape.length}},{key:"isDisposed",get:function(){return this.isDisposedInternal}}]),e}();Object.defineProperty(aw,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.data&&null!=e.dataSync&&null!=e.throwIfDisposed}});var iw,ow,sw,uw,lw,cw=function(e){function t(t,n,r,a){var i;return(i=e.call(this,t.shape,t.dtype,t.dataId,a)||this).trainable=n,i.name=r,i}Av(t,e);var n=t.prototype;return n.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!Qv(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");nw().disposeTensor(this),this.dataId=e.dataId,nw().incRef(this,null)},n.dispose=function(){nw().disposeVariable(this),this.isDisposedInternal=!0},t}(aw);Object.defineProperty(cw,Symbol.hasInstance,{value:function(e){return e instanceof aw&&null!=e.assign&&e.assign instanceof Function}}),(
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
iw=e.Rank||(e.Rank={})).R0="R0",iw.R1="R1",iw.R2="R2",iw.R3="R3",iw.R4="R4",iw.R5="R5",iw.R6="R6",function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(ow||(ow={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(sw||(sw={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(uw||(uw={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(lw||(lw={}));var pw={float32:uw,int32:ow,bool:sw,complex64:lw};function fw(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return pw[e][t]}function hw(e){return fw(e,"int32")}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function dw(e,t){if(e.dtype===t.dtype)return[e,t];var n=fw(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function mw(e,t){Kv(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function vw(e,t){return t.some((function(t){return t.id===e.id}))}function gw(e){var t=[];return yw(e,t,new Set),t}function yw(e,t,n){if(null!=e)if(e instanceof aw)t.push(e);else if(r=e,Array.isArray(r)||"object"==typeof r){var r,a=e;for(var i in a){var o=a[i];n.has(o)||(n.add(o),yw(o,t,n))}}}var bw={__proto__:null,makeTypesMatch:dw,assertTypesMatch:mw,isTensorInList:vw,getTensorsInContainer:gw},xw=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map((function(e){return e.name}))))}}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),ww=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new xw}var t=e.prototype;return t.ready=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.pendingBackendInit){e.next=2;break}return e.abrupt("return",this.pendingBackendInit.then((function(){})));case 2:if(null==this.backendInstance){e.next=4;break}return e.abrupt("return");case 4:t=this.getSortedBackends(),n=0;case 6:if(!(n<t.length)){e.next=18;break}return r=t[n],e.next=10,this.initializeBackend(r).success;case 10:if(!e.sent){e.next=15;break}return e.next=14,this.setBackend(r);case 14:return e.abrupt("return");case 15:n++,e.next=6;break;case 18:throw new Error("Could not initialize any backends, all backend initializations failed.");case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.backendNames=function(){return Object.keys(this.registryFactory)},t.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},t.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},t.setBackend=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this.registryFactory[t]){e.next=2;break}throw new Error("Backend name '"+t+"' not found in registry");case 2:if(this.backendName=t,null!=this.registry[t]){e.next=16;break}if(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,!n.asyncInit){e.next=12;break}return e.next=9,r;case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=r;case 13:if(e.t0){e.next=16;break}return e.abrupt("return",!1);case 16:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new Hx(this.backendInstance),e.abrupt("return",!0);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.setupRegisteredKernels=function(){var e=this;Ox(this.backendName).forEach((function(t){null!=t.setupFunc&&t.setupFunc(e.backendInstance)}))},t.disposeRegisteredKernels=function(e){var t=this;Ox(e).forEach((function(n){null!=n.disposeFunc&&n.disposeFunc(t.registry[e])}))},t.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(!r||r instanceof Vv||"function"!=typeof r.then)return this.registry[e]=r,{success:!0,asyncInit:!1};var a=++this.pendingBackendInitId,i=r.then((function(n){return!(a<t.pendingBackendInitId)&&(t.registry[e]=n,t.pendingBackendInit=null,!0)})).catch((function(n){return a<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message)),!1}));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},t.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},t.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),a=r.success,i=r.asyncInit;if(i||a)return{name:n,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.moveData=function(e,t){var n=this.state.tensorInfo.get(t),r=n.backend,a=this.readSync(t);r.disposeData(t),n.backend=e,e.move(t,a,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},t.tidy=function(e,t){var n,r=this,a=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=e}return this.scopedRun((function(){return r.startScope(a)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},t.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},t.nextTensorId=function(){return e.nextTensorId++},t.nextVariableId=function(){return e.nextVariableId++},t.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),n={x:e};return this.addTapeNode(this.state.activeScope.name,n,[t],(function(e){return{x:function(){var t="float32",n={x:e},r={dtype:t};return Nw.runKernelFunc((function(n){return n.cast(e,t)}),n,null,ay,r)}}}),[],{}),t},t.runKernel=function(e,t,n,r,a){return this.runKernelFunc(null,t,null,e,n,r,a)},t.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},t.checkKernelForMemLeak=function(e,t,n){var r=this.backend.numDataIds(),a=0;n.forEach((function(e){a+="complex64"===e.dtype?3:1}));var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],o=r-t-a-i;if(o>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+o+" data ids) after running '"+e+"'")},t.runKernelFunc=function(e,t,n,r,a,i,o){var s,u=this,l=[],c=this.isTapeOn();null==r&&(r=null!=this.state.activeScope?this.state.activeScope.name:"");var p,f=this.state.numBytes,h=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0),null==this.backendName&&this.backend;var d,m,v=_x(r,this.backendName);if(null!=v)p=function(){var e=u.backend.numDataIds();d=v.kernelFunc({inputs:t,attrs:a,backend:u.backend});var n=Array.isArray(d)?d:[d];u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,e,n);var s=n.map((function(e){if(null!=e.rank)return e;var t=e.dataId,n=e.shape,r=e.dtype;return u.makeTensorFromDataId(t,n,r)}));if(c){var p=u.getTensorsForGradient(r,t,s);if(null==p){null==o&&(o=[]);var f=s.filter((function(e,t){return o[t]}));p=(i||[]).slice().concat(f)}l=u.saveTensorsForBackwardMode(p)}return s};else{if(null==e)throw new Error("Error running "+r+": Neither modular kernel nor forward func passed");var g=function(e){c&&(l=e.map((function(e){return u.keep(u.clone(e))})))};p=function(){var t=u.backend.numDataIds();d=u.tidy((function(){return e(u.backend,g)}));var n=Array.isArray(d)?d:[d];return u.shouldCheckForMemLeaks()&&u.checkKernelForMemLeak(r,t,n),n}}return this.scopedRun((function(){return u.state.kernelDepth++}),(function(){return u.state.kernelDepth--}),(function(){u.ENV.getBool("DEBUG")||u.state.profiling?(m=u.profiler.profileKernel(r,t,(function(){return p()})),u.ENV.getBool("DEBUG")&&u.profiler.logKernelProfile(m),s=m.outputs):s=p()})),c&&this.addTapeNode(r,t,s,n,l,a),this.state.profiling&&this.state.activeProfile.kernels.push({name:r,bytesAdded:this.state.numBytes-f,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-h,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return null!=t[e]?t[e].shape:null})),outputShapes:s.map((function(e){return e.shape})),kernelTimeMs:m.timeMs,extraInfo:m.extraInfo}),Array.isArray(d)?s:s[0]},t.saveTensorsForBackwardMode=function(e){var t=this,n=e.map((function(e){return t.keep(t.clone(e))}));return n},t.getTensorsForGradient=function(e,t,n){var r=Dx(e);if(null!=r){var a,i=r.inputsToSave||[],o=r.outputsToSave||[];r.saveAllInputs?(Kv(Array.isArray(t),(function(){return"saveAllInputs is true, expected inputs to be an array."})),a=Object.keys(t).map((function(e){return t[e]}))):a=i.map((function(e){return t[e]}));var s=n.filter((function(e,t){return o[t]}));return a.concat(s)}return null},t.makeTensor=function(e,t,n,r){if(null==e)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",r=r||this.backend;var a=e;"string"===n&&dg(e[0])&&(a=e.map((function(e){return Ux(e)})));var i=r.write(a,t,n),o=new aw(t,n,i,this.nextTensorId());if(this.incRef(o,r),"string"===n){var s=this.state.tensorInfo.get(i),u=hg(a);this.state.numBytes+=u-s.bytes,s.bytes=u}return o},t.makeTensorFromDataId=function(e,t,n,r){var a=new aw(t,n=n||"float32",e,this.nextTensorId());return this.incRef(a,r),a},t.makeVariable=function(e,t,n,r){void 0===t&&(t=!0),n=n||this.nextVariableId().toString(),null!=r&&r!==e.dtype&&(e=e.cast(r));var a=new cw(e,t,n,this.nextTensorId());if(null!=this.state.registeredVariables[a.name])throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},t.incRef=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*fg(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof cw||this.track(e)},t.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},t.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},t.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},t.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.profile=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],e.next=6,t();case 6:this.state.activeProfile.result=e.sent,this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,a=Bv(this.state.activeProfile.kernels);case 12:if((i=a()).done){e.next=22;break}return o=i.value,e.next=16,o.kernelTimeMs;case 16:return o.kernelTimeMs=e.sent,e.next=19,o.extraInfo;case 19:o.extraInfo=e.sent;case 20:e.next=12;break;case 22:return e.abrupt("return",this.state.activeProfile);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},t.addTapeNode=function(e,t,n,r,a,i){var o=this,s={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:n,saved:a},u=Dx(e);null!=u&&(r=u.gradFunc),null!=r&&(s.gradient=function(e){return e=e.map((function(e,t){if(null==e){var r=n[t],a=Ig(r.size,r.dtype);return o.makeTensor(a,r.shape,r.dtype)}return e})),r(e.length>1?e:e[0],a,i)}),this.state.activeTape.push(s)},t.keep=function(e){return e.kept=!0,e},t.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},t.endTape=function(){this.state.gradientDepth--},t.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},t.endScope=function(e){for(var t=this,n=gw(e),r=new Set(n.map((function(e){return e.id}))),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||r.has(i.id)||i.dispose()}var o=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==o.id||t.track(e)}))},t.gradients=function(e,t,n,r){var a=this;if(void 0===r&&(r=!1),Kv(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var i=this.scopedRun((function(){return a.startTape()}),(function(){return a.endTape()}),(function(){return a.tidy("forward",e)}));Kv(i instanceof aw,(function(){return"The result y returned by f() must be a tensor."}));var o=function(e,t,n){for(var r={},a={},i=0;i<t.length;i++)r[t[i].id]=!0;for(var o=0;o<e.length;o++){var s=e[o],u=s.inputs;for(var l in u){for(var c=u[l],p=!1,f=0;f<t.length;f++)if(r[c.id]){s.outputs.forEach((function(e){return r[e.id]=!0})),p=!0,a[s.id]=!0;break}if(p)break}}var h={};h[n.id]=!0;for(var d={},m=e.length-1;m>=0;m--)for(var v=e[m],g=v.inputs,y=0;y<v.outputs.length;y++)if(h[v.outputs[y].id]){for(var b in g)h[g[b].id]=!0,d[v.id]=!0;break}for(var x=[],w=0;w<e.length;w++){var k=e[w];if(a[k.id]&&d[k.id]){var N={};for(var I in k.inputs){var S=k.inputs[I];r[S.id]&&(N[I]=S)}var T=Object.assign({},k);T.inputs=N,T.outputs=k.outputs,x.push(T)}}return x}(this.state.activeTape,t,i);if(!r&&0===o.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[i.id]=n??(e=i.shape,r=Ng(Zv(e),"float32"),Nw.makeTensor(r,e,"float32")),function(e,t,n,r){for(var a=function(a){var i=t[a],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];null!=n?o.push(n):o.push(null)})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+i.kernelName+".");var s=i.gradient(o),u=function(t){if(!(t in s))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(s)+".");var a=n((function(){return s[t]()}));if("float32"!==a.dtype)throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input "+t+" must have 'float32' dtype, but has '"+a.dtype+"'");var o=i.inputs[t];if(!Qv(a.shape,o.shape))throw new Error("Error in gradient for op "+i.kernelName+". The gradient of input '"+t+"' has shape '"+a.shape+"', which does not match the shape of the input '"+o.shape+"'");if(null==e[o.id])e[o.id]=a;else{var u=e[o.id];e[o.id]=r(u,a),u.dispose()}};for(var l in i.inputs)u(l)},i=t.length-1;i>=0;i--)a(i)}(s,o,(function(e){return a.tidy(e)}),Iw);var u=t.map((function(e){return s[e.id]}));return 0===a.state.gradientDepth&&(a.state.activeTape.forEach((function(e){for(var t,n=Bv(e.saved);!(t=n()).done;){t.value.dispose()}})),a.state.activeTape=null),{value:i,grads:u}}))},t.customGrad=function(e){var t=this;return Kv(yg(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i;Kv(r.every((function(e){return e instanceof aw})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};return r.forEach((function(e,t){o[t]=e})),t.runKernelFunc((function(t,n){return Kv((i=e.apply(void 0,[].concat(r,[n]))).value instanceof aw,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),Kv(yg(i.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),i.value}),o,(function(e,t){var n=i.gradFunc(e,t),a=Array.isArray(n)?n:[n];Kv(a.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),Kv(a.every((function(e){return e instanceof aw})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var o={};return a.forEach((function(e,t){o[t]=function(){return e}})),o}))}},t.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},t.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},t.time=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Wx(),e.next=3,this.backend.time(t);case 3:return(r=e.sent).wallMs=Wx()-n,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},t.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new xw,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},Rv(e,[{key:"backend",get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance}},{key:"registeredVariables",get:function(){return this.state.registeredVariables}}]),e}();function kw(){var t=Og();if(null==t._tfengine){var n=new _g(t);t._tfengine=new ww(n)}return function(t){e.ENV=t}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */(t._tfengine.ENV),nw=function(){return t._tfengine},t._tfengine}ww.nextTensorId=0,ww.nextVariableId=0;var Nw=kw();function Iw(e,t){var n={a:e,b:t};return Nw.runKernel(Bg,n)}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Sw(){if("undefined"!=typeof navigator&&null!=navigator){var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function Tw(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var Cw={__proto__:null,isMobile:Sw,isBrowser:Tw},Ew=Dg();
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Rw(e,t){var n=e;if(pg(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||pg(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&Dg().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&Aw(e,r,[]),r}function Aw(e,t,n){if(n=n||[],Array.isArray(e)||pg(e)){Kv(t.length>0,(function(){return"Element arr["+n.join("][")+"] should be a primitive, but is an array of "+e.length+" elements"})),Kv(e.length===t[0],(function(){return"Element arr["+n.join("][")+"] should have "+t[0]+" elements, but has "+e.length+" elements"}));for(var r=t.slice(1),a=0;a<e.length;++a)Aw(e[a],r,n.concat(a))}else Kv(0===t.length,(function(){return"Element arr["+n.join("][")+"] is a primitive, but should be an array/TypedArray of "+t[0]+" elements"}))}function Fw(e,t,n,r){if("string_or_numeric"!==e){if(null==e)throw new Error("Expected dtype cannot be null.");if("numeric"!==e&&e!==t||"numeric"===e&&"string"===t)throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}}function _w(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof aw)return Fw(r,e.dtype,t,n),e;var a=gg(e);if("string"!==a&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),Fw(r,a,t,n),null==e||!pg(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var i=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=Rw(e,a);pg(e)||Array.isArray(e)||(e=[e]);var s="string"!==a?Bx(e,a):Jv(e,[],!0);return Nw.makeTensor(s,o,a)}function Dw(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,a){return _w(e,t+"["+a+"]",n,r)}))}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */Ew.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),Ew.registerFlag("IS_BROWSER",(function(){return Tw()})),Ew.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),Ew.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),Ew.registerFlag("PROD",(function(){return!1})),Ew.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return Ew.getBool("DEBUG")})),Ew.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),Ew.registerFlag("IS_TEST",(function(){return!1})),Ew.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(function(){return!0}));var Ow="__op";function Mw(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n+=Ow;var a=function(){Nw.startScope(n);try{var e=r.apply(void 0,arguments);return Rg(e)&&console.error("Cannot return a Promise inside of tidy."),Nw.endScope(e),e}catch(e){throw Nw.endScope(null),e}};return Object.defineProperty(a,"name",{value:n,configurable:!0}),a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Lw=Mw({complex_:function(e,t){var n=_w(e,"real","complex"),r=_w(t,"imag","complex");Xv(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex().");var a={real:n,imag:r};return Nw.runKernel(sy,a)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function zw(e,t,n,r){if(null==r&&(r=gg(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!pg(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){Tg(t);var a=Zv(t),i=Zv(n);Kv(a===i,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+a+" values but has "+i}));for(var o=0;o<n.length;++o){var s=n[o],u=o!==n.length-1||s!==Zv(t.slice(o));Kv(n[o]===t[o]||!u,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return pg(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?Bx(e,r):Jv(e,[],!0),Nw.makeTensor(e,t,r)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Pw(e,t,n){return zw(e,t,Rw(e,n),n)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Bw={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8},Ww=4;function Vw(e,t){return Uw.apply(this,arguments)}function Uw(){return Uw=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],a=[],i=Array.isArray(t)?t.map((function(e){return e.name})):Object.keys(t),o=function(e){var o=i[e],s=Array.isArray(t)?t[e].tensor:t[o];if("float32"!==s.dtype&&"int32"!==s.dtype&&"bool"!==s.dtype&&"string"!==s.dtype&&"complex64"!==s.dtype)throw new Error("Unsupported dtype in weight '"+o+"': "+s.dtype);var u={name:o,shape:s.shape,dtype:s.dtype};if("string"===s.dtype){var l=new Promise(function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.bytes();case 2:for(n=e.sent,r=n.reduce((function(e,t){return e+t.length}),0)+Ww*n.length,a=new Uint8Array(r),i=0,o=0;o<n.length;o++)u=n[o],l=new Uint8Array(new Uint32Array([u.length]).buffer),a.set(l,i),i+=Ww,a.set(u,i),i+=u.length;t(a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());a.push(l)}else a.push(s.data());null!=n&&(u.group=n),r.push(u)},s=0;s<i.length;++s)o(s);return e.next=7,Promise.all(a);case 7:return u=e.sent,e.abrupt("return",{data:jw(u),specs:r});case 9:case"end":return e.stop()}}),e)}))),Uw.apply(this,arguments)}function Gw(e,t){for(var n,r,a={},i=0,o=Bv(t);!(r=o()).done;){var s=r.value,u=s.name,l=s.dtype,c=s.shape,p=Zv(c),f=void 0;if("quantization"in s){var h=s.quantization;if("uint8"===h.dtype||"uint16"===h.dtype){if(!("min"in h)||!("scale"in h))throw new Error("Weight "+s.name+" with quantization "+h.dtype+" doesn't have corresponding metadata min and scale.")}else{if("float16"!==h.dtype)throw new Error("Weight "+s.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.");if("float32"!==l)throw new Error("Weight "+s.name+" is quantized with "+h.dtype+" which only supports weights of type float32 not "+l+".")}var d=Bw[h.dtype],m=e.slice(i,i+p*d),v="uint8"===h.dtype?new Uint8Array(m):new Uint16Array(m);if("float32"===l)if("uint8"===h.dtype||"uint16"===h.dtype){f=new Float32Array(v.length);for(var g=0;g<v.length;g++){var y=v[g];f[g]=y*h.scale+h.min}}else{if("float16"!==h.dtype)throw new Error("Unsupported quantization type "+h.dtype+" for weight type float32.");void 0===n&&(n=Qw()),f=n(v)}else{if("int32"!==l)throw new Error("Unsupported dtype in weight '"+u+"': "+l);if("uint8"!==h.dtype&&"uint16"!==h.dtype)throw new Error("Unsupported quantization type "+h.dtype+" for weight type int32.");f=new Int32Array(v.length);for(var b=0;b<v.length;b++){var x=v[b];f[b]=Math.round(x*h.scale+h.min)}}i+=p*d}else if("string"===l){var w=Zv(s.shape);f=[];for(var k=0;k<w;k++){var N=new Uint32Array(e.slice(i,i+Ww))[0];i+=Ww;var I=new Uint8Array(e.slice(i,i+N));f.push(I),i+=N}}else{var S=Bw[l],T=e.slice(i,i+p*S);if("float32"===l)f=new Float32Array(T);else if("int32"===l)f=new Int32Array(T);else if("bool"===l)f=new Uint8Array(T);else{if("complex64"!==l)throw new Error("Unsupported dtype in weight '"+u+"': "+l);f=new Float32Array(T);for(var C=new Float32Array(f.length/2),E=new Float32Array(f.length/2),R=0;R<C.length;R++)C[R]=f[2*R],E[R]=f[2*R+1];var A=Pw(C,c,"float32"),F=Pw(E,c,"float32");a[u]=Lw(A,F),A.dispose(),F.dispose()}i+=p*S}"complex64"!==l&&(a[u]=Pw(f,c,l))}return a}function jw(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),a=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),a),a+=e.byteLength})),r.buffer}var Hw="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function qw(e){return Hw?Buffer.byteLength(e):new Blob([e]).size}function Kw(e){if(Hw)return Buffer.from(e).toString("base64");for(var t=new Uint8Array(e),n="",r=0,a=t.length;r<a;r++)n+=String.fromCharCode(t[r]);return btoa(n)}function Xw(e){if(Hw){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r.set([n.charCodeAt(a)],a);return r.buffer}function Yw(e){if(1===e.length)return e[0];var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function Jw(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function Zw(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:qw(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:qw(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}function Qw(){var e=function(){var e=function(e){for(var t=e<<13,n=0;0==(8388608&t);)n-=8388608,t<<=1;return(t&=-8388609)|n+947912704},t=new Uint32Array(2048);t[0]=0;for(var n=1;n<1024;n++)t[n]=e(n);for(var r=1024;r<2048;r++)t[r]=939524096+(r-1024<<13);return t}(),t=function(){var e=new Uint32Array(64);e[0]=0,e[31]=1199570944,e[32]=2147483648,e[63]=3347054592;for(var t=1;t<31;t++)e[t]=t<<23;for(var n=33;n<63;n++)e[n]=2147483648+(n-32<<23);return e}(),n=function(){for(var e=new Uint32Array(64),t=0;t<64;t++)e[t]=1024;return e[0]=e[32]=0,e}();return function(r){for(var a=new ArrayBuffer(4*r.length),i=new Uint32Array(a),o=0;o<r.length;o++){var s=r[o],u=e[n[s>>10]+(1023&s)]+t[s>>10];i[o]=u}return new Float32Array(a)}}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var $w=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var a=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&a.push(n)})),a},e}(),ek=function(e){return $w.getSaveHandlers(e)},tk=function(e,t){return $w.getLoadHandlers(e,t)},nk="tensorflowjs",rk="models_store",ak="model_info_store";function ik(){if(!Dg().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e="undefined"==typeof window?self:window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function ok(e){var t=e.result;t.createObjectStore(rk,{keyPath:"modelPath"}),t.createObjectStore(ak,{keyPath:"modelPath"})}var sk=function(){function e(e){if(this.indexedDB=ik(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}var t=e.prototype;return t.save=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 2:return e.abrupt("return",this.databaseAction(this.modelPath,t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.load=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.databaseAction(this.modelPath));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var a=n.indexedDB.open(nk,1);a.onupgradeneeded=function(){return ok(a)},a.onsuccess=function(){var i=a.result;if(null==t){var o=i.transaction(rk,"readonly"),s=o.objectStore(rk).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return i.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return i.close(),r(s.error)},o.oncomplete=function(){return i.close()}}else{var u,l=Zw(t),c=i.transaction(ak,"readwrite"),p=c.objectStore(ak),f=p.put({modelPath:n.modelPath,modelArtifactsInfo:l});f.onsuccess=function(){var a=(u=i.transaction(rk,"readwrite")).objectStore(rk).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:l});a.onsuccess=function(){return e({modelArtifactsInfo:l})},a.onerror=function(e){var t=(p=c.objectStore(ak)).delete(n.modelPath);t.onsuccess=function(){return i.close(),r(a.error)},t.onerror=function(e){return i.close(),r(a.error)}}},f.onerror=function(e){return i.close(),r(f.error)},c.oncomplete=function(){null==u?i.close():u.oncomplete=function(){return i.close()}}}},a.onerror=function(e){return r(a.error)}}))},e}();sk.URL_SCHEME="indexeddb://";var uk=function(e){return Dg().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(sk.URL_SCHEME)?(t=e.slice(sk.URL_SCHEME.length),new sk(t)):null;var t};function lk(e){return e.startsWith(sk.URL_SCHEME)?e.slice(sk.URL_SCHEME.length):e}$w.registerSaveRouter(uk),$w.registerLoadRouter(uk);var ck=function(){function e(){this.indexedDB=ik()}var t=e.prototype;return t.listModels=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=t.indexedDB.open(nk,1);r.onupgradeneeded=function(){return ok(r)},r.onsuccess=function(){var t=r.result,a=t.transaction(ak,"readonly"),i=a.objectStore(ak).getAll();i.onsuccess=function(){for(var t,n={},r=Bv(i.result);!(t=r()).done;){var a=t.value;n[a.modelPath]=a.modelArtifactsInfo}e(n)},i.onerror=function(e){return t.close(),n(i.error)},a.oncomplete=function(){return t.close()}},r.onerror=function(e){return n(r.error)}})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t.removeModel=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=lk(t),e.abrupt("return",new Promise((function(e,r){var a=n.indexedDB.open(nk,1);a.onupgradeneeded=function(){return ok(a)},a.onsuccess=function(){var n,i=a.result,o=i.transaction(ak,"readwrite"),s=o.objectStore(ak),u=s.get(t);u.onsuccess=function(){if(null==u.result)return i.close(),r(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var a=s.delete(t),o=function(){var a=(n=i.transaction(rk,"readwrite")).objectStore(rk).delete(t);a.onsuccess=function(){return e(u.result.modelArtifactsInfo)},a.onerror=function(e){return r(u.error)}};a.onsuccess=o,a.onerror=function(e){return o(),i.close(),r(u.error)}},u.onerror=function(e){return i.close(),r(u.error)},o.oncomplete=function(){null==n?i.close():n.oncomplete=function(){return i.close()}}},a.onerror=function(e){return r(a.error)}})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}(),pk="/",fk="tensorflowjs_models",hk="info",dk="model_topology",mk="weight_specs",vk="weight_data",gk="model_metadata";function yk(e){return{info:[fk,e,hk].join(pk),topology:[fk,e,dk].join(pk),weightSpecs:[fk,e,mk].join(pk),weightData:[fk,e,vk].join(pk),modelMetadata:[fk,e,gk].join(pk)}}function bk(e){var t=e.split(pk);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(pk)}function xk(e){return e.startsWith(wk.URL_SCHEME)?e.slice(wk.URL_SCHEME.length):e}var wk=function(){function e(e){if(!Dg().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=yk(this.modelPath)}var t=e.prototype;return t.save=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=4;break}throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");case 4:return n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),a=Zw(t),e.prev=7,this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Kw(t.weightData)),i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy},null!=t.signature&&(i.signature=t.signature),null!=t.userDefinedMetadata&&(i.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(i.modelInitializer=t.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),e.abrupt("return",{modelArtifactsInfo:a});case 20:throw e.prev=20,e.t0=e.catch(7),this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".");case 28:case"end":return e.stop()}}),e,this,[[7,20]])})));return function(t){return e.apply(this,arguments)}}(),t.load=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(t=JSON.parse(this.LS.getItem(this.keys.info)))){e.next=3;break}throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");case 3:if("JSON"===t.modelTopologyType){e.next=5;break}throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");case 5:if(n={},null!=(r=JSON.parse(this.LS.getItem(this.keys.topology)))){e.next=9;break}throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");case 9:if(n.modelTopology=r,null!=(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))){e.next=13;break}throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");case 13:if(n.weightSpecs=a,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),n.format=o.format,n.generatedBy=o.generatedBy,n.convertedBy=o.convertedBy,null!=o.signature&&(n.signature=o.signature),null!=o.userDefinedMetadata&&(n.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(n.modelInitializer=o.modelInitializer)),null!=(s=this.LS.getItem(this.keys.weightData))){e.next=19;break}throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");case 19:return n.weightData=Xw(s),e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}();wk.URL_SCHEME="localstorage://";var kk=function(e){return Dg().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(wk.URL_SCHEME)?(t=e.slice(wk.URL_SCHEME.length),new wk(t)):null;var t};$w.registerSaveRouter(kk),$w.registerLoadRouter(kk);var Nk=function(){function e(){Kv(Dg().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),Kv("undefined"==typeof window||void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}var t=e.prototype;return t.listModels=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t={},n=fk+pk,r=pk+hk,a=0;a<this.LS.length;++a)(i=this.LS.key(a)).startsWith(n)&&i.endsWith(r)&&(o=bk(i),t[o]=JSON.parse(this.LS.getItem(i)));return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.removeModel=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=xk(t),n=yk(t),null!=this.LS.getItem(n.info)){e.next=4;break}throw new Error("Cannot find model at path '"+t+"'");case 4:return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}(),Ik="://",Sk=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){Kv(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(Ik)&&(t=t.slice(0,t.indexOf(Ik))),Kv(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();Kv(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function Tk(e){if(-1===e.indexOf(Ik))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Sk.getSchemes().join(","));return{scheme:e.split(Ik)[0],path:e.split(Ik)[1]}}function Ck(e,t,n){return Ek.apply(this,arguments)}function Ek(){return(Ek=Cv(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s,u,l,c,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),Kv(t!==n,(function(){return"Old path and new path are the same: '"+t+"'"})),Kv((a=$w.getLoadHandlers(t)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+t+"."})),Kv(a.length<2,(function(){return"Copying failed because more than one ("+a.length+") load handlers for source URL "+t+"."})),i=a[0],Kv((o=$w.getSaveHandlers(n)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+n+"."})),Kv(o.length<2,(function(){return"Copying failed because more than one ("+a.length+") save handlers for destination URL "+n+"."})),s=o[0],u=Tk(t).scheme,l=Tk(t).path,c=u===Tk(t).scheme,e.next=15,i.load();case 15:if(p=e.sent,!r||!c){e.next=19;break}return e.next=19,Sk.getManager(u).removeModel(l);case 19:return e.next=21,s.save(p);case 21:if(f=e.sent,!r||c){e.next=25;break}return e.next=25,Sk.getManager(u).removeModel(l);case 25:return e.abrupt("return",f.modelArtifactsInfo);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rk(){return Rk=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Sk.getSchemes(),n={},r=Bv(t);case 3:if((a=r()).done){e.next=11;break}return i=a.value,e.next=7,Sk.getManager(i).listModels();case 7:for(s in o=e.sent)n[i+Ik+s]=o[s];case 9:e.next=3;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)}))),Rk.apply(this,arguments)}function Ak(){return(Ak=Cv(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Tk(t),r=Sk.getManager(n.scheme),e.abrupt("return",r.removeModel(n.path));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fk(){return(Fk=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.abrupt("return",Ck(t,n,false));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _k(){return(_k=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.abrupt("return",Ck(t,n,true));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Dk=function(){function e(){}var t=e.prototype;return t.fetch=function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)})),t.now=function(){return performance.now()},t.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},t.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();if(Dg().get("IS_BROWSER")){Dg().setPlatform("browser",new Dk);try{Sk.registerManager(wk.URL_SCHEME,new Nk)}catch(e){}try{Sk.registerManager(sk.URL_SCHEME,new ck)}catch(e){}}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Ok,Mk=function(){return require("node-fetch")};var Lk=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}var t=e.prototype;return t.fetch=function(e,t){return null!=Dg().global.fetch?Dg().global.fetch(e,t):(null==Ok&&(Ok=Mk()),Ok(e,t))},t.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},t.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function zk(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",Tg(e),new tw(e,t,n)}
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */Dg().get("IS_NODE")&&Dg().setPlatform("node",new Lk);var Pk=Mw({cast_:function(e,t){var n=_w(e,"x","cast");if(!lg(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");var r={x:n},a={dtype:t};return Nw.runKernel(ay,r,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Bk=Mw({clone_:function(e){var t={x:_w(e,"x","clone","string_or_numeric")};return Nw.runKernel(Ky,t)}});
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Wk(e,t){void 0===t&&(t=!1),console.log(e.toString(t))}
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */kw(),rw={buffer:zk,cast:Pk,clone:Bk,print:Wk};function Vk(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var Uk=function(){function e(t){if(!Dg().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!=typeof document){e.next=2;break}throw new Error("Browser downloads are not supported in this environment since `document` is not present");case 2:if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer)){e.next=7;break}throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 7:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},null!=t.signature&&(a.signature=t.signature),null!=t.userDefinedMetadata&&(a.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(a.modelInitializer=t.modelInitializer),i=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,e.next=18,Vk((function(){return o.dispatchEvent(new MouseEvent("click"))}));case 18:if(null==t.weightData){e.next=24;break}return(s=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,e.next=24,Vk((function(){return s.dispatchEvent(new MouseEvent("click"))}));case 24:return e.abrupt("return",{modelArtifactsInfo:Zw(t)});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}();Uk.URL_SCHEME="downloads://";var Gk=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}var t=e.prototype;return t.load=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.files[0],n=this.files.slice(1),e.abrupt("return",new Promise((function(e,a){var i=new FileReader;i.onload=function(i){var o=JSON.parse(i.target.result),s=o.modelTopology;if(null!=s){0===n.length&&e({modelTopology:s});var u=o.weightsManifest;if(null!=u){var l;try{l=r.checkManifestAndWeightFiles(u,n)}catch(e){return void a(e)}var c=[],p=[],f=[];u.forEach((function(e){e.paths.forEach((function(e){p.push(e),f.push(null)})),c.push.apply(c,e.weights)})),u.forEach((function(t){t.paths.forEach((function(t){var n=new FileReader;n.onload=function(n){var r=n.target.result,a=p.indexOf(t);if(f[a]=r,-1===f.indexOf(null)){var i={modelTopology:s,weightSpecs:c,weightData:Yw(f),format:o.format,generatedBy:o.generatedBy,convertedBy:o.convertedBy};null!=o.signature&&(i.signature=o.signature),null!=o.userDefinedMetadata&&(i.userDefinedMetadata=o.userDefinedMetadata),null!=o.modelInitializer&&(i.modelInitializer=o.modelInitializer),e(i)}},n.onerror=function(e){return a("Failed to weights data from file of path '"+t+"'.")},n.readAsArrayBuffer(l[t])}))}))}else a(new Error("weightManifest field is missing from file "+t.name))}else a(new Error("modelTopology field is missing from file "+t.name))},i.onerror=function(e){return a("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},i.readAsText(t)})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.checkManifestAndWeightFiles=function(e,t){for(var n,r=[],a=t.map((function(e){return Jw(e.name)})),i={},o=Bv(e);!(n=o()).done;){n.value.paths.forEach((function(e){var n=Jw(e);if(-1!==r.indexOf(n))throw new Error("Duplicate file basename found in weights manifest: '"+n+"'");if(r.push(n),-1===a.indexOf(n))throw new Error("Weight file with basename '"+n+"' is not provided.");i[e]=t[a.indexOf(n)]}))}if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+t.length+").");return i},e}();
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function jk(e,t,n,r){!function(e){Kv(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){Kv(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),Kv(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),Kv(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=n??0,r=r??1);var a=0;return Promise.all(e.map((function(i){return i.then((function(i){var o=n+ ++a/e.length*(r-n);return t(o),i})),i})))}function Hk(e,t){return qk.apply(this,arguments)}function qk(){return(qk=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l,c,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),r=null==n.fetchFunc?Dg().platform.fetch:n.fetchFunc,a=t.map((function(e){return r(e,n.requestInit,{isBinary:!0})})),i=0,o=.5,null!=n.onProgress){e.next=11;break}return e.next=8,Promise.all(a);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,jk(a,n.onProgress,i,o);case 13:e.t0=e.sent;case 14:if(s=e.t0,u=s.map((function(e){return e.arrayBuffer()})),l=.5,c=1,null!=n.onProgress){e.next=24;break}return e.next=21,Promise.all(u);case 21:e.t1=e.sent,e.next=27;break;case 24:return e.next=26,jk(u,n.onProgress,l,c);case 26:e.t1=e.sent;case 27:return p=e.t1,e.abrupt("return",p);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Kk(e,t,n,r){return Xk.apply(this,arguments)}function Xk(){return Xk=Cv(regeneratorRuntime.mark((function e(t,n,r,a){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=""),i=Yk((function(e){return Hk(e,{requestInit:a})})),e.abrupt("return",i(t,n,r));case 4:case"end":return e.stop()}}),e)}))),Xk.apply(this,arguments)}function Yk(e){return function(){var t=Cv(regeneratorRuntime.mark((function t(n,r,a){var i,o,s,u,l,c,p,f,h,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===r&&(r=""),i=n.map((function(){return!1})),o={},s=null!=a?a.map((function(){return!1})):[],u=[],n.forEach((function(e,t){var n=0;e.weights.forEach((function(e){var r="quantization"in e?e.quantization.dtype:e.dtype,l=Bw[r]*Zv(e.shape),c=function(){i[t]=!0,null==o[t]&&(o[t]=[]),o[t].push({manifestEntry:e,groupOffset:n,sizeBytes:l})};null!=a?a.forEach((function(t,n){t===e.name&&(c(),s[n]=!0)})):c(),u.push(e.name),n+=l}))})),s.every((function(e){return e}))){t.next=9;break}throw l=a.filter((function(e,t){return!s[t]})),new Error("Could not find weights in manifest with names: "+l.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");case 9:return c=i.reduce((function(e,t,n){return t&&e.push(n),e}),[]),p=[],c.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;p.push(t)}))})),t.next=14,e(p);case 14:return f=t.sent,h={},d=0,c.forEach((function(e){for(var t=n[e].paths.length,r=0,a=0;a<t;a++)r+=f[d+a].byteLength;for(var i=new ArrayBuffer(r),s=new Uint8Array(i),u=0,l=0;l<t;l++){var c=new Uint8Array(f[d+l]);s.set(c,u),u+=c.byteLength}o[e].forEach((function(e){var t=Gw(i.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)h[n]=t[n]})),d+=t})),t.abrupt("return",h);case 19:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}$w.registerSaveRouter((function(e){return Dg().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(Uk.URL_SCHEME)?function(e){void 0===e&&(e="model");return new Uk(e)}(e.slice(Uk.URL_SCHEME.length)):null}));var Jk=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,this.weightUrlConverter=t.weightUrlConverter,null!=t.fetchFunc?(Kv("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=Dg().platform.fetch,Kv(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&Kv(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}var t=e.prototype;return t.save=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.modelTopology instanceof ArrayBuffer)){e.next=2;break}throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");case 2:return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],a={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},null!=t.signature&&(a.signature=t.signature),null!=t.userDefinedMetadata&&(a.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(a.modelInitializer=t.modelInitializer),n.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),null!=t.weightData&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),e.next=13,this.fetch(this.path,n);case 13:if(!(i=e.sent).ok){e.next=18;break}return e.abrupt("return",{modelArtifactsInfo:Zw(t),responses:[i]});case 18:throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".");case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.load=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s,u,l,c,p,f,h,d,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch(this.path,this.requestInit);case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");case 5:return e.prev=5,e.next=8,t.json();case 8:n=e.sent,e.next=16;break;case 11:throw e.prev=11,e.t0=e.catch(5),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 16:if(a=n.modelTopology,i=n.weightsManifest,o=n.generatedBy,s=n.convertedBy,u=n.format,l=n.signature,c=n.userDefinedMetadata,null!=a||null!=i){e.next=25;break}throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");case 25:if(null==i){e.next=31;break}return e.next=28,this.loadWeights(i);case 28:h=e.sent,p=h[0],f=h[1];case 31:return d={modelTopology:a,weightSpecs:p,weightData:f,generatedBy:o,convertedBy:s,format:u},null!=l&&(d.signature=l),null!=c&&(d.userDefinedMetadata=c),(m=n.modelInitializer)&&(d.modelInitializer=m),e.abrupt("return",d);case 37:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(){return e.apply(this,arguments)}}(),t.loadWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,s,u,l,c,p,f,h,d,m,v,g,y,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=Zk(n),a=r[0],i=r[1],o=this.weightPathPrefix||a,s=[],u=Bv(t);!(l=u()).done;)c=l.value,s.push.apply(s,c.weights);for(p=[],f=[],h=Bv(t);!(d=h()).done;)for(m=d.value,v=Bv(m.paths);!(g=v()).done;)y=g.value,null!=this.weightUrlConverter?f.push(this.weightUrlConverter(y)):p.push(o+y+i);if(!this.weightUrlConverter){e.next=15;break}return e.t0=p.push,e.t1=p,e.next=13,Promise.all(f);case 13:e.t2=e.sent,e.t0.apply.call(e.t0,e.t1,e.t2);case 15:return e.next=17,Hk(p,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});case 17:return b=e.sent,e.abrupt("return",[s,Yw(b)]);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}();function Zk(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}function Qk(e){return null!=e.match(Jk.URL_SCHEME_REGEX)}Jk.URL_SCHEME_REGEX=/^https?:\/\//;var $k=function(e,t){if("undefined"==typeof fetch&&(null==t||null==t.fetchFunc))return null;return(Array.isArray(e)?e.every((function(e){return Qk(e)})):Qk(e))?eN(e,t):null};function eN(e,t){return new Jk(e,t)}function tN(e,t){return eN(e,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */$w.registerSaveRouter($k),$w.registerLoadRouter($k);var nN=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.modelArtifacts);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}(),rN=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.saveHandler(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var aN={__proto__:null,browserFiles:function(e){return new Gk(e)},browserHTTPRequest:tN,concatenateArrayBuffers:Yw,decodeWeights:Gw,encodeWeights:Vw,fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new nN(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new nN({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new nN({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:tk,getModelArtifactsInfoForJSON:Zw,getSaveHandlers:ek,http:eN,isHTTPScheme:Qk,loadWeights:Kk,registerLoadRouter:function(e){return $w.registerLoadRouter(e)},registerSaveRouter:function(e){return $w.registerSaveRouter(e)},weightsLoaderFactory:Yk,withSaveHandler:function(e){return new rN(e)},copyModel:function(e,t){return Fk.apply(this,arguments)},listModels:function(){return Rk.apply(this,arguments)},moveModel:function(e,t){return _k.apply(this,arguments)},removeModel:function(e){return Ak.apply(this,arguments)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var iN=Mw({matMul_:function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var a=_w(e,"a","matMul"),i=_w(t,"b","matMul"),o=dw(a,i),s={a:a=o[0],b:i=o[1]},u={transposeA:n,transposeB:r};return Nw.runKernel(ey,s,u)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var oN=Mw({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var a={indices:_w(e,"indices","oneHot","int32")},i={depth:t,onValue:n,offValue:r};return Nw.runKernel(Fb,a,i)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var sN=Mw({transpose_:function(e,t){var n=_w(e,"x","transpose");if(null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),Kv(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){Kv(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1)return n.clone();var r={x:n},a={perm:t};return Nw.runKernel(bx,r,a)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var uN,lN={__proto__:null,confusionMatrix:Mw({confusionMatrix_:function(e,t,n){var r=_w(e,"labels","confusionMatrix"),a=_w(t,"predictions","confusionMatrix");Kv(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),Kv(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),Kv(1===a.rank,(function(){return"Expected the rank of predictions to be 1, but got "+a.rank})),Kv(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."})),Kv(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var i=oN(Pk(r,"int32"),n),o=oN(Pk(a,"int32"),n),s=sN(i),u=iN(s,o);return Pk(u,"int32")}})};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function cN(e,t,n){if(Yv(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=Rw(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return zw(e,t,r,n)}function pN(){return pN=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l,c,p,f,h,d,m,v,g,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_w(t,"img","toPixels"),t instanceof aw||(r=Pk(a=r,"int32"),a.dispose()),2===r.rank||3===r.rank){e.next=4;break}throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+r.rank+".");case 4:if(i=r.shape.slice(0,2),o=i[0],s=i[1],!((u=2===r.rank?1:r.shape[2])>4||2===u)){e.next=8;break}throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+u);case 8:if("float32"===r.dtype||"int32"===r.dtype){e.next=10;break}throw new Error("Unsupported type for toPixels: "+r.dtype+". Please use float32 or int32 tensors.");case 10:return e.next=12,r.data();case 12:l=e.sent,c="float32"===r.dtype?255:1,p=new Uint8ClampedArray(s*o*4),f=0;case 16:if(!(f<o*s)){e.next=41;break}h=[0,0,0,255],d=0;case 19:if(!(d<u)){e.next=33;break}if(m=l[f*u+d],"float32"!==r.dtype){e.next=26;break}if(!(m<0||m>1)){e.next=24;break}throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered "+m+".");case 24:e.next=29;break;case 26:if("int32"!==r.dtype){e.next=29;break}if(!(m<0||m>255)){e.next=29;break}throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered "+m+".");case 29:1===u?(h[0]=m*c,h[1]=m*c,h[2]=m*c):h[d]=m*c;case 30:d++,e.next=19;break;case 33:p[(v=4*f)+0]=Math.round(h[0]),p[v+1]=Math.round(h[1]),p[v+2]=Math.round(h[2]),p[v+3]=Math.round(h[3]);case 38:++f,e.next=16;break;case 41:return null!=n&&(n.width=s,n.height=o,g=n.getContext("2d"),y=new ImageData(p,s,o),g.putImageData(y,0,0)),r!==t&&r.dispose(),e.abrupt("return",p);case 44:case"end":return e.stop()}}),e)}))),pN.apply(this,arguments)}var fN=Mw({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,a=!1,i=!1,o=!1,s=!1;if(e.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&e instanceof ImageData)r=!0;else if("undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement)i=!0;else if(null!=e.getContext)o=!0;else{if(!("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);s=!0}if(a){if(a&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=_x(Sx,Nw.backendName)){var u={pixels:e},l={numChannels:t};return Nw.runKernel(Sx,u,l)}var c,p,f=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],h=f[0],d=f[1];if(o?c=e.getContext("2d").getImageData(0,0,h,d).data:r||n?c=e.data:(i||a||s)&&(null==uN&&(uN=document.createElement("canvas").getContext("2d")),uN.canvas.width=h,uN.canvas.height=d,uN.drawImage(e,0,0,h,d),c=uN.getImageData(0,0,h,d).data),4===t)p=new Int32Array(c);else{var m=h*d;p=new Int32Array(m*t);for(var v=0;v<m;v++)for(var g=0;g<t;++g)p[v*t+g]=c[4*v+g]}return cN(p,[d,h,t],"int32")}}),hN={__proto__:null,toPixels:function(e,t){return pN.apply(this,arguments)},fromPixels:fN};function dN(e,t){var n=e.shape.length,r=t.shape.length;if(n<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+n+".");if(r<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+r+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[r-1]>n)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[r-1]+" vs. "+n);if(0===Zv(e.shape))throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var a=t.shape,i=a[a.length-1],o=1,s=0;s<a.length-1;++s)o*=a[s];var u=e.shape,l=a.slice();l.pop();for(var c=1,p=i;p<n;++p)c*=u[p],l.push(u[p]);var f=[].concat(xg(e.shape).map((function(e){return e/c})),[1]).slice(0,i);return[l,o,c,f]}var mN={__proto__:null,prepareAndValidate:dN};function vN(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,a=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+a+".";if(n.rank<a)throw new Error(i+" update.rank < "+a+". ");if(e.length<r+(n.rank-a))throw new Error(i+" Output shape length < "+(r+(n.rank-a)));if(n.rank!==a+e.length-r)throw new Error(i+" update.rank != "+(a+e.length-r));for(var o=0;o<a;++o)if(n.shape[o]!==t.shape[o])throw new Error(i+" updates.shape["+o+"] ("+n.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(var s=0;s<n.rank-a;++s)if(n.shape[s+a]!==e[s+r])throw new Error(i+" updates.shape["+(s+a)+"] ("+n.shape[s+a]+") != shape["+(s+a)+"] ("+e[s+a]+")")}function gN(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}vN(n,t,e)}function yN(e,t,n){for(var r=t.shape.length,a=r>1?t.shape[r-1]:1,i=n.length,o=1,s=a;s<i;++s)o*=n[s];var u=a<1?1:a;return{sliceRank:a,numUpdates:Zv(t.shape)/u,sliceSize:o,strides:[].concat(xg(n.slice(0,a)),[1]),outputSize:Zv(n)}}var bN={__proto__:null,validateUpdateShape:vN,validateInput:gN,calculateShapes:yN};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function xN(e,t,n){var r=e.shape.length;Kv(r===t.length,(function(){return"Error in slice"+r+"D: Length of begin "+t+" must match the rank of the array ("+r+")."})),Kv(r===n.length,(function(){return"Error in slice"+r+"D: Length of size "+n+" must match the rank of the array ("+r+")."}));for(var a=function(a){Kv(t[a]+n[a]<=e.shape[a],(function(){return"Error in slice"+r+"D: begin["+a+"] + size["+a+"] ("+(t[a]+n[a])+") would overflow input.shape["+a+"] ("+e.shape[a]+")"}))},i=0;i<r;++i)a(i)}function wN(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function kN(e,t,n){for(var r=[],a=0;a<e.length;a++)r[a]=Math.ceil((t[a]-e[a])/n[a]);return r}function NN(e,t,n,r){for(var a=[].concat(e),i=a.length;i<r.length;i++)a.push(1);for(var o=0;o<n;o++)0===o?a[t]=1:(a.splice(t,0,1),a.pop());return a}function IN(e,t,n){return n<=e?n:n-(t-1)}function SN(e,t){for(var n=[],r=0;r<e;r++)n.push(t+r);return n}function TN(e,t,n,r,a,i,o,s,u){var l=e.length,c=new Array(l),p=new Array(l),f=new Array(l);if(t.length&&n>0){var h=t[0],d=n+1;c=CN(o,h,d,r,e),p=EN(s,h,d,a,e),f=NN(i,h,d,e)}else for(var m=0;m<l;m++)c[m]=AN(o,r,i,e,m,u),p[m]=FN(s,a,i,e,m,u),f[m]=RN(i,m,u);return{begin:c,end:p,strides:f}}function CN(e,t,n,r,a){for(var i=[].concat(a),o=SN(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=0;else{var u=IN(t,n,s),l=r[u];e&1<<u&&(l=0),i[s]=l}return i}function EN(e,t,n,r,a){for(var i=[].concat(a),o=SN(n,t),s=0;s<i.length;s++)if(o.indexOf(s)>-1)i[s]=Number.MAX_SAFE_INTEGER;else{var u=IN(t,n,s),l=r[u];e&1<<u&&(l=Number.MAX_SAFE_INTEGER),i[s]=l}for(var c=0;c<i.length;c++){var p=a[c];i[c]<0&&(i[c]+=p),i[c]=jv(0,i[c],a[c])}return i}function RN(e,t,n){var r=e[t];return(n&1<<t||null==r)&&(r=1),r}function AN(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=jv(0,o,u-1)}function FN(e,t,n,r,a,i){var o=t[a],s=n[a]||1;(e&1<<a||i&1<<a||null==o)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var u=r[a];return o<0&&(o+=u),o=s>0?jv(0,o,u):jv(-1,o,u-1)}function _N(e,t,n){for(var r=n.length,a=0;a<n.length;a++)if(n[a]>1){r=a;break}for(var i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function DN(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function ON(e,t,n){var r,a,i=e.shape.length;return(r="number"==typeof t?[t].concat(new Array(i-1).fill(0)):t.length<i?t.concat(new Array(i-t.length).fill(0)):t.slice()).forEach((function(e){Kv(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=null==n?new Array(i).fill(-1):"number"==typeof n?[n].concat(new Array(i-1).fill(-1)):n.length<i?n.concat(new Array(i-n.length).fill(-1)):n).map((function(t,n){return t>=0?t:(Kv(-1===t,(function(){return"Negative size values should be exactly -1 but got "+t+" for the slice() size at index "+n+"."})),e.shape[n]-r[n])})),[r,a]}function MN(e,t,n,r,a,i,o,s,u){var l=t.slice(),c=n.slice(),p=r;null==r&&(p=new Array(l.length));var f=wN(o);if(f.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(0!==o&&0!==s)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(0!==o&&0!==u)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");var h=e.length-l.length,d=wN(s),m=e.slice();d.forEach((function(e){l[e]=0,c[e]=1,m.splice(e,0,1)}));var v=TN(m,f,h,l,c,p,a,i,o),g=v.begin,y=v.end,b=v.strides;l=g,c=y,p=b;var x=wN(u);x.forEach((function(e){c[e]=l[e]+1,p[e]=1}));var w=kN(l,c,p),k=w.filter((function(e,t){return-1===x.indexOf(t)}));return{nonStrided:p.every((function(e){return 1===e})),$begin:l,$end:c,$strides:p,size:w,newShape:m,outShape:k}}var LN={__proto__:null,assertParamsValid:xN,maskToAxes:wN,computeOutShape:kN,stridesWithElidedDims:NN,getNormalizedAxes:TN,startIndicesWithElidedDims:CN,stopIndicesWithElidedDims:EN,stridesForAxis:RN,startForAxis:AN,stopForAxis:FN,isSliceContinous:_N,computeFlatOffset:DN,parseSliceParams:ON,sliceInfo:MN},zN=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),PN=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function BN(e){Kv(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),Kv("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),Kv(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),PN.register(e)}var WN={__proto__:null,Serializable:zN,SerializationMap:PN,registerClass:BN},VN=.001,UN=.1;
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function GN(){return 32===Nw.backend.floatPrecision()?VN:UN}function jN(e,t,n){var r=!0;if((pg(e)||pg(t))&&(r=!1),pg(e)&&pg(t)&&(r=!0),r){var a=e.constructor.name,i=t.constructor.name;if(a!==i)throw new Error("Arrays are of different type. Actual: "+a+". Expected: "+i)}if(Array.isArray(e)&&Array.isArray(t)){var o=Rw(e),s=Rw(t);if(!Qv(o,s))throw new Error("Arrays have different shapes. Actual: ["+o+"]. Expected: ["+s+"]")}var u=pg(e)?e:Jv(e),l=pg(t)?t:Jv(t);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+".\nActual:   "+u+".\nExpected: "+l+".");for(var c=0;c<l.length;++c){var p=u[c],f=l[c];if(!n(p,f))throw new Error("Arrays differ: actual["+c+"] = "+p+", expected["+c+"] = "+f+".\nActual:   "+u+".\nExpected: "+l+".")}}function HN(e,t,n){if(null==n&&(n=GN()),!qN(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)}function qN(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}var KN={__proto__:null,TEST_EPSILON_FLOAT16:UN,expectArraysClose:function(e,t,n){return null==n&&(n=GN()),jN(e,t,(function(e,t){return qN(e,t,n)}))},testEpsilon:GN,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return dg(e)||dg(e[0])||dg(t)||dg(t[0])?jN(e,n,(function(e,t){return e==t})):jN(e,t,(function(e,t){return qN(e,t,0)}))},expectNumbersClose:HN,expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))},encodeStrings:function e(t){for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?e(r):t[n]=Ux(r)}return t}},XN="2.8.3";
/** @license See the LICENSE file. */function YN(e){Dg().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function JN(){return Nw}function ZN(){return Nw.memory()}function QN(e,t){return Nw.tidy(e,t)}function $N(e){gw(e).forEach((function(e){return e.dispose()}))}function eI(e){return Nw.keep(e)}function tI(e){return Nw.setBackend(e)}function nI(e,t,n){return void 0===n&&(n=1),Nw.registerBackend(e,t,n)}function rI(){return Nw.backend}var aI=Mw({add_:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t){var n=_w(e,"a","add"),r=_w(t,"b","add"),a=dw(n,r),i={a:n=a[0],b:r=a[1]};return Nw.runKernel(Bg,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var iI=Mw({floorDiv_:function(e,t){var n=_w(e,"a","floorDiv"),r=_w(t,"b","floorDiv"),a=dw(n,r),i={a:n=a[0],b:r=a[1]};return Nw.runKernel(Vy,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var oI=Mw({div_:function(e,t){var n=_w(e,"a","div"),r=_w(t,"b","div"),a=dw(n,r);if(n=a[0],r=a[1],"int32"===n.dtype&&"int32"===r.dtype)return iI(n,r);var i={a:n,b:r};return Nw.runKernel(Ry,i,{})}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var sI=Mw({mul_:function(e,t){var n=_w(e,"a","mul"),r=_w(t,"b","mul"),a=dw(n,r),i={a:n=a[0],b:r=a[1]};return Nw.runKernel(Ib,i)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var uI=Mw({abs_:function(e){var t=_w(e,"x","abs");if("complex64"===t.dtype){var n={x:t};return Nw.runKernel(uy,n)}var r={x:t};return Nw.runKernel(Lg,r)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var lI=Mw({acos_:function(e){var t={x:_w(e,"x","acos")};return Nw.runKernel(zg,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var cI=Mw({acosh_:function(e){var t={x:_w(e,"x","acosh")};return Nw.runKernel(Pg,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var pI=Mw({addN_:function(e){Kv(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),Kv(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return _w(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!Qv(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return Nw.runKernel(Wg,r)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var fI=Mw({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r={x:_w(e,"x","all","bool")},a={axis:t,keepDims:n};return Nw.runKernel(Vg,r,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var hI=Mw({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r={x:_w(e,"x","any","bool")},a={axis:t,keepDims:n};return Nw.runKernel(Ug,r,a)}});
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var dI=Mw({argMax_:function(e,t){void 0===t&&(t=0);var n={x:_w(e,"x","argMax")},r={axis:t};return Nw.runKernel(Gg,n,r)}});
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var mI=Mw({argMin_:function(e,t){void 0===t&&(t=0);var n={x:_w(e,"x","argMin")},r={axis:t};return Nw.runKernel(jg,n,r)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var vI=Mw({asin_:function(e){var t={x:_w(e,"x","asin")};return Nw.runKernel(Hg,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var gI=Mw({asinh_:function(e){var t={x:_w(e,"x","asinh")};return Nw.runKernel(qg,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var yI=Mw({atan_:function(e){var t={x:_w(e,"x","atan")};return Nw.runKernel(Kg,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var bI=Mw({atan2_:function(e,t){var n=_w(e,"a","atan2"),r=_w(t,"b","atan2"),a=dw(n,r),i={a:n=a[0],b:r=a[1]};return Nw.runKernel(Yg,i)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var xI=Mw({atanh_:function(e){var t={x:_w(e,"x","atanh")};return Nw.runKernel(Xg,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function wI(e,t,n,r,a,i){void 0===a&&(a="NHWC");var o=e[3];return II(e,[].concat(t,[o]),n,i,r,null,null,DI(a))}function kI(e,t,n,r,a,i,o){void 0===o&&(o="channelsLast");var s,u=CI(t),l=u[0],c=u[1];if("channelsLast"===o)s=[l,c,e[3],e[3]];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);s=[l,c,e[1],e[1]]}return II(e,s,n,r,a,i,!1,o)}function NI(e,t,n,r,a,i,o){void 0===o&&(o="NDHWC");var s,u,l=EI(t),c=l[0],p=l[1],f=l[2];if("NDHWC"===o)u="channelsLast",s=[c,p,f,e[4],e[4]];else{if("NCDHW"!==o)throw new Error("Unknown dataFormat "+o);u="channelsFirst",s=[c,p,f,e[1],e[1]]}return SI(e,s,n,r,a,!1,u,i)}function II(e,t,n,r,a,i,o,s){void 0===o&&(o=!1),void 0===s&&(s="channelsLast");var u=-1,l=-1,c=-1,p=-1;if("channelsLast"===s)u=e[0],l=e[1],c=e[2],p=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);u=e[0],p=e[1],l=e[2],c=e[3]}var f,h=t[0],d=t[1],m=t[3],v=CI(n),g=v[0],y=v[1],b=CI(r),x=b[0],w=b[1],k=RI(h,x),N=RI(d,w),I=function(e,t,n,r,a,i,o,s,u){var l,c,p;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var f=function(e,t,n,r,a){null==r&&(r=TI(e,t,n));var i=e[0],o=e[1],s=AI((i-t+2*r)/n+1,a),u=AI((o-t+2*r)/n+1,a);return[s,u]}([t,n],i,r,e,s);c=f[0],p=f[1]}else if("same"===e){c=Math.ceil(t/r),p=Math.ceil(n/a);var h=Math.max(0,(c-1)*r+i-t),d=Math.max(0,(p-1)*a+o-n),m=Math.floor(h/2),v=h-m,g=Math.floor(d/2);l={top:m,bottom:v,left:g,right:d-g,type:"SAME"}}else if("valid"===e)l={top:0,bottom:0,left:0,right:0,type:"VALID"},c=Math.ceil((t-i+1)/r),p=Math.ceil((n-o+1)/a);else{if("object"!=typeof e)throw Error("Unknown padding parameter: "+e);var y="channelsLast"===u?e[1][0]:e[2][0],b="channelsLast"===u?e[1][1]:e[2][1],x="channelsLast"===u?e[2][0]:e[3][0],w="channelsLast"===u?e[2][1]:e[3][1];l={top:y,bottom:b,left:x,right:w,type:0===y&&0===b&&0===x&&0===w?"VALID":"EXPLICIT"},c=AI((t-i+y+b)/r+1,s),p=AI((n-o+x+w)/a+1,s)}return{padInfo:l,outHeight:c,outWidth:p}}(a,l,c,g,y,k,N,i,s),S=I.padInfo,T=I.outHeight,C=I.outWidth,E=o?m*p:m;return"channelsFirst"===s?f=[u,E,T,C]:"channelsLast"===s&&(f=[u,T,C,E]),{batchSize:u,dataFormat:s,inHeight:l,inWidth:c,inChannels:p,outHeight:T,outWidth:C,outChannels:E,padInfo:S,strideHeight:g,strideWidth:y,filterHeight:h,filterWidth:d,effectiveFilterHeight:k,effectiveFilterWidth:N,dilationHeight:x,dilationWidth:w,inShape:e,outShape:f,filterShape:t}}function SI(e,t,n,r,a,i,o,s){void 0===i&&(i=!1),void 0===o&&(o="channelsLast");var u=-1,l=-1,c=-1,p=-1,f=-1;if("channelsLast"===o)u=e[0],l=e[1],c=e[2],p=e[3],f=e[4];else{if("channelsFirst"!==o)throw new Error("Unknown dataFormat "+o);u=e[0],f=e[1],l=e[2],c=e[3],p=e[4]}var h,d=t[0],m=t[1],v=t[2],g=t[4],y=EI(n),b=y[0],x=y[1],w=y[2],k=EI(r),N=k[0],I=k[1],S=k[2],T=RI(d,N),C=RI(m,I),E=RI(v,S),R=function(e,t,n,r,a,i,o,s,u,l,c){var p,f,h,d;if("number"==typeof e){p={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,a,i){null==a&&(a=TI(e,t,r));var o=e[0],s=e[1],u=e[2],l=AI((o-t+2*a)/r+1,i),c=AI((s-t+2*a)/r+1,i),p=AI((u-t+2*a)/r+1,i);return[l,c,p,n]}([t,n,r,1],s,1,a,e,c);f=m[0],h=m[1],d=m[2]}else if("same"===e){var v=((f=Math.ceil(t/a))-1)*a+s-t,g=((h=Math.ceil(n/i))-1)*i+u-n,y=((d=Math.ceil(r/o))-1)*o+l-r,b=Math.floor(v/2),x=v-b,w=Math.floor(g/2),k=g-w,N=Math.floor(y/2);p={top:w,bottom:k,left:N,right:y-N,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);p={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},f=Math.ceil((t-s+1)/a),h=Math.ceil((n-u+1)/i),d=Math.ceil((r-l+1)/o)}return{padInfo:p,outDepth:f,outHeight:h,outWidth:d}}(a,l,c,p,b,x,w,T,C,E,s),A=R.padInfo,F=R.outDepth,_=R.outHeight,D=R.outWidth,O=i?g*f:g;return"channelsFirst"===o?h=[u,O,F,_,D]:"channelsLast"===o&&(h=[u,F,_,D,O]),{batchSize:u,dataFormat:o,inDepth:l,inHeight:c,inWidth:p,inChannels:f,outDepth:F,outHeight:_,outWidth:D,outChannels:O,padInfo:A,strideDepth:b,strideHeight:x,strideWidth:w,filterDepth:d,filterHeight:m,filterWidth:v,effectiveFilterDepth:T,effectiveFilterHeight:C,effectiveFilterWidth:E,dilationDepth:N,dilationHeight:I,dilationWidth:S,inShape:e,outShape:h,filterShape:t}}function TI(e,t,n,r){void 0===r&&(r=1);var a=RI(t,r);return Math.floor((e[0]*(n-1)-n+a)/2)}function CI(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function EI(e){return"number"==typeof e?[e,e,e]:e}function RI(e,t){return t<=1?e:e+(e-1)*(t-1)}function AI(e,t){if(!t)return Math.trunc(e);switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function FI(e){var t=CI(e),n=t[0],r=t[1],a=t[2];return 1===n&&1===r&&1===a}function _I(e,t){return FI(e)||FI(t)}function DI(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var OI=Mw({reshape_:function(e,t){var n={x:_w(e,"x","reshape","string_or_numeric")},r={shape:t};return Nw.runKernel(Vb,n,r)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var MI=Mw({avgPool_:function(e,t,n,r,a){var i=_w(e,"x","avgPool","float32");Kv(_I(n,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '1'"}));var o=i,s=!1;3===i.rank&&(s=!0,o=OI(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Kv(4===o.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+o.rank+"."})),null!=a&&Kv($v(r),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var u={x:o},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=Nw.runKernel(Jg,u,l);return c=Pk(c,i.dtype),s?OI(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var LI=Mw({avgPool3d_:function(e,t,n,r,a,i,o){void 0===i&&(i="NDHWC"),null==o?o=[1,1,1]:YN("dilations is deprecated, this field will be gone in v3.0.0.");var s=_w(e,"x","avgPool3d","float32"),u=s,l=!1;4===s.rank&&(l=!0,u=OI(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Kv(5===u.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."})),Kv("NDHWC"===i,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),Kv(_I(n,o),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=a&&Kv($v(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var c={x:u},p={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i,dilations:o},f=Nw.runKernel(Qg,c,p);return f=Pk(f,u.dtype),l?OI(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var zI=Mw({concat_:function(e,t){void 0===t&&(t=0),Kv(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=Dw(e,"tensors","concat","string_or_numeric");if("complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),1===n.length)return Bk(n[0]);var r=n,a={axis:t};return Nw.runKernel(ly,r,a)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var PI=Mw({sigmoid_:function(e){var t={x:_w(e,"x","sigmoid")};return Nw.runKernel(rx,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var BI=Mw({slice_:function(e,t,n){var r=_w(e,"x","slice","string_or_numeric");if(0===r.rank)throw new Error("Slicing scalar is not possible");var a={x:r},i={begin:t,size:n};return Nw.runKernel($b,a,i)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var WI=Mw({tanh_:function(e){var t={x:_w(e,"x","tanh")};return Nw.runKernel(vx,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var VI=Mw({basicLSTMCell_:function(e,t,n,r,a,i){var o=_w(e,"forgetBias","basicLSTMCell"),s=_w(t,"lstmKernel","basicLSTMCell"),u=_w(n,"lstmBias","basicLSTMCell"),l=_w(r,"data","basicLSTMCell"),c=_w(a,"c","basicLSTMCell"),p=_w(i,"h","basicLSTMCell"),f=zI([l,p],1),h=iN(f,s),d=aI(h,u),m=d.shape[0],v=d.shape[1]/4,g=[m,v],y=BI(d,[0,0],g),b=BI(d,[0,v],g),x=BI(d,[0,2*v],g),w=BI(d,[0,3*v],g),k=aI(sI(PI(y),WI(b)),sI(c,PI(aI(o,x))));return[k,sI(WI(k),PI(w))]}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var UI=Mw({batchToSpaceND_:function(e,t,n){var r=_w(e,"x","batchToSpaceND"),a=t.reduce((function(e,t){return e*t}));Kv(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),Kv(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),Kv(r.shape[0]%a==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+a}));var i={x:r},o={blockShape:t,crops:n};return Nw.runKernel(ty,i,o)}});var GI=Mw({batchNorm_:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n,r,a,i){null==i&&(i=.001);var o,s,u=_w(e,"x","batchNorm"),l=_w(t,"mean","batchNorm"),c=_w(n,"variance","batchNorm");null!=a&&(o=_w(a,"scale","batchNorm")),null!=r&&(s=_w(r,"offset","batchNorm")),Kv(l.rank===c.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Kv(null==s||l.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Kv(null==o||l.rank===o.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var p={x:function(e){return 0===e.rank||1===e.rank?OI(e,[1,1,1,e.size]):2===e.rank?OI(e,[1,1,e.shape[0],e.shape[1]]):3===e.rank?OI(e,[1,e.shape[0],e.shape[1],e.shape[2]]):e}(u),scale:o,offset:s,mean:l,variance:c},f={varianceEpsilon:i},h=Nw.runKernel(Uy,p,f);return OI(h,u.shape)}});var jI=Mw({batchNorm2d_:function(e,t,n,r,a,i){var o,s,u=_w(e,"x","batchNorm"),l=_w(t,"mean","batchNorm"),c=_w(n,"variance","batchNorm");return null!=a&&(o=_w(a,"scale","batchNorm")),null!=r&&(s=_w(r,"offset","batchNorm")),Kv(2===u.rank,(function(){return"Error in batchNorm2D: x must be rank 2 but got rank "+u.rank+"."})),Kv(2===l.rank||1===l.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."})),Kv(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."})),null!=o&&Kv(2===o.rank||1===o.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."})),null!=s&&Kv(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),GI(u,l,c,s,o,i)}});var HI=Mw({batchNorm3d_:function(e,t,n,r,a,i){var o,s,u=_w(e,"x","batchNorm"),l=_w(t,"mean","batchNorm"),c=_w(n,"variance","batchNorm");return null!=a&&(o=_w(a,"scale","batchNorm")),null!=r&&(s=_w(r,"offset","batchNorm")),Kv(3===u.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."})),Kv(3===l.rank||1===l.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."})),Kv(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."})),null!=o&&Kv(3===o.rank||1===o.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."})),null!=s&&Kv(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),GI(u,l,c,s,o,i)}});var qI=Mw({batchNorm4d_:function(e,t,n,r,a,i){var o,s,u=_w(e,"x","batchNorm"),l=_w(t,"mean","batchNorm"),c=_w(n,"variance","batchNorm");return null!=a&&(o=_w(a,"scale","batchNorm")),null!=r&&(s=_w(r,"offset","batchNorm")),Kv(4===u.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."})),Kv(4===l.rank||1===l.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."})),Kv(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."})),null!=o&&Kv(4===o.rank||1===o.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."})),null!=s&&Kv(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),GI(u,l,c,s,o,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var KI=Mw({bincount_:function(e,t,n){var r=_w(e,"x","bincount"),a=_w(t,"weights","bincount");Kv("int32"===r.dtype,(function(){return"Error in bincount: input dtype must be int32, but got "+r.dtype})),Kv(n>=0,(function(){return"size must be non-negative, but got "+n+"."})),Kv(a.size===r.size||0===a.size,(function(){return"Error in bincount: weights must have the same size as input or0-length, but got input shape: "+r.shape+", weights shape: "+a.shape+"."}));var i={x:r,weights:a},o={size:n};return Nw.runKernel(ny,i,o)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var XI=Mw({broadcastTo_:function(e,t){var n=_w(e,"broadcastTo","x"),r=n.shape;if(t.some((function(e){return!(e>0)||e%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var a=n.shape.slice();a.length<t.length;)a.unshift(1);n=OI(n,a)}for(var i=n.shape,o=Array.from(t),s=t.length-1;s>=0;s--)if(i[s]===t[s])o[s]=1;else if(1!==n.shape[s])throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");if(0===o.map((function(e,t){return e>1?t:-1})).filter((function(e){return e>=0})).length)return Bk(n);var u={x:n},l={reps:o};return Nw.runKernel(gx,u,l)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var YI=Mw({ceil_:function(e){var t={x:_w(e,"x","ceil")};return Nw.runKernel(iy,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var JI=Mw({clipByValue_:function(e,t,n){var r=_w(e,"x","clipByValue");Kv(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."}));var a={x:r},i={clipValueMin:t,clipValueMax:n};return Nw.runKernel(oy,a,i)}});var ZI=Mw({concat1d_:function(e){return zI(e,0)}});var QI=Mw({concat2d_:function(e,t){return zI(e,t)}});var $I=Mw({concat3d_:function(e,t){return zI(e,t)}});var eS=Mw({concat4d_:function(e,t){return zI(e,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var tS=Mw({conv2d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NHWC"),void 0===i&&(i=[1,1]);var s=_w(e,"x","conv2d"),u=_w(t,"filter","conv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=OI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Kv(4===l.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."})),Kv(4===u.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."})),null!=o&&Kv($v(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var p="NHWC"===a?l.shape[3]:l.shape[1];Kv(p===u.shape[2],(function(){return"Error in conv2d: depth of input ("+p+") must match input depth for filter "+u.shape[2]+"."})),Kv(_I(n,i),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}));var f={x:l,filter:u},h={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},d=Nw.runKernel(cy,f,h);return c?OI(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var nS=Mw({conv1d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NWC"),void 0===i&&(i=1);var s=_w(e,"x","conv1d"),u=_w(t,"filter","conv1d"),l=s,c=!1;2===s.rank&&(c=!0,l=OI(s,[1,s.shape[0],s.shape[1]])),Kv(3===l.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."})),Kv(3===u.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."})),null!=o&&Kv($v(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."})),Kv(l.shape[2]===u.shape[1],(function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."})),Kv(_I(n,i),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+i+"'"})),Kv("NWC"===a,(function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."}));var p=OI(u,[1,u.shape[0],u.shape[1],u.shape[2]]),f=OI(l,[l.shape[0],1,l.shape[1],l.shape[2]]),h=tS(f,p,[1,n],r,"NHWC",[1,i],o);return OI(h,c?[h.shape[2],h.shape[3]]:[h.shape[0],h.shape[2],h.shape[3]])}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var rS=Mw({conv2DBackpropInput_:function(e,t,n,r,a,i,o){void 0===i&&(i="NHWC"),Kv(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,u=t,l=!1;3===t.rank&&(l=!0,u=OI(t,[1,t.shape[0],t.shape[1],t.shape[2]]),s=[1,e[0],e[1],e[2]]),Kv(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),Kv(4===u.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank})),Kv(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var c="NHWC"===i?s[3]:s[1],p="NHWC"===i?u.shape[3]:u.shape[1];Kv(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."})),Kv(p===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+p+") must match output depth for filter "+n.shape[3]+"."})),null!=o&&Kv($v(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var f={dy:u,filter:n},h={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,inputShape:s},d=Nw.runKernel(fy,f,h);return l?OI(d,[d.shape[1],d.shape[2],d.shape[3]]):d}});var aS=Mw({conv2dTranspose_:function(e,t,n,r,a,i){var o=_w(e,"x","conv2dTranspose"),s=_w(t,"filter","conv2dTranspose");return rS(n,o,s,r,a,"NHWC",i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var iS=Mw({conv3d_:function(e,t,n,r,a,i){void 0===a&&(a="NDHWC"),void 0===i&&(i=[1,1,1]);var o=_w(e,"x","conv3d"),s=_w(t,"filter","conv3d"),u=o,l=!1;4===o.rank&&(l=!0,u=OI(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),Kv(5===u.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."})),Kv(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),Kv(u.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),Kv(_I(n,i),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"})),Kv("NDHWC"===a,(function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."}));var c={x:u,filter:s},p={strides:n,pad:r,dataFormat:a,dilations:i},f=Nw.runKernel(hy,c,p);return l?OI(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var oS=Mw({conv3DBackpropInput_:function(e,t,n,r,a){Kv(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var i=e,o=t,s=!1;4===t.rank&&(s=!0,o=OI(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),i=[1,e[0],e[1],e[2],e[3]]);var u=i[4],l=o.shape[4];Kv(5===i.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."})),Kv(5===o.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank})),Kv(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),Kv(u===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."})),Kv(l===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."}));var c={dy:o,filter:n},p={pad:a,strides:r,inputShape:i},f=Nw.runKernel(my,c,p);return s?OI(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});var sS=Mw({conv3dTranspose_:function(e,t,n,r,a){var i=_w(e,"x","conv3dTranspose"),o=_w(t,"filter","conv3dTranspose");return oS(n,i,o,r,a)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var uS=Mw({cos_:function(e){var t={x:_w(e,"x","cos")};return Nw.runKernel(vy,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var lS=Mw({cosh_:function(e){var t={x:_w(e,"x","cosh")};return Nw.runKernel(gy,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var cS=Mw({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var a={x:_w(e,"x","cumsum")},i={axis:t,exclusive:n,reverse:r};return Nw.runKernel(yy,a,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var pS=Mw({denseBincount_:function(e,t,n,r){void 0===r&&(r=!1);var a=_w(e,"x","denseBincount"),i=_w(t,"weights","denseBincount");Kv("int32"===a.dtype,(function(){return"Error in denseBincount: input dtype must be int32, but got "+a.dtype})),Kv(a.rank<=2,(function(){return"Error in denseBincount: input must be at most rank 2, but got rank "+a.rank+"."})),Kv(n>=0,(function(){return"size must be non-negative, but got "+n+"."})),Kv(i.size===a.size||0===i.size,(function(){return"Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: "+a.shape+", weights shape: "+i.shape+"."}));var o={x:a,weights:i},s={size:n,binaryOutput:r};return Nw.runKernel(xy,o,s)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var fS=Mw({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=_w(e,"x","depthToSpace"),a="NHWC"===n?r.shape[1]:r.shape[2],i="NHWC"===n?r.shape[2]:r.shape[3],o="NHWC"===n?r.shape[3]:r.shape[1];Kv(a*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    "+a+" and "+t+"  for depthToSpace with input shape\n    "+r.shape})),Kv(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n    "+i+" and "+t+" for depthToSpace with input shape\n        "+r.shape})),Kv(o%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+r.shape}));var s={x:r},u={blockSize:t,dataFormat:n};return Nw.runKernel(wy,s,u)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var hS=Mw({depthwiseConv2d_:function(e,t,n,r,a,i,o){void 0===a&&(a="NHWC"),void 0===i&&(i=[1,1]);var s=_w(e,"x","depthwiseConv2d"),u=_w(t,"filter","depthwiseConv2d"),l=s,c=!1;3===s.rank&&(c=!0,l=OI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),Kv(4===l.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."})),Kv(4===u.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."})),Kv(l.shape[3]===u.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."})),null!=o&&Kv($v(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."}));var p={x:l,filter:u},f={strides:n,pad:r,dataFormat:a,dilations:i,dimRoundingMode:o},h=Nw.runKernel(ky,p,f);return c?OI(h,[h.shape[1],h.shape[2],h.shape[3]]):h}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var dS=Mw({diag_:function(e){var t={x:_w(e,"x","diag")};return Nw.runKernel(Sy,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var mS=Mw({dilation2d_:function(e,t,n,r,a,i){void 0===a&&(a=[1,1]),void 0===i&&(i="NHWC");var o=_w(e,"x","dilation2d"),s=_w(t,"filter","dilation2d");Kv(3===o.rank||4===o.rank,(function(){return"Error in dilation2d: input must be rank 3 or 4, but got rank "+o.rank+"."})),Kv(3===s.rank,(function(){return"Error in dilation2d: filter must be rank 3, but got rank "+s.rank+"."})),Kv("NHWC"===i,(function(){return"Error in dilation2d: Only NHWC is currently supported, but got dataFormat of "+i}));var u=o,l=!1;3===o.rank&&(u=OI(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=!0);var c={x:u,filter:s},p={strides:n,pad:r,dilations:a},f=Nw.runKernel(Ty,c,p);return l?OI(f,[f.shape[1],f.shape[2],f.shape[3]]):f}});
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function vS(e,t){for(var n=e.length,r=[],a=0;a<n;a++){var i=n-1-a,o=e[i]||1;(t[t.length-1-a]||1)>1&&1===o&&r.unshift(i)}return r}function gS(e,t){for(var n=[],r=0;r<t.length;r++){var a=e[e.length-r-1],i=t.length-r-1,o=t[i];(null==a||1===a&&o>1)&&n.unshift(i)}return n}function yS(e,t){for(var n=[],r=Math.max(e.length,t.length),a=0;a<r;a++){var i=e[e.length-a-1];null==i&&(i=1);var o=t[t.length-a-1];if(null==o&&(o=1),1===i)n.unshift(o);else if(1===o)n.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(i)}}return n}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var bS=Mw({equal_:function(e,t){var n=_w(e,"a","equal"),r=_w(t,"b","equal"),a=dw(n,r);n=a[0],r=a[1],yS(n.shape,r.shape);var i={a:n,b:r};return Nw.runKernel(Dy,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var xS=Mw({where_:function(e,t,n){var r=_w(t,"a","where"),a=_w(n,"b","where"),i=_w(e,"condition","where","bool"),o=yS(r.shape,a.shape),s=XI(r,o),u=XI(a,o);1===i.rank&&Kv(i.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})),1!==i.rank&&Xv(i.shape,u.shape,"Error in where: ");var l={condition:i,t:s,e:u};return Nw.runKernel(Zb,l)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var wS=Mw({zerosLike_:function(e){var t={x:_w(e,"x","zerosLike")};return Nw.runKernel(Nx,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var kS=Mw({divNoNan_:function(e,t){var n=_w(e,"a","div"),r=_w(t,"b","div"),a=dw(n,r);n=a[0],r=a[1];var i=oI(n,r),o=wS(i),s=bS(r,o);return xS(s,o,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var NS=Mw({dot_:function(e,t){var n=_w(e,"t1","dot"),r=_w(t,"t2","dot");Kv(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var a=1===n.rank?n.size:n.shape[1],i=1===r.rank?r.size:r.shape[0];if(Kv(a===i,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+i+"."})),1===n.rank&&1===r.rank){var o=OI(n,[1,-1]),s=OI(r,[-1,1]),u=iN(o,s);return OI(u,[])}if(1===n.rank&&2===r.rank){var l=OI(n,[1,-1]),c=OI(r,[r.shape[0],r.shape[1]]),p=iN(l,c);return OI(p,[p.size])}if(2===n.rank&&1===r.rank){var f=OI(r,[-1,1]),h=iN(n,f);return OI(h,[h.size])}var d=OI(r,[r.shape[0],r.shape[1]]);return iN(n,d)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var IS=Mw({elu_:function(e){var t={x:_w(e,"x","elu")};return Nw.runKernel(Ay,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var SS=Mw({erf_:function(e){var t=_w(e,"x","erf");Kv("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=Pk(t,"float32"));var n={x:t};return Nw.runKernel(_y,n)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var TS=Mw({exp_:function(e){var t={x:_w(e,"x","exp")};return Nw.runKernel(Oy,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var CS=Mw({expandDims_:function(e,t){void 0===t&&(t=0);var n=_w(e,"x","expandDims","string_or_numeric");Kv(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r={input:n},a={dim:t};return Nw.runKernel(My,r,a)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ES=Mw({expm1_:function(e){var t={x:_w(e,"x","expm1")};return Nw.runKernel(Ly,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var RS=Mw({tile_:function(e,t){var n=_w(e,"x","tile","string_or_numeric");Kv(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."}));var r={x:n},a={reps:t};return Nw.runKernel(gx,r,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var AS=Mw({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var a=zk([e,t],r),i=e<=t?e:t,o=0;o<i;++o)a.set(1,o,o);var s=OI(a.toTensor(),[e,t]);if(null==n)return s;if(1===n.length)return RS(CS(s,0),[n[0],1,1]);if(2===n.length)return RS(CS(CS(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return RS(CS(CS(CS(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function FS(e,t,n){var r={shape:e,value:t,dtype:n};return Nw.runKernel(Py,{},r)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var _S=Mw({floor_:function(e){var t={x:_w(e,"x","floor")};return Nw.runKernel(Wy,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var DS=Mw({gather_:function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var a={x:_w(e,"x","gather"),indices:_w(t,"indices","gather","int32")},i={axis:n,batchDims:r};return Nw.runKernel(Gy,a,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var OS=Mw({greater_:function(e,t){var n=_w(e,"a","greater"),r=_w(t,"b","greater"),a=dw(n,r);n=a[0],r=a[1],yS(n.shape,r.shape);var i={a:n,b:r};return Nw.runKernel(Hy,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var MS=Mw({greaterEqual_:function(e,t){var n=_w(e,"a","greaterEqual"),r=_w(t,"b","greaterEqual"),a=dw(n,r);n=a[0],r=a[1],yS(n.shape,r.shape);var i={a:n,b:r};return Nw.runKernel(qy,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var LS=Mw({imag_:function(e){var t={input:_w(e,"input","imag")};return Nw.runKernel(Yy,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var zS=Mw({isFinite_:function(e){var t={x:_w(e,"x","isFinite")};return Nw.runKernel(Jy,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var PS=Mw({isInf_:function(e){var t={x:_w(e,"x","isInf")};return Nw.runKernel(Zy,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var BS=Mw({isNaN_:function(e){var t={x:_w(e,"x","isNaN")};return Nw.runKernel(Qy,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var WS=Mw({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n={x:_w(e,"x","leakyRelu")},r={alpha:t};return Nw.runKernel($y,n,r)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var VS=Mw({less_:function(e,t){var n=_w(e,"a","less"),r=_w(t,"b","less"),a=dw(n,r);n=a[0],r=a[1],yS(n.shape,r.shape);var i={a:n,b:r};return Nw.runKernel(eb,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var US=Mw({lessEqual_:function(e,t){var n=_w(e,"a","lessEqual"),r=_w(t,"b","lessEqual"),a=dw(n,r);n=a[0],r=a[1],yS(n.shape,r.shape);var i={a:n,b:r};return Nw.runKernel(tb,i)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function GS(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");var r={start:e,stop:t,num:n};return Nw.runKernel(nb,{},r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var jS=Mw({localResponseNormalization_:function(e,t,n,r,a){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===a&&(a=.5);var i=_w(e,"x","localResponseNormalization");Kv(4===i.rank||3===i.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+i.rank+"."})),Kv($v(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var o=i,s=!1;3===i.rank&&(s=!0,o=OI(i,[1,i.shape[0],i.shape[1],i.shape[2]]));var u={x:o},l={depthRadius:t,bias:n,alpha:r,beta:a},c=Nw.runKernel(lb,u,l);return s?OI(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var HS=Mw({log_:function(e){var t={x:_w(e,"x","log")};return Nw.runKernel(rb,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var qS=Mw({log1p_:function(e){var t={x:_w(e,"x","log1p")};return Nw.runKernel(ab,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function KS(e,t){Kv(yg(e),(function(){return"The f passed in variableGrads(f) must be a function"})),Kv(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof cw})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],Nw.registeredVariables)t.push(Nw.registeredVariables[r]);var a=n?t.filter((function(e){return!e.trainable})):null,i=t.length;t=t.filter((function(e){return e.trainable})),Kv(t.length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."}));var o=Nw.gradients(e,t,null,!0),s=o.value,u=o.grads;Kv(u.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),Kv(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var l={};return t.forEach((function(e,t){null!=u[t]&&(l[e.name]=u[t])})),null!=a&&a.forEach((function(e){return l[e.name]=null})),{value:s,grads:l}}function XS(e){return Nw.customGrad(e)}function YS(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var JS=Mw({neg_:function(e){var t={x:_w(e,"x","neg")};return Nw.runKernel(Sb,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ZS=Mw({softplus_:function(e){var t={x:_w(e,"x","softplus")};return Nw.runKernel(ax,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var QS=Mw({logSigmoid_:function(e){var t=_w(e,"x","logSigmoid");return XS((function(e){return{value:JS(ZS(JS(e))),gradFunc:function(t){return sI(t,PI(JS(e)))}}}))(t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var $S=Mw({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r={x:_w(e,"x","max")},a={reductionIndices:t,keepDims:n};return Nw.runKernel(pb,r,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var eT=Mw({sub_:function(e,t){var n=_w(e,"a","sub"),r=_w(t,"b","sub"),a=dw(n,r),i={a:n=a[0],b:r=a[1]};return Nw.runKernel(fx,i)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var tT=Mw({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=_w(e,"x","sum");"bool"===r.dtype&&(r=Pk(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return Nw.runKernel(ox,a,i)}});
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var nT=Mw({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=_w(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);var r=XS((function(e,n){var r=$S(e,t,!0),a=eT(e,r),i=eT(Pk(a,"float32"),HS(tT(TS(a),t,!0)));n([i]);return{value:i,gradFunc:function(e,n){var r=n[0],a=TS(r);return eT(e,sI(tT(e,t,!0),a))}}}));return r(n)}});
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function rT(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function aT(e,t,n){for(var r=e.length+t.length,a=[],i=0,o=0,s=0;s<r;s++)-1===n.indexOf(s)?a.push(e[i++]):a.push(t[o++]);return a}function iT(e,t){for(var n=[],r=e.length,a=0;a<r;a++)-1===t.indexOf(a)&&n.push(e[a]);var i=t.map((function(t){return e[t]}));return[n,i]}function oT(e,t){return aT(e,t.map((function(e){return 1})),t)}function sT(e,t,n){Kv(rT(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function uT(e,t){if(rT(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function lT(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function cT(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var pT=Mw({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=_w(e,"x","logSumExp"),a=ag(t,r.shape),i=$S(r,a,!0),o=eT(r,i),s=TS(o),u=tT(s,a),l=HS(u),c=aI(OI(i,l.shape),l);if(n){var p=oT(c.shape,a);return OI(c,p)}return c}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var fT=Mw({logicalAnd_:function(e,t){var n=_w(e,"a","logicalAnd","bool"),r=_w(t,"b","logicalAnd","bool");yS(n.shape,r.shape);var a={a:n,b:r};return Nw.runKernel(ib,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var hT=Mw({logicalNot_:function(e){var t={x:_w(e,"x","logicalNot","bool")};return Nw.runKernel(ob,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var dT=Mw({logicalOr_:function(e,t){var n=_w(e,"a","logicalOr","bool"),r=_w(t,"b","logicalOr","bool");yS(n.shape,r.shape);var a={a:n,b:r};return Nw.runKernel(sb,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var mT=Mw({logicalXor_:function(e,t){var n=_w(e,"a","logicalXor","bool"),r=_w(t,"b","logicalXor","bool");return yS(n.shape,r.shape),fT(dT(e,t),hT(fT(e,t)))}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var vT=Mw({maxPool_:function(e,t,n,r,a){var i=_w(e,"x","maxPool"),o=i,s=!1;3===i.rank&&(s=!0,o=OI(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Kv(4===o.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+o.rank+"."})),Kv(_I(n,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '1'"})),null!=a&&Kv($v(r),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var u={x:o},l={filterSize:t,strides:n,pad:r,dimRoundingMode:a},c=Nw.runKernel(hb,u,l);return s?OI(c,[c.shape[1],c.shape[2],c.shape[3]]):c}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var gT=Mw({maxPool3d_:function(e,t,n,r,a,i,o){void 0===t&&(t=[1,1,1]),void 0===i&&(i="NDHWC"),null==o?o=[1,1,1]:YN("dilations is deprecated, this field will be gone in v3.0.0.");var s=_w(e,"x","maxPool3d"),u=s,l=!1;4===s.rank&&(l=!0,u=OI(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),Kv(5===u.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."})),Kv("NDHWC"===i,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i})),Kv(_I(n,o),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=a&&Kv($v(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var c={x:u},p={filterSize:t,strides:n,pad:r,dimRoundingMode:a,dataFormat:i,dilations:o},f=Nw.runKernel(mb,c,p);return l?OI(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var yT=Mw({maxPoolWithArgmax_:function(e,t,n,r,a){void 0===a&&(a=!1);var i={x:_w(e,"x","maxPoolWithArgmax")},o={filterSize:t,strides:n,pad:r,includeBatchInIndex:a},s=Nw.runKernel(gb,i,o);return{result:s[0],indexes:s[1]}}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var bT=Mw({maximum_:function(e,t){var n=_w(e,"a","maximum"),r=_w(t,"b","maximum"),a=dw(n,r);n=a[0],r=a[1],"bool"===n.dtype&&(n=Pk(n,"int32"),r=Pk(r,"int32")),yS(n.shape,r.shape);var i={a:n,b:r};return Nw.runKernel(fb,i)}});
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var xT=Mw({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r={x:_w(e,"x","mean")},a={axis:t,keepDims:n};return Nw.runKernel(yb,r,a)}});
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var wT=Mw({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r={x:_w(e,"x","min")},a={axis:t,keepDims:n};return Nw.runKernel(bb,r,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var kT=Mw({minimum_:function(e,t){var n=_w(e,"a","minimum"),r=_w(t,"b","minimum"),a=dw(n,r);n=a[0],r=a[1],"bool"===n.dtype&&(n=Pk(n,"int32"),r=Pk(r,"int32")),yS(n.shape,r.shape);var i={a:n,b:r};return Nw.runKernel(xb,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var NT=Mw({mirrorPad_:function(e,t,n){Kv("reflect"===n||"symmetric"===n,(function(){return"Invalid mode. Mode must be either reflect or symmetric. Got "+n+"."}));var r=_w(e,"x","mirrorPad");if(0===r.rank)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");Kv(t.length===r.rank,(function(){return"Padding doesn't match input. Must be "+r.rank+". Got "+t.length+"."}));for(var a="reflect"===n?1:0,i=function(e){Kv(2===t[e].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),Kv(t[e][0]>=0&&t[e][0]<=r.shape[e]-a&&t[e][1]>=0&&t[e][1]<=r.shape[e]-a,(function(){return"Padding in dimension "+e+" cannot be greater than or equal to "+(r.shape[e]-a)+" or less than 0 for input of shape "+r.shape}))},o=0;o<r.rank;o++)i(o);var s={paddings:t,mode:n},u={x:r};return Nw.runKernel(wb,u,s)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var IT=Mw({mod_:function(e,t){var n=_w(e,"a","mod"),r=_w(t,"b","mod"),a=dw(n,r),i={a:n=a[0],b:r=a[1]};return Nw.runKernel(kb,i)}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ST=Mw({square_:function(e){var t=_w(e,"x","square");return Nw.runKernel("Square",{x:t},{})}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var TT=Mw({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=ag(t,(e=_w(e,"x","moments")).shape),a=xT(e,r,n),i=a.shape;n||(i=oT(a.shape,r));var o=ST(eT(Pk(e,"float32"),OI(a,i)));return{mean:a,variance:xT(o,r,n)}}});var CT=Mw({multiRNNCell_:function(e,t,n,r){for(var a=_w(t,"data","multiRNNCell"),i=Dw(n,"c","multiRNNCell"),o=Dw(r,"h","multiRNNCell"),s=a,u=[],l=0;l<e.length;l++){var c=e[l](s,i[l],o[l]);u.push(c[0]),u.push(c[1]),s=c[1]}for(var p=[],f=[],h=0;h<u.length;h+=2)p.push(u[h]),f.push(u[h+1]);return[p,f]}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ET=Mw({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var a=_w(e,"logits","multinomial"),i=a.size,o=a.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);n=n||Math.random();var s={logits:1===o?OI(a,[1,-1]):a},u={numSamples:t,seed:n,normalized:r},l=Nw.runKernel(Nb,s,u);return 1===o?OI(l,[l.size]):l}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var RT=Mw({notEqual_:function(e,t){var n=_w(e,"a","notEqual"),r=_w(t,"b","notEqual"),a=dw(n,r);n=a[0],r=a[1],yS(n.shape,r.shape);var i={a:n,b:r};return Nw.runKernel(Tb,i)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function AT(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=AT(e,"float32"),r=AT(e,"float32");return Lw(n,r)}var a=Ig(Zv(e),t);return Nw.makeTensor(a,e,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function FT(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=FT(e,"float32"),r=AT(e,"float32");return Lw(n,r)}var a=Ng(Zv(e),t);return Nw.makeTensor(a,e,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var _T=Mw({onesLike_:function(e){var t={x:_w(e,"x","onesLike")};return Nw.runKernel(Ab,t)}});var DT=Mw({outerProduct_:function(e,t){var n=_w(e,"v1","outerProduct"),r=_w(t,"v2","outerProduct");Kv(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}));var a=OI(n,[-1,1]),i=OI(r,[1,-1]);return iN(a,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var OT=Mw({pad_:function(e,t,n){void 0===n&&(n=0);var r=_w(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:t,constantValue:n},i={x:r};return Nw.runKernel(Db,i,a)}});var MT=Mw({pad1d_:function(e,t,n){return void 0===n&&(n=0),Kv(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),OT(e,[t],n)}});var LT=Mw({pad2d_:function(e,t,n){return void 0===n&&(n=0),Kv(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),OT(e,t,n)}});var zT=Mw({pad3d_:function(e,t,n){return void 0===n&&(n=0),Kv(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),OT(e,t,n)}});var PT=Mw({pad4d_:function(e,t,n){return void 0===n&&(n=0),Kv(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),OT(e,t,n)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var BT=Mw({spaceToBatchND_:function(e,t,n){var r=_w(e,"x","spaceToBatchND");Kv(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),Kv(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),Kv(r.shape.reduce((function(e,r,a){return a>0&&a<=t.length?e&&(r+n[a-1][0]+n[a-1][1])%t[a-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}));var a={x:r},i={blockShape:t,paddings:n};return Nw.runKernel(sx,a,i)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var WT=Mw({pool_:function(e,t,n,r,a,i){null==a&&(a=[1,1]),null==i&&(i=1),0===r&&(r="valid");var o=_w(e,"x","maxPool"),s=o,u=!1;3===o.rank&&(u=!0,s=OI(o,[1,o.shape[0],o.shape[1],o.shape[2]])),Kv(_I(i,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+a+"'"}));var l,c=kI(s.shape,t,i,a,r),p=[c.dilationHeight,c.dilationWidth];l="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})),r=n.map((function(e){return e-1})),a=r.map((function(e){return Math.floor(e/2)})),i=r.map((function(e,t){return e-a[t]}));return r.map((function(e,t){return[a[t],i[t]]}))}([c.filterHeight,c.filterWidth],p):[[0,0],[0,0]];var f=1===p[0]&&1===p[1],h=function(e,t,n){var r=n.map((function(e){return e[0]})),a=n.map((function(e){return e[1]})),i=e.concat(r,a),o=t.map((function(e,t){return(e-i[t]%e)%e})),s=a.map((function(e,t){return e+o[t]})),u=t.map((function(e,t){return[r[t],s[t]]})),l=t.map((function(e,t){return[0,o[t]]}));return[u,l]}([c.inHeight,c.inWidth],p,l),d=h[0],m=h[1],v=f?r:"valid",g=f?s:BT(s,p,d),y=("avg"===n?function(){return MI(g,t,i,v)}:function(){return vT(g,t,i,v)})(),b=f?y:UI(y,p,m);return u?OI(b,[b.shape[1],b.shape[2],b.shape[3]]):b}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var VT=Mw({pow_:function(e,t){var n=_w(e,"base","pow"),r=_w(t,"exp","pow"),a=dw(n,r),i={a:n=a[0],b:r=a[1]};return Nw.runKernel(Ob,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var UT=Mw({prelu_:function(e,t){var n={x:_w(e,"x","prelu"),alpha:_w(t,"alpha","prelu")};return Nw.runKernel(Mb,n)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var GT=Mw({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=_w(e,"x","prod");"bool"===r.dtype&&(r=Pk(r,"int32"));var a={x:r},i={axis:t,keepDims:n};return Nw.runKernel(Lb,a,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var jT=Mw({rand_:function(e,t,n){var r=Zv(e),a=null;if(null==n||"float32"===n)a=new Float32Array(r);else if("int32"===n)a=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);a=new Uint8Array(r)}for(var i=0;i<r;i++)a[i]=t();return Nw.makeTensor(a,e,n)}}),HT=n((function(e){!function(e,t,n){function r(e){var t=this,n=function(){var e=4022871197,t=function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function a(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var n=new r(e),i=t&&t.state,o=n.next;return o.int32=function(){return 4294967296*n.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.alea=i}(0,e,!1)})),qT=n((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xor128=i}(0,e,!1)})),KT=n((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function a(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xorwow=i}(0,e,!1)})),XT=n((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,a=t.i;return e=r[a],n=(e^=e>>>7)^e<<24,n^=(e=r[a+1&7])^e>>>10,n^=(e=r[a+3&7])^e>>>3,n^=(e=r[a+4&7])^e<<7,e=r[a+7&7],n^=(e^=e<<13)^e<<9,r[a]=n,t.i=a+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function a(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.x&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xorshift7=i}(0,e,!1)})),YT=n((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,a=t.X,i=t.i;return t.w=r=r+1640531527|0,n=a[i+34&127],e=a[i=i+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=a[i]=n^e,t.i=i,n+(r^r>>>16)|0},function(e,t){var n,r,a,i,o,s=[],u=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,u=Math.max(u,t.length)),a=0,i=-32;i<u;++i)t&&(r^=t.charCodeAt((i+32)%t.length)),0===i&&(o=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,i>=0&&(o=o+1640531527|0,a=0==(n=s[127&i]^=r+o)?a+1:0);for(a>=128&&(s[127&(t&&t.length||0)]=-1),a=127,i=512;i>0;--i)r=s[a+34&127],n=s[a=a+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[a]=r^n;e.w=o,e.X=s,e.i=a}(t,e)}function a(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&(i.X&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.xor4096=i}(0,e,!1)})),JT=n((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,a=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^a,a=a-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^a,t.a=a-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function a(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var n=new r(e),i=t&&t.state,o=function(){return(n.next()>>>0)/4294967296};return o.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},o.int32=n.next,o.quick=o,i&&("object"==typeof i&&a(i,n),o.state=function(){return a(n,{})}),o}t&&t.exports?t.exports=i:n&&n.amd?n((function(){return i})):this.tychei=i}(0,e,!1)})),ZT=n((function(e){!function(t,n){var r,a=this,i=256,o="random",s=n.pow(i,6),u=n.pow(2,52),l=2*u,c=i-1;function p(e,c,p){var g=[],y=m(d((c=1==c?{entropy:!0}:c||{}).entropy?[e,v(t)]:e??function(){try{var e;return r&&(e=r.randomBytes)?e=e(i):(e=new Uint8Array(i),(a.crypto||a.msCrypto).getRandomValues(e)),v(e)}catch(e){var n=a.navigator,o=n&&n.plugins;return[+new Date,a,o,a.screen,v(t)]}}(),3),g),b=new f(g),x=function(){for(var e=b.g(6),t=s,n=0;e<u;)e=(e+n)*i,t*=i,n=b.g(1);for(;e>=l;)e/=2,t/=2,n>>>=1;return(e+n)/t};return x.int32=function(){return 0|b.g(4)},x.quick=function(){return b.g(4)/4294967296},x.double=x,m(v(b.S),t),(c.pass||p||function(e,t,r,a){return a&&(a.S&&h(a,b),e.state=function(){return h(b,{})}),r?(n[o]=e,t):e})(x,y,"global"in c?c.global:this==n,c.state)}function f(e){var t,n=e.length,r=this,a=0,o=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);a<i;)s[a]=a++;for(a=0;a<i;a++)s[a]=s[o=c&o+e[a%n]+(t=s[a])],s[o]=t;(r.g=function(e){for(var t,n=0,a=r.i,o=r.j,s=r.S;e--;)t=s[a=c&a+1],n=n*i+s[c&(s[a]=s[o=c&o+t])+(s[o]=t)];return r.i=a,r.j=o,n})(i)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function d(e,t){var n,r=[],a=typeof e;if(t&&"object"==a)for(n in e)try{r.push(d(e[n],t-1))}catch(e){}return r.length?r:"string"==a?e:e+"\0"}function m(e,t){for(var n,r=e+"",a=0;a<r.length;)t[c&a]=c&(n^=19*t[c&a])+r.charCodeAt(a++);return v(t)}function v(e){return String.fromCharCode.apply(0,e)}if(n["seed"+o]=p,m(n.random(),t),e.exports){e.exports=p;try{r=require("crypto")}catch(e){}}else 0}([],Math)}));ZT.alea=HT,ZT.xor128=qT,ZT.xorwow=KT,ZT.xorshift7=XT,ZT.xor4096=YT,ZT.tychei=JT;var QT=ZT.alea,$T=function(){function e(e,t,n,r,a){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=QT(i.toString())}var t=e.prototype;return t.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var a=void 0,i=void 0,o=void 0;do{o=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i}while(o>=1||0===o);var s=Math.sqrt(-2*Math.log(o)/o);t=this.mean+this.stdDev*a*s,n=this.mean+this.stdDev*i*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},t.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},t.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),eC=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var a=r||Math.random();this.randu=QT(a.toString()),this.randn=new $T(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}var t=e.prototype;return t.nextValue=function(){for(var e,t,n,r,a,i;;){do{r=this.randn.nextValue(),i=1+this.c*r}while(i<=0);if(i*=i*i,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-i+Math.log(i)),(a=this.randu())<t||Math.log(a)<n)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},t.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),tC=function(){function e(e,t,n,r){var a=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==a.dtype||"float32"===a.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=QT(r)}var t=e.prototype;return t.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();var nC=Mw({randomGamma_:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n,r,a){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var i=new eC(t,n,r,a),o=zk(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var rC=Mw({randomNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var i=new $T(t,n,r,!1,a),o=zk(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var aC=Mw({randomUniform_:function(e,t,n,r,a){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var i=zk(e,r),o=new tC(t,n,null,a),s=0;s<i.values.length;s++)i.values[s]=o.nextValue();return i.toTensor()}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function iC(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");var a={start:e,stop:t,step:n,dtype:r};return Nw.runKernel(zb,{},a)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var oC=Mw({real_:function(e){var t={input:_w(e,"input","real")};return Nw.runKernel(Pb,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var sC=Mw({reciprocal_:function(e){var t={x:_w(e,"x","reciprocal")};return Nw.runKernel(Bb,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var uC=Mw({relu_:function(e){var t={x:_w(e,"x","relu")};return Nw.runKernel(Wb,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var lC=Mw({relu6_:function(e){var t={x:_w(e,"x","relu6")};return Nw.runKernel(qb,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var cC=Mw({reverse_:function(e,t){var n={x:_w(e,"x","reverse")},r={dims:t};return Nw.runKernel(Kb,n,r)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var pC=Mw({reverse1d_:function(e){var t=_w(e,"x","reverse");return Kv(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),cC(t,0)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var fC=Mw({reverse2d_:function(e,t){var n=_w(e,"x","reverse");return Kv(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),cC(n,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var hC=Mw({reverse3d_:function(e,t){var n=_w(e,"x","reverse");return Kv(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),cC(n,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var dC=Mw({reverse4d_:function(e,t){var n=_w(e,"x","reverse");return Kv(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),cC(n,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var mC=Mw({round_:function(e){var t={x:_w(e,"x","round")};return Nw.runKernel(Xb,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var vC=Mw({rsqrt_:function(e){var t={x:_w(e,"x","rsqrt")};return Nw.runKernel(Yb,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function gC(e,t){if((pg(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&pg(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return zw(e,[],[],t)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var yC=Mw({selu_:function(e){var t={x:_w(e,"x","selu")};return Nw.runKernel(Qb,t)}});var bC=Mw({separableConv2d_:function(e,t,n,r,a,i,o){void 0===i&&(i=[1,1]),void 0===o&&(o="NHWC");var s=_w(e,"x","separableConv2d"),u=_w(t,"depthwiseFilter","separableConv2d"),l=_w(n,"pointwiseFilter","separableConv2d"),c=s,p=!1;if(3===s.rank&&(p=!0,c=OI(s,[1,s.shape[0],s.shape[1],s.shape[2]])),"NCHW"===o)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");Kv(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."})),Kv(4===u.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."})),Kv(4===l.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."})),Kv(1===l.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."})),Kv(1===l.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."}));var f=u.shape[2],h=u.shape[3];Kv(l.shape[2]===f*h,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+f*h+", but got "+l.shape[2]+"."}));var d=hS(c,u,r,a,o,i),m=tS(d,l,1,"valid",o);return p?OI(m,[m.shape[1],m.shape[2],m.shape[3]]):m}});function xC(){return xC=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l,c,p,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_w(t,"x","setdiff1d"),a=_w(n,"y","setdiff1d"),Kv(r.dtype===a.dtype,(function(){return"x and y should have the same dtype, but got x ("+r.dtype+") and y ("+a.dtype+")."})),Kv(1===r.rank,(function(){return"x should be 1D tensor, but got x ("+r.shape+")."})),Kv(1===a.rank,(function(){return"y should be 1D tensor, but got y ("+a.shape+")."})),e.next=7,r.data();case 7:return i=e.sent,e.next=10,a.data();case 10:for(o=e.sent,s=new Set(o),u=0,l=0;l<i.length;l++)s.has(i[l])||u++;for(c=new tw([u],r.dtype),p=new tw([u],"int32"),f=0,h=0;f<i.length;f++)s.has(i[f])||(c.values[h]=i[f],p.values[h]=f,h++);return e.abrupt("return",[c.toTensor(),p.toTensor()]);case 18:case"end":return e.stop()}}),e)}))),xC.apply(this,arguments)}var wC=function(e,t){return xC.apply(this,arguments)};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var kC=Mw({sign_:function(e){var t={x:_w(e,"x","sign")};return Nw.runKernel(nx,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var NC=Mw({sin_:function(e){var t={x:_w(e,"x","sin")};return Nw.runKernel(ex,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var IC=Mw({sinh_:function(e){var t={x:_w(e,"x","sinh")};return Nw.runKernel(tx,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var SC=Mw({slice1d_:function(e,t,n){var r=_w(e,"x","slice1d");return Kv(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),BI(r,[t],[n])}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var TC=Mw({slice2d_:function(e,t,n){var r=_w(e,"x","slice2d");return Kv(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),BI(r,t,n)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var CC=Mw({slice3d_:function(e,t,n){var r=_w(e,"x","slice3d");return Kv(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),BI(r,t,n)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var EC=Mw({slice4d_:function(e,t,n){var r=_w(e,"x","slice4d");return Kv(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),BI(r,t,n)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var RC=Mw({softmax_:function(e,t){void 0===t&&(t=-1);var n=_w(e,"logits","softmax","float32");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);var r={logits:n},a={dim:t};return Nw.runKernel(lx,r,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var AC=Mw({fft_:function(e){Kv("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t={input:e};return Nw.runKernel(zy,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var FC=Mw({ifft_:function(e){Kv("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t={input:e};return Nw.runKernel(Xy,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var _C=Mw({irfft_:function(e){var t,n=e.shape[e.shape.length-1],r=e.size/n;if(n<=2){var a=OI(e,[r,n]);t=FC(a)}else{var i=[r,2*(n-1)],o=OI(oC(e),[r,n]),s=OI(LS(e),[r,n]),u=cC(BI(o,[0,1],[r,n-2]),1),l=sI(cC(BI(s,[0,1],[r,n-2]),1),gC(-1)),c=zI([o,u],1),p=zI([s,l],1),f=OI(Lw(c,p),[i[0],i[1]]);t=FC(f)}if(t=oC(t),3===e.rank&&0!==e.shape[0]){var h=t,d=e.shape[0];t=OI(t,[d,t.shape[0]/d,t.shape[1]]),h.dispose()}return t}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var DC=Mw({split_:function(e,t,n){void 0===n&&(n=0);var r={x:_w(e,"x","split")},a={numOrSizeSplits:t,axis:n};return Nw.runKernel(ux,r,a)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var OC=Mw({rfft_:function(e,t){Kv("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],a=e.size/r;if(null!=t&&t<r){var i=e.shape.map((function(e){return 0})),o=e.shape.map((function(e){return e}));o[e.shape.length-1]=t,n=BI(e,i,o),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=zI([e,AT(s)],e.shape.length-1),r=t}else n=e;var u=wS(n),l=OI(Lw(n,u),[a,r]),c=AC(l),p=Math.floor(r/2)+1,f=oC(c),h=LS(c),d=DC(f,[p,r-p],f.shape.length-1),m=DC(h,[p,r-p],h.shape.length-1),v=n.shape.slice();return v[n.shape.length-1]=p,OI(Lw(d[0],m[0]),v)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var MC=Mw({sqrt_:function(e){var t={x:_w(e,"x","sqrt")};return Nw.runKernel(ix,t)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var LC=Mw({squaredDifference_:function(e,t){var n=_w(e,"a","squaredDifference"),r=_w(t,"b","squaredDifference"),a=dw(n,r);n=a[0],r=a[1],yS(n.shape,r.shape);var i={a:n,b:r};return Nw.runKernel(cx,i,{})}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var zC=Mw({squeeze_:function(e,t){var n=_w(e,"x","squeeze");return OI(n,ig(n.shape,t).newShape)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var PC=Mw({stack_:function(e,t){void 0===t&&(t=0);var n=Dw(e,"tensors","stack","string_or_numeric");Kv(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),n.length>0&&Kv(t<=n[0].rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n,a={axis:t};return Nw.runKernel(_b,r,a)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var BC=Mw({step_:function(e,t){void 0===t&&(t=0);var n={x:_w(e,"x","step")},r={alpha:t};return Nw.runKernel(Ix,n,r)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var WC=Mw({stridedSlice_:function(e,t,n,r,a,i,o,s,u){void 0===a&&(a=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===u&&(u=0);var l={x:_w(e,"x","stridedSlice")},c={begin:t,end:n,strides:r,beginMask:a,endMask:i,ellipsisMask:o,newAxisMask:s,shrinkAxisMask:u};return Nw.runKernel(dx,l,c)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var VC=Mw({tan_:function(e){var t={x:_w(e,"x","tan")};return Nw.runKernel(mx,t)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function UC(e,t){Yv(e);var n=Rw(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return zw(e,null,n,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function GC(e,t,n){if(Yv(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=Rw(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return zw(e,t,r,n)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var jC=Mw({topk_:
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=_w(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(t>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+t);var i={x:r},o={k:t,sorted:n},s=Nw.runKernel(yx,i,o);return{values:s[0],indices:s[1]}}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var HC=Mw({truncatedNormal_:function(e,t,n,r,a){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type $ { dtype }");for(var i=new $T(t,n,r,!0,a),o=zk(e,r),s=0;s<o.values.length;s++)o.values[s]=i.nextValue();return o.toTensor()}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var qC=Mw({unique_:function(e,t){void 0===t&&(t=0);var n=_w(e,"x","unique","string_or_numeric");Kv(n.rank>0,(function(){return"The input tensor must be at least 1D"}));var r={x:n},a={axis:t},i=Nw.runKernel(xx,r,a);return{values:i[0],indices:i[1]}}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var KC=Mw({unsortedSegmentSum_:function(e,t,n){var r=_w(e,"x","unsortedSegmentSum"),a=_w(t,"segmentIds","unsortedSegmentSum","int32");Kv($v(n),(function(){return"numSegments must be of dtype int"}));var i={x:r,segmentIds:a},o={numSegments:n};return Nw.runKernel(kx,i,o)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var XC=Mw({unstack_:function(e,t){void 0===t&&(t=0);var n=_w(e,"x","unstack","string_or_numeric");Kv(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}));var r={value:n},a={axis:t};return Nw.runKernel(wx,r,a)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function YC(e,t,n,r){return void 0===t&&(t=!0),Nw.makeVariable(e,t,n,r)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function JC(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);for(var a=zk(e,"int32"),i=zk([n.length,e.length],"int32"),o=0;o<n.length;o++){var s=a.indexToLoc(n[o]),u=o*e.length;i.values.set(s,u)}return i.toTensor()}function ZC(){return(ZC=Cv(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_w(t,"condition","whereAsync","bool"),e.next=3,n.data();case 3:return r=e.sent,a=JC(n.shape,r),t!==n&&n.dispose(),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var QC=function(e){return ZC.apply(this,arguments)};function $C(){return $C=Cv(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s,u,l,c,p,f,h,d,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=_w(t,"tensor","boolMask"),i=_w(n,"mask","boolMask","bool"),o=r??0,s=i.rank,u=a.shape,Kv(s>0,(function(){return"mask cannot be scalar"})),Xv(u.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,c=o;c<o+s;c++)l*=u[c];return p=u.slice(0,o).concat([l],u.slice(o+s)),f=OI(a,p),h=OI(i,[-1]),e.next=14,QC(h);case 14:return d=e.sent,m=zC(d,[1]),v=DS(f,m,o),t!==a&&a.dispose(),n!==i&&i.dispose(),m.dispose(),f.dispose(),h.dispose(),d.dispose(),e.abrupt("return",v);case 24:case"end":return e.stop()}}),e)}))),$C.apply(this,arguments)}var eE=function(e,t,n){return $C.apply(this,arguments)};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var tE=Mw({equalStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","equalStrict"),r=_w(t,"b","equalStrict");return Xv(n.shape,r.shape,"Error in equalStrict: "),bS(n,r)}}),nE=Mw({greaterEqualStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","greaterEqualStrict"),r=_w(t,"b","greaterEqualStrict");return Xv(n.shape,r.shape,"Error in greaterEqualStrict: "),MS(n,r)}}),rE=Mw({greaterStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","greaterStrict"),r=_w(t,"b","greaterStrict");return Xv(n.shape,r.shape,"Error in greaterStrict: "),OS(n,r)}}),aE=Mw({lessEqualStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","lessEqualStrict"),r=_w(t,"b","lessEqualStrict");return Xv(n.shape,r.shape,"Error in lessEqualStrict: "),US(n,r)}}),iE=Mw({lessStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","lessStrict"),r=_w(t,"b","lessStrict");return Xv(n.shape,r.shape,"Error in lessStrict: "),VS(n,r)}}),oE=Mw({notEqualStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","notEqualStrict"),r=_w(t,"b","notEqualStrict");return Xv(n.shape,r.shape,"Error in notEqualStrict: "),RT(n,r)}});var sE=Mw({addStrict_:
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","addStrict"),r=_w(t,"b","addStrict");return Xv(n.shape,r.shape,"Error in addStrict: "),aI(n,r)}}),uE=Mw({divStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","div"),r=_w(t,"b","div");return Xv(n.shape,r.shape,"Error in divideStrict: "),oI(n,r)}}),lE=Mw({maximumStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","maximumStrict"),r=_w(t,"b","maximumStrict");return Xv(n.shape,r.shape,"Error in maximumStrict: "),bT(n,r)}}),cE=Mw({minimumStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","minimumStrict"),r=_w(t,"b","minimumStrict");return Xv(n.shape,r.shape,"Error in minimumStrict: "),kT(n,r)}}),pE=Mw({modStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","modStrict"),r=_w(t,"b","modStrict");return Xv(n.shape,r.shape,"Error in modStrict: "),IT(n,r)}}),fE=Mw({mulStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","mul"),r=_w(t,"b","mul");return Xv(n.shape,r.shape,"Error in multiplyStrict: "),sI(n,r)}}),hE=Mw({powStrict_:function(e,t){return YN("strict variants of ops have been deprecated and will be removed in future"),Xv(e.shape,t.shape,"Error in powStrict: "),VT(e,t)}}),dE=Mw({squaredDifferenceStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","squaredDifferenceStrict"),r=_w(t,"b","squaredDifferenceStrict");return Xv(n.shape,r.shape,"Error in squaredDifferenceStrict: "),LC(n,r)}}),mE=Mw({subStrict_:function(e,t){YN("strict variants of ops have been deprecated and will be removed in future");var n=_w(e,"a","subStrict"),r=_w(t,"b","subStrict");return Xv(n.shape,r.shape,"Error in subStrict: "),eT(n,r)}});function vE(e,t,n){if(void 0===n&&(n=null),0===e.rank)return uI(e);if(1!==e.rank&&null===n)return vE(OI(e,[-1]),t,n);if(1===e.rank||"number"==typeof n||Array.isArray(n)&&1===n.length){if(1===t)return tT(uI(e),n);if(t===1/0)return $S(uI(e),n);if(t===-1/0)return wT(uI(e),n);if("euclidean"===t||2===t)return MC(tT(VT(uI(e),gC(2,"int32")),n));throw new Error("Error in norm: invalid ord value: "+t)}if(Array.isArray(n)&&2===n.length){if(1===t)return $S(tT(uI(e),n[0]),n[1]-1);if(t===1/0)return $S(tT(uI(e),n[1]),n[0]);if(t===-1/0)return wT(tT(uI(e),n[1]),n[0]);if("fro"===t||"euclidean"===t)return MC(tT(ST(e),n));throw new Error("Error in norm: invalid ord value: "+t)}throw new Error("Error in norm: invalid axis: "+n)}var gE=Mw({norm_:
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var a=vE(e=_w(e,"x","norm"),t,n),i=a.shape;if(r){var o=ag(n,e.shape);i=oT(a.shape,o)}return OI(a,i)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var yE=Mw({movingAverage_:function(e,t,n,r,a){void 0===a&&(a=!0);var i=_w(e,"v","movingAverage"),o=_w(t,"x","movingAverage"),s=_w(n,"decay","movingAverage");mw(i,o),Kv(Qv(i.shape,o.shape),(function(){return"Shape mismatch in v and x"}));var u=gC(1),l=eT(u,s),c=sI(eT(o,i),l);if(a){Kv(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var p=_w(r,"step","movingAverage");c=oI(c,eT(u,VT(s,p)))}return aI(i,c)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var bE=Mw({scatterND_:function(e,t,n){var r=_w(e,"indices","scatterND","int32"),a=_w(t,"updates","scatterND");gN(a,r,n);var i={indices:r,updates:a},o={shape:n};return Nw.runKernel(Jb,i,o)}});var xE=Mw({sparseToDense_:
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n,r){void 0===r&&(r=0);var a=_w(e,"sparseIndices","sparseToDense","int32"),i=_w(t,"sparseValues","sparseToDense"),o=_w(r,"defaultValue","sparseToDense",i.dtype);!function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var a=e.rank>0?e.shape[0]:1,i=e.rank>1?e.shape[1]:1;if(n.length!==i)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+i+".");var o=t.size;if(0!==t.rank&&(1!==t.rank||o!==a))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+a+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(a,i,n,o);var s={sparseIndices:a,sparseValues:i,defaultValue:o},u={outputShape:n};return Nw.runKernel(hx,s,u)}});
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var wE=Mw({gatherND_:function(e,t){var n=_w(t,"indices","gatherND","int32"),r={params:_w(e,"x","gatherND"),indices:n};return Nw.runKernel(jy,r)}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var kE=Mw({dropout_:
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n,r){var a=_w(e,"x","dropout");if(Kv("float32"===a.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."})),Kv(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof aw?a.clone():a;var i=function(e,t){if(null==t)return e.shape.slice();if(Qv(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(a,n),o=1-t,s=oI(_S(aI(aC(i,0,1,"float32",r),o)),o);return sI(a,s)}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function NE(e){return Math.floor(Math.pow(2,Math.ceil(Math.log(e)/Math.log(2))))}function IE(e,t,n){for(var r=1-e%2,a=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+r-1);a[i]=t-n*Math.cos(o)}return UC(a,"float32")}function SE(){return SE=Cv(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s,u,l,c,p,f,h,d,m,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=1),a=_w(t,"predictions","inTopK"),i=_w(n,"targets","inTopK"),Kv(a.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+a.rank})),Kv(a.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+a.rank+" and targets rank "+i.rank})),Xv(a.shape.slice(0,a.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=a.shape[a.shape.length-1],Kv(r>0&&r<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+r})),e.next=10,a.data();case 10:return s=e.sent,e.next=13,i.data();case 13:u=e.sent,l=s.length/o,c=o,p=og("bool",l),f=0;case 17:if(!(f<l)){e.next=35;break}for(h=f*c,d=s.subarray(h,h+c),m=[],v=0;v<d.length;v++)m.push({value:d[v],index:v});m.sort((function(e,t){return t.value-e.value})),p[f]=0,g=0;case 25:if(!(g<r)){e.next=32;break}if(m[g].index!==u[f]){e.next=29;break}return p[f]=1,e.abrupt("break",32);case 29:g++,e.next=25;break;case 32:f++,e.next=17;break;case 35:return t!==a&&a.dispose(),n!==i&&i.dispose(),e.abrupt("return",Pw(p,i.shape,"bool"));case 38:case"end":return e.stop()}}),e)}))),SE.apply(this,arguments)}var TE=function(e,t,n){return SE.apply(this,arguments)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var CE=Mw({conv2DBackpropFilter_:function(e,t,n,r,a,i,o){void 0===i&&(i="NHWC");var s=e;3===e.rank&&(s=OI(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=OI(t,[1,t.shape[0],t.shape[1],t.shape[2]])),Kv(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),Kv(4===u.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."})),Kv(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var l="NHWC"===i?s.shape[3]:s.shape[1],c="NHWC"===i?u.shape[3]:u.shape[1];Kv(l===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."})),Kv(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."})),null!=o&&Kv($v(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var p={x:s,dy:u},f={strides:r,pad:a,dataFormat:i,dimRoundingMode:o,filterShape:n};return Nw.runKernel(py,p,f)}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function EE(e,t,n){if(null==n||"linear"===n)return e;if("relu"===n)return sI(e,BC(t));throw new Error("Cannot compute gradient for fused activation "+n+".")}function RE(e,t){var n=t,r=gS(e.shape,t.shape);return r.length>0&&(n=tT(n,r)),OI(n,e.shape)}function AE(e,t,n,r){if("linear"===t)return e;if("relu"===t)return uC(e);if("elu"===t)return IS(e);if("relu6"===t)return lC(e);if("prelu"===t)return UT(e,n);if("leakyrelu"===t)return WS(e,r);throw new Error("Unknown fused activation "+t+".")}var FE=function(e,t){return!(e>0)||"linear"===t};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var _E=Mw({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,p=e.activation,f=void 0===p?"linear":p,h=e.preluActivationWeights,d=e.leakyreluAlpha;if(f=f||"linear",!1===FE(Nw.state.gradientDepth,f)){var m=tS(t,n,r,a,o,u,l);return null!=c&&(m=aI(m,c)),AE(m,f,h,d)}var v=_w(t,"x","conv2d"),g=_w(n,"filter","conv2d"),y=v,b=!1;3===v.rank&&(b=!0,y=OI(v,[1,v.shape[0],v.shape[1],v.shape[2]])),Kv(4===y.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."})),Kv(4===g.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."})),null!=l&&Kv($v(a),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+a+"."})),Kv(y.shape[3]===g.shape[2],(function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+g.shape[2]+"."})),Kv(_I(r,u),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),Kv("NHWC"===o,(function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."}));var x,w,k=II(y.shape,g.shape,r,u,a,l);null!=c&&(x=dw(x=_w(c,"bias","fused conv2d"),v)[0],yS(k.outShape,x.shape)),null!=h&&(w=_w(h,"prelu weights","fused conv2d"));var N=function(e,t){var n=t[0],i=t[1],o=t[2],s=t[3],l=EE(e,o,f);Kv(FI(u),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"}));var c=[rS(i.shape,l,n,r,a),CE(i,l,n.shape,r,a)];if(null!=s){var p=RE(s,l);c.push(p)}return c},I={x:y,filter:g,bias:x,preluActivationWeights:w},S={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:l,activation:f,leakyreluAlpha:d};if(null==c){var T=XS((function(e,t,n){var r=Nw.runKernel(Ex,I,S);return n([t,e,r]),b&&(r=OI(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:N}}));return T(y,g)}var C=XS((function(e,t,n,r){var a=Nw.runKernel(Ex,I,S);return r([t,e,a,n]),b&&(a=OI(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:N}}));return C(y,g,x)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var DE=Mw({depthwiseConv2dNativeBackpropFilter_:function(e,t,n,r,a,i,o){void 0===i&&(i=[1,1]);var s=e;3===e.rank&&(s=OI(e,[1,e.shape[0],e.shape[1],e.shape[2]]));var u=t;3===u.rank&&(u=OI(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={x:s,dy:u},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,filterShape:n};return Nw.runKernel(Ny,l,c)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var OE=Mw({depthwiseConv2dNativeBackpropInput_:function(e,t,n,r,a,i,o){void 0===i&&(i=[1,1]);var s=t,u=!1;3===t.rank&&(u=!0,s=OI(t,[1,t.shape[0],t.shape[1],t.shape[2]]));var l={dy:s,filter:n},c={strides:r,pad:a,dimRoundingMode:o,dilations:i,inputShape:e},p=Nw.runKernel(Iy,l,c);return u?OI(p,[p.shape[1],p.shape[2],p.shape[3]]):p}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ME=Mw({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,a=e.pad,i=e.dataFormat,o=void 0===i?"NHWC":i,s=e.dilations,u=void 0===s?[1,1]:s,l=e.dimRoundingMode,c=e.bias,p=e.activation,f=void 0===p?"linear":p,h=e.preluActivationWeights,d=e.leakyreluAlpha;if(!1===FE(Nw.state.gradientDepth,f)){var m=hS(t,n,r,a,o,u,l);return null!=c&&(m=aI(m,c)),AE(m,f,h,d)}var v=_w(t,"x","depthwiseConv2d"),g=_w(n,"filter","depthwiseConv2d"),y=v,b=!1;3===v.rank&&(b=!0,y=OI(v,[1,v.shape[0],v.shape[1],v.shape[2]])),Kv(4===y.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+y.rank+"."})),Kv(4===g.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."})),Kv(y.shape[3]===g.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+y.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."})),null==u&&(u=[1,1]),Kv(_I(r,u),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"})),null!=l&&Kv($v(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+l+" but got pad "+a+"."}));var x,w,k=II(y.shape,g.shape,r,u,a,l,!0);if(null!=c){var N=dw(x=_w(c,"bias","fused conv2d"),v);x=N[0],yS(k.outShape,x.shape)}null!=h&&(w=_w(h,"prelu weights","fused depthwiseConv2d"));var I=function(e,t){Kv(FI(u),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"}));var n=t[0],i=t[1],o=t[2],s=t[3],c=EE(e,o,f),p=OE(i.shape,c,n,r,a,u,l),h=DE(i,c,n.shape,r,a,u,l);return null!=s?[p,h,RE(x,c)]:[p,h]},S={x:y,filter:g,bias:x,preluActivationWeights:w},T={strides:r,pad:a,dataFormat:o,dilations:u,dimRoundingMode:l,activation:f,leakyreluAlpha:d};if(null==c){var C=XS((function(e,t,n){var r=Nw.runKernel(Rx,S,T);return n([t,e,r]),b&&(r=OI(r,[r.shape[1],r.shape[2],r.shape[3]])),{value:r,gradFunc:I}}));return C(y,g)}var E=XS((function(e,t,n,r){var a=Nw.runKernel(Rx,S,T);return r([t,e,a,n]),b&&(a=OI(a,[a.shape[1],a.shape[2],a.shape[3]])),{value:a,gradFunc:I}}));return E(y,g,x)}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var LE=Mw({fusedMatMul_:function(e){var t=e.a,n=e.b,r=e.transposeA,a=void 0!==r&&r,i=e.transposeB,o=void 0!==i&&i,s=e.bias,u=e.activation,l=void 0===u?"linear":u,c=e.preluActivationWeights,p=e.leakyreluAlpha;if(!1===FE(Nw.state.gradientDepth,l)){var f=iN(t,n,a,o);return null!=s&&(f=aI(f,s)),AE(f,l,c,p)}var h=_w(t,"a","fused matMul"),d=_w(n,"b","fused matMul"),m=dw(h,d);h=m[0],d=m[1];var v=a?h.shape[h.rank-2]:h.shape[h.rank-1],g=o?d.shape[d.rank-1]:d.shape[d.rank-2],y=a?h.shape[h.rank-1]:h.shape[h.rank-2],b=o?d.shape[d.rank-2]:d.shape[d.rank-1],x=h.shape.slice(0,-2),w=d.shape.slice(0,-2),k=Zv(x),N=Zv(w);Kv(h.rank>=2&&d.rank>=2&&h.rank===d.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+d.rank+"."})),Kv(Qv(x,w),(function(){return"Error in fused matMul: outer dimensions ("+x+") and ("+w+") of Tensors with shapes "+h.shape+" and "+d.shape+" must match."})),Kv(v===g,(function(){return"Error in fused matMul: inner shapes ("+v+") and ("+g+") of Tensors with shapes "+h.shape+" and "+d.shape+" and transposeA="+a+" and transposeB="+o+" must match."}));var I,S,T=h.shape.slice(0,-2).concat([y,b]),C=OI(h,a?[k,v,y]:[k,y,v]),E=OI(d,o?[N,b,g]:[N,g,b]);null!=s&&(I=dw(I=_w(s,"bias","fused matMul"),h)[0],yS(T,I.shape)),null!=c&&(S=_w(c,"prelu weights","fused matMul"));var R=function(e,t){var n,r,i=t[0],u=t[1],c=t[2],p=t[3],f=EE(OI(e,c.shape),c,l);return a||o?!a&&o?(n=iN(f,u,!1,!1),r=iN(f,i,!0,!1)):a&&!o?(n=iN(u,f,!1,!0),r=iN(i,f,!1,!1)):(n=iN(u,f,!0,!0),r=iN(f,i,!0,!0)):(n=iN(f,u,!1,!0),r=iN(i,f,!0,!1)),null!=s?[n,r,RE(p,f)]:[n,r]},A={a:C,b:E,bias:I,preluActivationWeights:S},F={transposeA:a,transposeB:o,activation:l,leakyreluAlpha:p};if(null==s){var _=XS((function(e,t,n){var r=Nw.runKernel(Cx,A,F);return n([e,t,r]),{value:OI(r,T),gradFunc:R}}));return _(C,E)}var D=XS((function(e,t,n,r){var a=Nw.runKernel(Cx,A,F);return r([e,t,a,n]),{value:OI(a,T),gradFunc:R}}));return D(C,E,I)}}),zE={__proto__:null,conv2d:_E,depthwiseConv2d:ME,matMul:LE};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var PE=Mw({hammingWindow_:
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){return IE(e,.54,.46)}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var BE=Mw({hannWindow_:function(e){return IE(e,.5,.5)}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var WE=Mw({frame_:function(e,t,n,r,a){void 0===r&&(r=!1),void 0===a&&(a=0);for(var i=0,o=[];i+t<=e.size;)o.push(BI(e,i,t)),i+=n;if(r)for(;i<e.size;){var s=i+t-e.size,u=zI([BI(e,i,t-s),FS([s],a)]);o.push(u),i+=n}return 0===o.length?GC([],[0,t]):OI(zI(o),[o.length,t])}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var VE=Mw({stft_:function(e,t,n,r,a){void 0===a&&(a=BE),null==r&&(r=NE(t));for(var i=WE(e,t,n),o=sI(i,a(t)),s=[],u=0;u<i.shape[0];u++)s.push(OC(BI(o,[u,0],[1,t]),r));return zI(s)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var UE=Mw({cropAndResize_:function(e,t,n,r,a,i){void 0===a&&(a="bilinear"),void 0===i&&(i=0);var o=_w(e,"image","cropAndResize"),s=_w(t,"boxes","cropAndResize","float32"),u=_w(n,"boxInd","cropAndResize","int32"),l=s.shape[0];Kv(4===o.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."})),Kv(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+s.shape+"."})),Kv(1===u.rank&&u.shape[0]===l,(function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+s.shape+"."})),Kv(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),Kv(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),Kv("bilinear"===a||"nearest"===a,(function(){return"method must be bilinear or nearest, but was "+a}));var c={image:o,boxes:s,boxInd:u},p={method:a,extrapolationValue:i,cropSize:r};return Nw.runKernel(by,c,p)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var GE=Mw({flipLeftRight_:function(e){var t=_w(e,"image","flipLeftRight","float32");Kv(4===t.rank,(function(){return"Error in flipLeftRight: image must be rank 4,but got rank "+t.rank+"."}));var n={image:t};return Nw.runKernel(By,n,{})}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var jE=Mw({rotateWithOffset_:function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=.5);var a=_w(e,"image","rotateWithOffset","float32");Kv(4===a.rank,(function(){return"Error in rotateWithOffset: image must be rank 4,but got rank "+a.rank+"."}));var i={image:a},o={radians:t,fillValue:n,center:r};return Nw.runKernel(Tx,i,o)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function HE(e,t,n,r,a,i){null==r&&(r=.5),null==a&&(a=Number.NEGATIVE_INFINITY),null==i&&(i=0);var o=e.shape[0];return n=Math.min(n,o),Kv(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),Kv(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),Kv(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),Kv(1===t.rank,(function(){return"scores must be a 1D tensor"})),Kv(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]})),Kv(0<=i&&i<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:a,softNmsSigma:i}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var qE=Mw({nonMaxSuppression_:function(e,t,n,r,a){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY);var i=_w(e,"boxes","nonMaxSuppression"),o=_w(t,"scores","nonMaxSuppression"),s=HE(i,o,n,r,a),u={maxOutputSize:n=s.maxOutputSize,iouThreshold:r=s.iouThreshold,scoreThreshold:a=s.scoreThreshold};return Nw.runKernel(Cb,{boxes:i,scores:o},u)}});
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function KE(e,t,n){var r=function(e,t,n){return function(e,t,n){var r=0,a=e.length,i=0,o=!1;for(;r<a;){var s=n(t,e[i=r+(a-r>>>1)]);s>0?r=i+1:(a=i,o=!s)}return o?r:-r-1}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */(e,t,n||XE)}(e,t,n),a=r<0?-(r+1):r;e.splice(a,0,t)}function XE(e,t){return e>t?1:e<t?-1:0}function YE(e,t,n,r,a){return QE(e,t,n,r,a,0)}function JE(e,t,n,r,a,i){return QE(e,t,n,r,a,0,!1,i,!0)}function ZE(e,t,n,r,a,i){return QE(e,t,n,r,a,i,!0)}function QE(e,t,n,r,a,i,o,s,u){void 0===o&&(o=!1),void 0===s&&(s=!1),void 0===u&&(u=!1);for(var l=[],c=0;c<t.length;c++)t[c]>a&&l.push({score:t[c],boxIndex:c,suppressBeginIndex:0});l.sort(tR);for(var p=i>0?-.5/i:0,f=[],h=[];f.length<n&&l.length>0;){var d=l.pop(),m=d.score,v=d.boxIndex,g=d.suppressBeginIndex;if(m<a)break;for(var y=!1,b=f.length-1;b>=g;--b){var x=$E(e,v,f[b]);if(x>=r){y=!0;break}if(d.score=d.score*eR(r,p,x),d.score<=a)break}d.suppressBeginIndex=f.length,y||(d.score===m?(f.push(v),h.push(d.score)):d.score>a&&KE(l,d,tR))}var w=f.length,k=n-w;s&&k>0&&(f.push.apply(f,new Array(k).fill(0)),h.push.apply(h,new Array(k).fill(0)));var N={selectedIndices:f};return o&&(N.selectedScores=h),u&&(N.validOutputs=w),N}function $E(e,t,n){var r=e.subarray(4*t,4*t+4),a=e.subarray(4*n,4*n+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(a[0],a[2]),c=Math.min(a[1],a[3]),p=Math.max(a[0],a[2]),f=Math.max(a[1],a[3]),h=(s-i)*(u-o),d=(p-l)*(f-c);if(h<=0||d<=0)return 0;var m=Math.max(i,l),v=Math.max(o,c),g=Math.min(s,p),y=Math.min(u,f),b=Math.max(g-m,0)*Math.max(y-v,0);return b/(h+d-b)}function eR(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function tR(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function nR(){return(nR=Cv(regeneratorRuntime.mark((function e(t,n,r,a,i){var o,s,u,l,c,p,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),o=_w(t,"boxes","nonMaxSuppressionAsync"),s=_w(n,"scores","nonMaxSuppressionAsync"),u=HE(o,s,r,a,i),r=u.maxOutputSize,a=u.iouThreshold,i=u.scoreThreshold,e.next=10,Promise.all([o.data(),s.data()]);case 10:return l=e.sent,c=l[0],p=l[1],f=YE(c,p,r,a,i),h=f.selectedIndices,o!==t&&o.dispose(),s!==n&&s.dispose(),e.abrupt("return",UC(h,"int32"));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rR=function(e,t,n,r,a){return nR.apply(this,arguments)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var aR=Mw({nonMaxSuppressionWithScore_:function(e,t,n,r,a,i){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===i&&(i=0);var o=_w(e,"boxes","nonMaxSuppression"),s=_w(t,"scores","nonMaxSuppression"),u=HE(o,s,n,r,a,i),l={boxes:o,scores:s},c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:a=u.scoreThreshold,softNmsSigma:i=u.softNmsSigma},p=Nw.runKernel(Rb,l,c);return{selectedIndices:p[0],selectedScores:p[1]}}});function iR(){return(iR=Cv(regeneratorRuntime.mark((function e(t,n,r,a,i,o){var s,u,l,c,p,f,h,d,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===o&&(o=0),s=_w(t,"boxes","nonMaxSuppressionAsync"),u=_w(n,"scores","nonMaxSuppressionAsync"),l=HE(s,u,r,a,i,o),r=l.maxOutputSize,a=l.iouThreshold,i=l.scoreThreshold,o=l.softNmsSigma,e.next=12,Promise.all([s.data(),u.data()]);case 12:return c=e.sent,p=c[0],f=c[1],h=ZE(p,f,r,a,i,o),d=h.selectedIndices,m=h.selectedScores,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:UC(d,"int32"),selectedScores:UC(m)});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oR=function(e,t,n,r,a,i){return iR.apply(this,arguments)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var sR=Mw({nonMaxSuppressionPadded_:function(e,t,n,r,a,i){void 0===r&&(r=.5),void 0===a&&(a=Number.NEGATIVE_INFINITY),void 0===i&&(i=!1);var o=_w(e,"boxes","nonMaxSuppression"),s=_w(t,"scores","nonMaxSuppression"),u=HE(o,s,n,r,a,null),l={boxes:o,scores:s},c={maxOutputSize:u.maxOutputSize,iouThreshold:u.iouThreshold,scoreThreshold:u.scoreThreshold,padToMaxOutputSize:i},p=Nw.runKernel(Eb,l,c);return{selectedIndices:p[0],validOutputs:p[1]}}});function uR(){return(uR=Cv(regeneratorRuntime.mark((function e(t,n,r,a,i,o){var s,u,l,c,p,f,h,d,m,v,g,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===a&&(a=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),void 0===o&&(o=!1),s=_w(t,"boxes","nonMaxSuppressionAsync"),u=_w(n,"scores","nonMaxSuppressionAsync"),l=HE(s,u,r,a,i,null),c=l.maxOutputSize,p=l.iouThreshold,f=l.scoreThreshold,e.next=11,Promise.all([s.data(),u.data()]);case 11:return h=e.sent,d=h[0],m=h[1],v=JE(d,m,c,p,f,o),g=v.selectedIndices,y=v.validOutputs,s!==t&&s.dispose(),u!==n&&u.dispose(),e.abrupt("return",{selectedIndices:UC(g,"int32"),validOutputs:gC(y,"int32")});case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lR=function(e,t,n,r,a,i){return uR.apply(this,arguments)};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var cR=Mw({resizeBilinear_:function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var a=_w(e,"images","resizeBilinear");Kv(3===a.rank||4===a.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+a.rank+"."})),Kv(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."})),Kv(!1===r||!1===n,(function(){return"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=OI(a,[1,a.shape[0],a.shape[1],a.shape[2]]));var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=Nw.runKernel(jb,s,u);return o?OI(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var pR=Mw({resizeNearestNeighbor_:function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var a=_w(e,"images","resizeNearestNeighbor");Kv(3===a.rank||4===a.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+a.rank+"."})),Kv(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),Kv("float32"===a.dtype||"int32"===a.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"})),Kv(!1===r||!1===n,(function(){return"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false."}));var i=a,o=!1;3===a.rank&&(o=!0,i=OI(a,[1,a.shape[0],a.shape[1],a.shape[2]]));var s={images:i},u={alignCorners:n,halfPixelCenters:r,size:t},l=Nw.runKernel(Ub,s,u);return o?OI(l,[l.shape[1],l.shape[2],l.shape[3]]):l}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var fR=Mw({bandPart_:function(e,t,n){Kv(t%1==0,(function(){return"bandPart(): numLower must be an integer, got "+t+"."})),Kv(n%1==0,(function(){return"bandPart(): numUpper must be an integer, got "+n+"."}));var r=_w(e,"a","bandPart");Kv(r.rank>=2,(function(){return"bandPart(): Rank must be at least 2, got "+r.rank+"."}));var a=r.shape,i=r.shape.slice(-2),o=i[0],s=i[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=o),n<0&&(n=s);var u=OI(iC(0,o,1,"int32"),[-1,1]),l=iC(0,s,1,"int32"),c=eT(u,l),p=fT(US(c,gC(+t,"int32")),MS(c,gC(-n,"int32"))),f=AT([o,s],r.dtype);return OI(PC(XC(OI(r,[-1,o,s])).map((function(e){return xS(p,e,f)}))),a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var hR=Mw({gramSchmidt_:function(e){var t;Array.isArray(e)?function(){t=!1,Kv(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){Kv(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},a=1;a<e.length;++a)r(a)}():(t=!0,e=DC(e,e.shape[0],0).map((function(e){return zC(e,[0])}))),Kv(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));for(var n=[],r=e,a=function(e){n.push(Nw.tidy((function(){var t=r[e];if(e>0)for(var a=0;a<e;++a){var i=sI(tT(sI(n[a],t)),n[a]);t=eT(t,i)}return oI(t,gE(t,"euclidean"))})))},i=0;i<e.length;++i)a(i);return t?PC(n,0):n}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function dR(e,t){return void 0===t&&(t=!1),Nw.tidy((function(){Kv(2===e.shape.length,(function(){return"qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor."}));for(var n=e.shape[0],r=e.shape[1],a=AS(n),i=Bk(e),o=GC([[1]],[1,1]),s=Bk(o),u=n>=r?r:n,l=function(e){var t=i,u=s,l=a,c=Nw.tidy((function(){var t=BI(i,[e,e],[n-e,1]),u=gE(t),l=BI(i,[e,e],[1,1]),c=xS(OS(l,0),GC([[-1]]),GC([[1]])),p=eT(l,sI(c,u)),f=oI(t,p);s=1===f.shape[0]?Bk(o):zI([o,BI(f,[1,0],[f.shape[0]-1,f.shape[1]])],0);var h=JS(oI(iN(c,p),u)),d=BI(i,[e,0],[n-e,r]),m=sI(h,s),v=sN(s);if(0===e)i=eT(d,iN(m,iN(v,d)));else{var g=eT(d,iN(m,iN(v,d)));i=zI([BI(i,[0,0],[e,r]),g],0)}var y=sN(m),b=BI(a,[0,e],[n,a.shape[1]-e]);if(0===e)a=eT(b,iN(iN(b,s),y));else{var x=eT(b,iN(iN(b,s),y));a=zI([BI(a,[0,0],[n,e]),x],1)}return[s,i,a]}));s=c[0],i=c[1],a=c[2],$N([t,u,l])},c=0;c<u;++c)l(c);return!t&&n>r&&(a=BI(a,[0,0],[n,r]),i=BI(i,[0,0],[r,r])),[a,i]}))}var mR,vR=Mw({qr_:function(e,t){if(void 0===t&&(t=!1),Kv(e.rank>=2,(function(){return"qr() requires input tensor to have a rank >= 2, but got rank "+e.rank})),2===e.rank)return dR(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=XC(OI(e,[n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),a=[],i=[];return r.forEach((function(e){var n=dR(e,t),r=n[0],o=n[1];a.push(r),i.push(o)})),[OI(PC(a,0),e.shape),OI(PC(i,0),e.shape)]}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */(mR=e.Reduction||(e.Reduction={}))[mR.NONE=0]="NONE",mR[mR.MEAN=1]="MEAN",mR[mR.SUM=2]="SUM",mR[mR.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS";var gR=Mw({computeWeightedLoss_:function(t,n,r){void 0===r&&(r=e.Reduction.SUM_BY_NONZERO_WEIGHTS);var a=_w(t,"losses","computeWeightedLoss"),i=null;null!=n&&(i=_w(n,"weights","computeWeightedLoss"));var o=null==i?a:sI(a,i);if(r===e.Reduction.NONE)return o;if(r===e.Reduction.SUM)return tT(o);if(r===e.Reduction.MEAN){if(null==i)return xT(o);var s=a.size/i.size,u=oI(tT(o),tT(i));return s>1?oI(u,gC(s)):u}if(r===e.Reduction.SUM_BY_NONZERO_WEIGHTS){if(null==i)return oI(tT(o),gC(a.size));var l=sI(i,FT(a.shape)),c=Pk(tT(RT(l,gC(0))),"float32");return oI(tT(o),c)}throw Error("Unknown reduction: "+r)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var yR=Mw({absoluteDifference_:function(t,n,r,a){void 0===a&&(a=e.Reduction.SUM_BY_NONZERO_WEIGHTS);var i=_w(t,"labels","absoluteDifference"),o=_w(n,"predictions","absoluteDifference"),s=null;null!=r&&(s=_w(r,"weights","absoluteDifference")),Xv(i.shape,o.shape,"Error in absoluteDifference: ");var u=uI(eT(i,o));return gR(u,s,a)}});var bR=Mw({cosineDistance_:function(t,n,r,a,i){void 0===i&&(i=e.Reduction.SUM_BY_NONZERO_WEIGHTS);var o=_w(t,"labels","cosineDistance"),s=_w(n,"predictions","cosineDistance"),u=null;null!=a&&(u=_w(a,"weights","cosineDistance")),Xv(o.shape,s.shape,"Error in cosineDistance: ");var l=gC(1),c=eT(l,tT(sI(o,s),r,!0));return gR(c,u,i)}});var xR=Mw({hingeLoss_:function(t,n,r,a){void 0===a&&(a=e.Reduction.SUM_BY_NONZERO_WEIGHTS);var i=_w(t,"labels","hingeLoss"),o=_w(n,"predictions","hingeLoss"),s=null;null!=r&&(s=_w(r,"weights","hingeLoss")),Xv(i.shape,o.shape,"Error in hingeLoss: ");var u=gC(1);i=eT(sI(gC(2),i),u);var l=uC(eT(u,sI(i,o)));return gR(l,s,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var wR=Mw({huberLoss_:function(t,n,r,a,i){void 0===a&&(a=1),void 0===i&&(i=e.Reduction.SUM_BY_NONZERO_WEIGHTS);var o=_w(t,"labels","huberLoss"),s=_w(n,"predictions","huberLoss"),u=null;null!=r&&(u=_w(r,"weights","huberLoss")),Xv(o.shape,s.shape,"Error in huberLoss: ");var l=gC(a),c=uI(eT(s,o)),p=kT(c,l),f=eT(c,p),h=aI(sI(gC(.5),ST(p)),sI(l,f));return gR(h,u,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var kR=Mw({logLoss_:function(t,n,r,a,i){void 0===a&&(a=1e-7),void 0===i&&(i=e.Reduction.SUM_BY_NONZERO_WEIGHTS);var o=_w(t,"labels","logLoss"),s=_w(n,"predictions","logLoss"),u=null;null!=r&&(u=_w(r,"weights","logLoss")),Xv(o.shape,s.shape,"Error in logLoss: ");var l=gC(1),c=gC(a),p=JS(sI(o,HS(aI(s,c)))),f=sI(eT(l,o),HS(aI(eT(l,s),c))),h=eT(p,f);return gR(h,u,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var NR=Mw({meanSquaredError_:function(t,n,r,a){void 0===a&&(a=e.Reduction.SUM_BY_NONZERO_WEIGHTS);var i=_w(t,"labels","meanSquaredError"),o=_w(n,"predictions","meanSquaredError"),s=null;null!=r&&(s=_w(r,"weights","meanSquaredError")),Xv(i.shape,o.shape,"Error in meanSquaredError: ");var u=LC(i,o);return gR(u,s,a)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var IR=Mw({sigmoidCrossEntropy_:function(t,n,r,a,i){void 0===a&&(a=0),void 0===i&&(i=e.Reduction.SUM_BY_NONZERO_WEIGHTS);var o=_w(t,"multiClassLabels","sigmoidCrossEntropy"),s=_w(n,"logits","sigmoidCrossEntropy"),u=null;if(null!=r&&(u=_w(r,"weights","sigmoidCrossEntropy")),Xv(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),a>0){var l=gC(a),c=gC(1),p=gC(.5);o=aI(sI(o,eT(c,l)),sI(p,l))}var f=function(e,t){var n=_w(e,"labels","sigmoidCrossEntropyWithLogits"),r=_w(t,"logits","sigmoidCrossEntropyWithLogits");Xv(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var a=uC(r),i=sI(r,n),o=qS(TS(JS(uI(r))));return aI(eT(a,i),o)}(o,s);return gR(f,u,i)}});
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var SR=Mw({softmaxCrossEntropy_:function(t,n,r,a,i){void 0===a&&(a=0),void 0===i&&(i=e.Reduction.SUM_BY_NONZERO_WEIGHTS);var o=_w(t,"onehotLabels","softmaxCrossEntropy"),s=_w(n,"logits","softmaxCrossEntropy"),u=null;if(null!=r&&(u=_w(r,"weights","softmaxCrossEntropy")),Xv(o.shape,s.shape,"Error in softmaxCrossEntropy: "),a>0){var l=gC(a),c=gC(1),p=gC(o.shape[1]);o=aI(sI(o,eT(c,l)),oI(l,p))}var f=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);var r=XS((function(e,t,r){var a=pT(t,[n],!0),i=eT(Pk(t,"float32"),a);r([e,i]);var o=JS(sI(i,e));return{value:tT(o,[n]),gradFunc:function(e,t){var r=t[0],a=t[1],i=oT(e.shape,[n]);return[sI(OI(e,i),eT(Pk(r,"float32"),TS(a))),sI(OI(e,i),eT(TS(a),Pk(r,"float32")))]}}}));return r(e,t)}(o,s);return gR(f,u,i)}}),TR={fft:AC,ifft:FC,rfft:OC,irfft:_C},CR={hammingWindow:PE,hannWindow:BE,frame:WE,stft:VE},ER={flipLeftRight:GE,resizeNearestNeighbor:pR,resizeBilinear:cR,rotateWithOffset:jE,cropAndResize:UE,nonMaxSuppression:qE,nonMaxSuppressionAsync:rR,nonMaxSuppressionWithScore:aR,nonMaxSuppressionWithScoreAsync:oR,nonMaxSuppressionPadded:sR,nonMaxSuppressionPaddedAsync:lR},RR={bandPart:fR,gramSchmidt:hR,qr:vR},AR={absoluteDifference:yR,computeWeightedLoss:gR,cosineDistance:bR,hingeLoss:xR,huberLoss:wR,logLoss:kR,meanSquaredError:NR,sigmoidCrossEntropy:IR,softmaxCrossEntropy:SR},FR=function(e){function t(){return e.apply(this,arguments)||this}Av(t,e);var n=t.prototype;return n.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),a=r.value,i=r.grads;if(null!=n){var o=n.map((function(e){return{name:e.name,tensor:i[e.name]}}));this.applyGradients(o)}else this.applyGradients(i);return $N(i),t?a:(a.dispose(),null)},n.incrementIterations=function(){this.iterations_=this.iterations+1},n.computeGradients=function(e,t){return KS(e,t)},n.dispose=function(){null!=this.iterations_&&$N(this.iterations_)},n.saveIterations=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==this.iterations_&&(this.iterations_=0),e.abrupt("return",{name:"iter",tensor:gC(this.iterations_,"int32")});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for this optimizer yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.setWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.extractIterations=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t[0].tensor.data();case 2:return this.iterations_=e.sent[0],e.abrupt("return",t.slice(1));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),Rv(t,[{key:"iterations",get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_}}]),t}(zN);
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */Object.defineProperty(FR,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var _R=function(e){function t(t,n,r){var a;return void 0===r&&(r=null),(a=e.call(this)||this).learningRate=t,a.rho=n,a.epsilon=r,a.accumulatedGrads=[],a.accumulatedUpdates=[],null==r&&(a.epsilon=Nw.backend.epsilon()),a}Av(t,e);var n=t.prototype;return n.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Nw.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:QN((function(){return wS(a).variable(false)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:QN((function(){return wS(a).variable(false)}))});var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;QN((function(){var e=aI(sI(o,t.rho),sI(ST(i),1-t.rho)),n=sI(oI(MC(aI(s,t.epsilon)),MC(aI(o,t.epsilon))),i),r=aI(sI(s,t.rho),sI(ST(n),1-t.rho));o.assign(e),s.assign(r);var u=aI(sI(n,-t.learningRate),a);a.assign(u)}))}})),this.incrementIterations()},n.dispose=function(){null!=this.accumulatedUpdates&&($N(this.accumulatedGrads.map((function(e){return e.variable}))),$N(this.accumulatedUpdates.map((function(e){return e.variable}))))},n.getWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(this.accumulatedGrads,this.accumulatedUpdates),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=t.length/2,!1,this.accumulatedGrads=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedUpdates=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t}(FR);_R.className="Adadelta",BN(_R);var DR=function(e){function t(t,n){var r;return void 0===n&&(n=.1),(r=e.call(this)||this).learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}Av(t,e);var n=t.prototype;return n.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Nw.registeredVariables[n];if(null==t.accumulatedGrads[r]){t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:QN((function(){return FS(a.shape,t.initialAccumulatorValue).variable(false)}))}}var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=t.accumulatedGrads[r].variable;QN((function(){var e=aI(o,ST(i));o.assign(e);var n=aI(sI(oI(i,MC(aI(e,Nw.backend.epsilon()))),-t.learningRate),a);a.assign(n)}))}})),this.incrementIterations()},n.dispose=function(){null!=this.accumulatedGrads&&$N(this.accumulatedGrads.map((function(e){return e.variable})))},n.getWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulatedGrads=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t}(FR);DR.className="Adagrad",BN(DR);var OR=function(e){function t(t,n,r,a){var i;return void 0===a&&(a=null),(i=e.call(this)||this).learningRate=t,i.beta1=n,i.beta2=r,i.epsilon=a,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],QN((function(){i.accBeta1=gC(n).variable(),i.accBeta2=gC(r).variable()})),null==a&&(i.epsilon=Nw.backend.epsilon()),i}Av(t,e);var n=t.prototype;return n.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);QN((function(){var r=eT(1,t.accBeta1),a=eT(1,t.accBeta2);n.forEach((function(n,i){var o=Nw.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:QN((function(){return wS(o).variable(false)}))}),null==t.accumulatedSecondMoment[i]&&(t.accumulatedSecondMoment[i]={originalName:n+"/v",variable:QN((function(){return wS(o).variable(false)}))});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedSecondMoment[i].variable,c=aI(sI(u,t.beta1),sI(s,1-t.beta1)),p=aI(sI(l,t.beta2),sI(ST(s),1-t.beta2)),f=oI(c,r),h=oI(p,a);u.assign(c),l.assign(p);var d=aI(sI(oI(f,aI(MC(h),t.epsilon)),-t.learningRate),o);o.assign(d)}})),t.accBeta1.assign(sI(t.accBeta1,t.beta1)),t.accBeta2.assign(sI(t.accBeta2,t.beta2))})),this.incrementIterations()},n.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&$N(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&$N(this.accumulatedSecondMoment.map((function(e){return e.variable})))},n.getWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(this.accumulatedFirstMoment,this.accumulatedSecondMoment),e.next=3,this.saveIterations();case 3:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,QN((function(){r.accBeta1.assign(VT(r.beta1,r.iterations_+1)),r.accBeta2.assign(VT(r.beta2,r.iterations_+1))})),n=t.length/2,!1,this.accumulatedFirstMoment=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}})),this.accumulatedSecondMoment=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t}(FR);OR.className="Adam",BN(OR);var MR=function(e){function t(t,n,r,a,i){var o;return void 0===a&&(a=null),void 0===i&&(i=0),(o=e.call(this)||this).learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=a,o.decay=i,o.accumulatedFirstMoment=[],o.accumulatedWeightedInfNorm=[],QN((function(){o.iteration=gC(0).variable(),o.accBeta1=gC(n).variable()})),null==a&&(o.epsilon=Nw.backend.epsilon()),o}Av(t,e);var n=t.prototype;return n.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);QN((function(){var r=eT(1,t.accBeta1),a=oI(-t.learningRate,aI(sI(t.iteration,t.decay),1));n.forEach((function(n,i){var o=Nw.registeredVariables[n];null==t.accumulatedFirstMoment[i]&&(t.accumulatedFirstMoment[i]={originalName:n+"/m",variable:wS(o).variable(false)}),null==t.accumulatedWeightedInfNorm[i]&&(t.accumulatedWeightedInfNorm[i]={originalName:n+"/v",variable:wS(o).variable(false)});var s=Array.isArray(e)?e[i].tensor:e[n];if(null!=s){var u=t.accumulatedFirstMoment[i].variable,l=t.accumulatedWeightedInfNorm[i].variable,c=aI(sI(u,t.beta1),sI(s,1-t.beta1)),p=sI(l,t.beta2),f=uI(s),h=bT(p,f);u.assign(c),l.assign(h);var d=aI(sI(oI(a,r),oI(c,aI(h,t.epsilon))),o);o.assign(d)}})),t.iteration.assign(aI(t.iteration,1)),t.accBeta1.assign(sI(t.accBeta1,t.beta1))})),this.incrementIterations()},n.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&$N(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&$N(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},n.getWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("getWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.setWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("setWeights() is not implemented for Adamax yet.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t}(FR);MR.className="Adamax",BN(MR);var LR=function(e){function t(t){var n;return(n=e.call(this)||this).learningRate=t,n.setLearningRate(t),n}Av(t,e);var n=t.prototype;return n.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Array.isArray(e)?e[r].tensor:e[n];if(null!=a){var i=Nw.registeredVariables[n];QN((function(){var e=aI(sI(t.c,a),i);i.assign(e)}))}})),this.incrementIterations()},n.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=eI(gC(-e))},n.dispose=function(){this.c.dispose()},n.getWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:if(0===(t=e.sent).length){e.next=5;break}throw new Error("SGD optimizer does not have settable weights.");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t}(FR);LR.className="SGD",BN(LR);var zR=function(e){function t(t,n,r){var a;return void 0===r&&(r=!1),(a=e.call(this,t)||this).learningRate=t,a.momentum=n,a.useNesterov=r,a.accumulations=[],a.m=gC(a.momentum),a}Av(t,e);var n=t.prototype;return n.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Nw.registeredVariables[n];if(null==t.accumulations[r]){t.accumulations[r]={originalName:n+"/momentum",variable:QN((function(){return wS(a).variable(false)}))}}var i=t.accumulations[r].variable,o=Array.isArray(e)?e[r].tensor:e[n];null!=o&&QN((function(){var e,n=aI(sI(t.m,i),o);e=t.useNesterov?aI(sI(t.c,aI(o,sI(n,t.m))),a):aI(sI(t.c,n),a),i.assign(n),a.assign(e)}))})),this.incrementIterations()},n.dispose=function(){this.m.dispose(),null!=this.accumulations&&$N(this.accumulations.map((function(e){return e.variable})))},n.setMomentum=function(e){this.momentum=e},n.getWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.saveIterations();case 2:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,!1,this.accumulations=t.map((function(e){return{originalName:e.name,variable:e.tensor.variable(false)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t}(LR);zR.className="Momentum",BN(zR);var PR=function(e){function t(t,n,r,a,i){var o;if(void 0===n&&(n=.9),void 0===r&&(r=0),void 0===a&&(a=null),void 0===i&&(i=!1),(o=e.call(this)||this).learningRate=t,o.decay=n,o.momentum=r,o.epsilon=a,o.accumulatedMeanSquares=[],o.accumulatedMoments=[],o.accumulatedMeanGrads=[],o.centered=i,null==a&&(o.epsilon=Nw.backend.epsilon()),null==t)throw new Error("learningRate for RMSPropOptimizer must be defined.");return o}Av(t,e);var n=t.prototype;return n.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var a=Nw.registeredVariables[n],i=!1;null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:QN((function(){return wS(a).variable(i)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:QN((function(){return wS(a).variable(i)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:QN((function(){return wS(a).variable(i)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var s=t.accumulatedMeanSquares[r].variable,u=t.accumulatedMoments[r].variable;QN((function(){var e=aI(sI(s,t.decay),sI(ST(o),1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,i=aI(sI(n,t.decay),sI(o,1-t.decay)),l=oI(sI(o,t.learningRate),MC(eT(e,aI(ST(i),t.epsilon)))),c=aI(sI(u,t.momentum),l);s.assign(e),n.assign(i),u.assign(c);var p=eT(a,c);a.assign(p)}else{var f=aI(sI(s,t.decay),sI(ST(o),1-t.decay)),h=aI(sI(u,t.momentum),oI(sI(o,t.learningRate),MC(aI(f,t.epsilon))));s.assign(f),u.assign(h);var d=eT(a,h);a.assign(d)}}))}})),this.incrementIterations()},n.dispose=function(){null!=this.accumulatedMeanSquares&&$N(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&$N(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&$N(this.accumulatedMoments.map((function(e){return e.variable})))},n.getWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[].concat(this.accumulatedMeanSquares,this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),e.next=4,this.saveIterations();case 4:return e.t0=e.sent,e.abrupt("return",[e.t0].concat(t.map((function(e){return{name:e.originalName,tensor:e.variable}}))));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setWeights=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.extractIterations(t);case 2:t=e.sent,n=this.centered?t.length/3:t.length/2,r=!1,this.accumulatedMeanSquares=t.slice(0,n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.accumulatedMoments=t.slice(n,2*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*n,3*n).map((function(e){return{originalName:e.name,variable:e.tensor.variable(r)}})));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t}(FR);PR.className="RMSProp",BN(PR);
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var BR=function(){function e(){}return e.sgd=function(e){return new LR(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new zR(e,t,n)},e.rmsprop=function(e,t,n,r,a){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===a&&(a=!1),new PR(e,t,n,r,a)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new OR(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new _R(e,t,n)},e.adamax=function(e,t,n,r,a){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===a&&(a=0),new MR(e,t,n,r,a)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new DR(e,t)},e}(),WR={sgd:BR.sgd,momentum:BR.momentum,adadelta:BR.adadelta,adagrad:BR.adagrad,rmsprop:BR.rmsprop,adamax:BR.adamax,adam:BR.adam},VR="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:function(e){return e()};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function UR(){return new Promise((function(e){return VR((function(){return e()}))}))}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function GR(e,t){var n=e[0].length;e.forEach((function(e,t){Kv(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),Kv(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,a){for(var i=0;i<n;i++)Kv(i===t||e[i]===r[i],(function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."}))}))}function jR(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var HR=30;function qR(e){return e<=HR?e:bg(e,Math.floor(Math.sqrt(e)))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function KR(e,t,n){return[n*("number"==typeof e?e:e[0]),t*("number"==typeof e?e:e[1])]}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function XR(e,t,n,r){void 0===r&&(r=!0);var a=[];if(r)(a=a.concat(t.slice(0))).push(e[0]/n),a=a.concat(e.slice(1));else{a=a.concat(e[0]);for(var i=t.length,o=0;o<i;++o)a=a.concat([e[o+1]/t[o],t[o]]);a=a.concat(e.slice(i+1))}return a}function YR(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var a=t+1;a<e;++a)a<=2*t?(r.push(a),r.push(a-(t+1))):r.push(a)}else{for(var i=[],o=[],s=1;s<e;++s)s>=2*t+1||s%2==1?o.push(s):i.push(s);r.push.apply(r,i),r.push(0),r.push.apply(r,o)}return r}function JR(e,t,n,r){void 0===r&&(r=!0);var a=[];r?a.push(e[0]/n):a.push(e[0]*n);for(var i=1;i<e.length;++i)i<=t.length?r?a.push(t[i-1]*e[i]):a.push(e[i]/t[i-1]):a.push(e[i]);return a}function ZR(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function QR(e,t,n){for(var r=e.slice(0,1),a=0;a<n;++a)r.push(e[a+1]-t[a][0]-t[a][1]);return r}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var $R=1.7580993408473768,eA=1.0507009873554805,tA=.3275911,nA=.254829592,rA=-.284496736,aA=1.421413741,iA=-1.453152027,oA=1.061405429;
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function sA(){var e;Dg().getBool("IS_TEST")||(e=console).warn.apply(e,arguments)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function uA(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function lA(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}function cA(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=0;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function pA(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),a=2;a<e.length;a+=4)n[Math.floor(a/4)]=e[a],r[Math.floor(a/4)]=e[a+1];return{real:n,imag:r}}function fA(e,t){return{real:e[2*t],imag:e[2*t+1]}}function hA(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function dA(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),a=0;a<Math.ceil(e/2);a++){var i=(t?2:-2)*Math.PI*(a/e);n[a]=Math.cos(i),r[a]=Math.sin(i)}return{real:n,imag:r}}function mA(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function vA(e,t,n){void 0===n&&(n=0);var r=[];if("number"==typeof t)Kv(e.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(e.shape[n]/t);else{var a=t.reduce((function(e,t){return-1===t&&(e+=1),e}),0);Kv(a<=1,(function(){return"There should be only one negative value in split array."}));var i=t.indexOf(-1);if(-1!==i){var o=t.reduce((function(e,t){return t>0?e+t:e}));t[i]=e.shape[n]-o}Kv(e.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t}return r}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function gA(e,t){var n,r=!1;for(e<=HR?(n=e,r=!0):n=bg(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=bg(e,n+1);return n}function yA(e,t,n){for(var r=[],a=e.length,i=0;i<a;i++)i!==t?r.push(e[i]):r.push(n);return r}function bA(e,t,n,r){var a=t.shape.length,i=e.shape.length;if(0!==r&&(r<-a||r>a))throw new Error("Expect batchDims in the range of [-"+a+", "+a+"], but got "+r);if(r<0&&(r+=a),r>i)throw new Error("batchDims ("+r+") must be less than rank(x) (\n    "+i+").");if(n<r)throw new Error("batchDims ("+r+") must be less than or equal to axis ("+n+").");for(var o=0;o<r;++o)if(e.shape[o]!==t.shape[o])throw new Error("x.shape["+o+"]: "+e.shape[o]+" should be equal to indices.shape["+o+"]: "+t.shape[o]+".");for(var s=e.shape[n],u=[],l=1,c=1,p=1,f=0;f<r;++f)u.push(e.shape[f]),l*=e.shape[f];for(var h=r;h<n;h++)u.push(e.shape[h]),c*=e.shape[h];for(var d=r;d<a;d++)u.push(t.shape[d]);for(var m=n+1;m<i;m++)u.push(e.shape[m]),p*=e.shape[m];return{batchSize:l,sliceSize:p,outerSize:c,dimSize:s,outputShape:u}}function xA(e){try{return e.map((function(e){return Gx(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8, error: "+e)}}function wA(e){return e.map((function(e){return Ux(e)}))}var kA={__proto__:null,slice_util:LN,segment_util:{__proto__:null,segOpComputeOptimalWindowSize:gA,computeOutShape:yA,collectGatherOpShapeInfo:bA},castTensor:
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=AT(e.shape),a=Pk(e,"float32"),i=n.complex(a,r);return r.dispose(),a.dispose(),i}if(!cg(e.dtype,t))return Nw.makeTensorFromDataId(e.dataId,e.shape,t);if("complex64"===e.dtype){var o=n.real(e),s=Pk(o,t);return o.dispose(),s}if("int32"===t)return n.int(e);if("bool"===t){var u=gC(0,e.dtype),l=n.notEqual(e,u);return u.dispose(),l}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)},reshapeTensor:function(e,t){return Nw.makeTensorFromDataId(e.dataId,t,e.dtype)},fromUint8ToStringArray:xA,fromStringArrayToUint8:wA,upcastType:fw,axesAreInnerMostDims:rT,combineLocations:aT,computeOutAndReduceShapes:iT,expandShapeToKeepDim:oT,assertAxesAreInnerMostDims:sT,getAxesPermutation:uT,getUndoAxesPermutation:lT,getInnerMostAxes:cT,getBroadcastDims:vS,getReductionAxes:gS,assertAndGetBroadcastShape:yS,assertParamsConsistent:GR,computeOutShape:jR,computeDilation2DInfo:wI,computePool2DInfo:kI,computePool3DInfo:NI,computeConv2DInfo:II,computeConv3DInfo:SI,computeDefaultPad:TI,tupleValuesAreOne:FI,eitherStridesOrDilationsAreOne:_I,convertConv2DDataFormat:DI,getFusedDyActivation:EE,getFusedBiasGradient:RE,applyActivation:AE,shouldFuse:FE,PARALLELIZE_THRESHOLD:HR,computeOptimalWindowSize:qR,getImageCenter:KR,getReshaped:XR,getPermuted:YR,getReshapedPermuted:JR,getSliceBeginCoords:ZR,getSliceSize:QR,prepareAndValidate:dN,validateUpdateShape:vN,validateInput:gN,calculateShapes:yN,SELU_SCALEALPHA:$R,SELU_SCALE:eA,ERF_P:tA,ERF_A1:nA,ERF_A2:rA,ERF_A3:aA,ERF_A4:iA,ERF_A5:oA,warn:sA,log:function(){var e;Dg().getBool("IS_TEST")||(e=console).log.apply(e,arguments)},mergeRealAndImagArrays:uA,splitRealAndImagArrays:lA,complexWithEvenIndex:cA,complexWithOddIndex:pA,getComplexWithIndex:fA,assignToTypedArray:hA,exponents:dA,exponent:mA,prepareSplitSize:vA},NA={__proto__:null,nonMaxSuppressionV3Impl:YE,nonMaxSuppressionV4Impl:JE,nonMaxSuppressionV5Impl:ZE,whereImpl:JC},IA={kernelName:Lg,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return sI(e,BC(Pk(n,"float32"),-1))}}}},SA={kernelName:zg,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){var t=ST(Pk(n,"float32")),r=MC(eT(gC(1),t));return JS(oI(e,r))}}}},TA={kernelName:Pg,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){var t=MC(eT(ST(Pk(n,"float32")),1));return oI(e,t)}}}},CA={kernelName:Bg,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],a=yS(n.shape,r.shape);return{a:function(){var t=e,r=gS(n.shape,a);return r.length>0&&(t=tT(t,r)),OI(t,n.shape)},b:function(){var t=e,n=gS(r.shape,a);return n.length>0&&(t=tT(t,n)),OI(t,r.shape)}}}},EA={kernelName:Wg,saveAllInputs:!0,gradFunc:function(e,t){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}},RA={kernelName:Gg,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return wS(n)}}}},AA={kernelName:jg,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return wS(n)}}}},FA={kernelName:Hg,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return oI(e,MC(eT(gC(1),ST(Pk(n,"float32")))))}}}},_A={kernelName:qg,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){var t=MC(aI(gC(1),ST(Pk(n,"float32"))));return oI(e,t)}}}},DA={kernelName:Yg,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],a=yS(n.shape,r.shape);return{a:function(){var t=aI(ST(n),ST(r)),i=sI(e,oI(r,t)),o=gS(n.shape,a);return o.length>0&&(i=tT(i,o)),OI(i,n.shape)},b:function(){var t=aI(ST(n),ST(r)),i=JS(sI(e,oI(n,t))),o=gS(r.shape,a);return o.length>0&&(i=tT(i,o)),OI(i,r.shape)}}}},OA={kernelName:Kg,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return oI(e,aI(ST(Pk(n,"float32")),1))}}}},MA={kernelName:Xg,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return oI(e,eT(gC(1),ST(Pk(n,"float32"))))}}}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var LA=Mw({avgPool3dGrad_:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n,r,a,i,o){void 0===a&&(a=[1,1,1]);var s=_w(e,"dy","avgPool3dGrad"),u=_w(t,"input","avgPool3dGrad"),l=s,c=u,p=!1;4===u.rank&&(p=!0,l=OI(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]]),c=OI(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]])),Kv(5===l.rank,(function(){return"Error in avgPool3dGrad: dy must be rank 5 but got rank "+l.rank+"."})),Kv(5===c.rank,(function(){return"Error in avgPool3dGrad: input must be rank 5 but got rank "+c.rank+"."})),Kv(_I(r,a),(function(){return"Error in avgPool3dGrad: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"})),null!=o&&Kv($v(i),(function(){return"Error in avgPool3dGrad: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var f={dy:l,input:c},h={filterSize:n,strides:r,dilations:a,pad:i,dimRoundingMode:o},d=Nw.runKernel($g,f,h);return p?OI(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}}),zA={kernelName:Qg,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.filterSize,i=n.strides,o=n.dilations,s=n.pad,u=n.dimRoundingMode,l=o??[1,1,1];return{x:function(){return LA(e,r,a,i,l,s,u)}}}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var PA=Mw({avgPoolGrad_:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n,r,a){var i=_w(e,"dy","avgPoolGrad"),o=_w(t,"input","avgPoolGrad");Kv(o.rank===i.rank,(function(){return"Rank of input ("+o.rank+") does not match rank of dy ("+i.rank+")"}));var s=o,u=i,l=!1;3===o.rank&&(l=!0,s=OI(o,[1,o.shape[0],o.shape[1],o.shape[2]]),u=OI(i,[1,i.shape[0],i.shape[1],i.shape[2]])),Kv(4===u.rank,(function(){return"Error in avgPoolGrad: dy must be rank 4 but got rank "+u.rank+"."})),Kv(4===s.rank,(function(){return"Error in avgPoolGrad: input must be rank 4 but got rank "+s.rank+"."}));var c={dy:u,input:s},p={filterSize:n,strides:r,pad:a},f=Nw.runKernel(Zg,c,p);return l?OI(f,[f.shape[1],f.shape[2],f.shape[3]]):f}}),BA={kernelName:Jg,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.filterSize,i=n.strides,o=n.pad;return{x:function(){return PA(e,r,a,i,o)}}}},WA={kernelName:ey,inputsToSave:["a","b"],gradFunc:function(e,t,n){var r=t[0],a=t[1],i=n.transposeA,o=n.transposeB;return i||o?!i&&o?{a:function(){return iN(e,a,!1,!1)},b:function(){return iN(e,r,!0,!1)}}:i&&!o?{a:function(){return iN(a,e,!1,!0)},b:function(){return iN(r,e,!1,!1)}}:{a:function(){return iN(a,e,!0,!0)},b:function(){return iN(e,r,!0,!0)}}:{a:function(){return iN(e,a,!1,!0)},b:function(){return iN(r,e,!0,!1)}}}},VA={kernelName:ty,gradFunc:function(e,t,n){var r=n.blockShape,a=n.crops;return{x:function(){return BT(e,r,a)}}}},UA={kernelName:ry,gradFunc:function(e,t,n){for(var r=n,a=r.inputShape,i=r.shape,o=Array.from(i),s=a.length-1;s>=0;s--)if(a[s]===i[s])o[s]=1;else if(1!==a[s])throw new Error("broadcastTo(): ["+a+"] cannot be broadcast to ["+i+"].");for(var u=[],l=0;l<o.length;l++)o[l]>1&&u.push(l);return{x:function(){return tT(e,u,!0)}}}},GA={kernelName:ay,gradFunc:function(e){return{x:function(){return e.clone()}}}},jA={kernelName:iy,gradFunc:function(e){return{x:function(){return wS(e)}}}},HA={kernelName:oy,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.clipValueMin,i=n.clipValueMax;return{x:function(){return xS(fT(MS(r,a),US(r,i)),e,wS(e))}}}},qA={kernelName:uy,inputsToSave:["x"],gradFunc:IA.gradFunc},KA={kernelName:ly,saveAllInputs:!0,gradFunc:function(e,t,n){var r=t.map((function(e){return e.shape})),a=ag(n.axis,t[0].shape)[0],i=r.map((function(e){return e[a]}));return DC(e,i,a).map((function(e){return function(){return e}}))}},XA={kernelName:cy,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=t[0],a=t[1],i=n.dilations,o=n.strides,s=n.pad,u=n.dataFormat;return Kv(FI(i),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"})),{x:function(){return rS(r.shape,e,a,o,s,u)},filter:function(){return CE(r,e,a.shape,o,s,u)}}}},YA={kernelName:fy,inputsToSave:["dy","filter"],gradFunc:function(e,t,n){var r=t[0],a=t[1],i=n.strides,o=n.pad,s=n.dataFormat,u=n.dimRoundingMode;return{dy:function(){return tS(e,a,i,o,s,1,u)},filter:function(){return CE(e,r,a.shape,i,o,s,u)}}}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var JA=Mw({conv3DBackpropFilter_:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n,r,a){var i=e;4===e.rank&&(i=OI(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]));var o=t;4===o.rank&&(o=OI(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]])),Kv(5===i.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+i.shape+"."})),Kv(5===o.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+o.shape+"."})),Kv(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),Kv(i.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+i.shape[4]+") must match input depth in filter ("+n[3]+"."})),Kv(o.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+o.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s={x:i,dy:o},u={strides:r,pad:a,filterShape:n};return Nw.runKernel(dy,s,u)}}),ZA={kernelName:hy,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad;Kv(FI(r),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+r+"'"}));var o=t[0],s=t[1];return{x:function(){return oS(o.shape,e,s,a,i)},filter:function(){return JA(o,e,s.shape,a,i)}}}},QA={kernelName:vy,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return sI(JS(NC(Pk(n,"float32"))),e)}}}},$A={kernelName:gy,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return sI(IC(Pk(n,"float32")),e)}}}},eF={kernelName:yy,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.axis,i=n.exclusive,o=n.reverse;return{x:function(){var t=uT([a],r.rank),n=cS(e,a,i,!o);return null!=t&&(n=sN(n,t)),n}}}},tF={kernelName:ky,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=n.dilations,a=n.strides,i=n.pad,o=n.dimRoundingMode,s=r??[1,1];Kv(FI(s),(function(){return"Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '"+s+"'"}));var u=t[0],l=t[1];return Kv(4===u.rank,(function(){return"Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank "+u.rank+"."})),Kv(4===l.rank,(function(){return"Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank "+l.rank+"."})),Kv(u.shape[3]===l.shape[2],(function(){return"Error in gradient of depthwiseConv2d: number of input channels ("+u.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."})),Kv(_I(a,s),(function(){return"Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides "+a+" and dilations '"+s+"'."})),null!=o&&Kv($v(i),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."})),{x:function(){return OE(u.shape,e,l,a,i,r,o)},filter:function(){return DE(u,e,l.shape,a,i,r,o)}}}},nF={kernelName:Ty,inputsToSave:["x","filter"],gradFunc:function(e,t,n){var r=t[0],a=t[1],i={x:r,filter:a,dy:e},o={x:r,filter:a,dy:e};return{x:function(){return Nw.runKernel(Cy,i,n)},filter:function(){return Nw.runKernel(Ey,o,n)}}}},rF={kernelName:Ay,outputsToSave:[!0],gradFunc:function(e,t){var n={dy:e,y:t[0]};return{x:function(){return Nw.runKernel(Fy,n)}}}},aF={kernelName:_y,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0],r=sI(TS(JS(ST(n))),2/Math.sqrt(Math.PI));return{x:function(){return sI(e,r)}}}},iF={kernelName:Oy,outputsToSave:[!0],gradFunc:function(e,t){var n=t[0];return{x:function(){return sI(e,n)}}}},oF={kernelName:My,inputsToSave:["input"],gradFunc:function(e,t){var n=t[0];return{input:function(){return OI(e,n.shape)}}}},sF={kernelName:Ly,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return sI(e,TS(n))}}}},uF={kernelName:Wy,gradFunc:function(e){return{x:function(){return wS(e)}}}},lF={kernelName:Vy,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],a=yS(n.shape,r.shape);return{a:function(){var t=oI(e,Pk(r,"float32")),i=gS(n.shape,a);return i.length>0?OI(tT(t,i),n.shape):t},b:function(){var t=sI(e,Pk(n,"float32")),i=gS(r.shape,a);i.length>0&&(t=OI(tT(t,i),r.shape));var o=ST(r);return JS(oI(t,Pk(o,"float32")))}}}},cF={kernelName:Uy,inputsToSave:["x","mean","variance","scale"],gradFunc:function(e,t,n){var r=n.varianceEpsilon,a=t[0],i=t[1],o=t[2],s=t[3],u=s??gC(1),l=gS(i.shape,a.shape),c=[];if(1===i.rank){for(var p=0;p<a.shape.length-1;++p)c.push(a.shape[p]);c.push(1)}var f=eT(a,i),h=sI(e,u),d=vC(aI(o,gC(r))),m=sI(sI(sI(d,d),d),gC(-.5));return{x:function(){return 1===i.rank?OI(sI(sI(e,RS(OI(d,[1,1,1,i.shape[0]]),c)),u),a.shape):OI(sI(sI(e,d),u),a.shape)},mean:function(){var e=sI(sI(d,gC(-1)),h);return 1===i.rank&&(e=tT(e,l)),OI(e,i.shape)},variance:function(){var e=sI(sI(m,f),h);return 1===i.rank&&(e=tT(e,l)),OI(e,i.shape)},scale:function(){var t=sI(f,d),n=sI(e,t);return 1===i.rank&&(n=tT(n,l)),OI(n,i.shape)},offset:function(){var t=e;return 1===i.rank&&(t=tT(t,l)),OI(t,i.shape)}}}},pF={kernelName:Gy,inputsToSave:["x","indices"],gradFunc:function(e,t,n){var r=t[0],a=t[1],i=n.axis,o=ag(i,r.shape)[0];return{x:function(){var t=r.shape,n=a.size,s=t.slice(0,o),u=s.length,l=t.slice(i,t.length).slice(1),c=l.length,p=fF(0,u),f=fF(u+1,u+1+c),h=hF([s,[n],l]),d=OI(e,h),m=OI(a,[n]),v=hF([[u],p,f]),g=sN(d,v),y=KC(g,m,r.shape[o]),b=lT(v);return y=sN(y,b)},indices:function(){return a}}}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function fF(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function hF(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var dF={kernelName:qy,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1];return{a:function(){return wS(n)},b:function(){return wS(r)}}}},mF={kernelName:Ky,gradFunc:function(e){return{x:function(){return Pk(e,"float32")}}}},vF={kernelName:Jy,gradFunc:function(e){return{x:function(){return wS(e)}}}},gF={kernelName:Zy,gradFunc:function(e){return{x:function(){return wS(e)}}}},yF={kernelName:Qy,gradFunc:function(e){return{x:function(){return wS(e)}}}},bF={kernelName:$y,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.alpha,i=OS(r,0);return{x:function(){return xS(i,e,sI(e,a))}}}},xF={kernelName:ab,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return oI(e,aI(n,1))}}}},wF={kernelName:rb,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return oI(e,Pk(n,"float32"))}}}},kF={kernelName:ub,inputsToSave:[],outputsToSave:[!0],gradFunc:function(e,t,n){var r=t[0],a=n.axis;return{logits:function(){var t=TS(r);return eT(e,sI(tT(e,a,!0),t))}}}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var NF=Mw({localResponseNormalizationBackprop_:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n,r,a,i,o){void 0===r&&(r=5),void 0===a&&(a=1),void 0===i&&(i=1),void 0===o&&(o=.5);var s={x:e,y:t,dy:n},u={depthRadius:r,bias:a,alpha:i,beta:o};return Nw.runKernel(cb,s,u)}}),IF={kernelName:lb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=t[0],a=t[1],i=n.depthRadius,o=n.bias,s=n.alpha,u=n.beta;return{x:function(){return NF(r,a,e,i,o,s,u)}}}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function SF(e,t,n,r){return t.rank<n.rank&&(t=OI(t,oT(t.shape,r))),e.rank<n.rank&&(e=OI(e,oT(e.shape,r))),{x:function(){return sI(e,Pk(bS(n,t),e.dtype))}}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var TF={kernelName:pb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.reductionIndices,a=t[0],i=SF(e,t[1],a,ag(r,a.shape));return{x:function(){return i.x()}}}},CF={kernelName:fb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1];return{a:function(){return sI(e,Pk(MS(n,r),"float32"))},b:function(){return sI(e,Pk(VS(n,r),"float32"))}}}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var EF=Mw({maxPool3dGrad_:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n,r,a,i,o,s){void 0===i&&(i=[1,1,1]);var u=_w(e,"dy","maxPool3dGrad"),l=_w(t,"input","maxPool3dGrad"),c=_w(n,"output","maxPool3dGrad"),p=u,f=l,h=c,d=!1;4===l.rank&&(d=!0,p=OI(u,[1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]]),f=OI(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=OI(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),Kv(5===p.rank,(function(){return"Error in maxPool3dGrad: dy must be rank 5 but got rank "+p.rank+"."})),Kv(5===f.rank,(function(){return"Error in maxPool3dGrad: input must be rank 5 but got rank "+f.rank+"."})),Kv(5===h.rank,(function(){return"Error in maxPool3dGrad: output must be rank 5 but got rank "+h.rank+"."})),Kv(_I(a,i),(function(){return"Error in maxPool3dGrad: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+i+"'"})),null!=s&&Kv($v(o),(function(){return"Error in maxPool3dGrad: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+o+"."}));var m={dy:p,input:f,output:h},v={filterSize:r,strides:a,dilations:i,pad:o,dimRoundingMode:s},g=Nw.runKernel(vb,m,v);return d?OI(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}}),RF={kernelName:mb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=t[0],a=t[1],i=n.filterSize,o=n.strides,s=n.dilations,u=n.pad,l=n.dimRoundingMode,c=s??[1,1,1];return{x:function(){return EF(e,r,a,i,o,c,u,l)}}}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var AF=Mw({maxPoolGrad_:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n,r,a,i,o){var s=_w(e,"dy","maxPoolGrad"),u=_w(t,"input","maxPoolGrad"),l=_w(n,"output","maxPoolGrad");Kv(u.rank===s.rank,(function(){return"Rank of input ("+u.rank+") does not match rank of dy ("+s.rank+")"})),Kv(4===s.rank,(function(){return"Error in maxPoolGrad: dy must be rank 4 but got rank "+s.rank+"."})),Kv(4===u.rank,(function(){return"Error in maxPoolGrad: input must be rank 4 but got rank "+u.rank+"."})),null!=o&&Kv($v(i),(function(){return"Error in maxPoolGrad: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var c={dy:s,input:u,output:l},p={filterSize:r,strides:a,pad:i,dimRoundingMode:o};return Nw.runKernel(db,c,p)}}),FF={kernelName:hb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=t[0],a=t[1],i=n.filterSize,o=n.strides,s=n.pad;return{x:function(){return AF(e,r,a,i,o,s)}}}},_F={kernelName:wb,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return BI(e,a,r.shape)}}}},DF={kernelName:Db,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.paddings.map((function(e){return e[0]}));return{x:function(){return BI(e,a,r.shape)}}}},OF={kernelName:Ob,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:function(e,t){var n=t[0],r=t[1],a=t[2],i=n,o=r,s=yS(i.shape,o.shape);return{a:function(){var t=Pk(o,"float32"),n=sI(e,sI(t,VT(i,eT(t,gC(1))))),r=gS(i.shape,s);return r.length>0&&(n=tT(n,r)),OI(n,i.shape)},b:function(){var t=OS(i,0),n=xS(t,HS(i),wS(i)),r=sI(e,sI(a,n)),u=gS(o.shape,s);return u.length>0&&(r=tT(r,u)),OI(r,o.shape)}}}},MF={kernelName:Qb,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){var t=OS(n,gC(0)),r=gC($R),a=gC(eA),i=sI(e,a),o=sI(sI(e,r),TS(Pk(n,"float32")));return xS(t,i,o)}}}},LF={kernelName:sx,gradFunc:function(e,t,n){var r=n.blockShape,a=n.paddings;return{x:function(){return UI(e,r,a)}}}},zF={kernelName:ux,gradFunc:function(e,t,n){var r=n.axis;return{x:function(){return zI(e,r)}}}},PF={kernelName:gx,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=n.reps;return{x:function(){var t=wS(r);if(1===r.rank)for(var n=0;n<a[0];++n)t=aI(t,BI(e,[n*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(var i=0;i<a[0];++i)for(var o=0;o<a[1];++o)t=aI(t,BI(e,[i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(var s=0;s<a[0];++s)for(var u=0;u<a[1];++u)for(var l=0;l<a[2];++l)t=aI(t,BI(e,[s*r.shape[0],u*r.shape[1],l*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(var c=0;c<a[0];++c)for(var p=0;p<a[1];++p)for(var f=0;f<a[2];++f)for(var h=0;h<a[3];++h)t=aI(t,BI(e,[c*r.shape[0],p*r.shape[1],f*r.shape[2],h*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return t}}}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */for(
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var BF,WF=0,VF=[IA,SA,TA,CA,EA,RA,AA,FA,_A,DA,OA,MA,zA,BA,WA,VA,UA,GA,jA,HA,qA,KA,YA,XA,ZA,QA,$A,eF,tF,nF,{kernelName:Ry,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],a=yS(n.shape,r.shape);return{a:function(){var t=oI(e,Pk(r,"float32")),i=gS(n.shape,a);return i.length>0?OI(tT(t,i),n.shape):t},b:function(){var t=sI(e,Pk(n,"float32")),i=gS(r.shape,a);i.length>0&&(t=OI(tT(t,i),r.shape));var o=ST(r);return JS(oI(t,Pk(o,"float32")))}}}},rF,aF,iF,oF,sF,lF,uF,cF,pF,dF,mF,vF,gF,yF,bF,xF,wF,kF,IF,TF,TF,CF,RF,FF,{kernelName:yb,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=ag(n.axis,r.shape),i=Zv(iT(r.shape,a)[1]);return{x:function(){var t=r.shape.slice();a.forEach((function(e){t[e]=1}));var n=OI(e,t);return oI(sI(n,FT(r.shape,"float32")),i)}}}},{kernelName:bb,inputsToSave:["x"],outputsToSave:[!0],gradFunc:function(e,t,n){var r=n.axis,a=t[0],i=SF(e,t[1],a,ag(r,a.shape));return{x:function(){return i.x()}}}},{kernelName:xb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1];return{a:function(){return sI(e,Pk(US(n,r),"float32"))},b:function(){return sI(e,Pk(OS(n,r),"float32"))}}}},_F,{kernelName:kb,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],a=yS(n.shape,r.shape);return{a:function(){var t=gS(n.shape,a);return t.length>0?OI(tT(e,t),n.shape):e},b:function(){var t=sI(e,JS(_S(oI(n,r)))),i=gS(r.shape,a);return i.length>0?OI(tT(t,i),r.shape):t}}}},{kernelName:Ib,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],a=yS(n.shape,r.shape);return{a:function(){var t=sI(e,Pk(r,"float32")),i=gS(n.shape,a);return i.length>0?OI(tT(t,i),n.shape):t},b:function(){var t=sI(e,Pk(n,"float32")),i=gS(r.shape,a);return i.length>0?OI(tT(t,i),r.shape):t}}}},{kernelName:Sb,gradFunc:function(e){return{x:function(){return JS(e)}}}},{kernelName:Fb,inputsToSave:["indices"],gradFunc:function(e,t){var n=t[0];return{indices:function(){return AT(n.shape,"float32")}}}},{kernelName:Ab,gradFunc:function(e){return{x:function(){return wS(e)}}}},{kernelName:_b,saveAllInputs:!0,gradFunc:function(e,t,n){var r=n.axis;return XC(e,r).map((function(e){return function(){return e}}))}},DF,DF,OF,{kernelName:Mb,inputsToSave:["x","alpha"],gradFunc:function(e,t){var n=t[0],r=t[1],a=OS(n,0);return{x:function(){return xS(a,e,sI(e,r))},alpha:function(){var t=xS(a,wS(e),sI(e,n)),i=gS(r.shape,e.shape);return i.length>0&&(t=tT(t,i)),OI(t,r.shape)}}}},{kernelName:Bb,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return oI(e,JS(ST(n)))}}}},{kernelName:qb,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0],r=sI(US(n,6),BC(n));return{x:function(){return sI(e,Pk(r,"float32"))}}}},{kernelName:Wb,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return sI(e,Pk(BC(n),"float32"))}}}},{kernelName:Vb,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return OI(e,n.shape)}}}},{kernelName:jb,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:t[0]};return{images:function(){return Nw.runKernel(Hb,r,n)}}}},{kernelName:Ub,inputsToSave:["images"],gradFunc:function(e,t,n){var r={dy:e,images:t[0]};return{images:function(){return Nw.runKernel(Gb,r,n)}}}},{kernelName:Kb,gradFunc:function(e,t,n){var r=ag(n.dims,e.shape);return{x:function(){return cC(e,r)}}}},{kernelName:Xb,gradFunc:function(e){return{x:function(){return wS(e)}}}},{kernelName:Yb,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return JS(oI(e,sI(VT(n,1.5),2)))}}}},{kernelName:Zb,inputsToSave:["condition"],gradFunc:function(e,t){var n=t[0];return{condition:function(){return Pk(wS(n),"float32")},t:function(){return sI(e,Pk(n,e.dtype))},e:function(){return sI(e,Pk(hT(n),e.dtype))}}}},MF,{kernelName:rx,outputsToSave:[!0],gradFunc:function(e,t){var n=t[0];return{x:function(){return sI(e,sI(n,eT(gC(1),n)))}}}},{kernelName:nx,gradFunc:function(e){return{x:function(){return wS(e)}}}},{kernelName:ex,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return sI(uS(Pk(n,"float32")),e)}}}},{kernelName:tx,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return sI(lS(Pk(n,"float32")),e)}}}},{kernelName:$b,inputsToSave:["x"],gradFunc:function(e,t,n){for(var r=t[0],a=n.begin,i=n.size,o=r.shape,s=ON(r,a,i),u=s[0],l=s[1],c=[],p=0;p<e.rank;p++)c.push([u[p],o[p]-u[p]-l[p]]);return{x:function(){return OT(e,c)}}}},{kernelName:lx,outputsToSave:[!0],gradFunc:function(e,t,n){var r=t[0],a=n.dim,i=sI(e,r);return{logits:function(){return eT(i,sI(tT(i,[a],true),r))}}}},{kernelName:ax,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return sI(e,PI(n))}}}},LF,LF,zF,zF,{kernelName:ix,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return oI(e,sI(MC(Pk(n,"float32")),2))}}}},{kernelName:cx,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],a=gC(2);return{a:function(){return sI(e,sI(a,eT(n,r)))},b:function(){return sI(e,sI(a,eT(r,n)))}}}},{kernelName:px,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return sI(e,sI(Pk(n,"float32"),2))}}}},{kernelName:Ix,gradFunc:function(e){return{x:function(){return wS(e)}}}},{kernelName:fx,inputsToSave:["a","b"],gradFunc:function(e,t){var n=t[0],r=t[1],a=yS(n.shape,r.shape);return{a:function(){var t=e,r=gS(n.shape,a);return r.length>0&&(t=tT(t,r)),OI(t,n.shape)},b:function(){var t=e,n=gS(r.shape,a);return n.length>0&&(t=tT(t,n)),OI(JS(t),r.shape)}}}},{kernelName:ox,inputsToSave:["x"],gradFunc:function(e,t,n){var r=t[0],a=r.shape.slice();ag(n.axis,r.shape).forEach((function(e){a[e]=1}));var i=OI(e,a),o=sI(i,FT(r.shape,"float32"));return{x:function(){return o}}}},{kernelName:mx,inputsToSave:["x"],gradFunc:function(e,t){var n=t[0];return{x:function(){return oI(e,ST(uS(n)))}}}},{kernelName:vx,outputsToSave:[!0],gradFunc:function(e,t){var n=t[0];return{x:function(){return sI(eT(gC(1),ST(n)),e)}}}},PF,{kernelName:bx,gradFunc:function(e,t,n){var r=lT(n.perm);return{x:function(){return sN(e,r)}}}},{kernelName:wx,gradFunc:function(e,t,n){var r=n.axis;return{value:function(){return PC(e,r)}}}},{kernelName:kx,inputsToSave:["segmentIds"],gradFunc:function(e,t){var n=t[0];return{x:function(){return function(e,t){for(var n=bT(t,wS(t)),r=DS(e,n),a=MS(t,gC(0,"int32")),i=r.rank-a.rank,o=0;o<i;++o)a=CS(a,o+1);a=fT(a,FT(r.shape,"bool"));var s=wS(r);return xS(a,r,s)}(e,n)}}}},{kernelName:Nx,gradFunc:function(e){return{x:function(){return wS(e)}}}}]
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;WF<VF.length;WF++){Lx(VF[WF])}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function UF(){return null==BF&&(BF=rI().epsilon()),BF}aw.prototype.abs=function(){return this.throwIfDisposed(),uI(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.acos=function(){return this.throwIfDisposed(),lI(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.acosh=function(){return this.throwIfDisposed(),cI(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.addStrict=function(e){return this.throwIfDisposed(),sE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.add=function(e){return this.throwIfDisposed(),aI(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.all=function(e,t){return this.throwIfDisposed(),fI(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.any=function(e,t){return this.throwIfDisposed(),hI(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.argMax=function(e){return this.throwIfDisposed(),dI(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.argMin=function(e){return this.throwIfDisposed(),mI(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.asScalar=function(){return this.throwIfDisposed(),Kv(1===this.size,(function(){return"The array must have only 1 element."})),OI(this,[])},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.asType=function(e){return this.throwIfDisposed(),Pk(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.as1D=function(){return this.throwIfDisposed(),OI(this,[this.size])},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.as2D=function(e,t){return this.throwIfDisposed(),OI(this,[e,t])},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),OI(this,[e,t,n])},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),OI(this,[e,t,n,r])},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.as5D=function(e,t,n,r,a){return this.throwIfDisposed(),OI(this,[e,t,n,r,a])},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.asin=function(){return this.throwIfDisposed(),vI(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.asinh=function(){return this.throwIfDisposed(),gI(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.atan=function(){return this.throwIfDisposed(),yI(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.atan2=function(e){return this.throwIfDisposed(),bI(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.atanh=function(){return this.throwIfDisposed(),xI(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),MI(this,e,t,n,r)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),UI(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.batchNorm=function(e,t,n,r,a){return this.throwIfDisposed(),GI(this,e,t,n,r,a)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.broadcastTo=function(e){return this.throwIfDisposed(),XI(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.cast=function(e){return this.throwIfDisposed(),Pk(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.ceil=function(){return this.throwIfDisposed(),YI(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),JI(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.concat=function(e,t){return this.throwIfDisposed(),e instanceof aw&&(e=[e]),zI([this].concat(e),t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.conv1d=function(e,t,n,r,a,i){return this.throwIfDisposed(),nS(this,e,t,n,r,a,i)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.conv2dTranspose=function(e,t,n,r,a){return this.throwIfDisposed(),aS(this,e,t,n,r,a)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.conv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),tS(this,e,t,n,r,a,i)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.cos=function(){return this.throwIfDisposed(),uS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.cosh=function(){return this.throwIfDisposed(),lS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.cumsum=function(e,t,n){return this.throwIfDisposed(),cS(this,e,t,n)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),fS(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.depthwiseConv2D=function(e,t,n,r,a,i){return YN("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),hS(this,e,t,n,r,a,i)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.depthwiseConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),hS(this,e,t,n,r,a,i)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.dilation2d=function(e,t,n,r,a){return this.throwIfDisposed(),mS(this,e,t,n,r,a)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.divNoNan=function(e){return this.throwIfDisposed(),kS(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.divStrict=function(e){return this.throwIfDisposed(),uE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.div=function(e){return this.throwIfDisposed(),oI(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.dot=function(e){return this.throwIfDisposed(),NS(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.elu=function(){return this.throwIfDisposed(),IS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.equalStrict=function(e){return this.throwIfDisposed(),tE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.equal=function(e){return this.throwIfDisposed(),bS(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.erf=function(){return this.throwIfDisposed(),SS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.exp=function(){return this.throwIfDisposed(),TS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.expandDims=function(e){return this.throwIfDisposed(),CS(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.expm1=function(){return this.throwIfDisposed(),ES(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.fft=function(){return this.throwIfDisposed(),AC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.flatten=function(){return this.throwIfDisposed(),OI(this,[this.size])},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.floor=function(){return this.throwIfDisposed(),_S(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.floorDiv=function(e){return this.throwIfDisposed(),iI(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.gather=function(e,t){return this.throwIfDisposed(),DS(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),nE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.greaterEqual=function(e){return this.throwIfDisposed(),MS(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.greaterStrict=function(e){return this.throwIfDisposed(),rE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.greater=function(e){return this.throwIfDisposed(),OS(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.ifft=function(){return this.throwIfDisposed(),FC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.irfft=function(){return this.throwIfDisposed(),_C(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.isFinite=function(){return this.throwIfDisposed(),zS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.isInf=function(){return this.throwIfDisposed(),PS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.isNaN=function(){return this.throwIfDisposed(),BS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.leakyRelu=function(e){return this.throwIfDisposed(),WS(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),aE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.lessEqual=function(e){return this.throwIfDisposed(),US(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.lessStrict=function(e){return this.throwIfDisposed(),iE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.less=function(e){return this.throwIfDisposed(),VS(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.localResponseNormalization=function(e,t,n,r){return this.throwIfDisposed(),jS(this,e,t,n,r)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.logSigmoid=function(){return this.throwIfDisposed(),QS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.logSoftmax=function(e){return this.throwIfDisposed(),nT(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.logSumExp=function(e,t){return this.throwIfDisposed(),pT(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.log=function(){return this.throwIfDisposed(),HS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.log1p=function(){return this.throwIfDisposed(),qS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.logicalAnd=function(e){return this.throwIfDisposed(),fT(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.logicalNot=function(){return this.throwIfDisposed(),hT(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.logicalOr=function(e){return this.throwIfDisposed(),dT(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.logicalXor=function(e){return this.throwIfDisposed(),mT(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.matMul=function(e,t,n){return this.throwIfDisposed(),iN(this,e,t,n)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),vT(this,e,t,n,r)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.max=function(e,t){return this.throwIfDisposed(),$S(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.maximumStrict=function(e){return this.throwIfDisposed(),lE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.maximum=function(e){return this.throwIfDisposed(),bT(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.mean=function(e,t){return this.throwIfDisposed(),xT(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.min=function(e,t){return this.throwIfDisposed(),wT(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.minimumStrict=function(e){return this.throwIfDisposed(),cE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.minimum=function(e){return this.throwIfDisposed(),kT(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.mirrorPad=function(e,t){return this.throwIfDisposed(),NT(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.modStrict=function(e){return this.throwIfDisposed(),pE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.mod=function(e){return this.throwIfDisposed(),IT(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.mulStrict=function(e){return this.throwIfDisposed(),fE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.mul=function(e){return this.throwIfDisposed(),sI(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.neg=function(){return this.throwIfDisposed(),JS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.norm=function(e,t,n){return this.throwIfDisposed(),gE(this,e,t,n)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),oE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.notEqual=function(e){return this.throwIfDisposed(),RT(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.oneHot=function(e,t,n){return void 0===t&&(t=1),void 0===n&&(n=0),this.throwIfDisposed(),oN(this,e,t,n)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.onesLike=function(){return this.throwIfDisposed(),_T(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.pad=function(e,t){return this.throwIfDisposed(),OT(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.pool=function(e,t,n,r,a){return this.throwIfDisposed(),WT(this,e,t,n,r,a)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.powStrict=function(e){return this.throwIfDisposed(),hE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.pow=function(e){return this.throwIfDisposed(),VT(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.prelu=function(e){return this.throwIfDisposed(),UT(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.prod=function(e,t){return this.throwIfDisposed(),GT(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.reciprocal=function(){return this.throwIfDisposed(),sC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.relu=function(){return this.throwIfDisposed(),uC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.relu6=function(){return this.throwIfDisposed(),lC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.reshapeAs=function(e){return this.throwIfDisposed(),OI(this,e.shape)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.reshape=function(e){return this.throwIfDisposed(),OI(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.resizeBilinear=function(e,t,n){return this.throwIfDisposed(),cR(this,e,t,n)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.resizeNearestNeighbor=function(e,t,n){return this.throwIfDisposed(),pR(this,e,t,n)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.reverse=function(e){return this.throwIfDisposed(),cC(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.rfft=function(){return this.throwIfDisposed(),OC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.round=function(){return this.throwIfDisposed(),mC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.rsqrt=function(){return this.throwIfDisposed(),vC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.selu=function(){return this.throwIfDisposed(),yC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.separableConv2d=function(e,t,n,r,a,i){return this.throwIfDisposed(),bC(this,e,t,n,r,a,i)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.sigmoid=function(){return this.throwIfDisposed(),PI(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.sign=function(){return this.throwIfDisposed(),kC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.sin=function(){return this.throwIfDisposed(),NC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.sinh=function(){return this.throwIfDisposed(),IC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.slice=function(e,t){return this.throwIfDisposed(),BI(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.softmax=function(e){return this.throwIfDisposed(),RC(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.softplus=function(){return this.throwIfDisposed(),ZS(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),BT(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.split=function(e,t){return this.throwIfDisposed(),DC(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.sqrt=function(){return this.throwIfDisposed(),MC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.square=function(){return this.throwIfDisposed(),ST(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.squaredDifference=function(e){return this.throwIfDisposed(),LC(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),dE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.squeeze=function(e){return this.throwIfDisposed(),zC(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.stack=function(e,t){this.throwIfDisposed();var n=e instanceof aw?[this,e]:[this].concat(e);return PC(n,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.step=function(e){return this.throwIfDisposed(),BC(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.stridedSlice=function(e,t,n,r,a,i,o,s){return this.throwIfDisposed(),WC(this,e,t,n,r,a,i,o,s)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.subStrict=function(e){return this.throwIfDisposed(),mE(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.sub=function(e){return this.throwIfDisposed(),eT(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.sum=function(e,t){return this.throwIfDisposed(),tT(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.tan=function(){return this.throwIfDisposed(),VC(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.tanh=function(){return this.throwIfDisposed(),WI(this)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.tile=function(e){return this.throwIfDisposed(),RS(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.toBool=function(){return this.throwIfDisposed(),Pk(this,"bool")},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.toFloat=function(){return this.throwIfDisposed(),Pk(this,"float32")},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.toInt=function(){return this.throwIfDisposed(),Pk(this,"int32")},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.topk=function(e,t){return this.throwIfDisposed(),jC(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.transpose=function(e){return this.throwIfDisposed(),sN(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.unique=function(e){return this.throwIfDisposed(),qC(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),KC(this,e,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.unstack=function(e){return this.throwIfDisposed(),XC(this,e)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.where=function(e,t){return this.throwIfDisposed(),xS(e,this,t)},
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
aw.prototype.zerosLike=function(){return this.throwIfDisposed(),wS(this)};
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */
var GF=function(e){function t(n){var r;return r=e.call(this,n)||this,Object.setPrototypeOf(Lv(r),t.prototype),r}return Av(t,e),t}(Mv(Error)),jF=function(e){function t(n){var r;return r=e.call(this,n)||this,Object.setPrototypeOf(Lv(r),t.prototype),r}return Av(t,e),t}(Mv(Error)),HF=function(e){function t(n){var r;return r=e.call(this,n)||this,Object.setPrototypeOf(Lv(r),t.prototype),r}return Av(t,e),t}(Mv(Error)),qF=function(e){function t(n){var r;return r=e.call(this,n)||this,Object.setPrototypeOf(Lv(r),t.prototype),r}return Av(t,e),t}(Mv(Error)),KF=function(e){function t(n){var r;return r=e.call(this,n)||this,Object.setPrototypeOf(Lv(r),t.prototype),r}return Av(t,e),t}(Mv(Error));Error;function XF(e,t){if(Array.isArray(e)){for(var n=[],r=0;r<t;r++)n=n.concat(e);return n}var a=new Array(t);return a.fill(e),a}function YF(e,t){if(!e)throw new KF(t)}function JF(e,t){for(var n,r=0,a=Bv(e);!(n=a()).done;){n.value===t&&r++}return r}function ZF(e){return 1===e.length?e[0]:e}function QF(e){return Array.isArray(e)?e:[e]}function $F(e){var t=e.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return"_"!==t[0]?t:"private"+t}function e_(e){return e.length<=1||-1===e.indexOf("_")?e:e.replace(/[_]+(\w|$)/g,(function(e,t){return t.toUpperCase()}))}var t_={};function n_(e){if(null==e)return null;var t={};return t.className=e.getClassName(),t.config=e.getConfig(),t}function r_(e){if(null!=e&&"object"==typeof e)if(Array.isArray(e))e.forEach((function(e){return r_(e)}));else for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],a=e[r];null!=a&&"object"==typeof a&&(Array.isArray(a)||"ndarray"!==a.type||"number"!=typeof a.value?r_(a):e[r]=a.value)}}function a_(e,t,n,r,a){if(void 0===t&&(t={}),void 0===n&&(n={}),void 0===r&&(r="object"),void 0===a&&(a=!1),"string"==typeof e){var i,o=e;if(o in n)i=n[o];else if(o in t_)i=t_[o];else if(null==(i=t[o]))throw new HF("Unknown "+r+": "+e+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");return i}var s=e;if(null==s.className||null==s.config)throw new HF(r+": Improper config format: "+JSON.stringify(s)+".\n'className' and 'config' must set.");var u,l,c=s.className;if(c in n){var p=n[c];u=p[0],l=p[1]}else if(c in t_){var f=t_.className;u=f[0],l=f[1]}else if(c in t){var h=t[c];u=h[0],l=h[1]}if(null==u)throw new HF("Unknown "+r+": "+c+". This may be due to one of the following reasons:\n1. The "+r+" is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.\n2. The custom "+r+" is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().");if(null!=l){for(var d={},m=0,v=Object.keys(t_);m<v.length;m++){var g=v[m];d[g]=t_[g]}for(var y=0,b=Object.keys(n);y<b.length;y++){var x=b[y];d[x]=n[x]}s.config.customObjects=d;for(var w=Object.assign({},t_),k=0,N=Object.keys(n);k<N.length;k++){var I=N[k];t_[I]=n[I]}r_(s.config);var S=l(u,s.config,n,a);return t_=Object.assign({},w),S}for(var T=Object.assign({},t_),C=0,E=Object.keys(n);C<E.length;C++){var R=E[C];t_[R]=n[R]}var A=new u(s.config);return t_=Object.assign({},T),A}function i_(e,t){return-1*function(e,t){return e<t?-1:e>t?1:0}(e,t)}function o_(e){if(null==e)return e;for(var t,n=[],r=Bv(e);!(t=r()).done;){var a=t.value;-1===n.indexOf(a)&&n.push(a)}return n}function s_(e){if(null==e)throw new HF("Invalid value in obj: "+JSON.stringify(e));for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function u_(e,t,n){if(null!=n&&e.indexOf(n)<0)throw new HF(n+" is not a valid "+t+".  Valid values are "+e+" or null/undefined.")}function l_(e,t,n,r){return void 0===n&&(n=0),void 0===r&&(r=1/0),YF(n>=0),YF(r>=n),Array.isArray(e)&&e.length>=n&&e.length<=r&&e.every((function(e){return typeof e===t}))}function c_(e,t){Array.isArray(e)?(Kv(e.length>0,(function(){return t+" is unexpectedly an empty array."})),e.forEach((function(e,n){return c_(e,"element "+(n+1)+" of "+t)}))):Kv(Number.isInteger(e)&&e>0,(function(){return"Expected "+t+" to be a positive integer, but got "+p_(e)+"."}))}function p_(e){return null===e?"null":Array.isArray(e)?"["+e.map((function(e){return p_(e)})).join(",")+"]":"string"==typeof e?'"'+e+'"':""+e}function f_(e){return"relu"===e?"relu":"linear"===e?"linear":"elu"===e?"elu":null}function h_(e,t){return QN((function(){return MC(tT(sI(e,e),t,!0))}))}var d_=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.getConfig=function(){return{}},t}(zN),m_=function(e){function t(t){var n;return(n=e.call(this)||this).defaultMaxValue=2,n.defaultAxis=0,n.maxValue=null!=t.maxValue?t.maxValue:n.defaultMaxValue,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}Av(t,e);var n=t.prototype;return n.apply=function(e){var t=this;return QN((function(){var n=h_(e,t.axis),r=JI(n,0,t.maxValue);return sI(e,oI(r,aI(UF(),n)))}))},n.getConfig=function(){return{maxValue:this.maxValue,axis:this.axis}},t}(d_);m_.className="MaxNorm",BN(m_);var v_=function(e){function t(t){var n;return(n=e.call(this)||this).defaultAxis=0,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}Av(t,e);var n=t.prototype;return n.apply=function(e){var t=this;return QN((function(){return oI(e,aI(UF(),h_(e,t.axis)))}))},n.getConfig=function(){return{axis:this.axis}},t}(d_);v_.className="UnitNorm",BN(v_);var g_=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e){return uC(e)},t}(d_);g_.className="NonNeg",BN(g_);var y_=function(e){function t(t){var n;return(n=e.call(this)||this).defaultMinValue=0,n.defaultMaxValue=1,n.defaultRate=1,n.defaultAxis=0,n.minValue=null!=t.minValue?t.minValue:n.defaultMinValue,n.maxValue=null!=t.maxValue?t.maxValue:n.defaultMaxValue,n.rate=null!=t.rate?t.rate:n.defaultRate,n.axis=null!=t.axis?t.axis:n.defaultAxis,n}Av(t,e);var n=t.prototype;return n.apply=function(e){var t=this;return QN((function(){var n=h_(e,t.axis),r=aI(sI(t.rate,JI(n,t.minValue,t.maxValue)),sI(1-t.rate,n));return sI(e,oI(r,aI(UF(),n)))}))},n.getConfig=function(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}},t}(d_);y_.className="MinMaxNorm",BN(y_);var b_={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function x_(e){return n_(e)}function w_(e,t){return void 0===t&&(t={}),a_(e,PN.getMap().classNameMap,t,"constraint")}function k_(e){return null==e?null:"string"==typeof e?w_({className:e in b_?b_[e]:e,config:{}}):e instanceof d_?e:w_(e)}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */var N_={__proto__:null,maxNorm:function(e){return new m_(e)},unitNorm:function(e){return new v_(e)},nonNeg:function(){return new g_},minMaxNorm:function(e){return new y_(e)}},I_=["channelsFirst","channelsLast"],S_=["nearest","bilinear"],T_=["valid","same","causal"],C_=["max","avg"],E_=["sum","mul","concat","ave"],R_=new Map;
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */function A_(e){u_(I_,"DataFormat",e)}function F_(e){u_(T_,"PaddingMode",e)}function __(e){u_(C_,"PoolMode",e)}var D_=[],O_="/";function M_(e,t){D_.push(e);try{var n=t();return D_.pop(),n}catch(e){throw D_.pop(),e}}function L_(e){if(!B_(e))throw new Error("Not a valid tensor name: '"+e+"'");return(0===D_.length?"":D_.join(O_)+O_)+e}function z_(e){if(!B_(e))throw new Error("Not a valid tensor name: '"+e+"'");R_.has(e)||R_.set(e,0);var t=R_.get(e);if(R_.set(e,R_.get(e)+1),t>0){var n=e+"_"+t;return R_.set(n,1),n}return e}var P_=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function B_(e){return!!e.match(P_)}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */function W_(e,t,n){null==t&&(t=0),null==n&&(n=e.length);for(var r=1,a=t;a<n;++a)r*=e[a];return r}function V_(e){return UC(e=Array.isArray(e)?new Float32Array(e):e)}function U_(e){return wT(V_(e)).dataSync()[0]}function G_(e){return $S(V_(e)).dataSync()[0]}function j_(e,t){if(t<e)throw new HF("end ("+t+") < begin ("+e+") is forbidden.");for(var n=[],r=e;r<t;++r)n.push(r);return n}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */function H_(e,t){return e.asType(t)}function q_(e,t){void 0===t&&(t=-1);var n=e.shape.slice();return t<0&&(t=n.length+t+1),n.splice(t,0,1),e.reshape(n)}function K_(e,t,n){return QN((function(){switch(e.rank){case 1:return SC(e,t,n);case 2:return TC(e,[t,0],[n,e.shape[1]]);case 3:return CC(e,[t,0,0],[n,e.shape[1],e.shape[2]]);case 4:return EC(e,[t,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3]]);case 5:return BI(e,[t,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4]]);case 6:return BI(e,[t,0,0,0,0,0],[n,e.shape[1],e.shape[2],e.shape[3],e.shape[4],e.shape[5]]);default:throw new HF("sliceAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}}))}function X_(e,t,n){return QN((function(){switch(e.rank){case 1:return SC(e,t,n);case 2:return TC(e,[0,t],[e.shape[0],n]);case 3:return CC(e,[0,0,t],[e.shape[0],e.shape[1],n]);case 4:return EC(e,[0,0,0,t],[e.shape[0],e.shape[1],e.shape[2],n]);default:throw new HF("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}}))}function Y_(e,t,n,r){return QN((function(){switch(e.rank){case 1:return SC(e,t,n);case 2:switch(r){case 1:return K_(e,t,n);case 2:return X_(e,t,n);default:throw new HF("The axis is not within the rank of the tensor "+r)}case 3:switch(r){case 1:return K_(e,t,n);case 2:return CC(e,[0,t,0],[e.shape[0],n,e.shape[2]]);case 3:return X_(e,t,n);default:throw new HF("The axis is not within the rank of the tensor "+r)}case 4:switch(r){case 1:return K_(e,t,n);case 2:return EC(e,[0,t,0,0],[e.shape[0],n,e.shape[2],e.shape[3]]);case 3:return EC(e,[0,0,t,0],[e.shape[0],e.shape[1],n,e.shape[3]]);case 4:return X_(e,t,n);default:throw new HF("The axis is not within the rank of the tensor "+r)}default:throw new HF("sliceAlongLastAxis() received an unsupported tensor rank: "+e.rank)}}))}function J_(e,t){var n;return void 0===t&&(t=-1),t<0&&(t=0!==(n=e[0].rank)?n:0),t===e[0].rank&&(t=-1),zI(e,t)}function Z_(e,t){switch(e.rank){case 1:return ZI([e,t]);case 2:return QI([e,t],0);case 3:return $I([e,t],0);case 4:return eS([e,t],0);default:throw new HF("concatAlongFirstAxis() received an unsupported tensor rank: "+e.rank)}}function Q_(e,t){if(Array.isArray(t)||(t=[t]),e.rank!==t.length)throw new HF("The length of input n ("+t.length+") does not match the number of dimensions in input x ("+e.rank+")");return RS(e,t)}function $_(e,t,n,r,a){return void 0===t&&(t=0),void 0===n&&(n=1),rC(e,t,n,r,a)}function eD(e,t,n,r){if(e.rank<2||t.rank<2)throw new qF("dot requires both inputs to be rank >= 2 but got x shape = "+e.shape+" and y shape = "+t.shape);if(t.rank>=3&&e.shape.slice(-1)[0]!==t.shape.slice(-2)[0])throw new qF("If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = "+e.shape+" and  y shape = "+t.shape);if(2===e.rank&&2===t.rank){return LE({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?rD(e.rank,r,"channelsLast"):null,activation:n})}var a=e.shape.slice(),i=a.pop();e=e.reshape([-1,i]);var o=t.shape.slice(),s=o.pop(),u=o.pop(),l=[].concat(o,[s]),c=Array.from({length:t.rank},(function(e,n){return 0===n?t.rank-2:n<=t.rank-2?n-1:n}));t=t.transpose(c).reshape([u,-1]);var p=[].concat(a,l);return LE({a:e,b:t,transposeA:!1,transposeB:!1,bias:r?rD(e.rank,r,"channelsLast"):null,activation:n}).reshape(p)}function tD(e,t,n){return QN((function(){return t=Array.isArray(t)?UC(t,"int32"):t.toInt(),DS(e,t,n)}))}function nD(e){return sI(e,e)}function rD(e,t,n){var r=t.shape;if(1!==t.rank&&t.rank!==e)throw new HF("Unexpected bias dimensions: "+t.rank+"; expected it to be 1 or "+e);if(5===e){if("channelsFirst"===n)return 1===r.length?t.reshape([1,r[0],1,1,1]):t.reshape([1,r[3],r[0],r[1],r[2]]);if("channelsLast"===n)return 1===r.length?t.reshape([1,1,1,1,r[0]]):t.reshape([1].concat(r))}else if(4===e){if("channelsFirst"===n)return 1===r.length?t.reshape([1,r[0],1,1]):t.reshape([1,r[2],r[0],r[1]]);if("channelsLast"===n)return 1===r.length?t.reshape([1,1,1,r[0]]):t.reshape([1].concat(r))}else if(3===e){if("channelsFirst"===n)return 1===r.length?t.reshape([1,r[0],1]):t.reshape([1,r[1],r[0]]);if("channelsLast"===n)return 1===r.length?t.reshape([1,1,r[0]]):t.reshape([1].concat(r))}else if(e<3)return t;throw new HF("Unsupported input rank by biasAdd: "+t.rank)}function aD(e,t,n){return QN((function(){return null==n&&(n="channelsLast"),A_(n),e.add(rD(e.rank,t,n))}))}function iD(e,t,n,r){return QN((function(){return kE(e,t,n,r)}))}function oD(e,t,n){return void 0===n&&(n=!1),n?e():t()}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */var sD=["fanIn","fanOut","fanAvg"],uD=["normal","uniform","truncatedNormal"];var lD=function(e){function t(){return e.apply(this,arguments)||this}Av(t,e);var n=t.prototype;return n.fromConfigUsesCustomObjects=function(){return!1},n.getConfig=function(){return{}},t}(zN),cD=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e,t){return AT(e,t)},t}(lD);cD.className="Zeros",BN(cD);var pD=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e,t){return FT(e,t)},t}(lD);pD.className="Ones",BN(pD);var fD=function(e){function t(t){var n;if(n=e.call(this)||this,"object"!=typeof t)throw new HF("Expected argument of type ConstantConfig but got "+t);if(void 0===t.value)throw new HF("config must have value set but got "+t);return n.value=t.value,n}Av(t,e);var n=t.prototype;return n.apply=function(e,t){var n=this;return QN((function(){return sI(gC(n.value),FT(e,t))}))},n.getConfig=function(){return{value:this.value}},t}(lD);fD.className="Constant",BN(fD);var hD=function(e){function t(t){var n;return(n=e.call(this)||this).DEFAULT_MINVAL=-.05,n.DEFAULT_MAXVAL=.05,n.minval=t.minval||n.DEFAULT_MINVAL,n.maxval=t.maxval||n.DEFAULT_MAXVAL,n.seed=t.seed,n}Av(t,e);var n=t.prototype;return n.apply=function(e,t){return aC(e,this.minval,this.maxval,t)},n.getConfig=function(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}},t}(lD);hD.className="RandomUniform",BN(hD);var dD=function(e){function t(t){var n;return(n=e.call(this)||this).DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=t.mean||n.DEFAULT_MEAN,n.stddev=t.stddev||n.DEFAULT_STDDEV,n.seed=t.seed,n}Av(t,e);var n=t.prototype;return n.apply=function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new qF("randomNormal does not support dType "+t+".");return $_(e,this.mean,this.stddev,t,this.seed)},n.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t}(lD);dD.className="RandomNormal",BN(dD);var mD=function(e){function t(t){var n;return(n=e.call(this)||this).DEFAULT_MEAN=0,n.DEFAULT_STDDEV=.05,n.mean=t.mean||n.DEFAULT_MEAN,n.stddev=t.stddev||n.DEFAULT_STDDEV,n.seed=t.seed,n}Av(t,e);var n=t.prototype;return n.apply=function(e,t){if("float32"!==(t=t||"float32")&&"int32"!==t)throw new qF("truncatedNormal does not support dType "+t+".");return HC(e,this.mean,this.stddev,t,this.seed)},n.getConfig=function(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}},t}(lD);mD.className="TruncatedNormal",BN(mD);var vD=function(e){function t(t){var n;return(n=e.call(this)||this).gain=null!=t.gain?t.gain:1,n}Av(t,e);var n=t.prototype;return n.apply=function(e,t){var n=this;return QN((function(){if(2!==e.length||e[0]!==e[1])throw new HF("Identity matrix initializer can only be used for 2D square matrices.");return sI(n.gain,AS(e[0]))}))},n.getConfig=function(){return{gain:this.gain}},t}(lD);vD.className="Identity",BN(vD);var gD=function(e){function t(t){var n,r;if(n=e.call(this)||this,t.scale<0)throw new HF("scale must be a positive float. Got: "+t.scale);return n.scale=null==t.scale?1:t.scale,n.mode=null==t.mode?"fanIn":t.mode,r=n.mode,u_(sD,"FanMode",r),n.distribution=null==t.distribution?"normal":t.distribution,function(e){u_(uD,"Distribution",e)}(n.distribution),n.seed=t.seed,n}Av(t,e);var n=t.prototype;return n.apply=function(e,t){var n=function(e,t){var n,r;if(void 0===t&&(t="channelsLast"),A_(t),2===e.length)n=e[0],r=e[1];else if(-1!==[3,4,5].indexOf(e.length)){if("channelsFirst"===t){var a=W_(e,2);n=e[1]*a,r=e[0]*a}else if("channelsLast"===t){var i=W_(e,0,e.length-2);n=e[e.length-2]*i,r=e[e.length-1]*i}}else{var o=W_(e);n=Math.sqrt(o),r=Math.sqrt(o)}return[n,r]}(e),r=n[0],a=n[1],i=this.scale;if("fanIn"===this.mode?i/=Math.max(1,r):"fanOut"===this.mode?i/=Math.max(1,a):i/=Math.max(1,(r+a)/2),"normal"===this.distribution){var o=Math.sqrt(i);if("float32"!==(t=t||"float32")&&"int32"!==t)throw new qF(this.getClassName()+" does not support dType "+t+".");return HC(e,0,o,t,this.seed)}var s=Math.sqrt(3*i);return aC(e,-s,s,t)},n.getConfig=function(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}},t}(lD);gD.className="VarianceScaling",BN(gD);var yD=function(e){function t(t){return e.call(this,{scale:1,mode:"fanAvg",distribution:"uniform",seed:null==t?null:t.seed})||this}return Av(t,e),t.prototype.getClassName=function(){return gD.className},t}(gD);yD.className="GlorotUniform",BN(yD);var bD=function(e){function t(t){return e.call(this,{scale:1,mode:"fanAvg",distribution:"normal",seed:null==t?null:t.seed})||this}return Av(t,e),t.prototype.getClassName=function(){return gD.className},t}(gD);bD.className="GlorotNormal",BN(bD);var xD=function(e){function t(t){return e.call(this,{scale:2,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})||this}return Av(t,e),t.prototype.getClassName=function(){return gD.className},t}(gD);xD.className="HeNormal",BN(xD);var wD=function(e){function t(t){return e.call(this,{scale:2,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})||this}return Av(t,e),t.prototype.getClassName=function(){return gD.className},t}(gD);wD.className="HeUniform",BN(wD);var kD=function(e){function t(t){return e.call(this,{scale:1,mode:"fanIn",distribution:"normal",seed:null==t?null:t.seed})||this}return Av(t,e),t.prototype.getClassName=function(){return gD.className},t}(gD);kD.className="LeCunNormal",BN(kD);var ND=function(e){function t(t){return e.call(this,{scale:1,mode:"fanIn",distribution:"uniform",seed:null==t?null:t.seed})||this}return Av(t,e),t.prototype.getClassName=function(){return gD.className},t}(gD);ND.className="LeCunNormal",BN(ND);var ID=function(e){function t(t){var n;if((n=e.call(this)||this).DEFAULT_GAIN=1,n.gain=null==t.gain?n.DEFAULT_GAIN:t.gain,n.seed=t.seed,null!=n.seed)throw new qF("Random seed is not implemented for Orthogonal Initializer yet.");return n}Av(t,e);var n=t.prototype;return n.apply=function(e,t){var n=this;return QN((function(){if(e.length<2)throw new qF("Shape must be at least 2D.");e[0]*e[1]>2e3&&console.warn("Orthogonal initializer is being called on a matrix with more than 2000 ("+e[0]*e[1]+") elements: Slowness may result.");var t=$_(e[0]>e[1]?[e[1],e[0]]:e,0,1,"float32"),r=RR.gramSchmidt(t);return e[0]>e[1]&&(r=r.transpose()),sI(n.gain,r)}))},n.getConfig=function(){return{gain:this.gain,seed:this.seed}},t}(lD);ID.className="Orthogonal",BN(ID);var SD={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function TD(e,t){return void 0===t&&(t={}),a_(e,PN.getMap().classNameMap,t,"initializer")}function CD(e){return n_(e)}function ED(e){if("string"==typeof e){var t=e in SD?SD[e]:e;if("GlorotNormal"===t)return new bD;if("GlorotUniform"===t)return new yD;if("HeNormal"===t)return new xD;if("HeUniform"===t)return new wD;if("LeCunNormal"===t)return new kD;if("LeCunUniform"===t)return new ND;var n={};return n.className=t,n.config={},TD(n)}return e instanceof lD?e:TD(e)}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */var RD={__proto__:null,zeros:function(){return new cD},ones:function(){return new pD},constant:function(e){return new fD(e)},randomUniform:function(e){return new hD(e)},randomNormal:function(e){return new dD(e)},truncatedNormal:function(e){return new mD(e)},identity:function(e){return new vD(e)},varianceScaling:function(e){return new gD(e)},glorotUniform:function(e){return new yD(e)},glorotNormal:function(e){return new bD(e)},heNormal:function(e){return new xD(e)},heUniform:function(e){return new wD(e)},leCunNormal:function(e){return new kD(e)},leCunUniform:function(e){return new ND(e)},orthogonal:function(e){return new ID(e)}},AD=0;
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */function FD(){return AD++}var _D={};function DD(e){return void 0===e&&(e=""),e in _D||(_D[e]=0),_D[e]+=1,e+_D[e].toString()}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */function OD(e){return Array.isArray(e)&&Array.isArray(e[0])}function MD(e){return 0===e.length?[]:Array.isArray(e[0])?e:[e]}function LD(e){var t;if(Array.isArray(e)){if(1!==e.length)throw new HF("Expected Tensor length to be 1; got "+e.length);t=e[0]}else t=e;return t}function zD(e){if(Array.isArray(e)&&Array.isArray(e[0])){if(1===e.length)return e[0];throw new HF("Expected exactly 1 Shape; got "+e.length)}return e}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */function PD(e){for(var t,n=0,r=Bv(e);!(t=r()).done;){var a=t.value;0===a.shape.length?n+=1:n+=a.shape.reduce((function(e,t){return e*t}))}return n}var BD="Variable",WD=function(){function e(e,t,n,r,a){void 0===t&&(t="float32"),void 0===n&&(n=BD),void 0===r&&(r=!0),void 0===a&&(a=null),this.dtype=t??"float32",this.shape=e.shape,this.id=FD(),n=n??BD,this.originalName=L_(n),this.name=z_(this.originalName),this.trainable_=r,this.constraint=a,this.val=YC(e,this.trainable_,this.name,this.dtype)}var t=e.prototype;return t.read=function(){return this.assertNotDisposed(),this.val},t.write=function(e){return this.assertNotDisposed(),function(e,t){if(e.shape.toString()!==t.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(e.shape)+" vs. "+JSON.stringify(t.shape))}(this.val,e),this.val.id!==e.id&&(this.val.assign(e),null!=this.constraint&&this.val.assign(this.constraint.apply(this.val))),this},t.dispose=function(){this.assertNotDisposed(),this.val.dispose()},t.assertNotDisposed=function(){if(this.val.isDisposed)throw new Error("LayersVariable "+this.name+" is already disposed.")},Rv(e,[{key:"trainable",get:function(){return this.trainable_},set:function(e){this.trainable_=e,this.val.trainable=e}}]),e}();function VD(e){return e.map((function(e){return e.read()}))}function UD(e){e.forEach((function(e){e[0].write(e[1])}))}var GD=function(e){this.dtype=e.dtype,this.shape=e.shape,null!=e.shape?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}},jD=function(e,t,n,r,a,i,o){this.dtype=e,this.shape=t,this.sourceLayer=n,this.inputs=r,this.callArgs=a,this.outputTensorIndex=o,this.id=FD(),null!=i&&(this.originalName=L_(i),this.name=z_(this.originalName)),this.rank=t.length},HD=0,qD=function(){function e(e,t){this.callArgs=t,this.id=HD++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(var n,r=Bv(e.inboundLayers);!(n=r()).done;){var a=n.value;null!=a&&a.outboundNodes.push(this)}e.outboundLayer.inboundNodes.push(this)}return e.prototype.getConfig=function(){for(var e,t=[],n=Bv(this.inboundLayers);!(e=n()).done;){var r=e.value;null!=r?t.push(r.name):t.push(null)}return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:t,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}},e}(),KD=0,XD=function(e){function t(t){var n;void 0===t&&(t={}),(n=e.call(this)||this)._callHook=null,n._addedWeightNames=[],n._stateful=!1,n.id=KD++,n.activityRegularizer=null,n.inputSpec=null,n.supportsMasking=!1,n._trainableWeights=[],n._nonTrainableWeights=[],n._losses=[],n._updates=[],n._built=!1,n.inboundNodes=[],n.outboundNodes=[];var r=t.name;if(!r){var a=n.getClassName();r=$F(a)+"_"+DD(a)}if(n.name=r,n.trainable_=null==t.trainable||t.trainable,null!=t.inputShape||null!=t.batchInputShape){var i;if(null!=t.batchInputShape)i=t.batchInputShape;else if(null!=t.inputShape){var o=null;null!=t.batchSize&&(o=t.batchSize),i=[o].concat(t.inputShape)}n.batchInputShape=i;var s=t.dtype;null==s&&(s=t.inputDType),null==s&&(s="float32"),n.dtype=s}return null!=t.weights?n.initialWeights=t.weights:n.initialWeights=null,n._refCount=null,n.fastWeightInitDuringBuild=!1,n}Av(t,e),t.nodeKey=function(e,t){return e.name+"_ib-"+t.toString()};var n=t.prototype;return n.getNodeAtIndex=function(e,t){if(0===this.inboundNodes.length)throw new jF("The layer has never been called and thus has no defined "+t+".");if(this.inboundNodes.length<=e)throw new HF("Asked to get "+t+" at node "+e+", but the layer has only "+this.inboundNodes.length+" inbound nodes.");return this.inboundNodes[e]},n.getInputAt=function(e){return ZF(this.getNodeAtIndex(e,"input").inputTensors)},n.getOutputAt=function(e){return ZF(this.getNodeAtIndex(e,"output").outputTensors)},n.calculateLosses=function(){return this.losses.map((function(e){return e()}))},n.resetStates=function(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")},n.assertInputCompatibility=function(e){if(e=QF(e),null!=this.inputSpec&&0!==this.inputSpec.length){var t=QF(this.inputSpec);if(e.length!==t.length)throw new HF("Layer "+this.name+" expects "+t.length+" inputs, but it received "+e.length+" input tensors. Input received: "+e);for(var n=0;n<e.length;n++){var r=e[n],a=t[n];if(null!=a){var i=r.rank;if(null!=a.ndim&&i!==a.ndim)throw new HF("Input "+n+" is incompatible with layer "+this.name+": expected ndim="+a.ndim+", found ndim="+i);if(null!=a.maxNDim&&i>a.maxNDim)throw new HF("Input "+n+" is incompatible with layer "+this.name+": expected max_ndim="+a.maxNDim+", found ndim="+i);if(null!=a.minNDim&&i<a.minNDim)throw new HF("Input "+n+" is incompatible with layer "+this.name+": expected min_ndim="+a.minNDim+", found ndim="+i+".");if(null!=a.dtype&&r.dtype!==a.dtype)throw new HF("Input "+n+" is incompatible with layer "+this.name+" : expected dtype="+a.dtype+", found dtype="+r.dtype+".");if(a.axes){var o=r.shape;for(var s in a.axes){var u=Number(s),l=a.axes[s],c=u>=0?o[u]:o[o.length+u];if(null!=l&&-1===[l,null].indexOf(c))throw new HF("Input "+n+" is incompatible with layer "+this.name+": expected axis "+u+" of input shape to have value "+l+" but got shape "+o+".")}}if(null!=a.shape)for(var p=0;p<a.shape.length;++p){var f=a.shape[p],h=r.shape[p];if(null!=f&&null!=h&&f!==h)throw new HF("Input "+n+" is incompatible with layer "+this.name+": expected shape="+a.shape+", found shape="+r.shape+".")}}}}},n.call=function(e,t){return e},n.invokeCallHook=function(e,t){null!=this._callHook&&this._callHook(e,t)},n.setCallHook=function(e){this._callHook=e},n.clearCallHook=function(){this._callHook=null},n.apply=function(e,t){var n=this;t=t||{},this.assertNotDisposed();for(var r,a=QF(e),i=!0,o=Bv(a);!(r=o()).done;){if(!(r.value instanceof jD)){i=!1;break}}for(var s,u=!0,l=Bv(a);!(s=l()).done;){if(s.value instanceof jD){u=!1;break}}if(i===u)throw new HF("Arguments to apply() must be all SymbolicTensors or all Tensors");return M_(this.name,(function(){if(!n.built){n.assertInputCompatibility(e);for(var r,i=[],o=Bv(QF(e));!(r=o()).done;){var s=r.value;i.push(s.shape)}n.build(ZF(i)),n.built=!0,n.initialWeights&&n.setWeights(n.initialWeights),null===n._refCount&&u&&(n._refCount=1)}if(n.assertInputCompatibility(e),u){for(var l,c=n.call(e,t),p=[],f=Bv(QF(c));!(l=f()).done;){var h=l.value;-1!==a.indexOf(h)&&(h=h.clone()),p.push(h)}if(c=ZF(p),null!=n.activityRegularizer)throw new qF("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return c}var d,m=function(e){e=QF(e);for(var t,n=[],r=Bv(e);!(t=r()).done;){var a=t.value;n.push(a.shape)}return ZF(n)}(e),v=n.computeOutputShape(m),g="float32";if(n.warnOnIncompatibleInputShape(Array.isArray(e)?m[0]:m),d=null!=v&&v.length>0&&Array.isArray(v[0])?v.map((function(r,a){return new jD(g,r,n,QF(e),t,n.name,a)})):new jD(g,v,n,QF(e),t,n.name),n.addInboundNode(e,d,null,null,m,v,t),n._refCount++,null!=n.activityRegularizer)throw new qF("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return d}))},n.warnOnIncompatibleInputShape=function(e){if(null!=this.batchInputShape)if(e.length!==this.batchInputShape.length)console.warn("The rank of the input tensor provided (shape: "+JSON.stringify(e)+") does not match that of the batchInputShape ("+JSON.stringify(this.batchInputShape)+") of the layer "+this.name);else{var t=!1;this.batchInputShape.forEach((function(n,r){null!=n&&null!=e[r]&&e[r]!==n&&(t=!0)})),t&&console.warn("The shape of the input tensor ("+JSON.stringify(e)+") does not match the expectation of layer "+this.name+": "+JSON.stringify(this.batchInputShape))}},n.countParams=function(){if(!this.built)throw new jF("You tried to call countParams() on "+this.name+", but the layer is not built yet. Build it first by calling build(batchInputShape).");return PD(this.weights)},n.build=function(e){this.built=!0},n.getWeights=function(e){return void 0===e&&(e=!1),VD(e?this.trainableWeights:this.weights)},n.setWeights=function(e){var t=this;QN((function(){var n=t.weights;if(n.length!==e.length)throw new HF('You called setWeights(weights) on layer "'+t.name+'" with a weight list of length '+e.length+", but the layer was expecting "+n.length+" weights. Provided weights: "+e+"...");if(0!==n.length){for(var r=[],a=VD(n),i=0;i<a.length;++i){var o=a[i],s=n[i],u=e[i];if(!Qv(o.shape,u.shape))throw new HF("Layer weight shape "+o.shape+" not compatible with provided weight shape "+u.shape);r.push([s,u])}UD(r)}}))},n.addWeight=function(e,t,n,r,a,i,o){if(-1!==this._addedWeightNames.indexOf(e))throw new HF("Duplicate weight name "+e+" for layer "+this.name);this._addedWeightNames.push(e),null==n&&(n="float32"),this.fastWeightInitDuringBuild&&(r=ED("zeros"));var s=r.apply(t,n),u=new WD(s,n,e,i,o);return s.dispose(),null!=a&&this.addLoss((function(){return a.apply(u.read())})),null==i&&(i=!0),i?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u},n.setFastWeightInitDuringBuild=function(e){this.fastWeightInitDuringBuild=e},n.addLoss=function(e){var t;null==e||Array.isArray(e)&&0===e.length||(e=QF(e),void 0!==this._losses&&null!==this._losses&&(t=this.losses).push.apply(t,e))},n.computeOutputShape=function(e){return e},n.computeMask=function(e,t){var n=this;if(!this.supportsMasking){if(null!=t){if(!Array.isArray(t))throw new TypeError("Layer "+this.name+" does not support masking, but was passed an inputMask.");t.forEach((function(e){if(null!=e)throw new TypeError("Layer "+n.name+" does not support masking, but was passed an inputMask.")}))}return null}return t},n.addInboundNode=function(e,t,n,r,a,i,o){void 0===o&&(o=null);var s=QF(e);t=QF(t),n=QF(n),r=QF(r),a=MD(a),i=MD(i);for(var u,l=[],c=[],p=[],f=Bv(s);!(u=f()).done;){var h=u.value;l.push(h.sourceLayer),c.push(h.nodeIndex),p.push(h.tensorIndex)}new qD({outboundLayer:this,inboundLayers:l,nodeIndices:c,tensorIndices:p,inputTensors:s,outputTensors:t,inputMasks:n,outputMasks:r,inputShapes:a,outputShapes:i},o);for(var d=0;d<t.length;d++)t[d].sourceLayer=this,t[d].nodeIndex=this.inboundNodes.length-1,t[d].tensorIndex=d},n.getConfig=function(){var e={name:this.name,trainable:this.trainable};return null!=this.batchInputShape&&(e.batchInputShape=this.batchInputShape),null!=this.dtype&&(e.dtype=this.dtype),e},n.disposeWeights=function(){return this.weights.forEach((function(e){return e.dispose()})),this.weights.length},n.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Layer '"+this.name+"' is already disposed.")},n.dispose=function(){if(!this.built)throw new Error("Cannot dispose Layer "+this.name+" because it has not been built yet.");if(null===this._refCount)throw new Error("Cannot dispose Layer "+this.name+" because it has not been used yet.");this.assertNotDisposed();var e=0;return 0==--this._refCount&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}},Rv(t,[{key:"input",get:function(){if(this.inboundNodes.length>1)throw new GF("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use `getInputAt(nodeIndex)` instead.');if(0===this.inboundNodes.length)throw new GF("Layer "+this.name+" is not connected, no input to return.");return ZF(this.getNodeAtIndex(0,"input").inputTensors)}},{key:"output",get:function(){if(0===this.inboundNodes.length)throw new GF("Layer "+this.name+" has no inbound nodes.");if(this.inboundNodes.length>1)throw new GF("Layer "+this.name+' has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use `getOutputAt(nodeIndex)` instead.');return ZF(this.getNodeAtIndex(0,"output").outputTensors)}},{key:"losses",get:function(){return this._losses}},{key:"updates",get:function(){return this._updates}},{key:"built",get:function(){return this._built},set:function(e){this._built=e}},{key:"trainable",get:function(){return this.trainable_},set:function(e){this._trainableWeights.forEach((function(t){return t.trainable=e})),this.trainable_=e}},{key:"trainableWeights",get:function(){return this.trainable_?this._trainableWeights.filter((function(e){return e.trainable})):[]},set:function(e){this._trainableWeights=e}},{key:"nonTrainableWeights",get:function(){return this.trainable?this._trainableWeights.filter((function(e){return!e.trainable})).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)},set:function(e){this._nonTrainableWeights=e}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){return this._stateful}},{key:"outputShape",get:function(){if(null==this.inboundNodes||0===this.inboundNodes.length)throw new GF("The layer "+this.name+" has never been called and thus has no defined output shape.");for(var e,t=[],n=Bv(this.inboundNodes);!(e=n()).done;){var r=e.value,a=JSON.stringify(r.outputShapes);-1===t.indexOf(a)&&t.push(a)}if(1===t.length){var i=this.inboundNodes[0].outputShapes;return Array.isArray(i)&&Array.isArray(i[0])&&1===i.length?i[0]:i}throw new GF("The layer "+this.name+' has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.')}}]),t}(zN);function YD(e,t,n){if((null==t||null!=n&&n>0)&&(t=e.sourceLayer,n=e.nodeIndex),0===t.inboundNodes.length)return[e];var r=t.inboundNodes[n];if(0===r.inboundLayers.length)return r.inputTensors;for(var a=[],i=0;i<r.inboundLayers.length;i++)for(var o,s=Bv(YD(r.inputTensors[i],r.inboundLayers[i],r.nodeIndices[i]));!(o=s()).done;){var u=o.value;-1===a.indexOf(u)&&a.push(u)}return a}var JD,ZD=function(e){function t(t){var n;if(n=e.call(this,{dtype:t.dtype,name:null!=t.name?t.name:DD("input").toString()})||this,null==t.batchSize&&(t.batchSize=null),null==t.sparse&&(t.sparse=!1),n.trainable=!1,n.built=!0,n.sparse=t.sparse,null!=t.inputShape&&null!=t.batchInputShape)throw new HF("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");var r=t.batchInputShape;if(null==r){if(null==t.inputShape)throw new HF("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");r=[t.batchSize].concat(t.inputShape)}else if(null!=t.batchSize)throw new HF("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");var a=t.dtype||"float32";n.batchInputShape=r,n.dtype=a,n.inputSpec=[{shape:r}];var i=new jD(n.dtype,n.batchInputShape,Lv(n),[],{},n.name);return i.nodeIndex=0,i.tensorIndex=0,new qD({outboundLayer:Lv(n),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[i],outputTensors:[i],inputMasks:[null],outputMasks:[null],inputShapes:[r],outputShapes:[r]}),n}Av(t,e);var n=t.prototype;return n.apply=function(e,t){throw new HF("Cannot pass any input to an InputLayer's apply() method. InputLayer name: "+this.name)},n.dispose=function(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}},n.getConfig=function(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}},t}(XD);function QD(e){if(null==e.batchShape&&null==e.shape)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(null!=e.batchShape&&null!=e.shape)throw new HF("Please provide either a `shape` or `batchShape` argument to Input, but not both.");var t=e.batchShape;null!=e.shape&&null==t&&(t=[null].concat(e.shape));var n=e.dtype;return null==n&&(n="float32"),new ZD({batchInputShape:t,name:e.name,dtype:n,sparse:e.sparse}).inboundNodes[0].outputTensors[0]}function $D(e){return eO.apply(this,arguments)}function eO(){return eO=Cv(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return");case 2:for(i in n=[],r=[],a=[],t)"number"!=typeof(o=t[i])&&(s=o,n.push(s.data()),r.push(i),a.push(s));if(!(n.length>0)){e.next=12;break}return e.next=9,Promise.all(n);case 9:for(u=e.sent,l=0;l<u.length;++l)t[r[l]]=u[l][0];$N(a);case 12:case"end":return e.stop()}}),e)}))),eO.apply(this,arguments)}function tO(e){if(null!=e)for(var t in e){var n=e[t];"number"!=typeof n&&n.dispose()}}ZD.className="InputLayer",BN(ZD),function(e){e[e.SILENT=0]="SILENT",e[e.VERBOSE=1]="VERBOSE"}(JD||(JD={}));var nO=function(){function e(){this.validationData=null}var t=e.prototype;return t.setParams=function(e){this.params=e},t.onEpochBegin=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.onEpochEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.onBatchBegin=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.onBatchEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.onTrainBegin=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.onTrainEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.setModel=function(e){},e}(),rO=function(){function e(e,t){void 0===t&&(t=10),null==e&&(e=[]),this.callbacks=e,this.queueLength=t}var t=e.prototype;return t.append=function(e){this.callbacks.push(e)},t.setParams=function(e){for(var t,n=Bv(this.callbacks);!(t=n()).done;){t.value.setParams(e)}},t.setModel=function(e){for(var t,n=Bv(this.callbacks);!(t=n()).done;){t.value.setModel(e)}},t.onEpochBegin=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Bv(this.callbacks);case 2:if((a=r()).done){e.next=8;break}return i=a.value,e.next=6,i.onEpochBegin(t,n);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.onEpochEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Bv(this.callbacks);case 2:if((a=r()).done){e.next=8;break}return i=a.value,e.next=6,i.onEpochEnd(t,n);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.onBatchBegin=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Bv(this.callbacks);case 2:if((a=r()).done){e.next=8;break}return i=a.value,e.next=6,i.onBatchBegin(t,n);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.onBatchEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==n&&(n={}),r=Bv(this.callbacks);case 2:if((a=r()).done){e.next=8;break}return i=a.value,e.next=6,i.onBatchEnd(t,n);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.onTrainBegin=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Bv(this.callbacks);case 2:if((r=n()).done){e.next=8;break}return a=r.value,e.next=6,a.onTrainBegin(t);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.onTrainEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t&&(t={}),n=Bv(this.callbacks);case 2:if((r=n()).done){e.next=8;break}return a=r.value,e.next=6,a.onTrainEnd(t);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),e}(),aO=function(e){function t(){return e.call(this)||this}Av(t,e);var n=t.prototype;return n.onEpochBegin=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.seen=0,this.totals={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.onBatchEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i in null==n&&(n={}),r=null==n.size?0:n.size,this.seen+=r,a=function(e){var t=n[e];if("number"==typeof t)o.totals.hasOwnProperty(e)||(o.totals[e]=0),o.totals[e]=o.totals[e]+t*r;else{var a;e in o.totals?a=o.totals[e]:o.totals[e]=0;var i=QN((function(){return aI(o.totals[e],sI(t,r))}));o.totals[e]=i,null!=a&&a.dispose()}},n)a(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.onEpochEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n){e.next=9;break}r=function(){var e=i.value;if(null==o.totals[e])return"continue";"number"==typeof o.totals[e]?n[e]=o.totals[e]/o.seen:QN((function(){var t=sI(oI(1,o.seen),o.totals[e]);n[e]=t,o.totals[e].dispose(),eI(n[e])}))},a=Bv(this.params.metrics);case 3:if((i=a()).done){e.next=9;break}if("continue"!==r()){e.next=7;break}return e.abrupt("continue",7);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t}(nO),iO=function(e){function t(){return e.apply(this,arguments)||this}Av(t,e);var n=t.prototype;return n.onTrainBegin=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.epoch=[],this.history={};case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.onEpochEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r in null==n&&(n={}),this.epoch.push(t),n)null==this.history[r]&&(this.history[r]=[]),this.history[r].push(n[r]);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.syncData=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in t=[],n=[],r=[],this.history)for(i=this.history[a],o=0;o<i.length;++o)"number"!=typeof i[o]&&(s=i[o],t.push(s.data()),n.push(a),r.push(o));return e.next=6,Promise.all(t);case 6:for(u=e.sent,l=0;l<u.length;++l)this.history[n[l]][r[l]].dispose(),this.history[n[l]][r[l]]=u[l][0];case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(nO),oO=function(e){function t(t,n){var r;if((r=e.call(this)||this).currentEpoch=0,r.yieldEvery=n||"auto","auto"===r.yieldEvery&&(r.yieldEvery=125),"never"===r.yieldEvery&&null!=t.onYield)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");return vg(r.yieldEvery)&&(r.maybeWait=function(e,t){var n,r=Wx();return function(){var a=Wx();return a-r<t?n:(r=a,n=e.apply(void 0,arguments))}}(r.maybeWait.bind(Lv(r)),r.yieldEvery)),r.trainBegin=t.onTrainBegin,r.trainEnd=t.onTrainEnd,r.epochBegin=t.onEpochBegin,r.epochEnd=t.onEpochEnd,r.batchBegin=t.onBatchBegin,r.batchEnd=t.onBatchEnd,r.yield=t.onYield,r}Av(t,e);var n=t.prototype;return n.maybeWait=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],null==this.yield){e.next=5;break}return e.next=4,$D(r);case 4:a.push(this.yield(t,n,r));case 5:return a.push(UR()),e.next=8,Promise.all(a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.onEpochBegin=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentEpoch=t,null==this.epochBegin){e.next=6;break}return e.next=4,$D(n);case 4:return e.next=6,this.epochBegin(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.onEpochEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.epochEnd){e.next=5;break}return e.next=4,$D(n);case 4:r.push(this.epochEnd(t,n));case 5:return"epoch"===this.yieldEvery&&r.push(UR()),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.onBatchBegin=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.batchBegin){e.next=5;break}return e.next=3,$D(n);case 3:return e.next=5,this.batchBegin(t,n);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.onBatchEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],null==this.batchEnd){e.next=5;break}return e.next=4,$D(n);case 4:r.push(this.batchEnd(t,n));case 5:return"batch"===this.yieldEvery?r.push(UR()):vg(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,t,n)),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.onTrainBegin=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainBegin){e.next=5;break}return e.next=3,$D(t);case 3:return e.next=5,this.trainBegin(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.onTrainEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.trainEnd){e.next=5;break}return e.next=3,$D(t);case 3:return e.next=5,this.trainEnd(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(nO);function sO(e,t){return null==e&&(e={}),e instanceof nO?[e]:Array.isArray(e)&&e[0]instanceof nO?e:QF(e).map((function(e){return new oO(e,t)}))}var uO=function(){function e(){}return e.registerCallbackConstructor=function(t,n){Kv(t>=0&&Number.isInteger(t),(function(){return"Verbosity level is expected to be an integer >= 0, but got "+t})),e.checkForDuplicate(n),null==e.constructors[t]&&(e.constructors[t]=[]),e.constructors[t].push(n)},e.checkForDuplicate=function(t){for(var n in e.constructors){e.constructors[+n].forEach((function(e){if(e===t)throw new HF("Duplicate callback constructor.")}))}},e.clear=function(){e.constructors={}},e.createCallbacks=function(t){var n=[];for(var r in e.constructors){var a=+r;t>=a&&n.push.apply(n,e.constructors[a])}return n.map((function(e){return new e}))},e}();function lO(e,t,n,r,a,i,o,s,u){var l=new iO,c=[new aO].concat(uO.createCallbacks(t));null!=e&&c.push.apply(c,e),c.push(l);var p=new rO(c);return p.setParams({epochs:n,initialEpoch:r,samples:a,steps:i,batchSize:o,verbose:t,doValidation:s,metrics:u}),{callbackList:p,history:l}}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */function cO(e,t,n){return void 0===t&&(t={}),void 0===n&&(n=!1),a_(e,PN.getMap().classNameMap,t,"layer",n)}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */function pO(e,t){return QN((function(){"float32"!==e.dtype&&(e=e.asType("float32"));var n=tT(nD(e),t,!0),r=FS(n.shape,UF()),a=MC(bT(n,r));return oI(e,a)}))}function fO(e,t){return QN((function(){return xT(nD(eT(t,e)),-1)}))}function hO(e,t){return QN((function(){return xT(uI(eT(t,e)),-1)}))}function dO(e,t){return QN((function(){var n=eT(e,t),r=JI(uI(e),UF(),Number.MAX_VALUE),a=uI(oI(n,r));return sI(100,xT(a,-1))}))}function mO(e,t){return QN((function(){var n=JI(t,UF(),Number.MAX_VALUE),r=HS(aI(1,n)),a=JI(e,UF(),Number.MAX_VALUE),i=HS(aI(1,a));return xT(nD(eT(r,i)),-1)}))}function vO(e,t,n){return void 0===n&&(n=!1),QN((function(){if(n)t=RC(t);else{var r=tT(t,t.shape.length-1,!0);t=oI(t,r)}return t=JI(t,UF(),1-UF()),JS(tT(sI(e.toFloat(),HS(t)),t.shape.length-1))}))}function gO(e,t,n){return void 0===n&&(n=!1),QN((function(){var r,a,i=_S((r=e,a=[W_(r.shape)],r.reshape(a))).toInt(),o=(t=JI(t,UF(),1-UF())).shape;return vO(oN(i,o[o.length-1]).reshape(o),t,n)}))}function yO(e,t){return QN((function(){var n;return n=JI(t,UF(),1-UF()),n=HS(oI(n,eT(1,n))),xT(function(e,t){if(!Qv(e.shape,t.shape))throw new HF("logits and labels must have the same shape, but got shapes "+JSON.stringify(e.shape)+" and "+JSON.stringify(t.shape));return QN((function(){var n=t.relu(),r=t.abs().neg();return n.sub(t.mul(e)).add(r.exp().log1p())}))}(e,n),-1)}))}function bO(e,t){return QN((function(){var n=JI(e,UF(),1),r=JI(t,UF(),1);return tT(sI(e,HS(oI(n,r))),-1)}))}function xO(e,t){return QN((function(){var n=pO(e,-1),r=pO(t,-1),a=sI(n,r);return JS(tT(a,-1))}))}uO.constructors={};var wO={meanSquaredError:fO,meanAbsoluteError:hO,meanAbsolutePercentageError:dO,meanSquaredLogarithmicError:mO,squaredHinge:function(e,t){return QN((function(){var n=bT(0,eT(1,sI(e,t)));return xT(nD(n),-1)}))},hinge:function(e,t){return QN((function(){var n=bT(0,eT(1,sI(e,t)));return xT(n,-1)}))},categoricalHinge:function(e,t){return QN((function(){var n=tT(sI(e,t),-1),r=$S(sI(eT(1,e),t),-1);return bT(0,aI(1,eT(r,n)))}))},logcosh:function(e,t){return QN((function(){var n=Math.log(2),r=eT(t,e),a=eT(aI(r,ZS(sI(-2,r))),n);return xT(a,-1)}))},categoricalCrossentropy:vO,sparseCategoricalCrossentropy:gO,binaryCrossentropy:yO,kullbackLeiblerDivergence:bO,poisson:function(e,t){return QN((function(){var n=HS(aI(UF(),t));return xT(eT(t,sI(e,n)),-1)}))},cosineProximity:xO};function kO(e){if("string"==typeof e){if(e in wO)return wO[e];var t="Unknown loss "+e;throw e.toLowerCase().includes("softmaxcrossentropy")&&(t="Unknown loss "+e+'. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy'),new HF(t)}return e}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */function NO(e,t){return QN((function(){var n=sI(.5,_T(t)),r=H_(OS(t,n),e.dtype);return xT(bS(e,r),-1)}))}function IO(e,t){return QN((function(){return H_(bS(dI(e,-1),dI(t,-1)),"float32")}))}function SO(e,t){return QN((function(){return fT(e.equal(1),t.equal(1)).sum().cast("float32")}))}function TO(e,t){return QN((function(){var n=SO(e,t),r=function(e,t){return QN((function(){return fT(e.equal(0),t.equal(1)).sum().cast("float32")}))}(e,t),a=n.add(r);return xS(OS(a,0),n.div(a),0).cast("float32")}))}function CO(e,t){return QN((function(){var n=SO(e,t),r=function(e,t){return QN((function(){return fT(e.equal(1),t.equal(0)).sum().cast("float32")}))}(e,t),a=n.add(r);return xS(OS(a,0),n.div(a),0).cast("float32")}))}function EO(e,t){return yO(e,t)}function RO(e,t){return e.rank===t.rank&&(e=e.squeeze([e.rank-1])),(t=t.argMax(-1)).dtype!==e.dtype&&(t=t.asType(e.dtype)),bS(e,t).asType("float32")}var AO=vO,FO=gO,_O={binaryAccuracy:NO,categoricalAccuracy:IO,precision:TO,categoricalCrossentropy:AO,sparseCategoricalCrossentropy:FO,mse:fO,MSE:fO,mae:hO,MAE:hO,mape:dO,MAPE:dO,cosine:xO};function DO(e){if("string"==typeof e&&e in _O)return _O[e];if("string"!=typeof e&&null!=e)return e;throw new HF("Unknown metric "+e)}function OO(e){if(YF(null!==e,"Unknown LossOrMetricFn "+e),"string"==typeof e)return e;for(var t,n=0,r=Object.keys(wO);n<r.length;n++){var a=r[n];if(wO[a]===e){t=a;break}}if(void 0!==t)return t;for(var i=0,o=Object.keys(_O);i<o.length;i++){var s=o[i];if(_O[s]===e){t=s;break}}return void 0!==t?t:e.name}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */
var MO=1048576;function LO(e,t,n){if(void 0===n&&(n=!1),null==e||"object"!=typeof e||Object.getPrototypeOf(e)!==Object.prototype||!zO(e))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){var r=JSON.stringify(e);r.length>MO&&console.warn('User-defined metadata of model "'+t+'" is too large in size (length='+r.length+" when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= "+MO+".")}}function zO(e){if(null===e)return!0;if("object"==typeof e){if(Object.getPrototypeOf(e)===Object.prototype){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("string"!=typeof r)return!1;if(!zO(e[r]))return!1}return!0}if(Array.isArray(e)){for(var a,i=Bv(e);!(a=i()).done;){if(!zO(a.value))return!1}return!0}return!1}var o=typeof e;return"string"===o||"number"===o||"boolean"===o}function PO(e,t,n,r){void 0===r&&(r=console.log);var a,i=function(e){var t=!0,n=[],r=[];for(var a in e.nodesByDepth)n.push(e.nodesByDepth[a]);for(var i=0,o=n;i<o.length;i++){var s=o[i];if(s.length>1||1===s.length&&s[0].inboundLayers.length>1){t=!1;break}r.push.apply(r,s)}if(t)for(var u,l=Bv(e.layers);!(u=l()).done;){for(var c,p=!1,f=Bv(u.value.inboundNodes);!(c=f()).done;){var h=c.value;if(-1!==r.indexOf(h)){if(p){t=!1;break}p=!0}}if(!t)break}return t}(e),o=["Layer (type)","Output shape","Param #"];if(i?(t=t||65,n=n||[.45,.85,1]):(t=t||98,n=n||[.33,.55,.67,1]),n[n.length-1]<=1&&(n=n.map((function(e){return Math.floor(t*e)}))),!i)for(var s in o.push("Receives inputs"),a=[],e.nodesByDepth){var u;(u=a).push.apply(u,e.nodesByDepth[s])}r("_".repeat(t)),BO(o,n,r),r("=".repeat(t));for(var l=e.layers,c=0;c<l.length;++c)i?WO(l[c],n,r):VO(l[c],n,a,r),r((c===l.length-1?"=":"_").repeat(t));e.checkTrainableWeightsConsistency();var p=function(e){var t;t=null!=e.collectedTrainableWeights?PD(e.collectedTrainableWeights):PD(e.trainableWeights);return t}(e),f=PD(e.nonTrainableWeights);r("Total params: "+(p+f)),r("Trainable params: "+p),r("Non-trainable params: "+f),r("_".repeat(t))}function BO(e,t,n){void 0===n&&(n=console.log);for(var r="",a=0;a<e.length;++a)a>0&&(r=r.slice(0,r.length-1)+" "),r=(r+=e[a]).slice(0,t[a]),r+=" ".repeat(t[a]-r.length);n(r)}function WO(e,t,n){var r;try{r=JSON.stringify(e.outputShape)}catch(e){r="multiple"}BO([e.name+" ("+e.getClassName()+")",r,e.countParams().toString()],t,n)}function VO(e,t,n,r){var a;try{a=JSON.stringify(e.outputShape)}catch(e){a="multiple"}for(var i,o=[],s=Bv(e.inboundNodes);!(i=s()).done;){var u=i.value;if(!(null!=n&&n.length>0&&-1===n.indexOf(u)))for(var l=0;l<u.inboundLayers.length;++l){var c=u.inboundLayers[l].name,p=u.nodeIndices[l],f=u.tensorIndices[l];o.push(c+"["+p+"]["+f+"]")}}var h=e.name,d=e.getClassName(),m=0===o.length?"":o[0];BO([h+" ("+d+")",a,e.countParams().toString(),m],t,r);for(var v=1;v<o.length;++v)BO(["","","",o[v]],t,r)}
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */function UO(e,t,n){return("inboundNodes"===e||"outputLayers"===e||"inputLayers"===e)&&0===t&&"string"==typeof n}function GO(e,t){if(null===e)return null;if("string"==typeof e)return e_(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];UO(t,a,i)?n.push(i):n.push(GO(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l];if("name"===l&&"string"==typeof c)o[l]=c;else{var p=e_(l);o[p]=GO(c,p)}}return o}function jO(e,t){if(null==e)return null;if("string"==typeof e)return $F(e);if("number"==typeof e||"boolean"==typeof e)return e;if(e instanceof Array){for(var n=[],r=e.length,a=0;a<r;++a){var i=e[a];UO(t,a,i)?n.push(i):n.push(jO(i,t))}return n}for(var o={},s=0,u=Object.keys(e);s<u.length;s++){var l=u[s],c=e[l],p=$F(l);o[p]="name"!==l&&"className"!==l||"string"!=typeof c?jO(c,l):c}return o}
/** @license See the LICENSE file. */var HO="2.8.3";var qO=function(){function e(t){if(this.id2Value={},this.id2Mask={},this.name2Id={},t instanceof e)for(var n in t.id2Value)this.id2Value[n]=t.id2Value[n],n in t.id2Mask&&(this.id2Mask[n]=t.id2Mask[n]);else{if(null==t)return;for(var r,a=Bv(t);!(r=a()).done;){var i=r.value;this.add(i.key,i.value)}}}var t=e.prototype;return t.add=function(e,t,n){if(null!=this.id2Value[e.id])throw new HF("Duplicate key: name="+e.name+", id="+e.id);return this.id2Value[e.id]=function(e,t){if(null==e.dtype||e.dtype===t.dtype)return t;try{return Pk(t,e.dtype)}catch(n){throw new HF("The dtype of the feed ("+t.dtype+") can not be cast to the dtype of the key '"+e.name+"' ("+e.dtype+").")}}(e,t),this.name2Id[e.name]=e.id,null!=n&&(this.id2Mask[e.id]=n),this},t.addFeed=function(e){this.add(e.key,e.value)},t.hasKey=function(e){return null!=this.id2Value[e.id]},t.names=function(){return Object.keys(this.name2Id)},t.getValue=function(e){if(e instanceof jD){if(null==this.id2Value[e.id])throw new HF("Nonexistent key: "+e.name);return this.id2Value[e.id]}var t=this.name2Id[e];if(null==t)throw new HF("Feed dict has no SymbolicTensor name: "+e);return this.id2Value[t]},t.getMask=function(e){if(e instanceof jD){if(null==this.id2Value[e.id])throw new HF("Nonexistent key: "+e.name);return this.id2Mask[e.id]}var t=this.name2Id[e];if(null==t)throw new HF("Feed dict has no SymbolicTensor name: "+e);return this.id2Mask[t]},t.disposeMasks=function(){null!=this.id2Mask&&$N(this.id2Mask)},e}(),KO={},XO={};function YO(e,t,n,r){for(var a,i=null!=n&&n.training,o=Array.isArray(e),s=o?e:[e],u=s.map((function(e){return e.name})),l=[],c=t.names(),p=Bv(u);!(a=p()).done;){var f=a.value;-1!==c.indexOf(f)?l.push(t.getValue(f)):l.push(null)}null!=r&&(r.maxNumTensors=-1/0,r.minNumTensors=1/0);var h,d,m=u.join(",")+"|"+t.names().join(",");if(null==KO[m]){var v=function(e,t){Kv(null!=e&&e.length>0,(function(){return"Expected at least one fetch, got none"}));var n=[],r={};if(1===e.length){var a=ZO(e[0],t);n=a.sorted,r=a.recipientMap}else for(var i,o=new Set,s=Bv(e);!(i=s()).done;){for(var u,l=ZO(i.value,t),c=l.sorted,p=l.recipientMap,f=Bv(c);!(u=f()).done;){var h=u.value;o.has(h.name)||(n.push(h),o.add(h.name))}var d=function(e){null==r[e]&&(r[e]=new Set),p[e].forEach((function(t){return r[e].add(t)}))};for(var m in p)d(m)}return{sorted:n,recipientCounts:JO(r)}}(s,t);h=v.sorted,d=v.recipientCounts,KO[m]=h,XO[m]=d}h=KO[m],d={},i||Object.assign(d,XO[m]);for(var g=new qO(t),y=0;y<h.length;++y){if(null!=r){var b=ZN().numTensors;b>r.maxNumTensors&&(r.maxNumTensors=b),b<r.minNumTensors&&(r.minNumTensors=b)}var x=h[y],w=x.sourceLayer;if(!(w instanceof ZD)){for(var k,N=[],I=[],S=[],T=!1,C=Bv(x.inputs);!(k=C()).done;){var E=k.value,R=g.getValue(E),A=g.getMask(E);N.push(R),I.push(A),null!=A&&(T=!0),i||(d[E.name]--,0!==d[E.name]||t.hasKey(E)||-1!==u.indexOf(E.name)||R.isDisposed||!0===E.sourceLayer.stateful||S.push(R))}T&&((n=n||{}).mask=I[0]);var F=QF(w.apply(N,n)),_=null;w.supportsMasking&&(_=w.computeMask(N,I));for(var D=QO(x),O=Array.isArray(D)?D:[D],M=0;M<O.length;++M){g.hasKey(O[M])||g.add(O[M],F[M],Array.isArray(_)?_[0]:_);var L=u.indexOf(O[M].name);-1!==L&&(l[L]=F[M])}i||$N(S)}}return g.disposeMasks(),o?l:l[0]}function JO(e){var t={};for(var n in e)t[n]=e[n].size;return t}function ZO(e,t){for(var n,r=new Set,a=[],i={},o=Bv(t.names());!(n=o()).done;){var s=n.value;r.add(s)}var u=[],l=[];for(u.push(e);u.length>0;){var c=u[u.length-1];if(r.has(c.name))u.pop();else{var p=l[l.length-1]===u.length-1;if(0===c.inputs.length||p)u.pop(),a.push(c),r.add(c.name),p&&l.pop();else{l.push(u.length-1);for(var f,h=Bv(c.inputs);!(f=h()).done;){var d=f.value;null==i[d.name]&&(i[d.name]=new Set),i[d.name].add(c.name),r.has(d.name)||u.push(d)}}}}return{sorted:a,recipientMap:i}}function QO(e){var t;if(1===e.sourceLayer.inboundNodes.length)t=e.sourceLayer.output;else{for(var n=null,r=0;r<e.sourceLayer.inboundNodes.length;++r)for(var a,i=Bv(e.sourceLayer.inboundNodes[r].outputTensors);!(a=i()).done;){if(a.value.id===e.id){n=r;break}}t=e.sourceLayer.getOutputAt(n)}return t}var $O=function(e){function t(n){var r;if((r=e.call(this,{})||this).containerNodes=new Set,r.name=n.name,null==r.name){var a=r.getClassName().toLowerCase();r.name=DD(a)}if(r.supportsMasking=!1,r.trainable_=!0,Array.isArray(n.inputs)?r.inputs=n.inputs.slice():r.inputs=[n.inputs],Array.isArray(n.outputs)?r.outputs=n.outputs.slice():r.outputs=[n.outputs],o_(r.inputs).length!==r.inputs.length)throw new HF("The list of inputs passed to the model is redundant. All inputs should only appear once. Found: "+r.inputs.map((function(e){return e.name})));o_(r.outputs).length!==r.outputs.length&&console.warn("The list of outputs passed to the model is redundant. All outputs should only appear once. Found: "+r.outputs.map((function(e){return e.name}))),r.inputLayers=[],r.inputLayersNodeIndices=[],r.inputLayersTensorIndices=[],r.outputLayers=[],r.outputLayersNodeIndices=[],r.outputLayersTensorIndices=[],r.layers=[],r.internalContainerRefs=[];for(var i,o=Bv(r.outputs);!(i=o()).done;){var s=i.value,u=s.sourceLayer,l=s.nodeIndex,c=s.tensorIndex;r.outputLayers.push(u),r.outputLayersNodeIndices.push(l),r.outputLayersTensorIndices.push(c)}for(var p,f=Bv(r.inputs);!(p=f()).done;){var h=p.value,d=h.sourceLayer,m=h.nodeIndex,v=h.tensorIndex;YF(0===m,"input layer has >1 nodes"),YF(0===v,"input layer has >1 tensors"),r.inputLayers.push(d),r.inputLayersNodeIndices.push(m),r.inputLayersTensorIndices.push(v)}r.inputNames=[],r.outputNames=[],r.feedInputShapes=[],r.feedInputNames=[],r.feedOutputNames=[];for(var g=0;g<r.inputLayers.length;g++){var y=r.inputLayers[g];if(!(y instanceof ZD))throw new TypeError("Input layers to a LayersModel must be InputLayer objects. Received inputs: "+n.inputs+". Input "+g+" (0-based) originates from layer type "+y.getClassName()+".");r.inputNames.push(y.name),r.feedInputShapes.push(y.batchInputShape),r.feedInputNames.push(y.name)}for(var b,x=Bv(r.outputLayers);!(b=x()).done;){var w=b.value;r.outputNames.push(w.name)}r.internalInputShapes=r.inputs.map((function(e){return e.shape})),r.internalOutputShapes=r.outputs.map((function(e){return e.shape}));for(var k,N={},I={},S={},T={},C={},E=[],R=function e(n,a,i,o,s,u){null!=o&&null!=s&&null!=u||(o=n.sourceLayer,s=n.nodeIndex,u=n.tensorIndex);var l=o.inboundNodes[s];if(-1!==i.indexOf(l))throw new jF("The tensor "+n.name+' at layer "'+o.name+'" is part of a cycle.');if(-1===a.indexOf(l)){r.containerNodes.add(t.nodeKey(o,s)),o.id in C||(C[o.id]=Object.keys(C).length),-1===i.indexOf(l)&&i.push(l);for(var c=l.inboundLayers.length,p=0;p<c;p++){e(l.inputTensors[p],a,i,l.inboundLayers[p],l.nodeIndices[p],l.tensorIndices[p])}for(a.push(l);i.indexOf(l)>=0;)i.splice(i.indexOf(l),1);E.push(l)}},A=[],F=[],_=Bv(r.outputs);!(k=_()).done;){R(k.value,A,F)}for(var D,O=Bv(E.slice().reverse());!(D=O()).done;){var M=D.value;I[M.id]=M,M.id in N||(N[M.id]=0);var L=N[M.id],z=null==S[M.outboundLayer.id]?0:S[M.outboundLayer.id];L=Math.max(L,z),S[M.outboundLayer.id]=L,T[M.outboundLayer.id]=M.outboundLayer,N[M.id]=L;for(var P=0;P<M.inboundLayers.length;P++){var B=M.inboundLayers[P],W=M.nodeIndices[P],V=B.inboundNodes[W],U=null==N[V.id]?0:N[V.id];N[V.id]=Math.max(L+1,U),I[V.id]=V}}var G={};for(var j in N){var H=N[j];H in G||(G[H]=[]),G[H].push(I[j])}var q={};for(var K in S){var X=S[K];X in q||(q[X]=[]),q[X].push(T[K])}var Y=Object.keys(q).map((function(e){return parseInt(e,10)})).sort(i_);r.layers=[];for(var J,Z=Bv(Y);!(J=Z()).done;){var Q=q[J.value];Q.sort((function(e,t){var n=C[e.id],r=C[t.id];return n<r?-1:n>r?1:0}));for(var $,ee=Bv(Q);!($=ee()).done;){var te=$.value;te instanceof t&&r.internalContainerRefs.push(te),r.layers.push(te)}}r.layersByDepth=q,Y=Object.keys(G).map((function(e){return parseInt(e,10)})).sort(i_);for(var ne,re=r.inputs.slice(),ae=[],ie=Bv(Y);!(ne=ie()).done;)for(var oe,se=Bv(G[ne.value]);!(oe=se()).done;){var ue=oe.value,le=ue.outboundLayer;if(null!=le){for(var ce,pe=Bv(ue.inputTensors);!(ce=pe()).done;){var fe=ce.value;if(-1===re.indexOf(fe))throw new jF("Graph disconnected: cannot obtain value for tensor "+fe+' at layer "'+le.name+'". The following previous layers were accessed without issue: '+ae)}for(var he,de=Bv(ue.outputTensors);!(he=de()).done;){var me=he.value;re.push(me)}ae.push(le.name)}}r.nodesByDepth=G;for(var ve,ge=r.layers.map((function(e){return e.name})),ye=function(){var e=ve.value,t=ge.filter((function(t){return t===e})).length;if(1!==t)throw new jF('The name "'+e+'" is used '+t+" times in the model. All layer names should be unique. Layer names: "+JSON.stringify(ge))},be=Bv(ge);!(ve=be()).done;)ye();return r.outboundNodes=[],r.inboundNodes=[],new qD({outboundLayer:Lv(r),inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:r.inputs,outputTensors:r.outputs,inputMasks:r.inputs.map((function(e){return null})),outputMasks:r.outputs.map((function(e){return null})),inputShapes:r.inputs.map((function(e){return e.shape})),outputShapes:r.outputs.map((function(e){return e.shape}))}),r.built=!0,r._refCount=1,r}Av(t,e);var n=t.prototype;return n.assertNotDisposed=function(){if(0===this._refCount)throw new Error("Container '"+this.name+"' is already disposed.")},n.dispose=function(){this.assertNotDisposed();var e={refCountAfterDispose:null,numDisposedVariables:0};if(0==--this._refCount){for(var t,n=Bv(this.layers);!(t=n()).done;){var r=t.value;e.numDisposedVariables+=r.dispose().numDisposedVariables}for(var a,i=Bv(this.internalContainerRefs);!(a=i()).done;){var o=a.value;e.numDisposedVariables+=o.dispose().numDisposedVariables}}return e.refCountAfterDispose=this._refCount,e},n.loadWeights=function(e,t){void 0===t&&(t=!0);for(var n,r={},a=0,i=Bv(this.layers);!(n=i()).done;)for(var o,s=Bv(n.value.weights);!(o=s()).done;){var u=o.value;if(null!=r[u.originalName])throw new HF("Duplicate weight name: "+u.originalName);r[u.originalName]=u,a++}var l=[];for(var c in e){var p=c;if(null==r[c]){var f=c.split("/");p=f.slice(0,-2).concat([f[f.length-1]]).join("/")}if(null!=r[p])l.push([r[p],e[c]]);else if(t)throw new HF("Provided weight data has no target variable: "+c);delete r[p]}if(t){var h=[];for(var d in r)h.push(d);if(h.length>0)throw new HF(h.length+" of "+a+" weights are not set: "+h)}UD(l)},n.updatedConfig=function(){var e=this.getConfig(),t={};return t.className=this.getClassName(),t.config=e,t.kerasVersion="tfjs-layers "+HO,t.backend="TensorFlow.js",t},n.toJSON=function(e,t){void 0===t&&(t=!0);var n=jO(this.updatedConfig());return t?JSON.stringify(n):n},n.call=function(e,t){var n=this;return QN((function(){e=QF(e);for(var r=new qO,a=0;a<n.inputs.length;++a)r.add(n.inputs[a],e[a]);return YO(n.outputs,r,t)}))},n.computeMask=function(e,t){var n=this;return QN((function(){var r;return e=QF(e),r=null==t?XF(null,e.length):QF(t),n.runInternalGraph(e,r)[1]}))},n.computeOutputShape=function(e){var t=MD(e);if(t.length!==this.inputLayers.length)throw new HF("Invalid inputShape argument "+e+": model has "+this.inputLayers.length+" tensor inputs.");for(var n={},r=0;r<t.length;r++){var a=this.inputLayers[r],i=t[r];n[a.name+"_0_0"]=i}var o=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(i_);if(o.length>1)for(var s,u=Bv(o);!(s=u()).done;)for(var l,c=s.value,p=Bv(this.nodesByDepth[c]);!(l=p()).done;){var f=l.value,h=f.outboundLayer;if(-1===this.inputLayers.map((function(e){return e.id})).indexOf(h.id)){for(var d=[],m=0;m<f.inboundLayers.length;m++){var v=f.inboundLayers[m],g=f.nodeIndices[m],y=f.tensorIndices[m],b=n[v.name+"_"+g+"_"+y];d.push(b)}for(var x=MD(h.computeOutputShape(ZF(d))),w=h.inboundNodes.indexOf(f),k=0;k<x.length;k++){n[h.name+"_"+w+"_"+k]=x[k]}}}for(var N=[],I=[],S=0;S<this.outputLayers.length;S++){var T=this.outputLayers[S],C=this.outputLayersNodeIndices[S],E=this.outputLayersTensorIndices[S],R=T.name+"_"+C+"_"+E;I.push(R)}for(var A=0;A<I.length;A++){var F=I[A];YF(F in n),N.push(n[F])}return ZF(N)},n.runInternalGraph=function(e,t){null==t&&(t=XF(null,e.length));for(var n={},r=0;r<this.inputs.length;++r){var a=this.inputs[r],i=e[r],o=t[r];n[a.id]=[i,o]}for(var s,u=Object.keys(this.nodesByDepth).map((function(e){return parseInt(e,10)})).sort(i_),l=Bv(u);!(s=l()).done;)for(var c,p=s.value,f=Bv(this.nodesByDepth[p]);!(c=f()).done;){for(var h,d=c.value,m=d.outboundLayer,v=d.inputTensors,g=d.outputTensors,y=new Array,b=Bv(v);!(h=b()).done;){var x=h.value;x.id in n&&y.push(n[x.id])}if(y.length===v.length){var w={},k=void 0,N=void 0,I=void 0,S=void 0;if(null!=d.callArgs&&(w=d.callArgs),1===y.length){var T=y[0],C=T[0],E=T[1];null==w.mask&&(w.mask=E),I=QF(m.call(C,w)),S=QF(m.computeMask(C,E)),k=[C],N=[E]}else k=y.map((function(e){return e[0]})),N=y.map((function(e){return e[1]})),null==w.mask&&(w.mask=N),I=QF(m.call(k,w)),S=QF(m.computeMask(k,N));if(m.activityRegularizer)throw new qF("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(var R=0;R<g.length;++R){var A=g[R],F=I[R],_=S[R];n[A.id]=[F,_]}}}for(var D,O=[],M=[],L=[],z=Bv(this.outputs);!(D=z()).done;){var P=D.value;YF(P.id in n,"Could not compute output "+P.name+" : "+P.id);var B=n[P.id],W=B[0],V=B[1];L.push(W.shape),O.push(W),M.push(V)}return[O,M,L]},n.buildNodeConversionMap=function(e){for(var n,r,a={},i=Bv(this.layers);!(r=i()).done;){var o=r.value;n=o instanceof t?1:0;for(var s=0;s<o.inboundNodes.length;s++){var u=t.nodeKey(o,s);this.containerNodes.has(u)&&(a[u]=n,n+=1)}}return a},n.getLayer=function(e,t){if(null!=t){if(this.layers.length<=t)throw new HF("Was asked to retrieve layer at index "+t+", but model only has "+this.layers.length+" layer(s).");return this.layers[t]}if(null==e)throw new HF("Provide either a layer name or layer index");for(var n,r=Bv(this.layers);!(n=r()).done;){var a=n.value;if(a.name===e)return a}throw new HF("No such layer: "+e)},n.calculateLosses=function(){var e=this;return QN((function(){for(var n,r=[],a=Bv(e.layers);!(n=a()).done;)for(var i=n.value,o=0;o<i.inboundNodes.length;++o){var s=t.nodeKey(i,o);e.containerNodes.has(s)&&r.push.apply(r,i.calculateLosses())}return r}))},n.getConfig=function(){for(var e,n={name:this.name},r=this.buildNodeConversionMap(this.layers),a=[],i=Bv(this.layers);!(e=i()).done;){for(var o=e.value,s=o.getClassName(),u=o.getConfig(),l=[],c=0;c<o.inboundNodes.length;c++){var p=o.inboundNodes[c],f=t.nodeKey(o,c),h={};if(this.containerNodes.has(f)){if(p.callArgs)try{JSON.stringify(p.callArgs),h=p.callArgs}catch(e){console.warn("Layer "+o.name+" was passed non-serializable keyword arguments: "+p.callArgs+". They will not be included in the serialized model (and thus will be missing at deserialization time)."),h={}}if(p.inboundLayers.length>0){for(var d=[],m=0;m<p.inboundLayers.length;m++){var v=p.inboundLayers[m],g=p.nodeIndices[m],y=p.tensorIndices[m],b=r[t.nodeKey(v,g)];null==b&&(b=0),d.push([v.name,b,y,h])}l.push(d)}}}var x={};x.name=o.name,x.className=s,x.config=u,x.inboundNodes=l,a.push(x)}n.layers=a;for(var w=[],k=0;k<this.inputLayers.length;k++){var N=this.inputLayers[k],I=this.inputLayersNodeIndices[k],S=t.nodeKey(N,I);if(this.containerNodes.has(S)){var T=r[S];null==T&&(T=0);var C=this.inputLayersTensorIndices[k];w.push([N.name,T,C])}}n.inputLayers=w;for(var E=[],R=0;R<this.outputLayers.length;R++){var A=this.outputLayers[R],F=this.outputLayersNodeIndices[R],_=t.nodeKey(A,F);if(this.containerNodes.has(_)){var D=r[_];null==D&&(D=0);var O=this.outputLayersTensorIndices[R];E.push([A.name,D,O])}}return n.outputLayers=E,n},t.fromConfig=function(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r=!1);var a={},i={};function o(e,t){e.name in i?i[e.name].push(t):i[e.name]=[t]}function s(e,t){for(var n,r,i=[],s=Bv(t);!(r=s()).done;){var u=r.value,l=u[0],c=u[1],p=u[2];if(n=null==u[3]?{}:u[3],!(l in a))return void o(e,t);var f=a[l];if(f.inboundNodes.length<=c)return void o(e,t);var h=f.inboundNodes[c];i.push(h.outputTensors[p])}i.length>0&&e.apply(ZF(i),n)}function u(e){var n=e.name,i=cO(e,null!=t.customObjects?t.customObjects:{});i.setFastWeightInitDuringBuild(r),a[n]=i,e.inboundNodes.forEach((function(e){if(!(e instanceof Array))throw new HF("Corrupted configuration, expected array for nodeData: "+e);o(i,e)}))}for(var l,c=t.name,p=t.layers,f=Bv(p);!(l=f()).done;){u(l.value)}for(;!s_(i);)for(var h,d=Bv(p);!(h=d()).done;){var m=h.value,v=a[m.name];if(v.name in i){var g=i[v.name];delete i[v.name];for(var y,b=Bv(g);!(y=b()).done;){s(v,y.value)}}}for(var x,w=[],k=[],N=Bv(t.inputLayers);!(x=N()).done;){var I=x.value,S=I[0],T=I[1],C=I[2];YF(S in a);var E=a[S].inboundNodes[T].outputTensors;w.push(E[C])}for(var R,A=Bv(t.outputLayers);!(R=A()).done;){var F=R.value,_=F[0],D=F[1],O=F[2];YF(_ in a);var M=a[_].inboundNodes[D].outputTensors;k.push(M[O])}return new e({inputs:w,outputs:k,name:c})},n.resetStates=function(){var e=this;QN((function(){e.layers.forEach((function(e){e.stateful&&e.resetStates()}))}))},Rv(t,[{key:"trainable",get:function(){return this.trainable_},set:function(e){this.layers.forEach((function(t){t._trainableWeights.forEach((function(t){return t.trainable=e}))})),this.trainable_=e}},{key:"trainableWeights",get:function(){if(this._trainableWeights.length>0)throw new HF("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];for(var e,t=[],n=Bv(this.layers);!(e=n()).done;){var r=e.value;t=t.concat(r.trainableWeights)}return t}},{key:"nonTrainableWeights",get:function(){for(var e,t=[],n=Bv(this.layers);!(e=n()).done;){var r=e.value;t.push.apply(t,r.nonTrainableWeights)}if(!this.trainable){for(var a,i=[],o=Bv(this.layers);!(a=o()).done;){var s=a.value;i.push.apply(i,s.trainableWeights)}return i.concat(t)}return t}},{key:"weights",get:function(){return this.trainableWeights.concat(this.nonTrainableWeights)}},{key:"stateful",get:function(){if(this._stateful)throw new HF("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(var e,t=Bv(this.layers);!(e=t()).done;){if(e.value.stateful)return!0}return!1}}]),t}(XD);function eM(e,t,n){var r=t.length;if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return null}));if(1===r)return Array.isArray(e)&&1===e.length?e:"object"==typeof e&&t[0]in e?[e[t[0]]]:[e];if(Array.isArray(e)){if(e.length!==r)throw new Error("Provided "+n+" is an array of "+e.length+" element(s), but the model has "+r+" outputs. Make sure a set of weights is provided for each model output.");return e}if("object"==typeof e&&Object.keys(e).length>0&&"object"==typeof e[Object.keys(e)[0]]){var a=[];return t.forEach((function(t){t in e?a.push(e[t]):a.push(null)})),a}throw new Error("The model has multiple ("+r+") outputs, so "+n+" must be either an array with "+r+" elements or an object with "+t+" keys. Provided "+n+" not understood: "+JSON.stringify(e))}function tM(e,t){return eM(e,t,"classWeight")}function nM(e,t,n,r){return rM.apply(this,arguments)}function rM(){return(rM=Cv(regeneratorRuntime.mark((function e(t,n,r,a){var i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&null==a){e.next=2;break}throw new Error("Support sampleWeight is not implemented yet");case 2:if(null==r){e.next=15;break}return i=QN((function(){if(1===t.shape.length)return t.clone();if(2===t.shape.length){if(t.shape[1]>1){return t.argMax(1)}if(1===t.shape[1])return t.reshape([t.shape[0]]);throw new Error("Encountered unexpected last-dimension size ("+t.shape[1]+") during handling of class weights. The size is expected to be >= 1.")}throw new Error("Unexpected rank of target (y) tensor ("+t.rank+") during handling of class weights. The rank is expected to be 1 or 2.")})),e.t0=Array,e.next=7,i.data();case 7:return e.t1=e.sent,o=e.t0.from.call(e.t0,e.t1),$N(i),s=[],o.forEach((function(e){if(null==r[e])throw new Error("classWeight must contain all classes in the training data. The class "+e+" exists in the data but not in classWeight");s.push(r[e])})),e.abrupt("return",UC(s,"float32"));case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aM(e,t){return sI(e,t)}var iM=32;function oM(e,t){var n,r,a=t;n=a.xs,r=a.ys,Kv(null!=n&&null!=r,(function(){return"A Dataset iterator for fitDataset() is expected to generate objects of the form `{xs: xVal, ys: yVal}`, where the two values may be `tf.Tensor`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates "+t}));var i=sM("input",e.inputNames,n),o=sM("output",e.outputNames,r),s=i[0].shape[0];Kv(i.length===e.inputs.length,(function(){return"LayersModel has "+e.inputs.length+" inputs, but the dataset provides "+i.length+" inputs.  (Expected input keys: "+JSON.stringify(e.inputNames)+")"})),Kv(o.length===e.outputs.length,(function(){return"LayersModel has "+e.outputs.length+" outputs, but the dataset provides "+o.length+" outputs.  (Expected output keys: "+JSON.stringify(e.outputNames)+")"}));for(var u=function(t){Kv(i[t].shape[0]===s,(function(){return"Batch size mismatch: input "+e.inputNames[t]+" has "+i[t].shape[0]+"; expected  "+s+" based on input "+e.inputNames[0]+"."}))},l=0;l<i.length;l++)u(l);for(var c=function(t){Kv(o[t].shape[0]===s,(function(){return"Batch size mismatch: output "+e.outputNames[t]+" has "+o[t].shape[0]+"; expected  "+s+" based on input "+e.inputNames[0]+"."}))},p=0;p<o.length;p++)c(p);return{xs:i,ys:o}}function sM(e,t,n){if(n instanceof aw)return[n];if(Array.isArray(n))return Kv(n.length===t.length,(function(){return"Received an array of "+n.length+" Tensors, but expected "+t.length+" to match the "+e+" keys "+t+"."})),n;for(var r,a=[],i=Bv(t);!(r=i()).done;){var o=r.value;if(null==n[o])throw new HF("The feature data generated by the dataset lacks the required "+e+" key '"+o+"'.");a.push(n[o])}return a}function uM(e){if(3===e.length)throw new qF("Validation with sample weights is not implemented yet.");return{xs:e[0],ys:e[1]}}function lM(e,t,n){return cM.apply(this,arguments)}function cM(){return cM=Cv(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s,u,l,c,p,f,h,d,m,v,g,y,b,x,w,k,N,I,S,T,C,E,R,A,F,_,D,O,M,L;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=r.batchesPerEpoch,Kv(null!=t.optimizer,(function(){return"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."})),Kv(null!=r,(function(){return"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."})),Kv(null!=r.epochs&&r.epochs>0&&Number.isInteger(r.epochs),(function(){return"For fitDataset(), config.epochs is expected to be a positive integer, but got "+r.epochs})),Kv(!a||r.batchesPerEpoch>0&&Number.isInteger(r.batchesPerEpoch),(function(){return"For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got "+r.batchesPerEpoch})),Kv(null==r.validationSplit,(function(){return"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."})),!t.isTraining){e.next=8;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 8:return t.isTraining=!0,e.prev=9,(i=null!=r.validationData)&&(fM(r.validationData)?Kv(null==r.validationBatches||r.validationBatches>0&&Number.isInteger(r.validationBatches),(function(){return"For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got "+r.validationBatches})):(u=uM(r.validationData),o=u.xs,s=u.ys)),l=t.makeTrainFunction(),c=t.getDedupedMetricsNames(),p=i?c.slice().concat(c.map((function(e){return"val_"+e}))):c.slice(),f=sO(r.callbacks,r.yieldEvery),h=null==r.verbose?1:r.verbose,d=lO(f,h,r.epochs,null,null,pM(n,r),null,i,p),m=d.callbackList,v=d.history,m.setModel(t),t.history=v,e.next=22,m.onTrainBegin();case 22:return t.stopTraining_=!1,g=null==r.initialEpoch?0:r.initialEpoch,e.next=26,n.iterator();case 26:y=e.sent;case 27:if(!(g<r.epochs)){e.next=98;break}return b={},e.next=31,m.onEpochBegin(g);case 31:if(x=0,w=0,a){e.next=37;break}return e.next=36,n.iterator();case 36:y=e.sent;case 37:if(a&&!(x<r.batchesPerEpoch)){e.next=91;break}return e.next=40,y.next();case 40:if(k=e.sent,!a||!k.done){e.next=44;break}return console.warn("You provided `batchesPerEpoch` as "+r.batchesPerEpoch+", but your dataset iterator ran out of data after "+x+" batches; interrupting training. Make sure that your dataset can generate at least `batchesPerEpoch * epochs` batches (in this case, "+r.batchesPerEpoch*r.epochs+" batches). You may need to use the repeat() function when building your dataset."),e.abrupt("break",91);case 44:if(null==k.value){e.next=73;break}return N=oM(t,k.value),I=N.xs,S=N.ys,(T={}).batch=w,T.size=I[0].shape[0],e.next=51,m.onBatchBegin(w,T);case 51:if(C=[],null==r.classWeight){e.next=64;break}E=tM(r.classWeight,t.outputNames),R=0;case 55:if(!(R<E.length)){e.next=64;break}return e.t0=C,e.next=59,nM(S[R],null,E[R]);case 59:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 61:++R,e.next=55;break;case 64:for(A=I.concat(S).concat(C),F=l(A),$N(A),_=0;_<c.length;++_)D=c[_],O=F[_],T[D]=O,eI(O);return e.next=70,m.onBatchEnd(w,T);case 70:tO(T),w++,x++;case 73:if(!(a?x>=r.batchesPerEpoch:k.done)){e.next=87;break}if(!i){e.next=86;break}if(M=void 0,!fM(r.validationData)){e.next=84;break}return e.t2=QF,e.next=80,t.evaluateDataset(r.validationData,{batches:r.validationBatches});case 80:e.t3=e.sent,M=(0,e.t2)(e.t3),e.next=85;break;case 84:M=QF(t.evaluate(o,s,{batchSize:null==r.validationBatchSize?iM:r.validationBatchSize,verbose:0}));case 85:for(L=0;L<t.metricsNames.length;++L)b["val_"+t.metricsNames[L]]=M[L];case 86:return e.abrupt("break",91);case 87:if(!t.stopTraining_){e.next=89;break}return e.abrupt("break",91);case 89:e.next=37;break;case 91:return e.next=93,m.onEpochEnd(g,b);case 93:if(g++,!t.stopTraining_){e.next=96;break}return e.abrupt("break",98);case 96:e.next=27;break;case 98:return e.next=100,m.onTrainEnd();case 100:return e.next=102,t.history.syncData();case 102:return e.abrupt("return",t.history);case 103:return e.prev=103,t.isTraining=!1,e.finish(103);case 106:case"end":return e.stop()}}),e,null,[[9,,103,106]])}))),cM.apply(this,arguments)}function pM(e,t){var n=null;return null!=t.batchesPerEpoch?n=t.batchesPerEpoch:Number.isFinite(e.size)&&(n=e.size),n}function fM(e){return"function"==typeof e.iterator}function hM(e,t,n){return dM.apply(this,arguments)}function dM(){return dM=Cv(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s,u,l,c,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null!=(r=r||{}).batches,i=t.testFunction,o=[],!(r.verbose>0)){e.next=6;break}throw new qF("Verbose mode is not implemented yet.");case 6:if(Kv(!a||r.batches>0&&Number.isInteger(r.batches),(function(){return"Test loop expects `batches` to be a positive integer, but received "+JSON.stringify(r.batches)})),"function"!=typeof n.next){e.next=11;break}e.t0=n,e.next=14;break;case 11:return e.next=13,n.iterator();case 13:e.t0=e.sent;case 14:s=e.t0,u=0,l=0,c=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.next();case 2:if(n=e.sent,o=QN((function(){return n.value&&function(){var e=oM(t,n.value),r=e.xs,a=e.ys,s=r.concat(a),c=QN((function(){return i(s)}));if($N(s),0===l)for(var p=0;p<c.length;++p)o.push(gC(0));for(var f=s[0].shape[0],h=function(e){var t=c[e],n=o[e];o[e]=QN((function(){return aI(o[e],sI(f,t))})),l>0&&$N(n)},d=0;d<c.length;++d)h(d);$N(c),u+=f,++l}(),o})),!n.done){e.next=7;break}return a&&console.warn("Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least `batches` batches (in this case, "+r.batches+" batches). You may need to use the repeat() function when building your dataset."),e.abrupt("return","break");case 7:case"end":return e.stop()}}),e)}));case 18:if(a&&!(l<r.batches)){e.next=25;break}return e.delegateYield(c(),"t1",20);case 20:if("break"!==e.t1){e.next=23;break}return e.abrupt("break",25);case 23:e.next=18;break;case 25:for(p=0;p<o.length;++p)f=o[p],o[p]=oI(o[p],u),$N(f);return e.abrupt("return",ZF(o));case 27:case"end":return e.stop()}}),e)}))),dM.apply(this,arguments)}function mM(e){Kv(e>0&&Number.isInteger(e),(function(){return"batchSize is required to be a positive integer, but got "+e}))}function vM(e,t,n){return null==e?[null]:Array.isArray(e)?e.map((function(e){return K_(e,t,n-t)})):K_(e,t,n-t)}function gM(e,t){return QN((function(){return null==e?null:Array.isArray(e)?e.map((function(e){return gM(e,t)})):tD(e,"int32"===t.dtype?t:t.toInt())}))}function yM(e,t){for(var n=[],r=0,a=null;r<e;)(a=r+t)>=e&&(a=e),n.push([r,a]),r=a;return n}function bM(e,t,n,r,a,i,o,s,u,l,c,p,f,h,d){return xM.apply(this,arguments)}function xM(){return xM=Cv(regeneratorRuntime.mark((function e(t,n,r,a,i,o,s,u,l,c,p,f,h,d,m){var v,g,y,b,x,w,k,N;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==i&&(i=32),null==o&&(o=1),null==p&&(p=!0),null==h&&(h=0),v=!1,null!=l&&null!=c&&(v=!0),null==m){e.next=10;break}if(v=!0,null!=d){e.next=10;break}throw new HF("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");case 10:return null!=(g=t.checkNumSamples(r,i,d,"steps_per_epoch"))&&(y=j_(0,g)),null==s&&(s=1),b=lO(u,s,o,h,g,d,i,v,f),x=b.callbackList,w=b.history,x.setModel(t),t.history=w,e.next=18,x.onTrainBegin();case 18:t.stopTraining_=!1,k=regeneratorRuntime.mark((function e(o){var s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.onEpochBegin(o);case 2:if(s={},null==d){e.next=7;break}throw new qF("stepsPerEpoch mode is not implemented yet.");case 7:return e.delegateYield(regeneratorRuntime.mark((function e(){var o,u,f,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("batch"!==p){e.next=4;break}throw new qF("batch shuffling is not implemneted yet");case 4:p&&Gv(y);case 5:o=UC(y),u=yM(g,i),f=regeneratorRuntime.mark((function e(p){var f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f={},e.next=3,x.onBatchBegin(p,f);case 3:return QN((function(){var e=u[p][0],h=u[p][1],d=K_(o,e,h-e);f.batch=p,f.size=h-e;for(var m=gM(r,d),g=n(m),y=0;y<a.length;++y){var b=a[y],x=g[y];f[b]=x,eI(x)}if(p===u.length-1&&v)for(var w=t.testLoop(l,c,i),k=0;k<a.length;++k){var N=a[k],I=w[k];eI(I),s["val_"+N]=I}})),e.next=6,x.onBatchEnd(p,f);case 6:if(tO(f),!t.stopTraining_){e.next=9;break}return e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),h=0;case 9:if(!(h<u.length)){e.next=17;break}return e.delegateYield(f(h),"t0",11);case 11:if("break"!==e.t0){e.next=14;break}return e.abrupt("break",17);case 14:++h,e.next=9;break;case 17:o.dispose();case 18:case"end":return e.stop()}}),e)}))(),"t0",8);case 8:return e.next=10,x.onEpochEnd(o,s);case 10:if(!t.stopTraining_){e.next=12;break}return e.abrupt("return","break");case 12:case"end":return e.stop()}}),e)})),N=h;case 21:if(!(N<o)){e.next=29;break}return e.delegateYield(k(N),"t0",23);case 23:if("break"!==e.t0){e.next=26;break}return e.abrupt("break",29);case 26:++N,e.next=21;break;case 29:return e.next=31,x.onTrainEnd();case 31:return e.next=33,t.history.syncData();case 33:return e.abrupt("return",t.history);case 34:case"end":return e.stop()}}),e)}))),xM.apply(this,arguments)}function wM(e,t,n,r){return kM.apply(this,arguments)}function kM(){return kM=Cv(regeneratorRuntime.mark((function e(t,n,r,a){var i,o,s,u,l,c,p,f,h,d,m,v,g,y,b,x,w,k,N,I,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a&&(a={}),!t.isTraining){e.next=3;break}throw new Error("Cannot start training because another fit() call is ongoing.");case 3:return t.isTraining=!0,e.prev=4,mM(f=null==a.batchSize?32:a.batchSize),!1,e.next=10,t.standardizeUserData(n,r,a.sampleWeight,a.classWeight,false,f);case 10:if(h=e.sent,i=h[0],o=h[1],p=h[2],d=!1,!(null!=a.validationData&&a.validationData.length>0)){e.next=36;break}if(d=!0,2!==a.validationData.length){e.next=22;break}s=a.validationData[0],u=a.validationData[1],e.next=27;break;case 22:if(3!==a.validationData.length){e.next=26;break}throw new qF("validationData including sample weights is not supported yet.");case 26:throw new HF("When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; "+a.validationData+" is invalid.");case 27:return!0,e.next=30,t.standardizeUserData(s,u,null,null,true,f);case 30:v=e.sent,l=v[0],c=v[1],m=l.concat(c),e.next=37;break;case 36:null!=a.validationSplit&&a.validationSplit>0&&a.validationSplit<1?(d=!0,g=Math.floor(i[0].shape[0]*(1-a.validationSplit)),y=i[0].shape[0],l=vM(i,g,y),i=vM(i,0,g),c=vM(o,g,y),o=vM(o,0,g),m=l.concat(c)):null!=a.validationSteps&&(d=!0);case 37:return b=i.concat(o).concat(p),t.checkTrainableWeightsConsistency(),x=t.makeTrainFunction(),w=t.getDedupedMetricsNames(),d?(t.makeTestFunction(),k=t.testFunction,N=w.slice().concat(w.map((function(e){return"val_"+e})))):(k=null,m=[],N=w.slice()),I=sO(a.callbacks,a.yieldEvery),e.next=45,bM(t,x,b,w,f,a.epochs,a.verbose,I,k,m,a.shuffle,N,a.initialEpoch,null,null);case 45:return S=e.sent,e.abrupt("return",S);case 47:return e.prev=47,t.isTraining=!1,IM(i,n),IM(o,r),IM(l,s),IM(c,u),null!=p&&$N(p),e.finish(47);case 55:case"end":return e.stop()}}),e,null,[[4,,47,55]])}))),kM.apply(this,arguments)}function NM(e){var t=[];e instanceof aw&&(e=[e]);for(var n=0;n<e.length;++n){var r=e[n];if(1===r.rank)t.push(q_(r,1));else{if(0===r.rank)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");t.push(r)}}return t}function IM(e,t){if(null!=e){var n=[];if(t instanceof aw)n.push(t.id);else if(Array.isArray(t))t.forEach((function(e){return n.push(e.id)}));else if(null!=t)for(var r in t){var a=t[r];n.push(a.id)}var i=[];if(e instanceof aw)-1===n.indexOf(e.id)&&i.push(e);else if(Array.isArray(e))e.forEach((function(e){-1===n.indexOf(e.id)&&i.push(e)}));else if(null!=e)for(var o in e){var s=e[o];-1===n.indexOf(s.id)&&i.push(s)}i.forEach((function(e){e.isDisposed||e.dispose()}))}}function SM(e){return Array.isArray(e)}function TM(e){return!function(e){return e instanceof aw}(e)&&!SM(e)}function CM(e,t,n,r,a){if(void 0===r&&(r=!0),void 0===a&&(a=""),null==t||0===t.length){if(null!=e){var i=!1;if(SM(e)&&e.length>0)i=!0;else if(TM(e)){for(var o in e)if(e.hasOwnProperty(o)){i=!0;break}}else i=!0;if(i)throw new HF("Error when checking model "+a+" expected no data, but got "+e)}return[]}if(null==e)return t.map((function(e){return null}));var s;if(TM(e)){s=[];for(var u,l=Bv(t);!(u=l()).done;){var c=u.value;if(null==e[c])throw new HF('No data provided for "'+c+'". Need data for each key in: '+t);s.push(e[c])}}else if(SM(e)){if(e.length!==t.length)throw new HF("Error when checking model "+a+": the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see "+t.length+" Tensor(s), but instead got the following list of Tensor(s): "+e);s=e}else{if(t.length>1)throw new HF("The model "+a+" expects "+t.length+" Tensor(s), but only received one Tensor. Found: Tensor with shape "+e.shape);s=[e]}if(s=NM(s),null!=n)for(var p=0;p<t.length;++p)if(null!=n[p]){var f=s[p];if(f.shape.length!==n[p].length)throw new HF("Error when checking "+a+": expected "+t[p]+" to have "+n[p].length+" dimension(s). but got array with shape "+f.shape);for(var h=0;h<n[p].length;++h)if(0!==h||r){var d=f.shape[h],m=n[p][h];if(null!=m&&m>=0&&d!==m)throw new HF("Error when checking "+a+": expected "+t[p]+" to have shape ["+n[p]+"], but got array with shape ["+f.shape+"].")}}return s}function EM(e,t,n,r,a){var i;if(void 0===r&&(r=!0),void 0===a&&(a=""),Array.isArray(e)){if(e.length!==t.length)throw new HF("Error when checking model "+a+": the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see "+t.length+" Tensor(s), but instead got "+e.length+" Tensors(s).");i=e}else{if(t.length>1)throw new HF("The model expects "+t.length+" "+a+" Tensors, but only received one Tensor. Found: array with shape "+JSON.stringify(e.shape)+".");i=[e]}if(null!=n)for(var o=0;o<t.length;++o)if(null!=n[o]){var s=i[o];if(s.shape.length!==n[o].length)throw new HF("Error when checking "+a+": expected "+t[o]+" to have "+n[o].length+" dimension(s), but got array with shape "+JSON.stringify(s.shape));for(var u=0;u<n[o].length;++u)if(0!==u||r){var l=s.shape[u],c=n[o][u];if(null!=c&&c!==l)throw new HF("Error when checking "+a+": expected "+t[o]+" to have shape "+JSON.stringify(n[o])+" but got array with shape "+JSON.stringify(s.shape)+".")}}}var RM=function(e){function t(t){var n;return(n=e.call(this,t)||this).isTraining=!1,n}Av(t,e);var n=t.prototype;return n.summary=function(e,t,n){if(void 0===n&&(n=console.log),!this.built)throw new HF("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");PO(this,e,t,n)},n.compile=function(e){var t=this;if(null==e.loss&&(e.loss=[]),this.loss=e.loss,"string"==typeof e.optimizer)this.optimizer_=function(e){var t={Adagrad:function(){return WR.adagrad(.01)},Adadelta:function(){return WR.adadelta(1,.95,UF())},Adam:function(){return WR.adam(.001,.9,.999,UF())},Adamax:function(){return WR.adamax(.002,.9,.999,UF(),0)},RMSProp:function(){return WR.rmsprop(.001,.9,0,UF())},SGD:function(){return WR.sgd(.01)}};if(t.adagrad=t.Adagrad,t.adadelta=t.Adadelta,t.adam=t.Adam,t.adamax=t.Adamax,t.rmsprop=t.RMSProp,t.sgd=t.SGD,e in t)return t[e]();throw new HF("Unknown Optimizer "+e)}(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof FR))throw new HF("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}var n=[];if(Array.isArray(e.loss)||"string"==typeof e.loss||"function"==typeof e.loss)if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new HF("When passing an Array as loss, it should have one entry per model output. The model has "+this.outputs.length+" output(s), but you passed loss="+e.loss+".");var r=e.loss;n=r.map((function(e){return kO(e)}))}else{var a=kO(e.loss);this.outputs.forEach((function(e){n.push(a)}))}else{for(var i in e.loss=e.loss,e.loss)if(-1===this.outputNames.indexOf(i))throw new HF('Unknown entry in loss dictionary: "'+i+'". Only expected the following keys: '+this.outputNames);for(var o,s=Bv(this.outputNames);!(o=s()).done;){var u=o.value;null==e.loss[u]&&console.warn('Output "'+u+'" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to '+u+" during training"),n.push(kO(e.loss[u]))}}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(var l=0;l<this.outputs.length;++l){var c=this.internalOutputShapes[l],p=this.outputNames[l];this.feedOutputNames.push(p),this.feedOutputShapes.push(c),this.feedLossFns.push(this.lossFunctions[l])}var f=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],M_("loss",(function(){for(var e=0;e<t.outputs.length;++e)if(-1===f.indexOf(e)){var n=t.lossFunctions[e];t.outputs.length>1&&(t.metricsTensors.push([n,e]),t.metricsNames.push(t.outputNames[e]+"_loss"))}}));var h=function(e,t){if(null==e||Array.isArray(e)&&0===e.length)return t.map((function(e){return[]}));var n;if("string"==typeof e||"function"==typeof e)n=[e];else{if(!Array.isArray(e)&&"object"!=typeof e)throw new TypeError("Type of metrics argument not understood. Expected an string,function, Array, or Object, found: "+e);n=e}if(Array.isArray(n))return t.map((function(e){return n}));for(var r,a=[],i=Bv(t);!(r=i()).done;){var o=r.value,s=n.hasOwnProperty(o)?n[o]:[];Array.isArray(s)||(s=[s]),a.push(s)}return a}(e.metrics,this.outputNames),d=function(e,n,r){t.outputNames.length>1&&(n=t.outputNames[e]+"_"+n),t.metricsNames.push(n),t.metricsTensors.push([r,e])};M_("metric",(function(){for(var e=function(e){if(-1!==f.indexOf(e))return"continue";!function(n){for(var r,a,i,o,s=Bv(n);!(o=s()).done;){var u=o.value;if("string"==typeof u&&-1!==["accuracy","acc","crossentropy","ce"].indexOf(u)){var l=t.internalOutputShapes[e];1===l[l.length-1]||t.lossFunctions[e]===yO?-1!==["accuracy","acc"].indexOf(u)?a=NO:-1!==["crossentropy","ce"].indexOf(u)&&(a=EO):t.lossFunctions[e]===gO?-1!==["accuracy","acc"].indexOf(u)?a=RO:-1!==["crossentropy","ce"].indexOf(u)&&(a=FO):-1!==["accuracy","acc"].indexOf(u)?a=IO:-1!==["crossentropy","ce"].indexOf(u)&&(a=AO);var c=void 0;-1!==["accuracy","acc"].indexOf(u)?c="acc":-1!==["crossentropy","ce"].indexOf(u)&&(c="ce"),i=a,r=""+c}else{var p=DO(u);i=p,r=""+OO(u)}var f=void 0;M_(r,(function(){f=i})),d(e,r,f)}}(h[e])},n=0;n<t.outputs.length;++n)e(n)})),this.collectedTrainableWeights=this.trainableWeights},n.checkTrainableWeightsConsistency=function(){null!=this.collectedTrainableWeights&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")},n.evaluate=function(e,t,n){void 0===n&&(n={});var r=null==n.batchSize?32:n.batchSize;mM(r);var a=this.standardizeUserDataXY(e,t,!0,r);try{var i=a[0].concat(a[1]);this.makeTestFunction();var o=this.testFunction;return ZF(this.testLoop(o,i,r,n.verbose,n.steps))}finally{IM(a[0],e),IM(a[1],t)}},n.evaluateDataset=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.makeTestFunction(),e.abrupt("return",hM(this,t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.checkNumSamples=function(e,t,n,r){var a;if(void 0===r&&(r="steps"),null!=n){if(a=null,null!=t)throw new HF("If "+r+" is set, batchSize must be null or undefined.Got batchSize = "+t)}else{if(null==e)throw new HF("Either the input data should have a defined shape, or "+r+" shoud be specified.");a=Array.isArray(e)?e[0].shape[0]:e.shape[0]}return a},n.execute=function(e,t){if(Array.isArray(t)&&0===t.length)throw new HF("`outputs` is an empty Array, which is not allowed.");var n=Array.isArray(t),r=n?t:[t],a=this.retrieveSymbolicTensors(r),i=new qO;if(e instanceof aw&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new HF("The number of inputs provided ("+e.length+") does not match the number of inputs of this model ("+this.inputs.length+").");for(var o=0;o<this.inputs.length;++o)i.add(this.inputs[o],e[o])}else for(var s,u=Bv(this.inputs);!(s=u()).done;){var l=s.value,c=e[l.name];if(null==c)throw new HF("No value is provided for the model's input "+l.name);i.add(l,c)}var p=YO(a,i);return n?p:p[0]},n.retrieveSymbolicTensors=function(e){for(var t,n=XF(null,e.length),r=e.length,a=Bv(this.layers);!(t=a()).done;){for(var i=t.value,o=Array.isArray(i.output)?i.output:[i.output],s=o.map((function(e){return e.name})),u=0;u<e.length;++u){var l=s.indexOf(e[u]);if(-1!==l&&(n[u]=o[l],r--),0===r)break}if(0===r)break}if(r>0){var c=[];throw n.forEach((function(t,n){null==t&&c.push(e[n])})),new HF("Cannot find SymbolicTensors for output name(s): "+JSON.stringify(c))}return n},n.predictLoop=function(e,t,n){var r=this;return void 0===t&&(t=32),void 0===n&&(n=!1),QN((function(){var a=r.checkNumSamples(e);if(n)throw new qF("Verbose predictLoop() is not implemented yet.");for(var i=yM(a,t),o=r.outputs.map((function(e){return[]})),s=function(t){QN((function(){var n=i[t][0],a=i[t][1],o=vM(e,n,a),s=[];if(Array.isArray(o))for(var u=0;u<o.length;++u)s.push({key:r.inputs[u],value:o[u]});else s.push({key:r.inputs[0],value:o});var l=new qO(s);return YO(r.outputs,l)})).forEach((function(e,t){return o[t].push(e)}))},u=0;u<i.length;++u)s(u);return ZF(o.map((function(e){return zI(e,0)})))}))},n.predict=function(e,t){void 0===t&&(t={});var n=NM(e);EM(n,this.inputNames,this.feedInputShapes,!1);try{var r=null==t.batchSize?32:t.batchSize;return mM(r),this.predictLoop(n,r)}finally{IM(n,e)}},n.predictOnBatch=function(e){EM(e,this.inputNames,this.feedInputShapes,!0);var t=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,t)},n.standardizeUserDataXY=function(e,t,n,r){if(void 0===n&&(n=!0),null==this.optimizer_)throw new jF("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");for(var a=[],i=0;i<this.feedOutputShapes.length;++i){var o=this.feedOutputShapes[i];this.feedLossFns[i]===gO?a.push(o.slice(0,o.length-1).concat([1])):a.push(o)}if(function(e,t,n){var r=o_(e.map((function(e){return e.shape[0]})));r.sort();var a=o_(t.map((function(e){return e.shape[0]})));if(a.sort(),r.length>1)throw new HF("All input Tensors (x) should have the same number of samples. Got array shapes: "+JSON.stringify(e.map((function(e){return e.shape}))));if(a.length>1)throw new HF("All target Tensors (y) should have the same number of samples. Got array shapes: "+JSON.stringify(t.map((function(e){return e.shape}))));if(r.length>0&&a.length>0&&!Qv(r,a))throw new HF("Input Tensors should have the same number of samples as target Tensors. Found "+r[0]+" input sample(s) and "+a[0]+" target sample(s).")}(e=CM(e,this.feedInputNames,this.feedInputShapes,!1,"input"),t=CM(t,this.feedOutputNames,a,!1,"target")),function(e,t,n){for(var r=[fO,yO,vO],a=0;a<e.length;++a){var i=e[a],o=t[a],s=n[a];if(null!=o){if(o===vO&&1===i.shape[i.shape.length-1])throw new HF("You are passing a target array of shape "+i.shape+" while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].");if(-1!==r.indexOf(o))for(var u=i.shape.slice(1),l=s.slice(1),c=0;c<u.length;++c){var p=u[c],f=l[c];if(null!=f&&p!==f)throw new HF("A target Tensor with shape "+i.shape+" was passed for an output of shape "+s+", while using a loss function that expects targets to have the same shape as the output.")}}}}(t,this.feedLossFns,this.feedOutputShapes),this.stateful&&null!=r&&r>0&&e[0].shape[0]%r!=0)throw new HF("In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size "+r+". Found: "+e[0].shape[0]+" sample(s).");return[e,t]},n.standardizeUserData=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n,r,a,i,o){var s,u,l,c,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===i&&(i=!0),s=this.standardizeUserDataXY(t,n,i,o),u=s[0],l=s[1],null==r){e.next=4;break}throw new Error("sample weight is not supported yet.");case 4:if(c=null,null==a){e.next=18;break}p=tM(a,this.outputNames),c=[],f=0;case 9:if(!(f<p.length)){e.next=18;break}return e.t0=c,e.next=13,nM(l[f],null,p[f]);case 13:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 15:++f,e.next=9;break;case 18:return e.abrupt("return",[u,l,c]);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i,o){return e.apply(this,arguments)}}(),n.testLoop=function(e,t,n,r,a){var i=this;return void 0===r&&(r=0),QN((function(){var o=i.checkNumSamples(t,n,a,"steps"),s=[];if(r>0)throw new qF("Verbose mode is not implemented yet.");if(null!=a)throw new qF("steps mode in testLoop() is not implemented yet");for(var u=yM(o,n),l=UC(j_(0,o)),c=0;c<u.length;++c){var p=u[c][0],f=u[c][1],h=K_(l,p,f-p),d=gM(t,h),m=e(d);if(0===c)for(var v=0;v<m.length;++v)s.push(gC(0));for(var g=0;g<m.length;++g){var y=m[g];s[g]=aI(s[g],sI(f-p,y))}}for(var b=0;b<s.length;++b)s[b]=oI(s[b],o);return s}))},n.getDedupedMetricsNames=function(){for(var e=this.metricsNames,t=[],n=0;n<e.length;++n){var r=e[n],a=r;if(JF(e,r)>1)a+="_"+JF(e.slice(0,n),r);t.push(a)}return t},n.makeTrainFunction=function(){var e=this;return function(t){var n=[],r=t.slice(0,e.inputs.length),a=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),i=t.slice(e.inputs.length+e.outputs.length,e.inputs.length+2*e.outputs.length),o=[],s=e.collectedTrainableWeights.map((function(e){return e.read()}));return[e.optimizer_.minimize((function(){for(var t=[],s=0;s<e.inputs.length;++s)t.push({key:e.inputs[s],value:r[s]});for(var u,l=new qO(t),c=YO(e.outputs,l,{training:!0}),p=0;p<e.lossFunctions.length;++p){var f=(0,e.lossFunctions[p])(a[p],c[p]);null!=i[p]&&(f=aM(f,i[p]));var h=xT(f);n.push(h),u=0===p?f:aI(u,f)}for(var d=0;d<e.metricsTensors.length;++d){var m=void 0;if(e.outputs.length>1&&d<e.outputs.length)m=n[d];else{var v=e.metricsTensors[d][0],g=e.metricsTensors[d][1];m=xT(v(a[g],c[g]))}eI(m),o.push(m)}return u=xT(u),e.calculateLosses().forEach((function(e){u=aI(u,e)})),u}),!0,s)].concat(o)}},n.makeTestFunction=function(){var e=this;this.testFunction=function(t){return QN((function(){for(var n,r=[],a=t.slice(0,e.inputs.length),i=t.slice(e.inputs.length,e.inputs.length+e.outputs.length),o=[],s=0;s<e.inputs.length;++s)o.push({key:e.inputs[s],value:a[s]});for(var u=new qO(o),l=YO(e.outputs,u),c=0;c<e.lossFunctions.length;++c){var p=e.lossFunctions[c],f=xT(p(i[c],l[c]));n=0===c?f:aI(n,f),r.push(n)}for(var h=0;h<e.metricsTensors.length;++h){var d=e.metricsTensors[h][0],m=e.metricsTensors[h][1],v=xT(d(i[m],l[m]));r.push(v)}return r}))}},n.fit=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r={}),e.abrupt("return",wM(this,t,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.fitDataset=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",lM(this,t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.trainOnBatch=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l,c,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.standardizeUserData(t,n);case 2:r=e.sent,a=r[0],i=r[1],o=this.makeTrainFunction(),s=o(a.concat(i)),u=[],l=Bv(s);case 9:if((c=l()).done){e.next=17;break}return p=c.value,e.next=13,p.data();case 13:f=e.sent,u.push(f[0]);case 15:e.next=9;break;case 17:return $N(s),e.abrupt("return",ZF(u));case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.getNamedWeights=function(e){for(var t=[],n=null!=e&&e.trainableOnly,r=n?this.trainableWeights:this.weights,a=this.getWeights(n),i=0;i<r.length;++i)n&&!r[i].trainable||t.push({name:r[i].originalName,tensor:a[i]});return t},n.dispose=function(){var t=e.prototype.dispose.call(this);if(0===t.refCountAfterDispose&&null!=this.optimizer&&this.isOptimizerOwned){var n=ZN().numTensors;this.optimizer_.dispose(),t.numDisposedVariables+=n-ZN().numTensors}return t},n.getLossIdentifiers=function(){var e;if("string"==typeof this.loss)e=$F(this.loss);else if(Array.isArray(this.loss)){for(var t,n=Bv(this.loss);!(t=n()).done;){if("string"!=typeof t.value)throw new Error("Serialization of non-string loss is not supported.")}e=this.loss.map((function(e){return $F(e)}))}else{var r=Object.keys(this.loss);e={};for(var a=this.loss,i=0,o=r;i<o.length;i++){var s=o[i];if("string"!=typeof a[s])throw new Error("Serialization of non-string loss is not supported.");e[s]=$F(a[s])}}return e},n.getMetricIdentifiers=function(){if("string"==typeof this.metrics||"function"==typeof this.metrics)return[$F(OO(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map((function(e){return $F(OO(e))}));var e={};for(var t in this.metrics)e[t]=$F(OO(this.metrics[t]));return e},n.getTrainingConfig=function(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}},n.loadTrainingConfig=function(e){if(null!=e.weighted_metrics)throw new Error("Loading weight_metrics is not supported yet.");if(null!=e.loss_weights)throw new Error("Loading loss_weights is not supported yet.");if(null!=e.sample_weight_mode)throw new Error("Loading sample_weight_mode is not supported yet.");var t,n,r=cO(GO(e.optimizer_config));if("string"==typeof e.loss)t=e_(e.loss);else if(Array.isArray(e.loss))t=e.loss.map((function(e){return e_(e)}));else if(null!=e.loss)for(var a in t={},e.loss)t[a]=e_(e.loss[a]);if(Array.isArray(e.metrics))n=e.metrics.map((function(e){return e_(e)}));else if(null!=e.metrics)for(var i in n={},e.metrics)n[i]=e_(e.metrics[i]);this.compile({loss:t,metrics:n,optimizer:r})},n.save=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l,c,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=9;break}if(0!==(r=ek(t)).length){e.next=6;break}throw new HF("Cannot find any save handlers for URL '"+t+"'");case 6:if(!(r.length>1)){e.next=8;break}throw new HF("Found more than one ("+r.length+") save handlers for URL '"+t+"'");case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new HF("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.next=13,Vw(this.getNamedWeights(n));case 13:if(a=e.sent,!1,null,i=this.toJSON(null,false),o={modelTopology:i,format:"layers-model",generatedBy:"TensorFlow.js tfjs-layers v"+HO,convertedBy:null},!(null!=n&&n.includeOptimizer)||null==this.optimizer){e.next=34;break}return o.trainingConfig=this.getTrainingConfig(),u="optimizer",e.t0=aN,e.next=25,this.optimizer.getWeights();case 25:return e.t1=e.sent,e.t2=u,e.next=29,e.t0.encodeWeights.call(e.t0,e.t1,e.t2);case 29:l=e.sent,c=l.data,p=l.specs,(s=a.specs).push.apply(s,p),a.data=Yw([a.data,c]);case 34:return null!=this.userDefinedMetadata&&(!0,LO(this.userDefinedMetadata,this.name,true),o.userDefinedMetadata=this.userDefinedMetadata),o.weightData=a.data,o.weightSpecs=a.specs,e.abrupt("return",t.save(o));case 38:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.setUserDefinedMetadata=function(e){LO(e,this.name),this.userDefinedMetadata=e},n.getUserDefinedMetadata=function(){return this.userDefinedMetadata},Rv(t,[{key:"stopTraining",set:function(e){this.stopTraining_=e},get:function(){return this.stopTraining_}},{key:"optimizer",get:function(){return this.optimizer_},set:function(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}}]),t}($O);RM.className="Model",BN(RM);var AM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t}(RM);function FM(){return FM=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("modelTopology"in t||(t={modelTopology:t}),null!=(r=t.modelTopology).model_config&&(r=r.model_config),a=GO(r),i=cO(a,n),null==t.weightsManifest){e.next=14;break}return e.next=9,Kk(t.weightsManifest,t.pathPrefix,i.weights.map((function(e){return e.originalName})));case 9:for(o=e.sent,s={},u=Bv(i.weights);!(l=u()).done;)c=l.value,s[c.originalName]=o[c.originalName];i.loadWeights(s),$N(o);case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)}))),FM.apply(this,arguments)}function _M(){return(_M=Cv(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==n&&(n={}),"string"!=typeof t){e.next=10;break}if(0!==(r=tk(t,n)).length){e.next=7;break}r.push(tN(t,n)),e.next=9;break;case 7:if(!(r.length>1)){e.next=9;break}throw new HF("Found more than one ("+r.length+") load handlers for URL '"+t+"'");case 9:t=r[0];case 10:return e.abrupt("return",DM(t,void 0,n));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function DM(e,t,n){return OM.apply(this,arguments)}function OM(){return OM=Cv(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s,u,l,c,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==r&&(r={}),null!=t.load){e.next=3;break}throw new HF("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,t.load();case 5:if(a=e.sent,null!=(i=a.modelTopology).model_config&&(i=i.model_config),o=null==r.strict||r.strict,s=null!=a.weightData&&null!=a.weightSpecs&&o,u=cO(GO(i),n,s),null!=(l=a.trainingConfig)&&u.loadTrainingConfig(l),null!=a.userDefinedMetadata&&u.setUserDefinedMetadata(a.userDefinedMetadata),null==a.weightData){e.next=24;break}if(null!=a.weightSpecs){e.next=17;break}throw new HF("LayersModel artifacts contains weight data, but not weight specs. Therefore loading of weights cannot proceed.");case 17:if(c=MM(a.weightData,a.weightSpecs),p=c.modelWeights,f=c.optimizerWeights,u.loadWeights(p,o),!(null!=u.optimizer&&f.length>0)){e.next=22;break}return e.next=22,u.optimizer.setWeights(f);case 22:$N(p),$N(f.map((function(e){return e.tensor})));case 24:return e.abrupt("return",u);case 25:case"end":return e.stop()}}),e)}))),OM.apply(this,arguments)}function MM(e,t){var n=Gw(e,t),r={},a=[];return t.forEach((function(e){"optimizer"===e.group?a.push({name:e.name,tensor:n[e.name]}):r[e.name]=n[e.name]})),{modelWeights:r,optimizerWeights:a}}AM.className="Functional",BN(AM);var LM=function(e){function t(t){var n;if(t=t||{},(n=e.call(this,{inputs:[],outputs:[]})||this).trainable=!0,n.built=!1,n.name=null!=t.name?t.name:DD("sequential_"),null!=t.layers)for(var r,a=Bv(t.layers);!(r=a()).done;){var i=r.value;n.add(i)}return n}Av(t,e);var n=t.prototype;return n.checkShape=function(e){if(e.inboundNodes[0].outputTensors[0].shape.some((function(e){return e<0})))throw new HF("Negative dimension size caused by adding layer "+e.name+" with input shape ["+e.inboundNodes[0].inputTensors[0].shape+"]")},n.add=function(e){var n,r=e instanceof t||e instanceof RM;if(r){if(1!==(n=e).outputs.length)throw new HF("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(1!==n.inputs.length)throw new HF("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(0===this.outputs.length){if(0===e.inboundNodes.length){if(null==e.batchInputShape)throw new HF("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");var a=QD({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(a)}if(r)this.outputs=n.outputs,this.inputs=n.inputs;else{if(1!==e.inboundNodes.length)throw new HF("A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer "+e.name+" which has "+e.inboundNodes.length+" pre-existing inbound connections.");if(1!==e.inboundNodes[0].outputTensors.length)throw new HF("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=YD(this.outputs[0])}this.inboundNodes=[],new qD({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:XF(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map((function(e){return e.shape})),outputShapes:this.outputs[0].shape})}else{var i=e.apply(this.outputs[0]);if(Array.isArray(i))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[i],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1},n.pop=function(){if(0===this.layers.length)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),0===this.layers.length)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{var e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}},n.call=function(e,t){return null==this.model&&this.build(),this.model.call(e,t)},n.build=function(e){if(zD(e),0===this.inputs.length||0===this.outputs.length)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new RM({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0},n.countParams=function(){return this.built||this.build(),e.prototype.countParams.call(this)},n.summary=function(t,n,r){void 0===r&&(r=console.log),this.built||this.build(),e.prototype.summary.call(this,t,n,r)},n.setWeights=function(e){null==this.model&&this.build(),this.model.setWeights(e)},n.evaluate=function(e,t,n){if(void 0===n&&(n={}),!this.built)throw new jF("The model needs to be compiled before being used.");return this.model.evaluate(e,t,n)},n.evaluateDataset=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new jF("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.evaluateDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.predict=function(e,t){return void 0===t&&(t={}),null==this.model&&this.build(),this.model.predict(e,t)},n.predictOnBatch=function(e){return null==this.model&&this.build(),this.model.predictOnBatch(e)},n.compile=function(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames},n.fit=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r={}),this.built){e.next=3;break}throw new jF("The model needs to be compiled before being used.");case 3:return e.abrupt("return",this.model.fit(t,n,r));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),n.fitDataset=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.built){e.next=2;break}throw new jF("The model needs to be compiled before being used.");case 2:return e.abrupt("return",this.model.fitDataset(t,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.trainOnBatch=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.trainOnBatch(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.fromConfig=function(e,n,r,a){var i;void 0===r&&(r={}),void 0===a&&(a=!1);var o={};if(n instanceof Array){if(null==n[0].className||"Merge"===n[0].className)throw new HF("Legacy serialization format not supported yet.");i=n}else Kv(null!=n.layers,(function(){return"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."})),i=n.layers,delete n.layers,o=n;var s=new e(o);if(!(s instanceof t))throw new qF("Sequential.fromConfig called on non-Sequential input: "+s);for(var u,l=Bv(i);!(u=l()).done;){var c=cO(u.value,undefined,a);a&&c.setFastWeightInitDuringBuild(!0),s.add(c)}return s},n.getConfig=function(){for(var e,t=[],n=Bv(this.layers);!(e=n()).done;){var r=e.value,a={};a.className=r.getClassName(),a.config=r.getConfig(),t.push(a)}return{name:this.name,layers:t}},Rv(t,[{key:"optimizer",get:function(){return null==this.model?void 0:this.model.optimizer},set:function(e){this.model.optimizer=e}},{key:"stopTraining",set:function(e){if(null==this.model)throw new HF("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e},get:function(){if(null==this.model)throw new HF("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}}]),t}(RM);function zM(e){return QD(e)}LM.className="Sequential",BN(LM);var PM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.getConfig=function(){return{}},t}(zN),BM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=1),function(e,t){if(void 0===t&&(t=1),1!==t)throw new qF("Support for alpha values other than 1 ("+t+") is not implemented yet.");return IS(e)}(e,t)},t}(PM);BM.className="elu",BN(BM);var WM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e){return yC(e)},t}(PM);WM.className="selu",BN(WM);var VM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e){return uC(e)},t}(PM);VM.className="relu",BN(VM);var UM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e){return QN((function(){return kT(6,uC(e))}))},t}(PM);UM.className="relu6",BN(UM);var GM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e){return e},t}(PM);GM.className="linear",BN(GM);var jM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e){return PI(e)},t}(PM);jM.className="sigmoid",BN(jM);var HM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e){return function(e){return QN((function(){var t=aI(.5,sI(.2,e));return JI(t,0,1)}))}(e)},t}(PM);HM.className="hardSigmoid",BN(HM);var qM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e){return ZS(e)},t}(PM);qM.className="softplus",BN(qM);var KM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e){return function(e){return QN((function(){return oI(e,uI(e).add(1))}))}(e)},t}(PM);KM.className="softsign",BN(KM);var XM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e){return WI(e)},t}(PM);XM.className="tanh",BN(XM);var YM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=-1),RC(e,t)},t}(PM);YM.className="softmax",BN(YM);var JM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=-1),nT(e,t)},t}(PM);JM.className="logSoftmax",BN(JM);var ZM=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e,t){return void 0===t&&(t=1),QN((function(){return PI(e.mul(t)).mul(e)}))},t}(PM);function QM(e){return e.getClassName()}function $M(e,t){return void 0===t&&(t={}),a_(e,PN.getMap().classNameMap,t,"activation")}function eL(e){if(null==e){var t={className:"linear",config:{}};return $M(t)}if("string"==typeof e){var n={};return n.className=e,n.config={},$M(n)}return e instanceof PM?e:$M(e)}function tL(e){if(null!=e&&"object"!=typeof e)throw new Error("Argument to L1L2 regularizer's constructor is expected to be an object, but received: "+e)}ZM.className="swish",BN(ZM);var nL=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t}(zN),rL=function(e){function t(t){var n;return n=e.call(this)||this,tL(t),n.l1=null==t||null==t.l1?.01:t.l1,n.l2=null==t||null==t.l2?.01:t.l2,n.hasL1=0!==n.l1,n.hasL2=0!==n.l2,n}Av(t,e);var n=t.prototype;return n.apply=function(e){var t=this;return QN((function(){var n=AT([1]);return t.hasL1&&(n=aI(n,tT(sI(t.l1,uI(e))))),t.hasL2&&(n=aI(n,tT(sI(t.l2,nD(e))))),n.asScalar()}))},n.getConfig=function(){return{l1:this.l1,l2:this.l2}},t.fromConfig=function(e,t){return new e({l1:t.l1,l2:t.l2})},t}(nL);rL.className="L1L2",BN(rL);var aL={l1l2:"L1L2"};function iL(e){return n_(e)}function oL(e,t){return void 0===t&&(t={}),a_(e,PN.getMap().classNameMap,t,"regularizer")}function sL(e){return null==e?null:"string"==typeof e?oL({className:e in aL?aL[e]:e,config:{}}):e instanceof nL?e:oL(e)}var uL=function(e){function t(t){var n;return(n=e.call(this,t??{})||this).supportsMasking=!0,null!=t&&(n.maxValue=t.maxValue),n}Av(t,e);var n=t.prototype;return n.call=function(e,t){e=LD(e);var n=uC(e);return null!=this.maxValue&&(n=JI(n,0,this.maxValue)),n},n.computeOutputShape=function(e){return e},n.getConfig=function(){var t={maxValue:this.maxValue},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);uL.className="ReLU",BN(uL);var lL=function(e){function t(t){var n;return(n=e.call(this,t??{})||this).DEFAULT_ALPHA=.3,null==t&&(t={}),n.alpha=null==t.alpha?n.DEFAULT_ALPHA:t.alpha,n}Av(t,e);var n=t.prototype;return n.call=function(e,t){var n=LD(e);return WS(n,this.alpha)},n.computeOutputShape=function(e){return e},n.getConfig=function(){var t={alpha:this.alpha},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);lL.className="LeakyReLU",BN(lL);var cL=function(e){function t(t){var n;if((n=e.call(this,t??{})||this).DEFAULT_ALPHA_INITIALIZER="zeros",null==t&&(t={}),n.supportsMasking=!0,n.alphaInitializer=ED(t.alphaInitializer||n.DEFAULT_ALPHA_INITIALIZER),n.alphaRegularizer=sL(t.alphaRegularizer),n.alphaConstraint=k_(t.alphaConstraint),null==t.sharedAxes)n.sharedAxes=null;else if(Array.isArray(t.sharedAxes))n.sharedAxes=t.sharedAxes;else{if("number"!=typeof t.sharedAxes)throw new HF("Expected sharedAxes to be a number or an array of numbers, but got "+t.sharedAxes);n.sharedAxes=[t.sharedAxes]}return n}Av(t,e);var n=t.prototype;return n.build=function(e){var t=(e=zD(e)).slice(1);if(null!=this.sharedAxes)for(var n,r=Bv(this.sharedAxes);!(n=r()).done;){t[n.value-1]=1}this.alpha=this.addWeight("alpha",t,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);var a={};if(null!=this.sharedAxes)for(var i=1;i<e.length;++i)a[i]=e[i];this.inputSpec=[new GD({ndim:e.length,axes:a})],this.built=!0},n.call=function(e,t){return e=LD(e),UT(e,this.alpha.read())},n.getConfig=function(){var t={alphaInitializer:CD(this.alphaInitializer),alphaRegularizer:iL(this.alphaRegularizer),alphaConstraint:x_(this.alphaConstraint),sharedAxes:this.sharedAxes},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);cL.className="PReLU",BN(cL);var pL=function(e){function t(t){var n;if((n=e.call(this,t??{})||this).DEFAULT_ALPHA=1,null==t&&(t={}),null!=t.alpha&&t.alpha!==n.DEFAULT_ALPHA)throw new qF("Non-default alpha value ("+t.alpha+") is not supported by the ELU layer yet.");return n.alpha=null==t.alpha?n.DEFAULT_ALPHA:t.alpha,n}Av(t,e);var n=t.prototype;return n.call=function(e,t){var n=LD(e);return IS(n)},n.computeOutputShape=function(e){return e},n.getConfig=function(){var t={alpha:this.alpha},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);pL.className="ELU",BN(pL);var fL=function(e){function t(t){var n;return(n=e.call(this,t??{})||this).DEFAULT_THETA=1,null==t&&(t={}),n.theta=null==t.theta?n.DEFAULT_THETA:t.theta,n}Av(t,e);var n=t.prototype;return n.call=function(e,t){var n=LD(e);return n.mul(H_(n.greater(this.theta),"float32"))},n.computeOutputShape=function(e){return e},n.getConfig=function(){var t={theta:this.theta},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);fL.className="ThresholdedReLU",BN(fL);var hL=function(e){function t(t){var n;return(n=e.call(this,t??{})||this).DEFAULT_AXIS=1,null==t&&(t={}),n.softmax=(new YM).apply,n.axis=null==t.axis?n.DEFAULT_AXIS:t.axis,n}Av(t,e);var n=t.prototype;return n.call=function(e,t){var n=LD(e);return this.softmax(n,this.axis)},n.computeOutputShape=function(e){return e},n.getConfig=function(){var t={axis:this.axis},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */
function dL(e,t,n){if("number"==typeof e)return XF(e,t);if(e.length!==t)throw new HF("The "+n+" argument must be an integer or tuple of "+t+" integers. Received: "+e.length+" elements.");for(var r=0;r<t;++r){var a=e[r];if((i=a)!==parseInt(i.toString(),10))throw new HF("The "+n+" argument must be an integer or tuple of "+t+" integers. Received: "+JSON.stringify(e)+" including a non-integer number "+a)}return e;var i}function mL(e,t,n,r,a){return void 0===a&&(a=1),null==e?e:(i="same"===n?e:e-(t+(t-1)*(a-1))+1,Math.floor((i+r-1)/r));var i}function vL(e,t,n,r){if(null==e)return null;if("valid"===r)e=e*t+G_([n-t,0]);else{if("same"!==r)throw new HF("Unsupport padding mode: "+r+".");e*=t}return e}function gL(e,t){return QN((function(){return A_(t),"channelsFirst"===t?sN(e,[0,2,3,1]):e}))}function yL(e,t){return QN((function(){return A_(t),"channelsFirst"===t?sN(e,[0,2,3,4,1]):e}))}function bL(e,t,n,r,a,i,o){return void 0===r&&(r=1),void 0===a&&(a="valid"),void 0===o&&(o=1),QN((function(){if(null==i&&(i="channelsLast"),A_(i),3!==e.shape.length)throw new HF("The input of a conv1dWithBias operation should be 3, but is "+e.shape.length+" instead.");if(3!==t.shape.length)throw new HF("The kernel for a conv1dWithBias operation should be 3, but is "+t.shape.length+" instead");if(null!=n&&1!==n.shape.length)throw new HF("The bias for a conv1dWithBias operation should be 1, but is "+t.shape.length+" instead");if("channelsFirst"===i&&(e=sN(e,[0,2,1])),"causal"===a)throw new qF("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");var s=nS(e,t,r,"same"===a?"same":"valid","NWC",o);return null!=n&&(s=aD(s,n)),s}))}function xL(e,t,n,r,a,i,o,s){return void 0===r&&(r=[1,1]),void 0===a&&(a="valid"),void 0===s&&(s=null),QN((function(){if(null==i&&(i="channelsLast"),A_(i),3!==e.rank&&4!==e.rank)throw new HF("conv2dWithBiasActivation expects input to be of rank 3 or 4, but received "+e.rank+".");if(3!==t.rank&&4!==t.rank)throw new HF("conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received "+e.rank+".");var u=gL(e,i);if("causal"===a)throw new qF("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return u=_E({x:u,filter:t,strides:r,pad:"same"===a?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:s}),"channelsFirst"===i&&(u=sN(u,[0,3,1,2])),u}))}function wL(e,t,n,r,a,i,o){return void 0===r&&(r=[1,1,1]),void 0===a&&(a="valid"),QN((function(){if(null==i&&(i="channelsLast"),A_(i),4!==e.rank&&5!==e.rank)throw new HF("conv3dWithBias expects input to be of rank 4 or 5, but received "+e.rank+".");if(4!==t.rank&&5!==t.rank)throw new HF("conv3dWithBias expects kernel to be of rank 4 or 5, but received "+e.rank+".");var s=yL(e,i);if("causal"===a)throw new qF("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return s=iS(s,t,r,"same"===a?"same":"valid","NDHWC",o),null!=n&&(s=aD(s,n)),"channelsFirst"===i&&(s=sN(s,[0,4,1,2,3])),s}))}hL.className="Softmax",BN(hL);var kL=function(e){function t(n,r){var a;if((a=e.call(this,r)||this).bias=null,a.DEFAULT_KERNEL_INITIALIZER="glorotNormal",a.DEFAULT_BIAS_INITIALIZER="zeros",t.verifyArgs(r),a.rank=n,c_(a.rank,"rank"),1!==a.rank&&2!==a.rank&&3!==a.rank)throw new qF("Convolution layer for rank other than 1, 2, or 3 ("+a.rank+") is not implemented yet.");if(a.kernelSize=dL(r.kernelSize,n,"kernelSize"),a.strides=dL(null==r.strides?1:r.strides,n,"strides"),a.padding=null==r.padding?"valid":r.padding,F_(a.padding),a.dataFormat=null==r.dataFormat?"channelsLast":r.dataFormat,A_(a.dataFormat),a.activation=eL(r.activation),a.useBias=null==r.useBias||r.useBias,a.biasInitializer=ED(r.biasInitializer||a.DEFAULT_BIAS_INITIALIZER),a.biasConstraint=k_(r.biasConstraint),a.biasRegularizer=sL(r.biasRegularizer),a.activityRegularizer=sL(r.activityRegularizer),a.dilationRate=dL(null==r.dilationRate?1:r.dilationRate,n,"dilationRate"),1===a.rank&&Array.isArray(a.dilationRate)&&1!==a.dilationRate.length)throw new HF("dilationRate must be a number or an array of a single number for 1D convolution, but received "+JSON.stringify(a.dilationRate));if(2===a.rank){if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate];else if(2!==a.dilationRate.length)throw new HF("dilationRate must be a number or array of two numbers for 2D convolution, but received "+JSON.stringify(a.dilationRate))}else if(3===a.rank)if("number"==typeof a.dilationRate)a.dilationRate=[a.dilationRate,a.dilationRate,a.dilationRate];else if(3!==a.dilationRate.length)throw new HF("dilationRate must be a number or array of three numbers for 3D convolution, but received "+JSON.stringify(a.dilationRate));return a}return Av(t,e),t.verifyArgs=function(e){if(YF("kernelSize"in e,"required key 'kernelSize' not in config"),"number"!=typeof e.kernelSize&&!l_(e.kernelSize,"number",1,3))throw new HF("BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received "+JSON.stringify(e.kernelSize)+".")},t.prototype.getConfig=function(){var t={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:QM(this.activation),useBias:this.useBias,biasInitializer:CD(this.biasInitializer),biasRegularizer:iL(this.biasRegularizer),activityRegularizer:iL(this.activityRegularizer),biasConstraint:x_(this.biasConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD),NL=function(e){function t(n,r){var a;return(a=e.call(this,n,r)||this).kernel=null,t.verifyArgs(r),a.filters=r.filters,c_(a.filters,"filters"),a.kernelInitializer=ED(r.kernelInitializer||a.DEFAULT_KERNEL_INITIALIZER),a.kernelConstraint=k_(r.kernelConstraint),a.kernelRegularizer=sL(r.kernelRegularizer),a}Av(t,e);var n=t.prototype;return n.build=function(e){var t;e=zD(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new HF("The channel dimension of the input should be defined. Found "+e[n]);var r=e[n],a=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:(t={},t[n]=r,t)}],this.built=!0},n.call=function(e,t){var n=this;return QN((function(){var t;e=LD(e);var r=null==n.bias?null:n.bias.read(),a=f_(n.activation.getClassName());if(null!=a&&2===n.rank)t=xL(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate,a);else{if(1===n.rank)t=bL(e,n.kernel.read(),r,n.strides[0],n.padding,n.dataFormat,n.dilationRate[0]);else if(2===n.rank)t=xL(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate);else{if(3!==n.rank)throw new qF("convolutions greater than 3D are not implemented yet.");t=wL(e,n.kernel.read(),r,n.strides,n.padding,n.dataFormat,n.dilationRate)}null!=n.activation&&(t=n.activation.apply(t))}return t}))},n.computeOutputShape=function(e){e=zD(e);for(var t=[],n="channelsLast"===this.dataFormat?e.slice(1,e.length-1):e.slice(2),r=0;r<n.length;++r){var a=mL(n[r],this.kernelSize[r],this.padding,this.strides[r],"number"==typeof this.dilationRate?this.dilationRate:this.dilationRate[r]);t.push(a)}var i=[e[0]];return"channelsLast"===this.dataFormat?(i=i.concat(t)).push(this.filters):(i.push(this.filters),i=i.concat(t)),i},n.getConfig=function(){var t={filters:this.filters,kernelInitializer:CD(this.kernelInitializer),kernelRegularizer:iL(this.kernelRegularizer),kernelConstraint:x_(this.kernelConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.verifyArgs=function(e){if(!("filters"in e)||"number"!=typeof e.filters||e.filters<1)throw new HF("Convolution layer expected config.filters to be a 'number' > 0 but got "+JSON.stringify(e.filters))},t}(kL),IL=function(e){function t(n){var r;return r=e.call(this,2,n)||this,t.verifyArgs(n),r}return Av(t,e),t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,t},t.verifyArgs=function(e){if("number"!=typeof e.kernelSize&&!l_(e.kernelSize,"number",1,2))throw new HF("Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received "+JSON.stringify(e.kernelSize)+".")},t}(NL);IL.className="Conv2D",BN(IL);var SL=function(e){function t(n){var r;return r=e.call(this,3,n)||this,t.verifyArgs(n),r}return Av(t,e),t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,t},t.verifyArgs=function(e){if("number"!=typeof e.kernelSize&&(!Array.isArray(e.kernelSize)||1!==e.kernelSize.length&&3!==e.kernelSize.length))throw new HF("Conv3D expects config.kernelSize to be number or [number, number, number], but received "+JSON.stringify(e.kernelSize)+".")},t}(NL);SL.className="Conv3D",BN(SL);var TL=function(e){function t(t){var n;if((n=e.call(this,t)||this).inputSpec=[new GD({ndim:4})],"same"!==n.padding&&"valid"!==n.padding)throw new HF("Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode "+n.padding);return n}Av(t,e);var n=t.prototype;return n.build=function(e){var t;if(4!==(e=zD(e)).length)throw new HF("Input should have rank 4; Received input shape: "+JSON.stringify(e));var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new HF("The channel dimension of the inputs should be defined. Found `None`.");var r=e[n],a=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",a,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new GD({ndim:4,axes:(t={},t[n]=r,t)})],this.built=!0},n.call=function(e,t){var n=this;return QN((function(){var t=LD(e);if(4!==t.shape.length)throw new HF("Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-"+t.shape.length);var r,a,i=t.shape,o=i[0];"channelsFirst"===n.dataFormat?(r=2,a=3):(r=1,a=2);var s=i[r],u=i[a],l=n.kernelSize[0],c=n.kernelSize[1],p=n.strides[0],f=n.strides[1],h=[o,vL(s,p,l,n.padding),vL(u,f,c,n.padding),n.filters];"channelsLast"!==n.dataFormat&&(t=sN(t,[0,2,3,1]));var d=aS(t,n.kernel.read(),h,n.strides,n.padding);return"channelsLast"!==n.dataFormat&&(d=sN(d,[0,3,1,2])),null!=n.bias&&(d=aD(d,n.bias.read(),n.dataFormat)),null!=n.activation&&(d=n.activation.apply(d)),d}))},n.computeOutputShape=function(e){var t,n,r,a=(e=zD(e)).slice();"channelsFirst"===this.dataFormat?(t=1,n=2,r=3):(t=3,n=1,r=2);var i=this.kernelSize[0],o=this.kernelSize[1],s=this.strides[0],u=this.strides[1];return a[t]=this.filters,a[n]=vL(a[n],s,i,this.padding),a[r]=vL(a[r],u,o,this.padding),a},n.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.dilationRate,t},t}(IL);TL.className="Conv2DTranspose",BN(TL);var CL=function(e){function t(t,n){var r;if((r=e.call(this,t,n)||this).DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",r.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",r.depthwiseKernel=null,r.pointwiseKernel=null,null==n.filters)throw new HF("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(null!=n.kernelInitializer||null!=n.kernelRegularizer||null!=n.kernelConstraint)throw new HF("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(null!=n.padding&&"same"!==n.padding&&"valid"!==n.padding)throw new HF("SeparableConv"+r.rank+"D supports only padding modes: 'same' and 'valid', but received "+JSON.stringify(n.padding));return r.depthMultiplier=null==n.depthMultiplier?1:n.depthMultiplier,r.depthwiseInitializer=ED(n.depthwiseInitializer||r.DEFAULT_DEPTHWISE_INITIALIZER),r.depthwiseRegularizer=sL(n.depthwiseRegularizer),r.depthwiseConstraint=k_(n.depthwiseConstraint),r.pointwiseInitializer=ED(n.depthwiseInitializer||r.DEFAULT_POINTWISE_INITIALIZER),r.pointwiseRegularizer=sL(n.pointwiseRegularizer),r.pointwiseConstraint=k_(n.pointwiseConstraint),r}Av(t,e);var n=t.prototype;return n.build=function(e){var t;if((e=zD(e)).length<this.rank+2)throw new HF("Inputs to SeparableConv"+this.rank+"D should have rank "+(this.rank+2)+", but received input shape: "+JSON.stringify(e));var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n]||e[n]<0)throw new HF("The channel dimension of the inputs should be defined, but found "+JSON.stringify(e[n]));for(var r=e[n],a=this.kernelSize.concat([r,this.depthMultiplier]),i=[],o=0;o<this.rank;++o)i.push(1);i.push(r*this.depthMultiplier,this.filters);var s=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",a,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,s,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,s,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,s,this.biasConstraint):this.bias=null,this.inputSpec=[new GD({ndim:this.rank+2,axes:(t={},t[n]=r,t)})],this.built=!0},n.call=function(e,t){var n=this;return QN((function(){var t;if(e=LD(e),1===n.rank)throw new qF("1D separable convolution is not implemented yet.");return 2===n.rank&&("channelsFirst"===n.dataFormat&&(e=sN(e,[0,2,3,1])),t=bC(e,n.depthwiseKernel.read(),n.pointwiseKernel.read(),n.strides,n.padding,n.dilationRate,"NHWC")),n.useBias&&(t=aD(t,n.bias.read(),n.dataFormat)),null!=n.activation&&(t=n.activation.apply(t)),"channelsFirst"===n.dataFormat&&(t=sN(t,[0,3,1,2])),t}))},n.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,delete t.kernelInitializer,delete t.kernelRegularizer,delete t.kernelConstraint,t.depthwiseInitializer=CD(this.depthwiseInitializer),t.pointwiseInitializer=CD(this.pointwiseInitializer),t.depthwiseRegularizer=iL(this.depthwiseRegularizer),t.pointwiseRegularizer=iL(this.pointwiseRegularizer),t.depthwiseConstraint=x_(this.depthwiseConstraint),t.pointwiseConstraint=x_(this.pointwiseConstraint),t},t}(NL);CL.className="SeparableConv";var EL=function(e){function t(t){return e.call(this,2,t)||this}return Av(t,e),t}(CL);EL.className="SeparableConv2D",BN(EL);var RL=function(e){function t(n){var r;return r=e.call(this,1,n)||this,t.verifyArgs(n),r.inputSpec=[{ndim:3}],r}return Av(t,e),t.prototype.getConfig=function(){var t=e.prototype.getConfig.call(this);return delete t.rank,delete t.dataFormat,t},t.verifyArgs=function(e){if("number"!=typeof e.kernelSize&&!l_(e.kernelSize,"number",1,1))throw new HF("Conv1D expects config.kernelSize to be number or number[] with length 1, but received "+JSON.stringify(e.kernelSize)+".")},t}(NL);RL.className="Conv1D",BN(RL);var AL=function(e){function t(t){var n;return n=e.call(this,t)||this,"number"==typeof t.cropping?n.cropping=[[t.cropping,t.cropping],[t.cropping,t.cropping]]:"number"==typeof t.cropping[0]?n.cropping=[[t.cropping[0],t.cropping[0]],[t.cropping[1],t.cropping[1]]]:n.cropping=t.cropping,n.dataFormat=void 0===t.dataFormat?"channelsLast":t.dataFormat,n.inputSpec=[{ndim:4}],n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){return"channelsFirst"===this.dataFormat?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]},n.call=function(e,t){var n=this;return QN((function(){if(e=LD(e),"channelsLast"===n.dataFormat){var t=Y_(e,n.cropping[0][0],e.shape[1]-n.cropping[0][0]-n.cropping[0][1],2);return Y_(t,n.cropping[1][0],e.shape[2]-n.cropping[1][1]-n.cropping[1][0],3)}var r=Y_(e,n.cropping[0][0],e.shape[2]-n.cropping[0][0]-n.cropping[0][1],3);return Y_(r,n.cropping[1][0],e.shape[3]-n.cropping[1][1]-n.cropping[1][0],4)}))},n.getConfig=function(){var t={cropping:this.cropping,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);AL.className="Cropping2D",BN(AL);var FL=function(e){function t(t){var n,r;return(n=e.call(this,t)||this).DEFAULT_SIZE=[2,2],n.inputSpec=[{ndim:4}],n.size=null==t.size?n.DEFAULT_SIZE:t.size,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,A_(n.dataFormat),n.interpolation=null==t.interpolation?"nearest":t.interpolation,r=n.interpolation,u_(S_,"InterpolationFormat",r),n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){if("channelsFirst"===this.dataFormat){var t=null==e[2]?null:this.size[0]*e[2],n=null==e[3]?null:this.size[1]*e[3];return[e[0],e[1],t,n]}var r=null==e[1]?null:this.size[0]*e[1],a=null==e[2]?null:this.size[1]*e[2];return[e[0],r,a,e[3]]},n.call=function(e,t){var n=this;return QN((function(){var t=LD(e),r=t.shape;if("channelsFirst"===n.dataFormat){t=sN(t,[0,2,3,1]);var a=n.size[0]*r[2],i=n.size[1]*r[3],o="nearest"===n.interpolation?t.resizeNearestNeighbor([a,i]):t.resizeBilinear([a,i]);return sN(o,[0,3,1,2])}var s=n.size[0]*r[1],u=n.size[1]*r[2];return"nearest"===n.interpolation?t.resizeNearestNeighbor([s,u]):t.resizeBilinear([s,u])}))},n.getConfig=function(){var t={size:this.size,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);FL.className="UpSampling2D",BN(FL);var _L=function(e){function t(t){var n;return(n=e.call(this,2,t)||this).depthwiseKernel=null,n.depthMultiplier=null==t.depthMultiplier?1:t.depthMultiplier,n.depthwiseInitializer=ED(t.depthwiseInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.depthwiseConstraint=k_(t.depthwiseConstraint),n.depthwiseRegularizer=sL(t.depthwiseRegularizer),n}Av(t,e);var n=t.prototype;return n.build=function(e){if((e=zD(e)).length<4)throw new HF("Inputs to DepthwiseConv2D should have rank 4. Received input shape: "+JSON.stringify(e)+".");var t="channelsFirst"===this.dataFormat?1:3;if(null==e[t]||e[t]<0)throw new HF("The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not ("+e[t]+").");var n=e[t],r=[this.kernelSize[0],this.kernelSize[1],n,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",r,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[n*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},n.call=function(e,t){var n=this;return QN((function(){e=LD(e);var t,r,a,i,o,s,u=(t=e,r=n.depthwiseKernel.read(),a=n.strides,i=n.padding,o=n.dataFormat,s=null,void 0===a&&(a=[1,1]),void 0===i&&(i="valid"),QN((function(){null==o&&(o="channelsLast"),A_(o);var e=gL(t,o);if(4!==t.rank)throw new HF("Input for depthwiseConv2d is required to be 4-D, but is instead "+t.rank+"-D");if(4!==r.rank)throw new HF("depthwiseKernel is required to be 4-D, but is instead "+r.rank+"-D");return e=hS(e,r,a,"same"===i?"same":"valid","NHWC",s),"channelsFirst"===o&&(e=sN(e,[0,3,1,2])),e})));return n.useBias&&(u=aD(u,n.bias.read(),n.dataFormat)),null!=n.activation&&(u=n.activation.apply(u)),u}))},n.computeOutputShape=function(e){e=zD(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,a=mL(t,this.kernelSize[0],this.padding,this.strides[0]),i=mL(n,this.kernelSize[1],this.padding,this.strides[1]);return"channelsFirst"===this.dataFormat?[e[0],r,a,i]:[e[0],a,i,r]},n.getConfig=function(){var t=e.prototype.getConfig.call(this);return t.depthMultiplier=this.depthMultiplier,t.depthwiseInitializer=CD(this.depthwiseInitializer),t.depthwiseRegularizer=iL(this.depthwiseRegularizer),t.depthwiseConstraint=x_(this.depthwiseRegularizer),t},t}(kL);function DL(e,t,n,r){if(Array.isArray(e)){if(null!=t||null!=n)throw new HF("When inputs is an array, neither initialState or constants should be provided");null!=r&&(n=e.slice(e.length-r,e.length),e=e.slice(0,e.length-r)),e.length>1&&(t=e.slice(1,e.length)),e=e[0]}function a(e){return null==e||Array.isArray(e)?e:[e]}return{inputs:e,initialState:t=a(t),constants:n=a(n)}}function OL(e,t,n,r,a,i,o,s){return void 0===r&&(r=!1),void 0===o&&(o=!1),void 0===s&&(s=!1),QN((function(){var u=t.shape.length;if(u<3)throw new HF("Input should be at least 3D, but is "+u+"D.");var l=[1,0].concat(j_(2,u));if(t=sN(t,l),null!=i)throw new qF("The rnn() functoin of the deeplearn.js backend does not support constants yet.");o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),null!=a&&((a=a.asType("bool").asType("float32")).rank===u-1&&(a=CS(a,-1)),a=sN(a,l)),r&&(t=cC(t,0),null!=a&&(a=cC(a,0)));var c,p,f=[],h=n,d=t.shape[0],m=XC(t);null!=a&&(p=XC(a));for(var v,g=function(t){var n=m[t],r=QN((function(){return e(n,h)}));if(null==a)c=r[0],h=r[1];else{var i=QN((function(){var e=p[t],n=_T(e).sub(e);return{output:r[0].mul(e).add(h[0].mul(n)),newStates:h.map((function(t,a){return r[1][a].mul(e).add(t.mul(n))}))}}));c=i.output,h=i.newStates}s&&f.push(c)},y=0;y<d;++y)g(y);if(s){v=PC(f,1)}return[c,v,h]}))}_L.className="DepthwiseConv2D",BN(_L);var ML=function(e){function t(t){var n,r;if(n=e.call(this,t)||this,null==t.cell)throw new HF("cell property is missing for the constructor of RNN.");if(null==(r=Array.isArray(t.cell)?new GL({cells:t.cell}):t.cell).stateSize)throw new HF("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");return n.cell=r,n.returnSequences=null!=t.returnSequences&&t.returnSequences,n.returnState=null!=t.returnState&&t.returnState,n.goBackwards=null!=t.goBackwards&&t.goBackwards,n._stateful=null!=t.stateful&&t.stateful,n.unroll=null!=t.unroll&&t.unroll,n.supportsMasking=!0,n.inputSpec=[new GD({ndim:3})],n.stateSpec=null,n.states_=null,n.numConstants=null,n.keptStates=[],n}Av(t,e);var n=t.prototype;return n.getStates=function(){return null==this.states_?j_(0,Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1).map((function(e){return null})):this.states_},n.setStates=function(e){this.states_=e},n.computeOutputShape=function(e){OD(e)&&(e=e[0]);var t=this.cell.stateSize;Array.isArray(t)||(t=[t]);var n,r=t[0];if(n=this.returnSequences?[e[0],e[1],r]:[e[0],r],this.returnState){for(var a,i=[],o=Bv(t);!(a=o()).done;){var s=a.value;i.push([e[0],s])}return[n].concat(i)}return n},n.computeMask=function(e,t){var n=this;return QN((function(){Array.isArray(t)&&(t=t[0]);var e=n.returnSequences?t:null;if(n.returnState){var r=n.states.map((function(e){return null}));return[e].concat(r)}return e}))},n.build=function(e){if(null!=this.numConstants)throw new qF("Constants support is not implemented in RNN yet.");OD(e)&&(e=e[0]);var t=this.stateful?e[0]:null,n=e.slice(2);this.inputSpec[0]=new GD({shape:[t,null].concat(n)});var r,a=[e[0]].concat(e.slice(2));if(this.cell.build(a),r=Array.isArray(this.cell.stateSize)?this.cell.stateSize:[this.cell.stateSize],null!=this.stateSpec){if(!Qv(this.stateSpec.map((function(e){return e.shape[e.shape.length-1]})),r))throw new HF("An initialState was passed that is not compatible with cell.stateSize. Received stateSpec="+this.stateSpec+"; However cell.stateSize is "+this.cell.stateSize)}else this.stateSpec=r.map((function(e){return new GD({shape:[null,e]})}));this.stateful&&this.resetStates()},n.resetStates=function(e,t){var n=this;void 0===t&&(t=!1),QN((function(){if(!n.stateful)throw new GF("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=n.inputSpec[0].shape[0];if(null==r)throw new HF("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==n.states_)Array.isArray(n.cell.stateSize)?n.states_=n.cell.stateSize.map((function(e){return AT([r,e])})):n.states_=[AT([r,n.cell.stateSize])];else if(null==e)$N(n.states_),null!=n.keptStates&&($N(n.keptStates),n.keptStates=[]),Array.isArray(n.cell.stateSize)?n.states_=n.cell.stateSize.map((function(e){return AT([r,e])})):n.states_[0]=AT([r,n.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==n.states_.length)throw new HF("Layer "+n.name+" expects "+n.states_.length+" state(s), but it received "+e.length+" state value(s). Input received: "+e);!0===t?n.keptStates.push(n.states_.slice()):$N(n.states_);for(var a=0;a<n.states_.length;++a){var i=e[a],o=Array.isArray(n.cell.stateSize)?n.cell.stateSize[a]:n.cell.stateSize,s=[r,o];if(!Qv(i.shape,s))throw new HF("State "+a+" is incompatible with layer "+n.name+": expected shape="+s+", received shape="+i.shape);n.states_[a]=i}}n.states_=n.states_.map((function(e){return eI(e.clone())}))}))},n.apply=function(t,n){var r=null==n?null:n.initialState,a=null==n?null:n.constants;null==n&&(n={});var i=DL(t,r,a,this.numConstants);t=i.inputs,r=i.initialState,a=i.constants;var o=[],s=[];if(null!=r){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(var u,l=Bv(r);!(u=l()).done;){var c=u.value;this.stateSpec.push(new GD({shape:c.shape}))}s=s.concat(this.stateSpec)}if(null!=a&&(n.constants=a,o=o.concat(a),this.numConstants=a.length),o[0]instanceof jD){var p=[t].concat(o),f=this.inputSpec.concat(s),h=this.inputSpec;this.inputSpec=f;var d=e.prototype.apply.call(this,p,n);return this.inputSpec=h,d}return e.prototype.apply.call(this,t,n)},n.call=function(e,t){var n=this;return QN((function(){var r=null==t?null:t.mask,a=null==t?null:t.training,i=null==t?null:t.initialState;e=LD(e),null==i&&(i=n.stateful?n.states_:n.getInitialState(e));var o=Array.isArray(n.cell.stateSize)?n.cell.stateSize.length:1;if(i.length!==o)throw new HF("RNN Layer has "+o+" state(s) but was passed "+i.length+" initial state(s).");n.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");var s={training:a},u=OL((function(e,t){var r=n.cell.call([e].concat(t),s);return[r[0],r.slice(1)]}),e,i,n.goBackwards,r,null,n.unroll,n.returnSequences),l=u[0],c=u[1],p=u[2];n.stateful&&n.resetStates(p,a);var f=n.returnSequences?c:l;return n.returnState?[f].concat(p):f}))},n.getInitialState=function(e){var t=this;return QN((function(){var n=AT(e.shape);return n=q_(n=tT(n,[1,2])),Array.isArray(t.cell.stateSize)?t.cell.stateSize.map((function(e){return e>1?Q_(n,[1,e]):n})):t.cell.stateSize>1?[Q_(n,[1,t.cell.stateSize])]:[n]}))},n.setFastWeightInitDuringBuild=function(t){e.prototype.setFastWeightInitDuringBuild.call(this,t),null!=this.cell&&this.cell.setFastWeightInitDuringBuild(t)},n.getConfig=function(){var n=e.prototype.getConfig.call(this),r={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};null!=this.numConstants&&(r.numConstants=this.numConstants);var a=this.cell.getConfig();return this.getClassName()===t.className&&(r.cell={className:this.cell.getClassName(),config:a}),Object.assign({},a,n,r)},t.fromConfig=function(e,t,n){void 0===n&&(n={});var r=cO(t.cell,n);return new e(Object.assign(t,{cell:r}))},Rv(t,[{key:"states",get:function(){if(null==this.states_){for(var e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,t=[],n=0;n<e;++n)t.push(null);return t}return this.states_},set:function(e){this.states_=e}},{key:"trainableWeights",get:function(){return this.trainable?this.cell.trainableWeights:[]}},{key:"nonTrainableWeights",get:function(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}}]),t}(XD);ML.className="RNN",BN(ML);var LL=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t}(XD),zL=function(e){function t(t){var n;return(n=e.call(this,t)||this).DEFAULT_ACTIVATION="tanh",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,c_(n.units,"units"),n.activation=eL(null==t.activation?n.DEFAULT_ACTIVATION:t.activation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=ED(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=ED(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=ED(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=sL(t.kernelRegularizer),n.recurrentRegularizer=sL(t.recurrentRegularizer),n.biasRegularizer=sL(t.biasRegularizer),n.kernelConstraint=k_(t.kernelConstraint),n.recurrentConstraint=k_(t.recurrentConstraint),n.biasConstraint=k_(t.biasConstraint),n.dropout=U_([1,G_([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=U_([1,G_([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}Av(t,e);var n=t.prototype;return n.build=function(e){e=zD(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},n.call=function(e,t){var n=this;return QN((function(){if(2!==e.length)throw new HF("SimpleRNNCell expects 2 input Tensors, got "+e.length+".");var r=e[1];e=e[0];var a,i=null!=t.training&&t.training;0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=jL({ones:function(){return _T(e)},rate:n.dropout,training:i})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=jL({ones:function(){return _T(r)},rate:n.recurrentDropout,training:i}));var o=n.dropoutMask,s=n.recurrentDropoutMask;a=eD(null!=o?sI(e,o):e,n.kernel.read()),null!=n.bias&&(a=aD(a,n.bias.read())),null!=s&&(r=sI(r,s));var u=aI(a,eD(r,n.recurrentKernel.read()));return null!=n.activation&&(u=n.activation.apply(u)),[u,u]}))},n.getConfig=function(){var t=e.prototype.getConfig.call(this),n={units:this.units,activation:QM(this.activation),useBias:this.useBias,kernelInitializer:CD(this.kernelInitializer),recurrentInitializer:CD(this.recurrentInitializer),biasInitializer:CD(this.biasInitializer),kernelRegularizer:iL(this.kernelRegularizer),recurrentRegularizer:iL(this.recurrentRegularizer),biasRegularizer:iL(this.biasRegularizer),activityRegularizer:iL(this.activityRegularizer),kernelConstraint:x_(this.kernelConstraint),recurrentConstraint:x_(this.recurrentConstraint),biasConstraint:x_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},t,n)},t}(LL);zL.className="SimpleRNNCell",BN(zL);var PL=function(e){function t(t){return t.cell=new zL(t),e.call(this,t)||this}return Av(t,e),t.prototype.call=function(t,n){var r=this;return QN((function(){null!=r.cell.dropoutMask&&($N(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&($N(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,i=null==n?null:n.training,o=null==n?null:n.initialState;return e.prototype.call.call(r,t,{mask:a,training:i,initialState:o})}))},t.fromConfig=function(e,t){return new e(t)},t}(ML);PL.className="SimpleRNN",BN(PL);var BL=function(e){function t(t){var n;if((n=e.call(this,t)||this).DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",t.resetAfter)throw new HF("GRUCell does not support reset_after parameter set to true.");return n.units=t.units,c_(n.units,"units"),n.activation=eL(void 0===t.activation?n.DEFAULT_ACTIVATION:t.activation),n.recurrentActivation=eL(void 0===t.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=ED(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=ED(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=ED(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelRegularizer=sL(t.kernelRegularizer),n.recurrentRegularizer=sL(t.recurrentRegularizer),n.biasRegularizer=sL(t.biasRegularizer),n.kernelConstraint=k_(t.kernelConstraint),n.recurrentConstraint=k_(t.recurrentConstraint),n.biasConstraint=k_(t.biasConstraint),n.dropout=U_([1,G_([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=U_([1,G_([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.implementation=t.implementation,n.stateSize=n.units,n.dropoutMask=null,n.recurrentDropoutMask=null,n}Av(t,e);var n=t.prototype;return n.build=function(e){var t=(e=zD(e))[e.length-1];this.kernel=this.addWeight("kernel",[t,3*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,3*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[3*this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0},n.call=function(e,t){var n=this;return QN((function(){if(2!==e.length)throw new HF("GRUCell expects 2 input Tensors (inputs, h, c), got "+e.length+".");var r=null!=t.training&&t.training,a=e[1];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=jL({ones:function(){return _T(e)},rate:n.dropout,training:r,count:3})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=jL({ones:function(){return _T(a)},rate:n.recurrentDropout,training:r,count:3}));var i,o,s,u=n.dropoutMask,l=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=sI(e,u[0]));var c=eD(e,n.kernel.read());n.useBias&&(c=aD(c,n.bias.read())),0<n.recurrentDropout&&n.recurrentDropout<1&&(a=sI(a,l[0]));var p=n.recurrentKernel.read(),f=DC(p,[2*n.units,n.units],p.rank-1),h=f[0],d=f[1],m=eD(a,h),v=DC(c,3,c.rank-1),g=v[0],y=v[1],b=v[2],x=DC(m,2,m.rank-1),w=x[0],k=x[1];i=n.recurrentActivation.apply(aI(g,w)),o=n.recurrentActivation.apply(aI(y,k));var N=eD(sI(o,a),d);s=n.activation.apply(aI(b,N));var I=aI(sI(i,a),sI(aI(1,JS(i)),s));return[I,I]}))},n.getConfig=function(){var t=e.prototype.getConfig.call(this),n={units:this.units,activation:QM(this.activation),recurrentActivation:QM(this.recurrentActivation),useBias:this.useBias,kernelInitializer:CD(this.kernelInitializer),recurrentInitializer:CD(this.recurrentInitializer),biasInitializer:CD(this.biasInitializer),kernelRegularizer:iL(this.kernelRegularizer),recurrentRegularizer:iL(this.recurrentRegularizer),biasRegularizer:iL(this.biasRegularizer),activityRegularizer:iL(this.activityRegularizer),kernelConstraint:x_(this.kernelConstraint),recurrentConstraint:x_(this.recurrentConstraint),biasConstraint:x_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},t,n)},t}(LL);BL.className="GRUCell",BN(BL);var WL=function(e){function t(t){return 0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new BL(t),e.call(this,t)||this}return Av(t,e),t.prototype.call=function(t,n){var r=this;return QN((function(){null!=r.cell.dropoutMask&&($N(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&($N(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,i=null==n?null:n.training,o=null==n?null:n.initialState;return e.prototype.call.call(r,t,{mask:a,training:i,initialState:o})}))},t.fromConfig=function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)},t}(ML);WL.className="GRU",BN(WL);var VL=function(e){function t(t){var n;return(n=e.call(this,t)||this).DEFAULT_ACTIVATION="tanh",n.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_RECURRENT_INITIALIZER="orthogonal",n.DEFAULT_BIAS_INITIALIZER="zeros",n.units=t.units,c_(n.units,"units"),n.activation=eL(void 0===t.activation?n.DEFAULT_ACTIVATION:t.activation),n.recurrentActivation=eL(void 0===t.recurrentActivation?n.DEFAULT_RECURRENT_ACTIVATION:t.recurrentActivation),n.useBias=null==t.useBias||t.useBias,n.kernelInitializer=ED(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.recurrentInitializer=ED(t.recurrentInitializer||n.DEFAULT_RECURRENT_INITIALIZER),n.biasInitializer=ED(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.unitForgetBias=t.unitForgetBias,n.kernelRegularizer=sL(t.kernelRegularizer),n.recurrentRegularizer=sL(t.recurrentRegularizer),n.biasRegularizer=sL(t.biasRegularizer),n.kernelConstraint=k_(t.kernelConstraint),n.recurrentConstraint=k_(t.recurrentConstraint),n.biasConstraint=k_(t.biasConstraint),n.dropout=U_([1,G_([0,null==t.dropout?0:t.dropout])]),n.recurrentDropout=U_([1,G_([0,null==t.recurrentDropout?0:t.recurrentDropout])]),n.implementation=t.implementation,n.stateSize=[n.units,n.units],n.dropoutMask=null,n.recurrentDropoutMask=null,n}Av(t,e);var n=t.prototype;return n.build=function(e){var t,n,r=(e=zD(e))[e.length-1];if(this.kernel=this.addWeight("kernel",[r,4*this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,4*this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){if(this.unitForgetBias){var a=this.biasInitializer,i=this.units;n=new(t=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e,t){var n=a.apply([i]),r=(new pD).apply([i]),o=a.apply([2*i]);return Z_(Z_(n,r),o)},t}(lD),t.className="CustomInit",t)}else n=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.units],null,n,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0},n.call=function(e,t){var n=this;return QN((function(){var r=null!=t.training&&t.training;if(3!==e.length)throw new HF("LSTMCell expects 3 input Tensors (inputs, h, c), got "+e.length+".");var a=e[1],i=e[2];e=e[0],0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=jL({ones:function(){return _T(e)},rate:n.dropout,training:r,count:4})),0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=jL({ones:function(){return _T(a)},rate:n.recurrentDropout,training:r,count:4}));var o,s,u,l,c=n.dropoutMask,p=n.recurrentDropoutMask;0<n.dropout&&n.dropout<1&&(e=sI(e,c[0]));var f=eD(e,n.kernel.read());0<n.recurrentDropout&&n.recurrentDropout<1&&(a=sI(a,p[0])),f=aI(f,eD(a,n.recurrentKernel.read())),n.useBias&&(f=aD(f,n.bias.read()));var h=DC(f,4,f.rank-1),d=h[0],m=h[1],v=h[2],g=h[3];o=n.recurrentActivation.apply(d),s=n.recurrentActivation.apply(m),u=aI(sI(s,i),sI(o,n.activation.apply(v))),l=n.recurrentActivation.apply(g);var y=sI(l,n.activation.apply(u));return[y,y,u]}))},n.getConfig=function(){var t=e.prototype.getConfig.call(this),n={units:this.units,activation:QM(this.activation),recurrentActivation:QM(this.recurrentActivation),useBias:this.useBias,kernelInitializer:CD(this.kernelInitializer),recurrentInitializer:CD(this.recurrentInitializer),biasInitializer:CD(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:iL(this.kernelRegularizer),recurrentRegularizer:iL(this.recurrentRegularizer),biasRegularizer:iL(this.biasRegularizer),activityRegularizer:iL(this.activityRegularizer),kernelConstraint:x_(this.kernelConstraint),recurrentConstraint:x_(this.recurrentConstraint),biasConstraint:x_(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},t,n)},t}(LL);VL.className="LSTMCell",BN(VL);var UL=function(e){function t(t){return 0===t.implementation&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),t.cell=new VL(t),e.call(this,t)||this}return Av(t,e),t.prototype.call=function(t,n){var r=this;return QN((function(){null!=r.cell.dropoutMask&&($N(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&($N(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null);var a=null==n?null:n.mask,i=null==n?null:n.training,o=null==n?null:n.initialState;return e.prototype.call.call(r,t,{mask:a,training:i,initialState:o})}))},t.fromConfig=function(e,t){return 0===t.implmentation&&(t.implementation=1),new e(t)},t}(ML);UL.className="LSTM",BN(UL);var GL=function(e){function t(t){var n;return(n=e.call(this,t)||this).cells=t.cells,n}Av(t,e);var n=t.prototype;return n.call=function(e,t){var n=this;return QN((function(){for(var r,a=e.slice(1),i=[],o=Bv(n.cells.slice().reverse());!(r=o()).done;){var s=r.value;Array.isArray(s.stateSize)?i.push(a.splice(0,s.stateSize.length)):i.push(a.splice(0,1))}i.reverse();for(var u,l=[],c=0;c<n.cells.length;++c){var p=n.cells[c];a=i[c],u=0===c?[e[0]].concat(a):[u[0]].concat(a),u=p.call(u,t),l.push(u.slice(1))}a=[];for(var f,h=Bv(l.slice().reverse());!(f=h()).done;){var d,m=f.value;(d=a).push.apply(d,m)}return[u[0]].concat(a)}))},n.build=function(e){var t;OD(e)&&(e=e[0]),this.cells.forEach((function(n,r){M_("RNNCell_"+r,(function(){n.build(e),t=Array.isArray(n.stateSize)?n.stateSize[0]:n.stateSize,e=[e[0],t]}))})),this.built=!0},n.getConfig=function(){var t=e.prototype.getConfig.call(this),n={cells:this.cells.map((function(e){return{className:e.getClassName(),config:e.getConfig()}}))};return Object.assign({},t,n)},t.fromConfig=function(e,t,n){void 0===n&&(n={});for(var r,a=[],i=Bv(t.cells);!(r=i()).done;){var o=r.value;a.push(cO(o,n))}return new e({cells:a})},n.getWeights=function(){for(var e,t=[],n=Bv(this.cells);!(e=n()).done;){var r=e.value;t.push.apply(t,r.weights)}return VD(t)},n.setWeights=function(e){for(var t,n=[],r=Bv(this.cells);!(t=r()).done;)for(var a=t.value,i=a.weights.length,o=e.splice(i),s=0;s<a.weights.length;++s)n.push([a.weights[s],o[s]]);UD(n)},Rv(t,[{key:"stateSize",get:function(){for(var e,t=[],n=Bv(this.cells.slice().reverse());!(e=n()).done;){var r=e.value;Array.isArray(r.stateSize)?t.push.apply(t,r.stateSize):t.push(r.stateSize)}return t}},{key:"trainableWeights",get:function(){if(!this.trainable)return[];for(var e,t=[],n=Bv(this.cells);!(e=n()).done;){var r=e.value;t.push.apply(t,r.trainableWeights)}return t}},{key:"nonTrainableWeights",get:function(){for(var e,t=[],n=Bv(this.cells);!(e=n()).done;){var r=e.value;t.push.apply(t,r.nonTrainableWeights)}if(!this.trainable){for(var a,i=[],o=Bv(this.cells);!(a=o()).done;){var s=a.value;i.push.apply(i,s.trainableWeights)}return i.concat(t)}return t}}]),t}(LL);function jL(e){var t=e.ones,n=e.rate,r=e.training,a=void 0!==r&&r,i=e.count,o=void 0===i?1:i,s=function(){return iD(t(),n)},u=function(){return oD(s,t,a)};return!o||o<=1?eI(u().clone()):Array(o).fill(void 0).map(u).map((function(e){return eI(e.clone())}))}
/**
	 * @license
	 * Copyright 2020 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */GL.className="StackedRNNCells",BN(GL);var HL=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},qL=function(e){function t(t){var n;if(t.unroll)throw new qF("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(t.cell))throw new qF("It is not possible at the moment to stack convolutional cells.");return(n=e.call(this,t)||this).inputSpec=[new GD({ndim:5})],n}Av(t,e);var n=t.prototype;return n.call=function(t,n){var r=this;return QN((function(){if(null!=r.cell.dropoutMask&&($N(r.cell.dropoutMask),r.cell.dropoutMask=null),null!=r.cell.recurrentDropoutMask&&($N(r.cell.recurrentDropoutMask),r.cell.recurrentDropoutMask=null),n&&n.constants)throw new HF("ConvRNN2D cell does not support constants");var a=null==n?null:n.mask,i=null==n?null:n.training,o=null==n?null:n.initialState;return e.prototype.call.call(r,t,{mask:a,training:i,initialState:o})}))},n.computeOutputShape=function(e){var t=this.computeSingleOutputShape(e);return this.returnSequences||(t=[t[0]].concat(t.slice(2))),this.returnState&&(t=[t].concat(Array(2).fill([e[0]].concat(t.slice(-3))))),t},n.getInitialState=function(e){var t=this;return QN((function(){var n=t.cell.stateSize,r=e.shape,a=t.computeSingleOutputShape(r),i=AT([a[0]].concat(a.slice(2)));return Array.isArray(n)?Array(n.length).fill(i):[i]}))},n.resetStates=function(e,t){var n=this;void 0===t&&(t=!1),QN((function(){if(!n.stateful)throw new GF("Cannot call resetStates() on an RNN Layer that is not stateful.");var r=n.inputSpec[0].shape,a=n.computeSingleOutputShape(r),i=[a[0]].concat(a.slice(2));if(null==r[0])throw new HF("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(null==n.getStates())Array.isArray(n.cell.stateSize)?n.states_=n.cell.stateSize.map((function(){return AT(i)})):n.states_=[AT(i)];else if(null==e)$N(n.states_),null!=n.keptStates&&($N(n.keptStates),n.keptStates=[]),Array.isArray(n.cell.stateSize)?n.states_=n.cell.stateSize.map((function(){return AT(i)})):n.states_[0]=AT(i);else{if(Array.isArray(e)||(e=[e]),e.length!==n.states_.length)throw new HF("Layer "+n.name+" expects "+n.states_.length+" state(s), but it received "+e.length+" state value(s). Input received: "+e);t?n.keptStates.push(n.states_.slice()):$N(n.states_);for(var o=0;o<n.states_.length;++o){var s=e[o],u=i;if(!Qv(s.shape,u))throw new HF("State "+o+" is incompatible with layer "+n.name+": expected shape="+u+", received shape="+s.shape);n.states_[o]=s}}n.states_=n.states_.map((function(e){return eI(e.clone())}))}))},n.computeSingleOutputShape=function(e){var t=this.cell,n=t.dataFormat,r=t.filters,a=t.kernelSize,i=t.padding,o=t.strides,s=t.dilationRate,u="channelsFirst"===n,l=e[u?3:2],c=e[u?4:3],p=mL(l,a[0],i,o[0],s[0]),f=mL(c,a[1],i,o[1],s[1]);return[].concat(e.slice(0,2),u?[r,p,f]:[p,f,r])},t}(ML);qL.className="ConvRNN2D";var KL=function(e){function t(t){var n,r=t.filters,a=t.kernelSize,i=t.strides,o=t.padding,s=t.dataFormat,u=t.dilationRate;return(n=e.call(this,Object.assign({},t,{units:r}))||this).filters=r,c_(n.filters,"filters"),n.kernelSize=dL(a,2,"kernelSize"),n.kernelSize.forEach((function(e){return c_(e,"kernelSize")})),n.strides=dL(i||1,2,"strides"),n.strides.forEach((function(e){return c_(e,"strides")})),n.padding=o||"valid",F_(n.padding),n.dataFormat=s||"channelsLast",A_(n.dataFormat),n.dilationRate=dL(u||1,2,"dilationRate"),n.dilationRate.forEach((function(e){return c_(e,"dilationRate")})),n}Av(t,e);var n=t.prototype;return n.build=function(e){var t;e=zD(e);var n="channelsFirst"===this.dataFormat?1:e.length-1;if(null==e[n])throw new HF("The channel dimension of the input should be defined. Found "+e[n]);var r=e[n],a=this.kernelSize.concat([r,4*this.filters]);this.kernel=this.addWeight("kernel",a,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);var i=this.kernelSize.concat([this.filters,4*this.filters]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",i,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){var o;if(this.unitForgetBias){var s=this.biasInitializer,u=this.filters;o=new(t=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.apply=function(e,t){return J_([s.apply([u]),FT([u]),s.apply([2*u])])},t}(lD),t.className="CustomInit",t)}else o=this.biasInitializer;this.bias=this.addWeight("bias",[4*this.filters],null,o,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0},n.call=function(e,t){var n=this;return QN((function(){if(3!==e.length)throw new HF("ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got "+e.length+".");var r=t.training||!1,a=e[0],i=e[1],o=e[2];0<n.dropout&&n.dropout<1&&null==n.dropoutMask&&(n.dropoutMask=jL({ones:function(){return _T(a)},rate:n.dropout,training:r,count:4}));var s=n.dropoutMask,u=function(e,t,n){return t&&t[n]?sI(t[n],e):e},l=u(a,s,0),c=u(a,s,1),p=u(a,s,2),f=u(a,s,3);0<n.recurrentDropout&&n.recurrentDropout<1&&null==n.recurrentDropoutMask&&(n.recurrentDropoutMask=jL({ones:function(){return _T(i)},rate:n.recurrentDropout,training:r,count:4}));var h=n.recurrentDropoutMask,d=u(i,h,0),m=u(i,h,1),v=u(i,h,2),g=u(i,h,3),y=DC(n.kernel.read(),4,3),b=y[0],x=y[1],w=y[2],k=y[3],N=n.useBias?DC(n.bias.read(),4):[null,null,null,null],I=N[0],S=N[1],T=N[2],C=N[3];l=n.inputConv(l,b,I,n.padding),c=n.inputConv(c,x,S,n.padding),p=n.inputConv(p,w,T,n.padding),f=n.inputConv(f,k,C,n.padding);var E=DC(n.recurrentKernel.read(),4,3),R=E[0],A=E[1],F=E[2],_=E[3];d=n.recurrentConv(d,R),m=n.recurrentConv(m,A),v=n.recurrentConv(v,F),g=n.recurrentConv(g,_);var D=n.recurrentActivation.apply(aI(l,d)),O=n.recurrentActivation.apply(aI(c,m)),M=aI(sI(O,o),sI(D,n.activation.apply(aI(p,v)))),L=sI(n.recurrentActivation.apply(aI(f,g)),n.activation.apply(M));return[L,L,M]}))},n.getConfig=function(){var t=e.prototype.getConfig.call(this),n=(t.units,HL(t,["units"])),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},n,r)},n.inputConv=function(e,t,n,r){var a=tS(e,t,this.strides,r||"valid","channelsFirst"===this.dataFormat?"NCHW":"NHWC",this.dilationRate);return n?aD(a,n,this.dataFormat):a},n.recurrentConv=function(e,t){return tS(e,t,1,"same","channelsFirst"===this.dataFormat?"NCHW":"NHWC")},t}(VL);KL.className="ConvLSTM2DCell",BN(KL);var XL=function(e){function t(t){var n=new KL(t);return e.call(this,Object.assign({},t,{cell:n}))||this}return Av(t,e),t.fromConfig=function(e,t){return new e(t)},t}(qL);XL.className="ConvLSTM2D",BN(XL);var YL=function(e){function t(t){var n;return(n=e.call(this,t)||this).rate=Math.max(Math.min(t.rate,1),0),n.noiseShape=t.noiseShape,n.seed=t.seed,n.supportsMasking=!0,n}Av(t,e);var n=t.prototype;return n.getNoiseShape=function(e){if(null==this.noiseShape)return this.noiseShape;for(var t=e.shape,n=[],r=0;r<this.noiseShape.length;++r)n.push(null==this.noiseShape[r]?t[r]:this.noiseShape[r]);return n},n.call=function(e,t){var n=this;return QN((function(){n.invokeCallHook(e,t);var r=LD(e);if(0<n.rate&&n.rate<1){var a=null!=t.training&&t.training,i=n.getNoiseShape(r);return oD((function(){return iD(r,n.rate,i,n.seed)}),(function(){return r}),a)}return e}))},n.getConfig=function(){var t={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},n.dispose=function(){return e.prototype.dispose.call(this)},t}(XD);YL.className="Dropout",BN(YL);var JL=function(e){function t(t){var n;return(n=e.call(this,t)||this).inputSpec=[{ndim:3}],n}return Av(t,e),t.prototype.getNoiseShape=function(e){var t=e.shape;return[t[0],1,t[2]]},t}(YL);JL.className="SpatialDropout1D",BN(JL);var ZL=function(e){function t(t){var n;if((n=e.call(this,t)||this).activation=null,n.useBias=!0,n.kernel=null,n.bias=null,n.DEFAULT_KERNEL_INITIALIZER="glorotNormal",n.DEFAULT_BIAS_INITIALIZER="zeros",null==t.batchInputShape&&null==t.inputShape&&null!=t.inputDim){var r=null;null!=t.batchSize&&(r=t.batchSize),n.batchInputShape=[r,t.inputDim]}return n.units=t.units,c_(n.units,"units"),n.activation=eL(t.activation),null!=t.useBias&&(n.useBias=t.useBias),n.kernelInitializer=ED(t.kernelInitializer||n.DEFAULT_KERNEL_INITIALIZER),n.biasInitializer=ED(t.biasInitializer||n.DEFAULT_BIAS_INITIALIZER),n.kernelConstraint=k_(t.kernelConstraint),n.biasConstraint=k_(t.biasConstraint),n.kernelRegularizer=sL(t.kernelRegularizer),n.biasRegularizer=sL(t.biasRegularizer),n.activityRegularizer=sL(t.activityRegularizer),n.supportsMasking=!0,n.inputSpec=[{minNDim:2}],n}Av(t,e);var n=t.prototype;return n.build=function(e){var t,n=(e=zD(e))[e.length-1];null==this.kernel&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:(t={},t[-1]=n,t)}],this.built=!0},n.computeOutputShape=function(e){var t=(e=zD(e)).slice();return t[t.length-1]=this.units,t},n.call=function(e,t){var n=this;return QN((function(){n.invokeCallHook(e,t);var r,a=LD(e),i=f_(n.activation.getClassName());return null!=i?r=eD(a,n.kernel.read(),i,n.bias?n.bias.read():null):(r=eD(a,n.kernel.read()),null!=n.bias&&(r=aD(r,n.bias.read())),null!=n.activation&&(r=n.activation.apply(r))),r}))},n.getConfig=function(){var t={units:this.units,activation:QM(this.activation),useBias:this.useBias,kernelInitializer:CD(this.kernelInitializer),biasInitializer:CD(this.biasInitializer),kernelRegularizer:iL(this.kernelRegularizer),biasRegularizer:iL(this.biasRegularizer),activityRegularizer:iL(this.activityRegularizer),kernelConstraint:x_(this.kernelConstraint),biasConstraint:x_(this.biasConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);ZL.className="Dense",BN(ZL);var QL=function(e){function t(t){var n;return t=t||{},(n=e.call(this,t)||this).inputSpec=[{minNDim:3}],n.dataFormat=t.dataFormat,n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){for(var t,n=Bv((e=zD(e)).slice(1));!(t=n()).done;){if(null==t.value)throw new HF('The shape of the input to "Flatten" is not fully defined (got '+e.slice(1)+'). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.')}return[e[0],W_(e,1)]},n.call=function(e,t){var n=this;return QN((function(){n.invokeCallHook(e,t);var r=LD(e);if("channelsFirst"===n.dataFormat&&r.rank>1){for(var a=[0],i=2;i<r.rank;++i)a.push(i);a.push(1),r=r.transpose(a)}return function(e){if(e.rank<=1)throw new HF("batchFlatten requires a minimum rank of 2. Got rank: "+e.rank+".");var t=[e.shape[0],W_(e.shape,1)];return e.reshape(t)}(r)}))},n.getConfig=function(){var t={};null!=this.dataFormat&&(t.dataFormat=this.dataFormat);var n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);QL.className="Flatten",BN(QL);var $L=function(e){function t(t){var n;return(n=e.call(this,t)||this).supportsMasking=!0,n.activation=eL(t.activation),n}Av(t,e);var n=t.prototype;return n.call=function(e,t){var n=this;return QN((function(){n.invokeCallHook(e,t);var r=LD(e);return n.activation.apply(r)}))},n.getConfig=function(){var t={activation:QM(this.activation)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);$L.className="Activation",BN($L);var ez=function(e){function t(t){var n;return(n=e.call(this,t)||this).n=t.n,n.inputSpec=[{ndim:2}],n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){return[e[0],this.n,e[1]]},n.call=function(e,t){var n=this;return QN((function(){return e=LD(e),t=e,r=n.n,QN((function(){if(2!==t.shape.length)throw new HF("repeat() expects a rank-2 tensor, but received a rank-"+t.shape.length+" tensor.");return Q_(q_(t,1),[1,r,1])}));var t,r}))},n.getConfig=function(){var t={n:this.n},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);ez.className="RepeatVector",BN(ez);var tz=function(e){function t(t){var n;(n=e.call(this,t)||this).targetShape=t.targetShape;for(var r=0;r<n.targetShape.length;++r)n.isUnknown(n.targetShape[r])&&(n.targetShape[r]=null);return n}Av(t,e);var n=t.prototype;return n.isUnknown=function(e){return e<0||null==e},n.fixUnknownDimension=function(e,t){for(var n="Total size of new array must be unchanged.",r=t.slice(),a=1,i=null,o=0;o<r.length;++o){var s=r[o];if(this.isUnknown(s)){if(null!==i)throw new HF("Can only specifiy one unknown dimension.");i=o}else a*=s}var u=W_(e);if(null!==i){if(0===a||u%a!=0)throw new HF(n);r[i]=u/a}else if(u!==a)throw new HF(n);return r},n.computeOutputShape=function(e){for(var t=!1,n=0;n<e.length;++n)if(this.isUnknown(e[n])){t=!0;break}return t?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))},n.call=function(e,t){var n=this;return QN((function(){n.invokeCallHook(e,t);var r=LD(e),a=r.shape,i=a.slice(0,1).concat(n.fixUnknownDimension(a.slice(1),n.targetShape));return r.reshape(i)}))},n.getConfig=function(){var t={targetShape:this.targetShape},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);tz.className="Reshape",BN(tz);var nz=function(e){function t(t){var n;if(n=e.call(this,t)||this,null==t.dims)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(t.dims))throw new Error("Permute constructor requires `dims` to be an Array, but received "+t.dims+" instead.");var r=j_(1,t.dims.length+1);if(!Qv(t.dims.slice().sort(),r))throw new Error("Invalid permutation `dims`: "+JSON.stringify(t.dims)+" `dims` must contain consecutive integers starting from 1.");return n.dims=t.dims,n.dimsIncludingBatch=[0].concat(n.dims),n.inputSpec=[new GD({ndim:n.dims.length+1})],n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){var t=(e=zD(e)).slice();return this.dims.forEach((function(n,r){t[r+1]=e[n]})),t},n.call=function(e,t){return sN(LD(e),this.dimsIncludingBatch)},n.getConfig=function(){var t={dims:this.dims},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);nz.className="Permute",BN(nz);var rz=function(e){function t(t){var n;return(n=e.call(this,t??{})||this).supportsMasking=!0,n.maskValue=null!=t?null==t.maskValue?0:t.maskValue:0,n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){return e},n.getConfig=function(){var t=e.prototype.getConfig.call(this),n={maskValue:this.maskValue};return Object.assign(n,t),n},n.computeMask=function(e,t){var n=LD(e);return hI(RT(n,this.maskValue),-1)},n.call=function(e,t){var n=this;return QN((function(){n.invokeCallHook(e,t);var r=LD(e),a=hI(RT(r,n.maskValue),-1,!0);return r.mul(a.asType(r.dtype))}))},t}(XD);rz.className="Masking",BN(rz);var az=function(e){function t(t){var n;if((n=e.call(this,t)||this).embeddings=null,n.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",null==t.batchInputShape&&null==t.inputShape){var r=null;null!=t.batchSize&&(r=t.batchSize),null==t.inputLength?n.batchInputShape=[r,null]:n.batchInputShape=[r].concat(QF(t.inputLength))}return n.inputDim=t.inputDim,c_(n.inputDim,"inputDim"),n.outputDim=t.outputDim,c_(n.outputDim,"outputDim"),n.embeddingsInitializer=ED(t.embeddingsInitializer||n.DEFAULT_EMBEDDINGS_INITIALIZER),n.embeddingsRegularizer=sL(t.embeddingsRegularizer),n.activityRegularizer=sL(t.activityRegularizer),n.embeddingsConstraint=k_(t.embeddingsConstraint),n.maskZero=t.maskZero,n.supportsMasking=t.maskZero,n.inputLength=t.inputLength,n}Av(t,e);var n=t.prototype;return n.build=function(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0},n.warnOnIncompatibleInputShape=function(e){},n.computeMask=function(e,t){var n=this;return QN((function(){return n.maskZero?(e=LD(e),RT(e,wS(e))):null}))},n.computeOutputShape=function(e){if(e=zD(e),null==this.inputLength)return[].concat(e,[this.outputDim]);var t=QF(this.inputLength);if(t.length!==e.length-1)throw new HF('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);for(var n=0,r=0;r<t.length;++r){var a=t[r],i=e[r+1];if(null!=a&&null!=i&&a!==i)throw new HF('"inputLength" is '+this.inputLength+", but received input shape has shape "+e);null==a&&(t[n]=i),n++}return[e[0]].concat(t,[this.outputDim])},n.call=function(e,t){var n=this;return QN((function(){n.invokeCallHook(e,t);var r=LD(e);return"int32"!==r.dtype&&(r=H_(r,"int32")),tD(n.embeddings.read(),r.as1D()).reshape(zD(n.computeOutputShape(r.shape)))}))},n.getConfig=function(){var t={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:CD(this.embeddingsInitializer),embeddingsRegularizer:iL(this.embeddingsRegularizer),activityRegularizer:iL(this.activityRegularizer),embeddingsConstraint:x_(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);az.className="Embedding",BN(az);var iz=function(e){function t(t){var n;return(n=e.call(this,t||{})||this).supportsMasking=!0,n}Av(t,e);var n=t.prototype;return n.mergeFunction=function(e){throw new qF},n.computeElementwiseOpOutputShape=function(e,t){if(null==e||null==t)return null;if(e.length<t.length)return this.computeElementwiseOpOutputShape(t,e);if(0===t.length)return e;for(var n=e.slice(0,e.length-t.length),r=0;r<t.length;++r){var a=e[e.length-t.length+r],i=t[r];if(null==a||null==i||a<0||i<0)n.push(null);else if(1===a)n.push(i);else if(1===i)n.push(a);else{if(a!==i)throw new HF("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(t));n.push(a)}}return n},n.build=function(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[zD(e)]),e.length<2)throw new HF("A merge layer should be called on an Array of at least 2 inputs. Got "+e.length+" input(s).");for(var t,n=[],r=Bv(e);!(t=r()).done;){var a=t.value;null!=a&&null!==a[0]&&n.push(a[0])}if((n=o_(n)).length>1)throw new HF("Can not merge tensors with different batch sizes. Got tensors with shapes: "+JSON.stringify(e)+".");for(var i=null==e[0]?null:e[0].slice(1),o=1;o<e.length;++o){var s=null==e[o]?null:e[o].slice(1);i=this.computeElementwiseOpOutputShape(i,s)}var u=e.map((function(e){return e.length}));-1===e.indexOf(null)&&1===o_(u).length?this.reshapeRequired=!1:this.reshapeRequired=!0},n.call=function(e,t){var n=this;return QN((function(){if(n.reshapeRequired){var t=[],r=e.map((function(e){return e.rank}));if(-1===r.indexOf(null)){for(var a,i=G_(r),o=Bv(e);!(a=o()).done;){for(var s=a.value,u=s.rank,l=0;l<i-u;++l)s=q_(s,1);t.push(s)}return n.mergeFunction(t)}for(var c,p=!1,f=Bv(e);!(c=f()).done;){var h=c.value,d=h.rank;if(null==d){var m=h.shape,v=m[0],g=m.slice(1).concat([v]),y=h.reshape([v].concat(W_(m.slice(1))));y=(y=sN(y,[1,0])).reshape(g),t.push(y),p=!0}else if(d>1){var b=j_(1,d).concat([0]);t.push(sN(h,b)),p=!0}else t.push(h)}var x=n.mergeFunction(t),w=x.rank;if(p)if(null==w){var k=x.shape,N=k[k.length-1],I=[N].concat(k.slice(0,k.length-1));x=sN(x.reshape([-1,N]),[1,0]).reshape(I)}else if(w>1){var S=[w-1].concat(j_(0,w-1));x=sN(x,S)}return x}return n.mergeFunction(e)}))},n.computeOutputShape=function(e){var t;t=null==e[0]?null:e[0].slice(1);for(var n=1;n<e.length;++n){var r=null==e[n]?null:e[n].slice(1);t=this.computeElementwiseOpOutputShape(t,r)}for(var a,i=[],o=Bv(e);!(a=o()).done;){var s=a.value;null!=s&&null!==s[0]&&i.push(s[0])}return t=1===(i=o_(i)).length?i.concat(t):[null].concat(t)},n.computeMask=function(e,t){return QN((function(){if(null==t)return null;if(!Array.isArray(t))throw new HF("`mask` should be an Array");if(!Array.isArray(e))throw new HF("`inputs` should be an Array");if(t.length!==e.length)throw new HF("The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths ("+e.length+" vs "+t.length+")");if(t.every((function(e){return null==e})))return null;for(var n=(t=t.map((function(e){return null==e?e:CS(e,0)})))[0],r=1;r<t.length-1;++r)n=fT(n,t[r]);return n}))},t}(XD),oz=function(e){function t(t){return e.call(this,t)||this}return Av(t,e),t.prototype.mergeFunction=function(e){return QN((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=aI(t,e[n]);return t}))},t}(iz);oz.className="Add",BN(oz);var sz=function(e){function t(t){return e.call(this,t)||this}return Av(t,e),t.prototype.mergeFunction=function(e){return QN((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=sI(t,e[n]);return t}))},t}(iz);sz.className="Multiply",BN(sz);var uz=function(e){function t(t){return e.call(this,t)||this}return Av(t,e),t.prototype.mergeFunction=function(e){return QN((function(){for(var t=e[0].clone(),n=1;n<e.length;++n)t=aI(t,e[n]);return sI(1/e.length,t)}))},t}(iz);uz.className="Average",BN(uz);var lz=function(e){function t(t){return e.call(this,t)||this}return Av(t,e),t.prototype.mergeFunction=function(e){return QN((function(){for(var t=e[0],n=1;n<e.length;++n)t=bT(t,e[n]);return t}))},t}(iz);lz.className="Maximum",BN(lz);var cz=function(e){function t(t){return e.call(this,t)||this}return Av(t,e),t.prototype.mergeFunction=function(e){return QN((function(){for(var t=e[0],n=1;n<e.length;++n)t=kT(t,e[n]);return t}))},t}(iz);cz.className="Minimum",BN(cz);var pz=function(e){function t(t){var n;return(n=e.call(this,t)||this).DEFAULT_AXIS=-1,null==t&&(t={}),n.axis=null==t.axis?n.DEFAULT_AXIS:t.axis,n.supportsMasking=!0,n.reshapeRequired=!1,n}Av(t,e);var n=t.prototype;return n.build=function(e){if(!Array.isArray(e)||!Array.isArray(e[0])||1===e.length)throw new HF("A `Concatenate` layer should be called on a list of at least 2 inputs");for(var t,n=!0,r=Bv(e);!(t=r()).done;){if(null!=t.value){n=!1;break}}if(!n){for(var a=[],i=0;i<e.length;++i){var o=e[i].slice();o.splice(this.axis,1);for(var s,u=!1,l=Bv(a);!(s=l()).done;){if(Qv(s.value,o)){u=!0;break}}u||a.push(o)}if(a.length>1)throw new HF("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}},n.mergeFunction=function(e){var t=this;return QN((function(){return J_(e,t.axis)}))},n.computeOutputShape=function(e){if(!Array.isArray(e)||!Array.isArray(e[0]))throw new HF("A `Concatenate` layer should be called on a list of inputs.");for(var t,n=e,r=n[0].slice(),a=this.axis<0?r.length+this.axis:this.axis,i=Bv(n.slice(1));!(t=i()).done;){var o=t.value;if(null==r[a]||null==o[a]){r[a]=null;break}r[a]+=o[a]}return r},n.computeMask=function(e,t){var n=this;if(null==t)return null;if(!Array.isArray(t))throw new HF("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new HF("`inputs` should be an array for Concatenate");if(t.length!==e.length)throw new HF("Mismatch in the length of mask ("+t.length+") and the legnth of inputs ("+e.length+")");return QN((function(){var r=!0;if(t.forEach((function(e){null==e||(r=!1)})),r)return null;for(var a=[],i=0;i<e.length;++i)null==t[i]?a.push(_T(e[i]).asType("bool")):t[i].rank<e[i].rank?a.push(CS(t[i],-1)):a.push(t[i]);var o=zI(a,n.axis);return fI(o,-1,!1)}))},n.getConfig=function(){var t={axis:this.axis},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(iz);function fz(e,t){for(;e<0;)e+=t;return e}pz.className="Concatenate",BN(pz);var hz=function(e){function t(t){var n;return(n=e.call(this,t)||this).axes=t.axes,n.normalize=null!=t.normalize&&t.normalize,n.supportsMasking=!0,n.reshapeRequired=!1,n}Av(t,e);var n=t.prototype;return n.build=function(e){Kv(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0],n=e[1];if(t.length>3||n.length>3)throw new qF("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);if(t[r[0]]!==n[r[1]])throw new HF("Dimension incompatibility: "+t[r[0]]+" !== "+n[r[1]])},n.mergeFunction=function(e){if(2!==e.length)throw new HF("A `Dot` layer must be called on exactly 2 inputs, but received "+e.length+" input(s).");var t,n=e[0],r=e[1];return t=Array.isArray(this.axes)?this.axes.map((function(t,n){return fz(t,e[n].shape.length)})):[fz(this.axes,n.shape.length),fz(this.axes,r.shape.length)],this.normalize&&(n=pO(n,t[0]),r=pO(r,t[1])),function(e,t,n){if(e.shape.length>3||t.shape.length>3)throw new qF("batchDot is not implemented for tensors of 4D or higher rank yet");if(Kv(e.shape.length>=2,(function(){return"batchDot requires the rank of x to be >= 2, but got "+e.shape.length})),Kv(e.shape.length>=2,(function(){return"batchDot requires the rank of y to be >= 2, but got "+t.shape.length})),"number"==typeof n&&(n=[n,n]),"complex64"===e.dtype||"complex64"===t.dtype)throw new qF("batchDot is not implemented for complex64-type Tensors yet.");var r=e.shape.length,a=t.shape.length;null==n&&(n=[r-1,a-2]);var i=n;return QN((function(){var n,o;if(r>a){n=r-a;for(var s=[],u=0;u<n;++u)s.push(1);t=t.reshape(t.shape.concat(s))}else if(a>r){n=a-r;for(var l=[],c=0;c<n;++c)l.push(1);e=e.reshape(e.shape.concat(l))}else n=0;if(2===e.shape.length&&2===t.shape.length)o=i[0]===i[1]?e.mul(t).sum(i[0]):e.transpose([1,0]).mul(t).sum(i[1]);else{var p=i[0]!==e.shape.length-1,f=i[1]===t.shape.length-1;o=e.matMul(t,p,f)}if(n>0){for(var h,d=[],m=h=r>a?r+a-3:r-1;m<h+n;++m)d.push(m);o=o.squeeze(d)}return 1===o.shape.length&&(o=o.expandDims(1)),o}))}(n,r,t)},n.interpretAxes=function(e,t){return Array.isArray(this.axes)?this.axes:[fz(this.axes,e.length),fz(this.axes,t.length)]},n.computeOutputShape=function(e){Kv(Array.isArray(e)&&2===e.length&&Array.isArray(e[0])&&Array.isArray(e[1]),(function(){return"A `Dot` layer should be called on a list of exactly 2 inputs."}));var t=e[0].slice(),n=e[1].slice();if(t.length>3||n.length>3)throw new qF("Dot layer does not support tensors of 4D or higher rank yet.");var r=this.interpretAxes(t,n);t.splice(r[0],1),n.splice(r[1],1),n.splice(0,1);var a=t.concat(n);return 1===a.length&&a.push(1),a},n.computeMask=function(e,t){return null},n.getConfig=function(){var t={axes:this.axes,normalize:this.normalize},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(iz);hz.className="Dot",BN(hz);var dz=function(e){function t(t){var n;return(n=e.call(this,t)||this).supportsMasking=!0,n.stddev=t.stddev,n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){return e},n.getConfig=function(){var t=e.prototype.getConfig.call(this),n={stddev:this.stddev};return Object.assign(n,t),n},n.call=function(e,t){var n=this;return QN((function(){n.invokeCallHook(e,t);var r=LD(e);return oD((function(){return $_(r.shape,0,n.stddev).add(r)}),(function(){return r}),t.training||!1)}))},t}(XD);dz.className="GaussianNoise",BN(dz);var mz=function(e){function t(t){var n;return(n=e.call(this,t)||this).supportsMasking=!0,n.rate=t.rate,n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){return e},n.getConfig=function(){var t=e.prototype.getConfig.call(this),n={rate:this.rate};return Object.assign(n,t),n},n.call=function(e,t){var n=this;return QN((function(){n.invokeCallHook(e,t);var r=LD(e);if(n.rate>0&&n.rate<1){return oD((function(){var e=Math.sqrt(n.rate/(1-n.rate));return r.mul($_(r.shape,1,e))}),(function(){return r}),t.training||!1)}return r}))},t}(XD);mz.className="GaussianDropout",BN(mz);var vz=function(e){function t(t){var n;return(n=e.call(this,t)||this).supportsMasking=!0,n.rate=t.rate,n.noiseShape=t.noiseShape,n}Av(t,e);var n=t.prototype;return n._getNoiseShape=function(e){return this.noiseShape||LD(e).shape},n.computeOutputShape=function(e){return e},n.getConfig=function(){var t=e.prototype.getConfig.call(this),n={rate:this.rate};return Object.assign(n,t),n},n.call=function(e,t){var n=this;return QN((function(){if(n.rate<1&&n.rate>0){var r=n._getNoiseShape(e);return oD((function(){var t=LD(e),a=-1.7580993408473766,i=MS(aC(r),n.rate);i=H_(i,"float32");var o=Math.pow((1-n.rate)*(1+n.rate*Math.pow(a,2)),-.5),s=-o*a*n.rate;return t.mul(i).add(i.add(-1).mul(a)).mul(o).add(s)}),(function(){return LD(e)}),t.training||!1)}return e}))},t}(XD);function gz(e,t,n,r,a,i){var o;if(void 0===i&&(i=.001),2===e.rank)o=jI(e,t,n,r,a,i);else if(3===e.rank)o=HI(e,t,n,r,a,i);else{if(4!==e.rank)throw new qF("batchNormalization is not implemented for array of rank "+e.rank+" yet");o=qI(e,t,n,r,a,i)}return o}function yz(e,t,n,r,a){return void 0===a&&(a=.001),Qv(r.slice().sort(),j_(0,e.rank-1))?function(e,t,n,r,a){return void 0===a&&(a=.001),QN((function(){var i=TT(e,r),o=i.mean,s=i.variance;return[gz(e,o,s,n,t,a),o,s]}))}(e,t,n,r,a):function(e,t,n,r,a){return void 0===a&&(a=.001),QN((function(){for(var i,o=TT(e,r),s=o.mean,u=o.variance,l=[],c=Bv(j_(0,e.rank));!(i=c()).done;){var p=i.value;-1!==r.indexOf(p)?l.push(1):l.push(e.shape[p])}var f=s.reshape(l),h=u.reshape(l),d=null==t?null:t.reshape(l),m=null==n?null:n.reshape(l);return[gz(e,f,h,m,d,a),s,u]}))}(e,t,n,r,a)}vz.className="AlphaDropout",BN(vz);var bz=function(e){function t(t){var n;return null==t&&(t={}),(n=e.call(this,t)||this).supportsMasking=!0,n.axis=null==t.axis?-1:t.axis,n.momentum=null==t.momentum?.99:t.momentum,n.epsilon=null==t.epsilon?.001:t.epsilon,n.center=null==t.center||t.center,n.scale=null==t.scale||t.scale,n.betaInitializer=ED(t.betaInitializer||"zeros"),n.gammaInitializer=ED(t.gammaInitializer||"ones"),n.movingMeanInitializer=ED(t.movingMeanInitializer||"zeros"),n.movingVarianceInitializer=ED(t.movingVarianceInitializer||"ones"),n.betaConstraint=k_(t.betaConstraint),n.gammaConstraint=k_(t.gammaConstraint),n.betaRegularizer=sL(t.betaRegularizer),n.gammaRegularizer=sL(t.gammaRegularizer),n}Av(t,e);var n=t.prototype;return n.build=function(e){var t;e=zD(e);var n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(null==r)throw new HF("Axis "+n+" of input tensor should have a defined dimension but the layer received an input with shape "+JSON.stringify(e)+".");this.inputSpec=[new GD({ndim:e.length,axes:(t={},t[n]=r,t)})];var a=[r];this.scale&&(this.gamma=this.addWeight("gamma",a,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",a,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",a,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",a,null,this.movingVarianceInitializer,null,!1),this.built=!0},n.call=function(e,t){var n=this;return QN((function(){var r=null!=t.training&&t.training,a=LD(e),i=a.shape,o=i.length,s=j_(0,o),u=n.axis>=0?n.axis:n.axis+o;s.splice(u,1);var l=XF(1,o);l[u]=i[u];var c=s.slice();c.sort();var p=!Qv(c,j_(0,o).slice(0,o-1));if(!r)return function(){if(p){var e=n.movingMean.read().reshape(l),t=n.movingVariance.read().reshape(l),r=n.center?n.beta.read().reshape(l):null,i=n.scale?n.gamma.read().reshape(l):null;return gz(a,e,t,r,i,n.epsilon)}return gz(a,n.movingMean.read(),n.movingVariance.read(),null==n.beta?null:n.beta.read(),null==n.gamma?null:n.gamma.read(),n.epsilon)}();var f=yz(a,n.gamma.read(),n.beta.read(),s,n.epsilon),h=f[0],d=f[1],m=f[2],v=function(e,t,n){QN((function(){var r=1-n,a=e.read(),i=a.sub(t).mul(r);e.write(a.sub(i))}))};return v(n.movingMean,d,n.momentum),v(n.movingVariance,m,n.momentum),h}))},n.getConfig=function(){var t={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:CD(this.betaInitializer),gammaInitializer:CD(this.gammaInitializer),movingMeanInitializer:CD(this.movingMeanInitializer),movingVarianceInitializer:CD(this.movingVarianceInitializer),betaRegularizer:iL(this.betaRegularizer),gammaRegularizer:iL(this.gammaRegularizer),betaConstraint:x_(this.betaConstraint),gammaConstraint:x_(this.gammaConstraint)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);bz.className="BatchNormalization",BN(bz);var xz=function(e){function t(t){var n;if(null==t&&(t={}),(n=e.call(this,t)||this).axis=null==t.axis?-1:t.axis,"number"==typeof n.axis){if(!Number.isInteger(n.axis))throw new Error("Expected axis to be an integer, but received "+n.axis)}else{if(!Array.isArray(n.axis))throw new Error("Expected axis to be an integer or an array of integers, but received "+JSON.stringify(n.axis));for(var r,a=Bv(n.axis);!(r=a()).done;){var i=r.value;if(!Number.isInteger(i))throw new Error("Expected axis to be an array of integers, but received "+JSON.stringify(n.axis))}}return n.epsilon=null==t.epsilon?.001:t.epsilon,n.center=null==t.center||t.center,n.scale=null==t.scale||t.scale,n.betaInitializer=ED(t.betaInitializer||"zeros"),n.gammaInitializer=ED(t.gammaInitializer||"ones"),n.betaRegularizer=sL(t.betaRegularizer),n.gammaRegularizer=sL(t.gammaRegularizer),n.supportsMasking=!0,n}Av(t,e);var n=t.prototype;return n.build=function(e){var t=(e=zD(e)).length;"number"==typeof this.axis&&(this.axis=[this.axis]);for(var n=0;n<this.axis.length;++n)this.axis[n]<0&&(this.axis[n]+=t);for(var r,a=Bv(this.axis);!(r=a()).done;){var i=r.value;if(i<0||i>=t)throw new Error("Invalid axis: "+i)}if(this.axis.length!==o_(this.axis).length)throw new Error("Found duplicate axes in: "+this.axis);var o=this.axis.map((function(t){return e[t]}));this.scale?this.gamma=this.addWeight("gamma",o,"float32",this.gammaInitializer,this.gammaRegularizer,true):this.gamma=null,this.center?this.beta=this.addWeight("beta",o,"float32",this.betaInitializer,this.betaRegularizer,true):this.beta=null,this.built=!0},n.call=function(e,t){var n=this,r=LD(e),a=r.shape,i=a.length;return QN((function(){for(var e,t=TT(r,n.axis,!0),o=t.mean,s=t.variance,u=XF(1,i),l=Bv(n.axis);!(e=l()).done;){var c=e.value;u[c]=a[c]}for(var p=function(e){return null!=e&&e.shape.length!==i&&n.axis!==[i-1]?e.reshape(u):e},f=p(n.gamma.read()),h=p(n.beta.read()),d=[],m=[],v=0;v<i;++v)-1!==n.axis.indexOf(v)?(d.push(a[v]),m.push(1)):(d.push(1),m.push(a[v]));return o=o.tile(d),s=s.tile(d),f=f.tile(m),h=h.tile(m),gz(r,o,s,h,f,n.epsilon)}))},n.getConfig=function(){var t={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:CD(this.betaInitializer),gammaInitializer:CD(this.gammaInitializer),betaRegularizer:iL(this.betaRegularizer),gammaRegularizer:iL(this.gammaRegularizer)},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);xz.className="LayerNormalization",BN(xz);var wz=function(e){function t(t){var n;if(null==t&&(t={}),(n=e.call(this,t)||this).dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,null==t.padding)n.padding=[[1,1],[1,1]];else if("number"==typeof t.padding)n.padding=[[t.padding,t.padding],[t.padding,t.padding]];else{if(t.padding=t.padding,2!==t.padding.length)throw new HF("ZeroPadding2D expects padding to be a length-2 array, but received a length-"+t.padding.length+" array.");var r,a;if("number"==typeof t.padding[0])r=[t.padding[0],t.padding[0]],a=[t.padding[1],t.padding[1]];else{if(t.padding=t.padding,2!==t.padding[0].length)throw new HF("ZeroPadding2D expects height padding to be a length-2 array, but received a length-"+t.padding[0].length+" array.");if(r=t.padding[0],2!==t.padding[1].length)throw new HF("ZeroPadding2D expects width padding to be a length-2 array, but received a length-"+t.padding[1].length+" array.");a=t.padding[1]}n.padding=[r,a]}return n.inputSpec=[new GD({ndim:4})],n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){var t,n;return e=zD(e),"channelsFirst"===this.dataFormat?(t=null!=e[2]&&e[2]>=0?e[2]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[3]&&e[3]>=0?e[3]+this.padding[1][0]+this.padding[1][1]:null,[e[0],e[1],t,n]):(t=null!=e[1]&&e[1]>=0?e[1]+this.padding[0][0]+this.padding[0][1]:null,n=null!=e[2]&&e[2]>=0?e[2]+this.padding[1][0]+this.padding[1][1]:null,[e[0],t,n,e[3]])},n.call=function(e,t){var n=this;return QN((function(){return t=LD(e),r=n.padding,a=n.dataFormat,QN((function(){if(4!==t.rank)throw new HF("temporalPadding expects input tensor to be 4-D, but received a "+t.rank+"-D tensor.");if(null==r&&(r=[[1,1],[1,1]]),2!==r.length||2!==r[0].length||2!==r[1].length)throw new HF("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(null==a&&(a="channelsLast"),"channelsLast"!==a&&"channelsFirst"!==a)throw new HF("Unknown data format: "+a+". Supported data formats are 'channelsLast' and 'channelsFirst.");var e;return e="channelsFirst"===a?[[0,0],[0,0],r[0],r[1]]:[[0,0],r[0],r[1],[0,0]],OT(t,e)}));var t,r,a}))},n.getConfig=function(){var t={padding:this.padding,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD);function kz(e,t,n,r,a,i){return QN((function(){var o;A_(a),__(i),F_(r),null==n&&(n=[1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=gL(e,a);var s="same"===r?"same":"valid";return o="max"===i?vT(e,t,n,s):MI(e,t,n,s),"channelsFirst"===a&&(o=sN(o,[0,3,1,2])),o}))}function Nz(e,t,n,r,a,i){return QN((function(){var o;A_(a),__(i),F_(r),null==n&&(n=[1,1,1]),null==r&&(r="valid"),null==a&&(a="channelsLast"),null==i&&(i="max"),e=yL(e,a);var s="same"===r?"same":"valid";return o="max"===i?gT(e,t,n,s):LI(e,t,n,s),"channelsFirst"===a&&(o=sN(o,[0,4,1,2,3])),o}))}wz.className="ZeroPadding2D",BN(wz);var Iz=function(e){function t(t){var n;if(null==t.poolSize&&(t.poolSize=2),n=e.call(this,t)||this,"number"==typeof t.poolSize)n.poolSize=[t.poolSize];else{if(!Array.isArray(t.poolSize)||1!==t.poolSize.length||"number"!=typeof t.poolSize[0])throw new HF("poolSize for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.poolSize));n.poolSize=t.poolSize}if(c_(n.poolSize,"poolSize"),null==t.strides)n.strides=n.poolSize;else if("number"==typeof t.strides)n.strides=[t.strides];else{if(!Array.isArray(t.strides)||1!==t.strides.length||"number"!=typeof t.strides[0])throw new HF("strides for 1D convolutional layer must be a number or an Array of a single number, but received "+JSON.stringify(t.strides));n.strides=t.strides}return c_(n.strides,"strides"),n.padding=null==t.padding?"valid":t.padding,F_(n.padding),n.inputSpec=[new GD({ndim:3})],n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){var t=mL((e=zD(e))[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],t,e[2]]},n.call=function(e,t){var n=this;return QN((function(){n.invokeCallHook(e,t),e=q_(LD(e),2);var r=n.poolingFunction(LD(e),[n.poolSize[0],1],[n.strides[0],1],n.padding,"channelsLast");return zC(r,[2])}))},n.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD),Sz=function(e){function t(t){return e.call(this,t)||this}return Av(t,e),t.prototype.poolingFunction=function(e,t,n,r,a){return A_(a),F_(r),kz(e,t,n,r,a,"max")},t}(Iz);Sz.className="MaxPooling1D",BN(Sz);var Tz=function(e){function t(t){return e.call(this,t)||this}return Av(t,e),t.prototype.poolingFunction=function(e,t,n,r,a){return A_(a),F_(r),kz(e,t,n,r,a,"avg")},t}(Iz);Tz.className="AveragePooling1D",BN(Tz);var Cz=function(e){function t(t){var n;if(null==t.poolSize&&(t.poolSize=[2,2]),(n=e.call(this,t)||this).poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize],null==t.strides)n.strides=n.poolSize;else if(Array.isArray(t.strides)){if(2!==t.strides.length)throw new HF("If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length "+t.strides.length+".");n.strides=t.strides}else n.strides=[t.strides,t.strides];return c_(n.poolSize,"poolSize"),c_(n.strides,"strides"),n.padding=null==t.padding?"valid":t.padding,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,A_(n.dataFormat),F_(n.padding),n.inputSpec=[new GD({ndim:4})],n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){e=zD(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2];return t=mL(t,this.poolSize[0],this.padding,this.strides[0]),n=mL(n,this.poolSize[1],this.padding,this.strides[1]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n]:[e[0],t,n,e[3]]},n.call=function(e,t){var n=this;return QN((function(){return n.invokeCallHook(e,t),n.poolingFunction(LD(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))},n.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD),Ez=function(e){function t(t){return e.call(this,t)||this}return Av(t,e),t.prototype.poolingFunction=function(e,t,n,r,a){return A_(a),F_(r),kz(e,t,n,r,a,"max")},t}(Cz);Ez.className="MaxPooling2D",BN(Ez);var Rz=function(e){function t(t){return e.call(this,t)||this}return Av(t,e),t.prototype.poolingFunction=function(e,t,n,r,a){return A_(a),F_(r),kz(e,t,n,r,a,"avg")},t}(Cz);Rz.className="AveragePooling2D",BN(Rz);var Az=function(e){function t(t){var n;if(null==t.poolSize&&(t.poolSize=[2,2,2]),(n=e.call(this,t)||this).poolSize=Array.isArray(t.poolSize)?t.poolSize:[t.poolSize,t.poolSize,t.poolSize],null==t.strides)n.strides=n.poolSize;else if(Array.isArray(t.strides)){if(3!==t.strides.length)throw new HF("If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length "+t.strides.length+".");n.strides=t.strides}else n.strides=[t.strides,t.strides,t.strides];return c_(n.poolSize,"poolSize"),c_(n.strides,"strides"),n.padding=null==t.padding?"valid":t.padding,n.dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,A_(n.dataFormat),F_(n.padding),n.inputSpec=[new GD({ndim:5})],n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){e=zD(e);var t="channelsFirst"===this.dataFormat?e[2]:e[1],n="channelsFirst"===this.dataFormat?e[3]:e[2],r="channelsFirst"===this.dataFormat?e[4]:e[3];return t=mL(t,this.poolSize[0],this.padding,this.strides[0]),n=mL(n,this.poolSize[1],this.padding,this.strides[1]),r=mL(r,this.poolSize[2],this.padding,this.strides[2]),"channelsFirst"===this.dataFormat?[e[0],e[1],t,n,r]:[e[0],t,n,r,e[4]]},n.call=function(e,t){var n=this;return QN((function(){return n.invokeCallHook(e,t),n.poolingFunction(LD(e),n.poolSize,n.strides,n.padding,n.dataFormat)}))},n.getConfig=function(){var t={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD),Fz=function(e){function t(t){return e.call(this,t)||this}return Av(t,e),t.prototype.poolingFunction=function(e,t,n,r,a){return A_(a),F_(r),Nz(e,t,n,r,a,"max")},t}(Az);Fz.className="MaxPooling3D",BN(Fz);var _z=function(e){function t(t){return e.call(this,t)||this}return Av(t,e),t.prototype.poolingFunction=function(e,t,n,r,a){return A_(a),F_(r),Nz(e,t,n,r,a,"avg")},t}(Az);_z.className="AveragePooling3D",BN(_z);var Dz=function(e){function t(t){var n;return(n=e.call(this,t)||this).inputSpec=[new GD({ndim:3})],n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){return[e[0],e[2]]},n.call=function(e,t){throw new qF},t}(XD),Oz=function(e){function t(t){return e.call(this,t||{})||this}return Av(t,e),t.prototype.call=function(e,t){return QN((function(){var t=LD(e);return xT(t,1)}))},t}(Dz);Oz.className="GlobalAveragePooling1D",BN(Oz);var Mz=function(e){function t(t){return e.call(this,t||{})||this}return Av(t,e),t.prototype.call=function(e,t){return QN((function(){var t=LD(e);return $S(t,1)}))},t}(Dz);Mz.className="GlobalMaxPooling1D",BN(Mz);var Lz=function(e){function t(t){var n;return(n=e.call(this,t)||this).dataFormat=null==t.dataFormat?"channelsLast":t.dataFormat,A_(n.dataFormat),n.inputSpec=[new GD({ndim:4})],n}Av(t,e);var n=t.prototype;return n.computeOutputShape=function(e){return"channelsLast"===this.dataFormat?[e[0],e[3]]:[e[0],e[1]]},n.call=function(e,t){throw new qF},n.getConfig=function(){var t={dataFormat:this.dataFormat},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t}(XD),zz=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.call=function(e,t){var n=this;return QN((function(){var t=LD(e);return"channelsLast"===n.dataFormat?xT(t,[1,2]):xT(t,[2,3])}))},t}(Lz);zz.className="GlobalAveragePooling2D",BN(zz);var Pz=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.call=function(e,t){var n=this;return QN((function(){var t=LD(e);return"channelsLast"===n.dataFormat?$S(t,[1,2]):$S(t,[2,3])}))},t}(Lz);Pz.className="GlobalMaxPooling2D",BN(Pz);var Bz=function(e){function t(t){var n;return(n=e.call(this,t)||this).layer=t.layer,n}Av(t,e);var n=t.prototype;return n.build=function(e){this.built=!0},n.getWeights=function(){return this.layer.getWeights()},n.setWeights=function(e){this.layer.setWeights(e)},n.getConfig=function(){var t={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},n.setFastWeightInitDuringBuild=function(t){e.prototype.setFastWeightInitDuringBuild.call(this,t),null!=this.layer&&this.layer.setFastWeightInitDuringBuild(t)},t.fromConfig=function(e,t,n){void 0===n&&(n={});var r=cO(t.layer,n);delete t.layer;var a={layer:r};return Object.assign(a,t),new e(a)},Rv(t,[{key:"trainable",get:function(){return null!=this.layer&&this.layer.trainable},set:function(e){null!=this.layer&&(this.layer.trainable=e)}},{key:"trainableWeights",get:function(){return this.layer.trainableWeights}},{key:"nonTrainableWeights",get:function(){return this.layer.nonTrainableWeights}},{key:"updates",get:function(){return this.layer._updates}},{key:"losses",get:function(){return this.layer.losses}}]),t}(XD),Wz=function(e){function t(t){var n;return(n=e.call(this,t)||this).supportsMasking=!0,n}Av(t,e);var n=t.prototype;return n.build=function(t){if((t=zD(t)).length<3)throw new HF("TimeDistributed layer expects an input shape >= 3D, but received input shape "+JSON.stringify(t));this.inputSpec=[{shape:t}];var n=[t[0]].concat(t.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),e.prototype.build.call(this,t)},n.computeOutputShape=function(e){var t=[(e=zD(e))[0]].concat(e.slice(2)),n=this.layer.computeOutputShape(t),r=e[1];return[n[0],r].concat(n.slice(1))},n.call=function(e,t){var n=this;return QN((function(){return OL((function(e,r){return[LD(n.layer.call(e,t)),[]]}),e=LD(e),[],!1,null,null,!1,!0)[1]}))},t}(Bz);Wz.className="TimeDistributed",BN(Wz);var Vz=function(e){function t(t){var n;n=e.call(this,t)||this;var r=t.layer.getConfig(),a={};a.className=t.layer.getClassName(),a.config=r,n.forwardLayer=cO(a),r.goBackwards=!0!==r.goBackwards;var i,o={};if(o.className=t.layer.getClassName(),o.config=r,n.backwardLayer=cO(o),n.forwardLayer.name="forward_"+n.forwardLayer.name,n.backwardLayer.name="backward_"+n.backwardLayer.name,n.mergeMode=void 0===t.mergeMode?"concat":t.mergeMode,i=n.mergeMode,u_(E_,"BidirectionalMergeMode",i),t.weights)throw new qF("weights support is not implemented for Bidirectional layer yet.");return n._stateful=t.layer.stateful,n.returnSequences=t.layer.returnSequences,n.returnState=t.layer.returnState,n.supportsMasking=!0,n._trainable=!0,n.inputSpec=t.layer.inputSpec,n.numConstants=null,n}Av(t,e);var n=t.prototype;return n.getWeights=function(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())},n.setWeights=function(e){var t=e.length,n=Math.floor(t/2);this.forwardLayer.setWeights(e.slice(0,n)),this.backwardLayer.setWeights(e.slice(n))},n.computeOutputShape=function(e){var t,n,r,a=this.forwardLayer.computeOutputShape(e);return Array.isArray(a)&&Array.isArray(a[0])||(a=[a]),this.returnState?(r=a.slice(1),t=a[0]):t=a[0],"concat"===this.mergeMode?(t[t.length-1]*=2,n=[t]):n=null==this.mergeMode?[t,t.slice()]:[t],this.returnState?null==this.mergeMode?n.concat(r).concat(r.slice()):[t].concat(r).concat(r.slice()):ZF(n)},n.apply=function(t,n){var r=null==n?null:n.initialState,a=null==n?null:n.constants;null==n&&(n={});var i=DL(t,r,a,this.numConstants);if(t=i.inputs,r=i.initialState,a=i.constants,Array.isArray(t)&&(r=t.slice(1),t=t[0]),(null==r||0===r.length)&&null==a)return e.prototype.apply.call(this,t,n);var o=[],s=[];if(null!=r){var u=r.length;if(u%2>0)throw new HF("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push.apply(o,r);var l=r.map((function(e){return new GD({shape:e.shape})}));this.forwardLayer.stateSpec=l.slice(0,u/2),this.backwardLayer.stateSpec=l.slice(u/2),s.push.apply(s,l)}if(null!=a)throw new qF("Support for constants in Bidirectional layers is not implemented yet.");for(var c=o[0]instanceof jD,p=0,f=o;p<f.length;p++){if(f[p]instanceof jD!==c)throw new HF("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors")}if(c){var h=[t].concat(o),d=this.inputSpec.concat(s),m=this.inputSpec;this.inputSpec=d;var v=e.prototype.apply.call(this,h,n);return this.inputSpec=m,v}return e.prototype.apply.call(this,t,n)},n.call=function(e,t){var n=this;return QN((function(){var r,a,i,o,s=t.initialState;if(null==s)r=n.forwardLayer.call(e,t),a=n.backwardLayer.call(e,t);else{var u=s.slice(0,s.length/2),l=s.slice(s.length/2);r=n.forwardLayer.call(e,Object.assign(t,{initialState:u})),a=n.backwardLayer.call(e,Object.assign(t,{initialState:l}))}return n.returnState&&(Array.isArray(r)&&(i=r.slice(1).concat(a.slice(1))),r=r[0],a=a[0]),n.returnSequences&&(a=cC(a,1)),"concat"===n.mergeMode?o=J_([r,a]):"sum"===n.mergeMode?o=aI(r,a):"ave"===n.mergeMode?o=sI(.5,aI(r,a)):"mul"===n.mergeMode?o=sI(r,a):null==n.mergeMode&&(o=[r,a]),n.returnState?null==n.mergeMode?o.concat(i):[o].concat(i):o}))},n.resetStates=function(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()},n.build=function(e){var t=this;M_(this.forwardLayer.name,(function(){t.forwardLayer.build(e)})),M_(this.backwardLayer.name,(function(){t.backwardLayer.build(e)})),this.built=!0},n.computeMask=function(e,t){var n;if(Array.isArray(t)&&(t=t[0]),n=this.returnSequences?null==this.mergeMode?[t,t]:t:null==this.mergeMode?[null,null]:null,this.returnState){var r=this.forwardLayer.states.map((function(e){return null}));return Array.isArray(n)?n.concat(r).concat(r):[n].concat(r).concat(r)}return n},n.setFastWeightInitDuringBuild=function(t){e.prototype.setFastWeightInitDuringBuild.call(this,t),null!=this.forwardLayer&&this.forwardLayer.setFastWeightInitDuringBuild(t),null!=this.backwardLayer&&this.backwardLayer.setFastWeightInitDuringBuild(t)},n.getConfig=function(){var t={mergeMode:this.mergeMode},n=e.prototype.getConfig.call(this);return Object.assign(t,n),t},t.fromConfig=function(e,t){var n=cO(t.layer);if(delete t.layer,null!=t.numConstants)throw new qF("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");var r=t;return r.layer=n,new e(r)},Rv(t,[{key:"trainable",get:function(){return this._trainable},set:function(e){this._trainable=e,null!=this.forwardLayer&&(this.forwardLayer.trainable=e),null!=this.backwardLayer&&(this.backwardLayer.trainable=e)}},{key:"trainableWeights",get:function(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}},{key:"nonTrainableWeights",get:function(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}}]),t}(Bz);function Uz(e){return new Tz(e)}function Gz(e){return new Rz(e)}function jz(e){return new _z(e)}function Hz(e){return new Mz(e)}function qz(e){return new Pz(e)}function Kz(e){return new Sz(e)}function Xz(e){return new Ez(e)}Vz.className="Bidirectional",BN(Vz);var Yz={__proto__:null,inputLayer:
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */
function(e){return new ZD(e)},elu:function(e){return new pL(e)},reLU:function(e){return new uL(e)},leakyReLU:function(e){return new lL(e)},prelu:function(e){return new cL(e)},softmax:function(e){return new hL(e)},thresholdedReLU:function(e){return new fL(e)},conv1d:function(e){return new RL(e)},conv2d:function(e){return new IL(e)},conv2dTranspose:function(e){return new TL(e)},conv3d:function(e){return new SL(e)},separableConv2d:function(e){return new EL(e)},cropping2D:function(e){return new AL(e)},upSampling2d:function(e){return new FL(e)},depthwiseConv2d:function(e){return new _L(e)},activation:function(e){return new $L(e)},dense:function(e){return new ZL(e)},dropout:function(e){return new YL(e)},spatialDropout1d:function(e){return new JL(e)},flatten:function(e){return new QL(e)},repeatVector:function(e){return new ez(e)},reshape:function(e){return new tz(e)},permute:function(e){return new nz(e)},embedding:function(e){return new az(e)},add:function(e){return new oz(e)},average:function(e){return new uz(e)},concatenate:function(e){return new pz(e)},maximum:function(e){return new lz(e)},minimum:function(e){return new cz(e)},multiply:function(e){return new sz(e)},dot:function(e){return new hz(e)},batchNormalization:function(e){return new bz(e)},layerNormalization:function(e){return new xz(e)},zeroPadding2d:function(e){return new wz(e)},averagePooling1d:Uz,avgPool1d:function(e){return Uz(e)},avgPooling1d:function(e){return Uz(e)},averagePooling2d:Gz,avgPool2d:function(e){return Gz(e)},avgPooling2d:function(e){return Gz(e)},averagePooling3d:jz,avgPool3d:function(e){return jz(e)},avgPooling3d:function(e){return jz(e)},globalAveragePooling1d:function(e){return new Oz(e)},globalAveragePooling2d:function(e){return new zz(e)},globalMaxPooling1d:Hz,globalMaxPooling2d:qz,maxPooling1d:Kz,maxPooling2d:Xz,maxPooling3d:function(e){return new Fz(e)},gru:function(e){return new WL(e)},gruCell:function(e){return new BL(e)},lstm:function(e){return new UL(e)},lstmCell:function(e){return new VL(e)},simpleRNN:function(e){return new PL(e)},simpleRNNCell:function(e){return new zL(e)},convLstm2d:function(e){return new XL(e)},convLstm2dCell:function(e){return new KL(e)},rnn:function(e){return new ML(e)},stackedRNNCells:function(e){return new GL(e)},bidirectional:function(e){return new Vz(e)},timeDistributed:function(e){return new Wz(e)},globalMaxPool1d:Hz,globalMaxPool2d:qz,maxPool1d:Kz,maxPool2d:Xz,Layer:XD,RNN:ML,RNNCell:LL,input:zM,gaussianNoise:function(e){return new dz(e)},gaussianDropout:function(e){return new mz(e)},alphaDropout:function(e){return new vz(e)},masking:function(e){return new rz(e)}};var Jz={__proto__:null,binaryAccuracy:function(e,t){return NO(e,t)},binaryCrossentropy:function(e,t){return EO(e,t)},sparseCategoricalAccuracy:function(e,t){return RO(e,t)},categoricalAccuracy:function(e,t){return IO(e,t)},categoricalCrossentropy:function(e,t){return AO(e,t)},precision:function(e,t){return TO(e,t)},recall:function(e,t){return CO(e,t)},cosineProximity:function(e,t){return xO(e,t)},meanAbsoluteError:function(e,t){return hO(e,t)},meanAbsolutePercentageError:function(e,t){return dO(e,t)},MAPE:function(e,t){return dO(e,t)},mape:function(e,t){return dO(e,t)},meanSquaredError:function(e,t){return fO(e,t)},MSE:function(e,t){return fO(e,t)},mse:function(e,t){return fO(e,t)}},Zz={__proto__:null,modelFromJSON:function(e,t){return FM.apply(this,arguments)}};
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */var Qz={__proto__:null,l1l2:
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */
function(e){return new rL(e)},l1:function(e){return tL(t=e),new rL({l1:null!=t?t.l1:null,l2:0});var t},l2:function(e){return tL(t=e),new rL({l2:null!=t?t.l2:null,l1:0});var t}},$z=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).model=null,t}return Av(t,e),t.prototype.setModel=function(e){if(!(e instanceof RM))throw new Error("model must be a LayersModel, not some other Container");this.model=e},t}(nO);function eP(e,t){return e<t}function tP(e,t){return e>t}var nP=function(e){function t(t){var n;if(n=e.call(this)||this,null==t&&(t={}),t.restoreBestWeights)throw new qF("restoreBestWeights = True is not implemented in EarlyStopping yet.");return n.monitor=t.monitor||"val_loss",n.minDelta=Math.abs(t.minDelta||0),n.patience=t.patience||0,n.verbose=t.verbose||0,n.mode=t.mode||"auto",n.baseline=t.baseline,-1===["auto","min","max"].indexOf(n.mode)&&(console.warn("EarlyStopping mode '"+n.mode+"' is invalid. Falling back to mode 'auto'."),n.mode="auto"),"min"===n.mode?n.monitorFunc=eP:"max"===n.mode||-1!==n.monitor.indexOf("acc")?n.monitorFunc=tP:n.monitorFunc=eP,n.monitorFunc===eP&&(n.minDelta*=-1),n}Av(t,e);var n=t.prototype;return n.onTrainBegin=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.wait=0,this.stoppedEpoch=0,null!=this.baseline?this.best=this.baseline:this.best=this.monitorFunc===eP?1/0:-1/0;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.onEpochEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$D(n);case 2:if(null!=(r=this.getMonitorValue(n))){e.next=5;break}return e.abrupt("return");case 5:this.monitorFunc(r-this.minDelta,this.best)?(this.best=r,this.wait=0):(this.wait++,this.wait>=this.patience&&(this.stoppedEpoch=t,this.model.stopTraining=!0));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),n.onTrainEnd=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.stoppedEpoch>0&&this.verbose&&console.log("Epoch "+this.stoppedEpoch+": early stopping.");case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getMonitorValue=function(e){null==e&&(e={});var t=e[this.monitor];return null==t&&console.warn("Metric for EarlyStopping "+this.monitor+" is not available. Available metrics are: "+Object.keys(e)),t},t}($z);var rP,aP,iP={earlyStopping:function(e){return new nP(e)}};
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 * =============================================================================
	 */!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(rP||(rP={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(aP||(aP={}));
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var oP={};function sP(e){return oP[e]}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function uP(e,t,n,r,a){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,s=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return lP(t.inputNames[i.inputIndexStart],n,r,a);if("tensors"===i.type)return t.inputNames.slice(o,s).map((function(e){return lP(e,n,r,a)}));var u=lP(t.inputNames.slice(o)[0],n,r,a),l=u.dataSync();return"number"===i.type?l[0]:kg(u.shape,l)}var c=t.attrParams[e];return c&&c.value}function lP(e,t,n,r){var a=fP(e),i=a[0],o=a[1];if(null!=r){var s=r.getHashTableHandleByName(i);if(null!=s)return s}var u=n.currentContextIds.find((function(e){return!!t[pP(i,e)]}));return void 0!==u?t[pP(i,u)][o]:void 0}function cP(e,t){var n=fP(e),r=n[0],a=n[1];return[pP(r,t&&t.currentContextId),a]}function pP(e,t){return t?e+"-"+t:e}function fP(e){var t=e.split(":");return 1===t.length?[e,0]:[t[0],Number(t[t.length-1])]}function hP(e,t,n){var r=uP("pad",e,t,n);if("explicit"===r){r=uP("explicitPaddings",e,t,n);for(var a=[[0,0],[0,0],[0,0],[0,0]],i=0;i<4;i++)a[i][0]=r[2*i],a[i][1]=r[2*i+1];return a}return r}function dP(e){return e.kept?e:Bk(e)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var mP={__proto__:null,json:[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},vP={__proto__:null,json:[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},gP={__proto__:null,json:[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]}]},yP={__proto__:null,json:[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number"}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]},bP={__proto__:null,json:[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]},xP={__proto__:null,json:[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},wP={__proto__:null,json:[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]},kP={__proto__:null,json:[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]},NP={__proto__:null,json:[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]}]},IP={__proto__:null,json:[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]},SP={__proto__:null,json:[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},TP={__proto__:null,json:[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]},CP={__proto__:null,json:[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]},EP={__proto__:null,json:[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]},RP={__proto__:null,json:[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]},AP={__proto__:null,json:[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]},FP={__proto__:null,json:[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]}]},_P=function(){function e(){var e,t=[mP,vP,gP,yP,bP,xP,wP,SP,IP,kP,TP,CP,EP,RP,AP,FP,NP],n=(e=[]).concat.apply(e,t.map((function(e){return e.json})));this.opMappers=n.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}Rv(e,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new this)}}]);var t=e.prototype;return t.transformGraph=function(e,t){var n=this;void 0===t&&(t={});var r=e.node,a=[],i=[],o=[],s=r.reduce((function(e,t){return e[t.name]=n.mapNode(t),t.op.startsWith("Placeholder")?a.push(e[t.name]):"Const"===t.op?i.push(e[t.name]):null!=t.input&&0!==t.input.length||o.push(e[t.name]),e}),{}),u=[],l=[],c={},p={};null!=t&&(c=this.mapSignatureEntries(t.inputs),p=this.mapSignatureEntries(t.outputs));var f=Object.keys(s);f.forEach((function(e){var t=s[e];t.inputNames.forEach((function(e){var n=cP(e)[0];t.inputs.push(s[n]),s[n].children.push(t)}))})),0===Object.keys(p).length?f.forEach((function(e){var t=s[e];0===t.children.length&&l.push(t)})):Object.keys(p).forEach((function(e){var t=cP(e)[0],n=s[t];null!=n&&(n.signatureKey=p[e],l.push(n))})),Object.keys(c).length>0?Object.keys(c).forEach((function(e){var t=cP(e)[0],n=s[t];n&&(n.signatureKey=c[e],u.push(n))})):u=a;var h={};null!=e.library&&null!=e.library.function&&(h=e.library.function.reduce((function(e,t){return e[t.signature.name]=n.mapFunction(t),e}),{}));var d={nodes:s,inputs:u,outputs:l,weights:i,placeholders:a,signature:t,functions:h};return o.length>0&&(d.initNodes=o),d},t.mapSignatureEntries=function(e){return Object.keys(e||{}).reduce((function(t,n){return t[e[n].name]=n,t}),{})},t.mapNode=function(e){var t=sP(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,a=void 0;switch(n.type){case"string":void 0===(a=OP(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=OP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(a=jP(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=jP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(a=LP(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(a=LP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(a=GP(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=GP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(a=MP(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=MP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(a=qP(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=qP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(a=UP(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=UP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(a=HP(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=HP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(a=BP(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=BP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(a=WP(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=WP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"func":void 0===(a=PP(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(a=PP(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+n.type+" for op: "+e.op)}return t[n.name]={value:a,type:r},t}),{})),n},t.mapFunction=function(e){var t=this,n=e.nodeDef,r=[],a={};null!=n&&(a=n.reduce((function(e,n){return e[n.name]=t.mapNode(n),"Const"===n.op&&r.push(e[n.name]),e}),{}));var i=[],o=[];e.signature.inputArg.forEach((function(e){var t=cP(e.name)[0],n={name:t,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:zP(e.type),type:"dtype"}},children:[]};n.signatureKey=e.name,i.push(n),a[t]=n})),Object.keys(a).forEach((function(e){var t=a[e];t.inputNames.forEach((function(e){var n=cP(e)[0];t.inputs.push(a[n]),a[n].children.push(t)}))}));var s=e.ret;e.signature.outputArg.forEach((function(e){var t=cP(s[e.name]),n=t[0],r=t[1],i=a[n];null!=i&&(i.defaultOutput=r,o.push(i))}));var u=this.mapArgsToSignature(e);return{nodes:a,inputs:i,outputs:o,weights:r,placeholders:[],signature:u}},t.mapArgsToSignature=function(e){var t=this;return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((function(e,n){return e[n.name]=t.mapArgToTensorInfo(n),e}),{}),outputs:e.signature.outputArg.reduce((function(n,r){return n[r.name]=t.mapArgToTensorInfo(r,e.ret),n}),{})}},t.mapArgToTensorInfo=function(e,t){var n=e.name;return null!=t&&(n=t[n]),{name:n,dtype:e.type}},e}();function DP(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=Dg().global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function OP(e,t,n,r){void 0===r&&(r=!1);var a=e[t];return null!=a?DP(a.s,r):n}function MP(e,t,n){var r=e[t];return r?r.b:n}function LP(e,t,n){var r=e[t]||{},a=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof a?a:parseInt(a,10)}function zP(e){switch("string"==typeof e&&(e=rP[e]),e){case rP.DT_FLOAT:return"float32";case rP.DT_INT32:case rP.DT_INT64:case rP.DT_INT8:case rP.DT_UINT8:return"int32";case rP.DT_BOOL:return"bool";case rP.DT_DOUBLE:return"float32";case rP.DT_STRING:return"string";default:return null}}function PP(e,t,n){var r=e[t];return r&&r.func?r.func.name:n}function BP(e,t,n){var r=e[t];return r&&r.type?zP(r.type):n}function WP(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return zP(e)})):n}function VP(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"==typeof e.size?e.size:parseInt(e.size,10)})):[]}function UP(e,t,n){var r=e[t];return r&&r.shape?VP(r.shape):n}function GP(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"==typeof e?e:parseInt(e,10)})):n}function jP(e,t,n,r){void 0===r&&(r=!1);var a=e[t];return a&&a.list&&a.list.s?a.list.s.map((function(e){return DP(e,r)})):n}function HP(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return VP(e)})):n}function qP(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var KP=function(){function e(e,t,n){var r=this;this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((function(e){return r.getInput(e)})),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((function(e,t){return e[t]=r.getAttr(t),e}),{}))}var t=e.prototype;return t.getInput=function(e){return lP(e,this.tensorMap,this.context)},t.getAttr=function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return lP(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return LP(this.node.rawAttrs,e,t);if(null!=n.s)return OP(this.node.rawAttrs,e,t);if(null!=n.b)return MP(this.node.rawAttrs,e,t);if(null!=n.shape)return UP(this.node.rawAttrs,e,t);if(null!=n.type)return BP(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return GP(this.node.rawAttrs,e,t);if(null!=n.list.s)return jP(this.node.rawAttrs,e,t);if(null!=n.list.shape)return HP(this.node.rawAttrs,e,t);if(null!=n.list.b)return qP(this.node.rawAttrs,e,t);if(null!=n.list.type)return WP(this.node.rawAttrs,e,t)}return t},e}();
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function XP(e,t,n){void 0===n&&(n=""),Kv(function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(-1!==e[n]&&-1!==t[n]&&e[n]!==t[n])return!1;return!0}(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}var YP=function(){function e(e,t,n,r,a,i,o){this.name=e,this.dtype=t,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=a,this.dynamicSize=i,this.clearAfterRead=o,this.tensors=[],this.closed_=!1,this.idTensor=gC(0),eI(this.idTensor)}var t=e.prototype;return t.clearAndClose=function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.tensor.id)||t.tensor.dispose()})),this.tensors=[],this.closed_=!0,this.idTensor.dispose()},t.size=function(){return this.tensors.length},t.read=function(e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||e>=this.size())throw new Error("Tried to read from index "+e+", but array size is: "+this.size());var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+e+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor},t.readMany=function(e){var t=this;return e.map((function(e){return t.read(e)}))},t.write=function(e,t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index "+e+", but array is not resizeable and size is: "+this.maxSize);var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+",\n          because the value dtype is "+t.dtype+", but TensorArray dtype is "+this.dtype+".");if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),XP(this.elementShape,t.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+e+"."),n.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been read.");if(n.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been written.");n.tensor=t,eI(t),n.written=!0,this.tensors[e]=n},t.writeMany=function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+e.length+" is not the same as tensors size: "+t.length+".");e.forEach((function(e,r){return n.write(e,t[r])}))},t.gather=function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+t);if(e)e=e.slice(0,this.size());else{e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return Pw([],[0].concat(this.elementShape));var r=this.readMany(e);return XP(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),PC(r,0)},t.concat=function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+e);if(0===this.size())return Pw([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return XP(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+r[0].shape+")"),zI(r,0)},t.scatter=function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+e.length+" vs. "+t.shape[0]);var n=Math.max.apply(Math,e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size ("+n+"  vs. "+this.maxSize+")");this.writeMany(e,XC(t,0))},t.split=function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);var r=0,a=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+r+", and tensor's shape is: "+t.shape);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+e.length+"), and the TensorArray is not marked as dynamically resizeable");var i=0===r?0:t.size/r,o=[];QN((function(){t=OI(t,[1,r,i]);for(var s=0;s<e.length;++s){var u=[0,0===s?0:a[s-1],0],l=[1,e[s],i];o[s]=OI(BI(t,u,l),n.elementShape)}return o}));for(var s=[],u=0;u<e.length;u++)s[u]=u;this.writeMany(s,o)},Rv(e,[{key:"id",get:function(){return this.idTensor.id}},{key:"closed",get:function(){return this.closed_}}]),e}(),JP=function(){function e(e,t,n,r){void 0===r&&(r=-1),this.tensors=e,this.elementShape=t,this.elementDtype=n,null!=e&&e.forEach((function(e){if(n!==e.dtype)throw new Error("Invalid data types; op elements "+n+", but list elements "+e.dtype);XP(t,e.shape,"TensorList shape mismatch: "),eI(e)})),this.idTensor=gC(0),this.maxNumElements=r,eI(this.idTensor)}var t=e.prototype;return t.copy=function(){return new e([].concat(this.tensors),this.elementShape,this.elementDtype)},t.clearAndClose=function(e){this.tensors.forEach((function(t){null!=e&&e.has(t.id)||t.dispose()})),this.tensors.length=0,this.idTensor.dispose()},t.size=function(){return this.tensors.length},t.stack=function(e,t,n){var r=this;if(void 0===n&&(n=-1),t!==this.elementDtype)throw new Error("Invalid data types; op elements "+t+", but list elements "+this.elementDtype);if(-1!==n&&this.tensors.length!==n)throw new Error("Operation expected a list with "+n+" elements but got a list with "+this.tensors.length+" elements.");return XP(e,this.elementShape,"TensorList shape mismatch: "),QN((function(){var t=r.tensors.map((function(t){return OI(t,e)}));return PC(t,0)}))},t.popBack=function(e,t){if(t!==this.elementDtype)throw new Error("Invalid data types; op elements "+t+", but list elements "+this.elementDtype);if(0===this.size())throw new Error("Trying to pop from an empty list.");var n=this.tensors.pop();return XP(n.shape,e,"TensorList shape mismatch: "),OI(n,e)},t.pushBack=function(e){if(e.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements "+e.dtype+", but list elements "+this.elementDtype);if(XP(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");eI(e),this.tensors.push(e)},t.resize=function(e){if(e<0)throw new Error("TensorListResize expects size to be non-negative. Got: "+e);if(-1!==this.maxNumElements&&e>this.maxNumElements)throw new Error("TensorListResize input size "+e+" is greater maxNumElement "+this.maxNumElements+".");this.tensors.length=e},t.getItem=function(e,t,n){if(n!==this.elementDtype)throw new Error("Invalid data types; op elements "+n+", but list elements "+this.elementDtype);if(e<0||e>this.tensors.length)throw new Error("Trying to access element "+e+" in a list with "+this.tensors.length+" elements.");if(null==this.tensors[e])throw new Error("element at index "+e+" is null.");return XP(this.tensors[e].shape,t,"TensorList shape mismatch: "),this.tensors[e]},t.setItem=function(e,t){if(t.dtype!==this.elementDtype)throw new Error("Invalid data types; op elements "+t.dtype+", but list elements "+this.elementDtype);if(e<0||-1!==this.maxNumElements&&e>=this.maxNumElements)throw new Error("Trying to set element "+e+" in a list with max "+this.maxNumElements+" elements.");XP(this.elementShape,t.shape,"TensorList shape mismatch: "),eI(t),this.tensors[e]=t},t.gather=function(e,t,n){var r=this;if(t!==this.elementDtype)throw new Error("Invalid data types; op elements "+t+", but list elements "+this.elementDtype);return XP(this.elementShape,n,"TensorList shape mismatch: "),0===(e=e.slice(0,this.size())).length?Pw([],[0].concat(this.elementShape)):QN((function(){var t=e.map((function(e){return OI(r.tensors[e],n)}));return PC(t,0)}))},t.concat=function(e,t){var n=this;if(e&&e!==this.elementDtype)throw new Error("TensorList dtype is "+this.elementDtype+" but concat requested dtype "+e);return XP(this.elementShape,t,"TensorList shape mismatch: "),0===this.size()?Pw([],[0].concat(this.elementShape)):QN((function(){var e=n.tensors.map((function(e){return OI(e,t)}));return zI(e,0)}))},Rv(e,[{key:"id",get:function(){return this.idTensor.id}}]),e}();function ZP(e,t,n){var r=e.dtype;if(e.shape.length<1)throw new Error("Tensor must be at least a vector, but saw shape: "+e.shape);if(e.dtype!==n)throw new Error("Invalid data types; op elements "+e.dtype+", but list elements "+n);XP(e.shape.slice(1),t,"TensorList shape mismatch: ");var a=XC(e);return new JP(a,t,r)}function QP(e,t,n){return new JP([],e,t,n)}function $P(e,t,n,r){if(t.length!==e.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+t.length+" vs. "+e.shape[0]);var a=Math.max.apply(Math,t);if(null!=r&&-1!==r&&a>=r)throw new Error("Max index must be < array size ("+a+"  vs. "+r+")");var i=new JP([],n,e.dtype,r),o=XC(e,0);return t.forEach((function(e,t){i.setItem(e,o[t])})),i}function eB(e,t,n){var r=0,a=t.map((function(e){return r+=e}));if(r!==e.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+r+", and tensor's shape is: "+e.shape);for(var i=0===r?0:e.size/r,o=QN((function(){var o=[];e=OI(e,[1,r,i]);for(var s=0;s<t.length;++s){var u=[0,0===s?0:a[s-1],0],l=[1,t[s],i];o[s]=OI(BI(e,u,l),n)}return e.dispose(),o})),s=new JP([],n,e.dtype,t.length),u=0;u<o.length;u++)s.setItem(u,o[u]);return s}var tB=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s,u,l,c,p,f,h,d,m,v,g,y,b,x,w,k,N,I,S,T,C,E,R,A,F,_,D,O,M,L,z,P,B,W,V,U,G,j,H,q,K,X,Y,J,Z,Q,$,ee,te,ne,re,ae,ie,oe,se,ue,le,ce,pe,fe,he,de,me,ve,ge,ye,be,xe,we,ke,Ne,Ie,Se,Te,Ce,Ee,Re,Ae,Fe,_e,De,Oe,Me,Le,ze,Pe,Be,We,Ve,Ue,Ge,je,He;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="If"===e.t0||"StatelessIf"===e.t0?3:"While"===e.t0||"StatelessWhile"===e.t0?15:"LoopCond"===e.t0?19:"Switch"===e.t0?21:"Merge"===e.t0?32:"Enter"===e.t0?37:"Exit"===e.t0?41:"NextIteration"===e.t0?44:"TensorArrayV3"===e.t0?47:"TensorArrayWriteV3"===e.t0?57:"TensorArrayReadV3"===e.t0?63:"TensorArrayGatherV3"===e.t0?67:"TensorArrayScatterV3"===e.t0?72:"TensorArrayConcatV3"===e.t0?78:"TensorArraySplitV3"===e.t0?82:"TensorArraySizeV3"===e.t0?88:"TensorArrayCloseV3"===e.t0?91:"TensorListSetItem"===e.t0?95:"TensorListGetItem"===e.t0?101:"TensorListScatterV2"===e.t0||"TensorListScatter"===e.t0?107:"TensorListReserve"===e.t0||"EmptyTensorList"===e.t0?114:"TensorListGather"===e.t0?121:"TensorListStack"===e.t0?127:"TensorListFromTensor"===e.t0?133:"TensorListConcat"===e.t0?139:"TensorListPushBack"===e.t0?144:"TensorListPopBack"===e.t0?149:"TensorListSplit"===e.t0?154:160;break;case 3:return a=uP("thenBranch",t,n,r),i=uP("elseBranch",t,n,r),o=uP("cond",t,n,r),s=uP("args",t,n,r),e.next=9,o.data();case 9:if(!e.sent[0]){e.next=14;break}return e.abrupt("return",r.functionMap[a].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 14:return e.abrupt("return",r.functionMap[i].executeFunctionAsync(s,r.tensorArrayMap,r.tensorListMap));case 15:return e.delegateYield(regeneratorRuntime.mark((function e(){var a,i,o,s,u,l,c,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=uP("body",t,n,r),i=uP("cond",t,n,r),o=uP("args",t,n,r),e.next=5,r.functionMap[i].executeFunctionAsync(o,r.tensorArrayMap,r.tensorListMap);case 5:return s=e.sent,u=o.map((function(e){return e.id})),e.next=9,s[0].data();case 9:l=e.sent,s.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||e.dispose()})),c=o,p=regeneratorRuntime.mark((function e(){var t,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c,e.next=3,r.functionMap[a].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap);case 3:return c=e.sent,n=c.map((function(e){return e.id})),t.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()})),e.next=8,r.functionMap[i].executeFunctionAsync(c,r.tensorArrayMap,r.tensorListMap);case 8:return o=e.sent,e.next=11,o[0].data();case 11:l=e.sent,o.forEach((function(e){e.kept||-1!==u.indexOf(e.id)||-1!==n.indexOf(e.id)||e.dispose()}));case 13:case"end":return e.stop()}}),e)}));case 13:if(!l[0]){e.next=17;break}return e.delegateYield(p(),"t0",15);case 15:e.next=13;break;case 17:return e.abrupt("return",{v:c});case 18:case"end":return e.stop()}}),e)}))(),"t1",16);case 16:if("object"!=typeof(u=e.t1)){e.next=19;break}return e.abrupt("return",u.v);case 19:return l=uP("pred",t,n,r),e.abrupt("return",[dP(l)]);case 21:return c=uP("pred",t,n,r),(p=uP("data",t,n,r)).kept||(p=dP(p)),e.next=26,c.data();case 26:if(!e.sent[0]){e.next=30;break}e.t2=[void 0,p],e.next=31;break;case 30:e.t2=[p,void 0];case 31:return e.abrupt("return",e.t2);case 32:if(f=t.inputNames.find((function(e){return void 0!==lP(e,n,r)})),!f){e.next=36;break}return h=lP(f,n,r),e.abrupt("return",[dP(h)]);case 36:return e.abrupt("return",void 0);case 37:return d=uP("frameName",t,n,r),m=uP("tensor",t,n,r),r.enterFrame(d),e.abrupt("return",[dP(m)]);case 41:return v=uP("tensor",t,n,r),r.exitFrame(),e.abrupt("return",[dP(v)]);case 44:return g=uP("tensor",t,n,r),r.nextIteration(),e.abrupt("return",[dP(g)]);case 47:return y=uP("size",t,n,r),b=uP("dtype",t,n,r),x=uP("elementShape",t,n,r),w=uP("dynamicSize",t,n,r),k=uP("clearAfterRead",t,n,r),N=uP("identicalElementShapes",t,n,r),I=uP("name",t,n,r),S=new YP(I,b,y,x,N,w,k),r.addTensorArray(S),e.abrupt("return",[S.idTensor,gC(1)]);case 57:return T=uP("tensorArrayId",t,n,r),C=uP("index",t,n,r),E=uP("tensor",t,n,r),(R=r.getTensorArray(T.id)).write(C,E),e.abrupt("return",[R.idTensor]);case 63:return A=uP("tensorArrayId",t,n,r),F=uP("index",t,n,r),_=r.getTensorArray(A.id),e.abrupt("return",[_.read(F)]);case 67:return D=uP("tensorArrayId",t,n,r),O=uP("indices",t,n,r),M=uP("dtype",t,n,r),L=r.getTensorArray(D.id),e.abrupt("return",[L.gather(O,M)]);case 72:return z=uP("tensorArrayId",t,n,r),P=uP("indices",t,n,r),B=uP("tensor",t,n,r),(W=r.getTensorArray(z.id)).scatter(P,B),e.abrupt("return",[W.idTensor]);case 78:return V=uP("tensorArrayId",t,n,r),U=r.getTensorArray(V.id),G=uP("dtype",t,n,r),e.abrupt("return",[U.concat(G)]);case 82:return j=uP("tensorArrayId",t,n,r),H=uP("tensor",t,n,r),q=uP("lengths",t,n,r),(K=r.getTensorArray(j.id)).split(q,H),e.abrupt("return",[K.idTensor]);case 88:return X=uP("tensorArrayId",t,n,r),Y=r.getTensorArray(X.id),e.abrupt("return",[gC(Y.size(),"int32")]);case 91:return J=uP("tensorArrayId",t,n,r),(Z=r.getTensorArray(J.id)).clearAndClose(),e.abrupt("return",[Z.idTensor]);case 95:return Q=uP("tensorListId",t,n,r),$=uP("index",t,n,r),ee=uP("tensor",t,n,r),(te=r.getTensorList(Q.id)).setItem($,ee),e.abrupt("return",[te.idTensor]);case 101:return ne=uP("tensorListId",t,n,r),re=uP("index",t,n,r),ae=uP("elementShape",t,n,r),ie=uP("elementDType",t,n,r),oe=r.getTensorList(ne.id),e.abrupt("return",[oe.getItem(re,ae,ie)]);case 107:return se=uP("indices",t,n,r),ue=uP("tensor",t,n,r),le=uP("elementShape",t,n,r),ce=uP("numElements",t,n,r),pe=$P(ue,se,le,ce),r.addTensorList(pe),e.abrupt("return",[pe.idTensor]);case 114:return fe=uP("elementShape",t,n,r),he=uP("elementDType",t,n,r),de="TensorListReserve"===t.op?"numElements":"maxNumElements",me=uP(de,t,n,r),ve=QP(fe,he,me),r.addTensorList(ve),e.abrupt("return",[ve.idTensor]);case 121:return ge=uP("tensorListId",t,n,r),ye=uP("indices",t,n,r),be=uP("elementShape",t,n,r),xe=uP("elementDType",t,n,r),we=r.getTensorList(ge.id),e.abrupt("return",[we.gather(ye,xe,be)]);case 127:return ke=uP("tensorListId",t,n,r),Ne=uP("elementShape",t,n,r),Ie=uP("elementDType",t,n,r),Se=uP("numElements",t,n,r),Te=r.getTensorList(ke.id),e.abrupt("return",[Te.stack(Ne,Ie,Se)]);case 133:return Ce=uP("tensor",t,n,r),Ee=uP("elementShape",t,n,r),Re=uP("elementDType",t,n,r),Ae=ZP(Ce,Ee,Re),r.addTensorList(Ae),e.abrupt("return",[Ae.idTensor]);case 139:return Fe=uP("tensorListId",t,n,r),_e=r.getTensorList(Fe.id),De=uP("dtype",t,n,r),Oe=uP("elementShape",t,n,r),e.abrupt("return",[_e.concat(De,Oe)]);case 144:return Me=uP("tensorListId",t,n,r),Le=uP("tensor",t,n,r),(ze=r.getTensorList(Me.id)).pushBack(Le),e.abrupt("return",[ze.idTensor]);case 149:return Pe=uP("tensorListId",t,n,r),Be=uP("elementShape",t,n,r),We=uP("elementDType",t,n,r),Ve=r.getTensorList(Pe.id),e.abrupt("return",[Ve.popBack(Be,We)]);case 154:return Ue=uP("tensor",t,n,r),Ge=uP("elementShape",t,n,r),je=uP("lengths",t,n,r),He=eB(Ue,je,Ge),r.addTensorList(He),e.abrupt("return",[He.idTensor]);case 160:throw TypeError("Node type "+t.op+" is not implemented");case 161:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function nB(e,t,n){var r=uP("fusedOps",e,t,n),a=r[0],i=r[1],o="biasadd"===a,s="prelu"===i,u="fusedbatchnorm"===a,l=uP("numArgs",e,t,n);if(o){if(s&&2!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==l)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(u)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported.");var c=uP("strides",e,t,n),p=hP(e,t,n),f=uP("dataFormat",e,t,n).toUpperCase(),h=uP("dilations",e,t,n),d=uP("args",e,t,n);return{stride:c,pad:p,dataFormat:f,dilations:h,biasArg:d[0],preluArg:d[1],activationFunc:i,leakyreluAlpha:uP("leakyreluAlpha",e,t,n)}}function rB(e,t,n){return{boxes:uP("boxes",e,t,n),scores:uP("scores",e,t,n),maxOutputSize:uP("maxOutputSize",e,t,n),iouThreshold:uP("iouThreshold",e,t,n),scoreThreshold:uP("scoreThreshold",e,t,n),softNmsSigma:uP("softNmsSigma",e,t,n)}}var aB=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,s,u,l,c,p,f,h,d,m,v,g,y,b,x,w,k,N,I,S,T,C;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="NonMaxSuppressionV5"===e.t0?3:"NonMaxSuppressionV4"===e.t0?8:"NonMaxSuppressionV3"===e.t0||"NonMaxSuppressionV2"===e.t0?14:"Where"===e.t0?19:"ListDiff"===e.t0?26:27;break;case 3:return a=rB(t,n,r),i=a.boxes,o=a.scores,s=a.maxOutputSize,u=a.iouThreshold,l=a.scoreThreshold,c=a.softNmsSigma,e.next=6,ER.nonMaxSuppressionWithScoreAsync(i,o,s,u,l,c);case 6:return p=e.sent,e.abrupt("return",[p.selectedIndices,p.selectedScores]);case 8:return f=rB(t,n,r),h=f.boxes,d=f.scores,m=f.maxOutputSize,v=f.iouThreshold,g=f.scoreThreshold,y=uP("padToMaxOutputSize",t,n,r),e.next=12,ER.nonMaxSuppressionPaddedAsync(h,d,m,v,g,y);case 12:return b=e.sent,e.abrupt("return",[b.selectedIndices,b.validOutputs]);case 14:return x=rB(t,n,r),w=x.boxes,k=x.scores,N=x.maxOutputSize,I=x.iouThreshold,S=x.scoreThreshold,e.next=17,ER.nonMaxSuppressionAsync(w,k,N,I,S);case 17:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 19:return T=Pk(uP("condition",t,n,r),"bool"),e.next=22,QC(T);case 22:return e.t2=e.sent,C=[e.t2],T.dispose(),e.abrupt("return",C);case 26:return e.abrupt("return",wC(uP("x",t,n,r),uP("y",t,n,r)));case 27:throw TypeError("Node type "+t.op+" is not implemented");case 28:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),iB=function(){function e(e,t){this.keyDType=e,this.valueDType=t,this.handle=gC(0),this.tensorMap=new Map,eI(this.handle)}var t=e.prototype;return t.clearAndClose=function(){this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),this.handle.dispose()},t.size=function(){return this.tensorMap.size},t.import=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,this.tensorMap.forEach((function(e){return e.dispose()})),this.tensorMap.clear(),e.abrupt("return",QN((function(){var e=XC(n),t=r.length,i=e.length;Kv(t===i,(function(){return"The number of elements doesn't match, keys has "+t+" elements, the values has "+i+" elements."}));for(var o=0;o<t;o++){var s=r[o],u=e[o];eI(u),a.tensorMap.set(s,u)}return a.handle})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.find=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.checkKeyAndValueTensor(t,n),e.next=3,t.data();case 3:return r=e.sent,e.abrupt("return",QN((function(){for(var e=[],t=0;t<r.length;t++){var i=r[t],o=a.findWithDefault(i,n);e.push(o)}return PC(e)})));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.findWithDefault=function(e,t){var n=this.tensorMap.get(e);return null!=n?n:t},t.checkKeyAndValueTensor=function(e,t){if(e.dtype!==this.keyDType)throw new Error("Expect key dtype "+this.keyDType+", but got "+e.dtype);if(t.dtype!==this.valueDType)throw new Error("Expect value dtype "+this.valueDType+", but got "+t.dtype)},Rv(e,[{key:"id",get:function(){return this.handle.id}}]),e}(),oB=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n,r,a){var i,o,s,u,l,c,p,f,h,d,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.op,e.next="HashTable"===e.t0||"HashTableV2"===e.t0?3:"LookupTableImport"===e.t0||"LookupTableImportV2"===e.t0?8:"LookupTableFind"===e.t0||"LookupTableFindV2"===e.t0?16:24;break;case 3:return i=uP("keyDType",t,n,r),o=uP("valueDType",t,n,r),s=new iB(i,o),a.addHashTable(t.name,s),e.abrupt("return",[s.handle]);case 8:return u=uP("tableHandle",t,n,r,a),l=uP("keys",t,n,r),c=uP("values",t,n,r),p=a.getHashTableById(u.id),e.next=14,p.import(l,c);case 14:return e.t1=e.sent,e.abrupt("return",[e.t1]);case 16:return f=uP("tableHandle",t,n,r,a),h=uP("keys",t,n,r),d=uP("defaultValue",t,n,r),m=a.getHashTableById(f.id),e.next=22,m.find(h,d);case 22:return e.t2=e.sent,e.abrupt("return",[e.t2]);case 24:throw TypeError("Node type "+t.op+" is not implemented");case 25:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function sB(e,t,n,r){var a=function(e,t,n){switch(e.category){case"arithmetic":return QN((function(){return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[aI(uP("a",e,t,n),uP("b",e,t,n))];case"AddN":return[pI(uP("tensors",e,t,n))];case"FloorMod":case"Mod":return[IT(uP("a",e,t,n),uP("b",e,t,n))];case"Mul":return[sI(uP("a",e,t,n),uP("b",e,t,n))];case"RealDiv":case"Div":return[oI(uP("a",e,t,n),uP("b",e,t,n))];case"DivNoNan":return[kS(uP("a",e,t,n),uP("b",e,t,n))];case"FloorDiv":return[iI(uP("a",e,t,n),uP("b",e,t,n))];case"Sub":return[eT(uP("a",e,t,n),uP("b",e,t,n))];case"Minimum":return[kT(uP("a",e,t,n),uP("b",e,t,n))];case"Maximum":return[bT(uP("a",e,t,n),uP("b",e,t,n))];case"Pow":return[VT(uP("a",e,t,n),uP("b",e,t,n))];case"SquaredDifference":return[LC(uP("a",e,t,n),uP("b",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"basic_math":return QN((function(){return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[uI(uP("x",e,t,n))];case"Acos":return[lI(uP("x",e,t,n))];case"Acosh":return[cI(uP("x",e,t,n))];case"Asin":return[vI(uP("x",e,t,n))];case"Asinh":return[gI(uP("x",e,t,n))];case"Atan":return[yI(uP("x",e,t,n))];case"Atan2":return[bI(uP("x",e,t,n),uP("y",e,t,n))];case"Atanh":return[xI(uP("x",e,t,n))];case"Ceil":return[YI(uP("x",e,t,n))];case"Complex":return[Lw(uP("real",e,t,n),uP("imag",e,t,n))];case"Cos":return[uS(uP("x",e,t,n))];case"Cosh":return[lS(uP("x",e,t,n))];case"Elu":return[IS(uP("x",e,t,n))];case"Erf":return[SS(uP("x",e,t,n))];case"Exp":return[TS(uP("x",e,t,n))];case"Expm1":return[ES(uP("x",e,t,n))];case"Floor":return[_S(uP("x",e,t,n))];case"Log":return[HS(uP("x",e,t,n))];case"Log1p":return[qS(uP("x",e,t,n))];case"Imag":return[LS(uP("x",e,t,n))];case"Neg":return[JS(uP("x",e,t,n))];case"Reciprocal":return[sC(uP("x",e,t,n))];case"Real":return[oC(uP("x",e,t,n))];case"Relu":return[uC(uP("x",e,t,n))];case"Round":return[mC(uP("x",e,t,n))];case"Selu":return[yC(uP("x",e,t,n))];case"Sigmoid":return[PI(uP("x",e,t,n))];case"Sin":return[NC(uP("x",e,t,n))];case"Sign":return[kC(uP("x",e,t,n))];case"Sinh":return[IC(uP("x",e,t,n))];case"Softplus":return[ZS(uP("x",e,t,n))];case"Sqrt":return[MC(uP("x",e,t,n))];case"Square":return[ST(uP("x",e,t,n))];case"Tanh":return[WI(uP("x",e,t,n))];case"Tan":return[VC(uP("x",e,t,n))];case"ClipByValue":return[JI(uP("x",e,t,n),uP("clipValueMin",e,t,n),uP("clipValueMax",e,t,n))];case"Relu6":return[lC(uP("x",e,t,n))];case"Rsqrt":return[vC(lP(e.inputNames[0],t,n))];case"Prod":return[GT(uP("x",e,t,n),uP("axes",e,t,n))];case"LeakyRelu":return[WS(uP("x",e,t,n),uP("alpha",e,t,n))];case"Prelu":return[UT(uP("x",e,t,n),uP("alpha",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"control":return tB(e,t,n);case"convolution":return QN((function(){return function(e,t,n){switch(e.op){case"Conv1D":var r=uP("stride",e,t,n),a=uP("pad",e,t,n),i=uP("dataFormat",e,t,n).toUpperCase(),o=uP("dilation",e,t,n);return[nS(uP("x",e,t,n),uP("filter",e,t,n),r,a,i,o)];case"Conv2D":var s=uP("strides",e,t,n),u=hP(e,t,n),l=uP("dataFormat",e,t,n).toUpperCase(),c=uP("dilations",e,t,n);return[tS(uP("x",e,t,n),uP("filter",e,t,n),[s[1],s[2]],u,l,[c[1],c[2]])];case"_FusedConv2D":var p=nB(e,t,n),f=p.stride,h=p.pad,d=p.dataFormat,m=p.dilations,v=p.biasArg,g=p.preluArg,y=p.activationFunc,b=p.leakyreluAlpha;return[_E({x:uP("x",e,t,n),filter:uP("filter",e,t,n),strides:[f[1],f[2]],pad:h,dataFormat:d,dilations:[m[1],m[2]],bias:v,activation:y,preluActivationWeights:g,leakyreluAlpha:b})];case"FusedDepthwiseConv2dNative":var x=nB(e,t,n),w=x.stride,k=x.pad,N=x.dataFormat,I=x.dilations,S=x.biasArg,T=x.preluArg,C=x.activationFunc,E=x.leakyreluAlpha;return[ME({x:uP("x",e,t,n),filter:uP("filter",e,t,n),strides:[w[1],w[2]],pad:k,dataFormat:N,dilations:[I[1],I[2]],bias:S,activation:C,preluActivationWeights:T,leakyreluAlpha:E})];case"Conv2DBackpropInput":case"Conv2dTranspose":var R=uP("outputShape",e,t,n),A=uP("strides",e,t,n),F=hP(e,t,n);return[aS(uP("x",e,t,n),uP("filter",e,t,n),R,[A[1],A[2]],F)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":var _=uP("strides",e,t,n),D=hP(e,t,n),O=uP("dilations",e,t,n),M=uP("dataFormat",e,t,n).toUpperCase();return[hS(uP("input",e,t,n),uP("filter",e,t,n),[_[1],_[2]],D,M,[O[1],O[2]])];case"Conv3D":var L=uP("strides",e,t,n),z=uP("pad",e,t,n),P=uP("dataFormat",e,t,n).toUpperCase(),B=uP("dilations",e,t,n);return[iS(uP("x",e,t,n),uP("filter",e,t,n),[L[1],L[2],L[3]],z,P,[B[1],B[2],B[3]])];case"AvgPool":var W=uP("strides",e,t,n),V=uP("pad",e,t,n),U=uP("kernelSize",e,t,n);return[MI(uP("x",e,t,n),[U[1],U[2]],[W[1],W[2]],V)];case"MaxPool":var G=uP("strides",e,t,n),j=uP("pad",e,t,n),H=uP("kernelSize",e,t,n);return[vT(uP("x",e,t,n),[H[1],H[2]],[G[1],G[2]],j)];case"MaxPoolWithArgmax":var q=uP("strides",e,t,n),K=uP("pad",e,t,n),X=uP("kernelSize",e,t,n),Y=uP("includeBatchInIndex",e,t,n),J=yT(uP("x",e,t,n),[X[1],X[2]],[q[1],q[2]],K,Y);return[J.result,J.indexes];case"AvgPool3D":var Z=uP("strides",e,t,n),Q=uP("pad",e,t,n),$=uP("kernelSize",e,t,n);return[LI(uP("x",e,t,n),[$[1],$[2],$[3]],[Z[1],Z[2],Z[3]],Q)];case"MaxPool3D":var ee=uP("strides",e,t,n),te=uP("pad",e,t,n),ne=uP("kernelSize",e,t,n);return[gT(uP("x",e,t,n),[ne[1],ne[2],ne[3]],[ee[1],ee[2],ee[3]],te)];case"Dilation2D":var re=uP("strides",e,t,n),ae=uP("pad",e,t,n),ie=uP("dilations",e,t,n),oe=re[1],se=re[2],ue=ie[1],le=ie[2];return[mS(uP("x",e,t,n),uP("filter",e,t,n),[oe,se],ae,[ue,le],"NHWC")];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"creation":return QN((function(){return function(e,t,n){switch(e.op){case"Fill":var r=uP("shape",e,t,n),a=uP("dtype",e,t,n);return[FS(r,uP("value",e,t,n),a)];case"LinSpace":return[GS(uP("start",e,t,n),uP("stop",e,t,n),uP("num",e,t,n))];case"Multinomial":var i=uP("logits",e,t,n),o=uP("numSamples",e,t,n),s=uP("seed",e,t,n);return[ET(i,o,s)];case"OneHot":var u=uP("indices",e,t,n),l=uP("depth",e,t,n),c=uP("onValue",e,t,n),p=uP("offValue",e,t,n);return[oN(u,l,c,p)];case"Ones":return[FT(uP("shape",e,t,n),uP("dtype",e,t,n))];case"OnesLike":return[_T(uP("x",e,t,n))];case"RandomUniform":return[aC(uP("shape",e,t,n),uP("minval",e,t,n),uP("maxval",e,t,n),uP("dtype",e,t,n))];case"Range":return[iC(uP("start",e,t,n),uP("stop",e,t,n),uP("step",e,t,n),uP("dtype",e,t,n))];case"TruncatedNormal":var f=uP("shape",e,t,n),h=uP("mean",e,t,n),d=uP("stdDev",e,t,n),m=uP("seed",e,t,n);return[HC(f,h,d,uP("dtype",e,t,n),m)];case"Zeros":return[AT(uP("shape",e,t,n),uP("dtype",e,t,n))];case"ZerosLike":return[wS(uP("x",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"dynamic":return aB(e,t,n);case"evaluation":return QN((function(){return function(e,t,n){switch(e.op){case"TopKV2":var r=uP("x",e,t,n),a=uP("k",e,t,n),i=uP("sorted",e,t,n),o=jC(r,a,i);return[o.values,o.indices];case"Unique":var s=uP("x",e,t,n),u=qC(s);return[u.values,u.indices];case"UniqueV2":var l=uP("x",e,t,n),c=uP("axis",e,t,n),p=qC(l,c);return[p.values,p.indices];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"image":return QN((function(){return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=uP("images",e,t,n),a=uP("size",e,t,n),i=uP("alignCorners",e,t,n),o=uP("halfPixelCenters",e,t,n);return[ER.resizeBilinear(r,[a[0],a[1]],i,o)];case"ResizeNearestNeighbor":var s=uP("images",e,t,n),u=uP("size",e,t,n),l=uP("alignCorners",e,t,n),c=uP("halfPixelCenters",e,t,n);return[ER.resizeNearestNeighbor(s,[u[0],u[1]],l,c)];case"CropAndResize":var p=uP("image",e,t,n),f=uP("boxes",e,t,n),h=uP("boxInd",e,t,n),d=uP("cropSize",e,t,n),m=uP("method",e,t,n),v=uP("extrapolationValue",e,t,n);return[ER.cropAndResize(p,f,h,d,m,v)];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"graph":return QN((function(){return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=uP("default",e,t,n);return[lP(e.name,t,n)||r];case"Placeholder":return[lP(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[dP(uP("x",e,t,n))];case"IdentityN":return uP("x",e,t,n).map((function(e){return dP(e)}));case"Shape":return[UC(uP("x",e,t,n).shape,"int32")];case"ShapeN":return uP("x",e,t,n).map((function(e){return UC(e.shape)}));case"Size":return[gC(uP("x",e,t,n).size,"int32")];case"Rank":return[gC(uP("x",e,t,n).rank,"int32")];case"NoOp":return[gC(1)];case"Print":var a=uP("x",e,t,n),i=uP("data",e,t,n),o=uP("message",e,t,n),s=uP("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(o);for(var u=0;u<i.length;u++)console.log(Array.prototype.slice.call(i[u].dataSync()).slice(0,s));return[a];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"logical":return QN((function(){return function(e,t,n){switch(e.op){case"Equal":return[bS(uP("a",e,t,n),uP("b",e,t,n))];case"NotEqual":return[RT(uP("a",e,t,n),uP("b",e,t,n))];case"Greater":return[OS(uP("a",e,t,n),uP("b",e,t,n))];case"GreaterEqual":return[MS(uP("a",e,t,n),uP("b",e,t,n))];case"Less":return[VS(uP("a",e,t,n),uP("b",e,t,n))];case"LessEqual":return[US(uP("a",e,t,n),uP("b",e,t,n))];case"LogicalAnd":return[fT(uP("a",e,t,n),uP("b",e,t,n))];case"LogicalNot":return[hT(uP("a",e,t,n))];case"LogicalOr":return[dT(uP("a",e,t,n),uP("b",e,t,n))];case"Select":case"SelectV2":return[xS(uP("condition",e,t,n),uP("a",e,t,n),uP("b",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"matrices":return QN((function(){return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[iN(uP("a",e,t,n),uP("b",e,t,n),uP("transposeA",e,t,n),uP("transposeB",e,t,n))];case"Transpose":return[sN(uP("x",e,t,n),uP("perm",e,t,n))];case"_FusedMatMul":var r=uP("fusedOps",e,t,n),a=r[0],i=r[1],o="biasadd"===a,s="prelu"===i,u=uP("numArgs",e,t,n),l=uP("leakyreluAlpha",e,t,n);if(o){if(s&&2!==u)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!s&&1!==u)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}var c=uP("args",e,t,n),p=c[0],f=c[1];return[LE({a:uP("a",e,t,n),b:uP("b",e,t,n),transposeA:uP("transposeA",e,t,n),transposeB:uP("transposeB",e,t,n),bias:p,activation:i,preluActivationWeights:f,leakyreluAlpha:l})];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"normalization":return QN((function(){return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[GI(uP("x",e,t,n),uP("mean",e,t,n),uP("variance",e,t,n),uP("offset",e,t,n),uP("scale",e,t,n),uP("epsilon",e,t,n))];case"LRN":return[jS(uP("x",e,t,n),uP("radius",e,t,n),uP("bias",e,t,n),uP("alpha",e,t,n),uP("beta",e,t,n))];case"Softmax":return[RC(uP("x",e,t,n))];case"LogSoftmax":return[nT(uP("x",e,t,n))];case"SparseToDense":return[xE(uP("sparseIndices",e,t,n),uP("outputShape",e,t,n),uP("sparseValues",e,t,n),uP("defaultValue",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"reduction":return QN((function(){return function(e,t,n){switch(e.op){case"Max":var r=uP("axis",e,t,n),a=uP("keepDims",e,t,n);return[$S(uP("x",e,t,n),r,a)];case"Mean":var i=uP("axis",e,t,n),o=uP("keepDims",e,t,n);return[xT(uP("x",e,t,n),i,o)];case"Min":var s=uP("axis",e,t,n),u=uP("keepDims",e,t,n);return[wT(uP("x",e,t,n),s,u)];case"Sum":var l=uP("axis",e,t,n),c=uP("keepDims",e,t,n);return[tT(uP("x",e,t,n),l,c)];case"All":var p=uP("axis",e,t,n),f=uP("keepDims",e,t,n);return[fI(uP("x",e,t,n),p,f)];case"Any":var h=uP("axis",e,t,n),d=uP("keepDims",e,t,n);return[hI(uP("x",e,t,n),h,d)];case"ArgMax":var m=uP("axis",e,t,n);return[dI(uP("x",e,t,n),m)];case"ArgMin":var v=uP("axis",e,t,n);return[mI(uP("x",e,t,n),v)];case"Prod":var g=uP("axis",e,t,n),y=uP("keepDims",e,t,n);return[GT(uP("x",e,t,n),g,y)];case"Cumsum":var b=uP("axis",e,t,n),x=uP("exclusive",e,t,n),w=uP("reverse",e,t,n);return[cS(uP("x",e,t,n),b,x,w)];case"Bincount":var k=uP("x",e,t,n),N=uP("weights",e,t,n),I=uP("size",e,t,n);return[KI(k,N,I)];case"DenseBincount":var S=uP("x",e,t,n),T=uP("weights",e,t,n),C=uP("size",e,t,n),E=uP("binaryOutput",e,t,n);return[pS(S,T,C,E)];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"slice_join":return QN((function(){return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=uP("n",e,t,n),a=uP("axis",e,t,n),i=uP("tensors",e,t,n);return i=i.slice(0,r),[zI(i,a)];case"Gather":var o=uP("x",e,t,n),s=uP("indices",e,t,n);return[DS(o,Pk(s,"int32"),0)];case"GatherV2":var u=uP("axis",e,t,n),l=uP("batchDims",e,t,n),c=uP("x",e,t,n),p=uP("indices",e,t,n);return[DS(c,Pk(p,"int32"),u,l)];case"Reverse":for(var f=uP("dims",e,t,n),h=[],d=0;d<f.length;d++)f[d]&&h.push(d);var m=uP("x",e,t,n);return[cC(m,h)];case"ReverseV2":var v=uP("axis",e,t,n),g=uP("x",e,t,n);return[cC(g,v)];case"Slice":var y=uP("begin",e,t,n),b=uP("size",e,t,n);return[BI(uP("x",e,t,n),y,b)];case"StridedSlice":var x=uP("begin",e,t,n),w=uP("end",e,t,n),k=uP("strides",e,t,n),N=uP("beginMask",e,t,n),I=uP("endMask",e,t,n),S=uP("ellipsisMask",e,t,n),T=uP("newAxisMask",e,t,n),C=uP("shrinkAxisMask",e,t,n),E=uP("x",e,t,n);return[WC(E,x,w,k,N,I,S,T,C)];case"Pack":return QN((function(){var r=uP("axis",e,t,n),a=uP("tensors",e,t,n),i=a[0].shape,o=zC(a[0]).shape,s=a.map((function(e){var t=Qv(e.shape,i);if(!t&&!Qv(zC(e).shape,o))throw new Error("the input tensors shape does not match");return t?e:OI(e,i)}));return[PC(s,r)]}));case"Unpack":var R=uP("axis",e,t,n),A=uP("tensor",e,t,n);return XC(A,R);case"Tile":var F=uP("reps",e,t,n);return[RS(uP("x",e,t,n),F)];case"Split":case"SplitV":var _=uP("axis",e,t,n),D=uP("numOrSizeSplits",e,t,n),O=uP("x",e,t,n);return DC(O,D,_);case"ScatterNd":var M=uP("indices",e,t,n),L=uP("values",e,t,n),z=uP("shape",e,t,n);return[bE(M,L,z)];case"GatherNd":var P=uP("x",e,t,n),B=uP("indices",e,t,n);return[wE(P,B)];case"SparseToDense":var W=uP("sparseIndices",e,t,n),V=uP("outputShape",e,t,n),U=uP("sparseValues",e,t,n),G=uP("defaultValue",e,t,n);return[xE(W,U,V,U.dtype===G.dtype?G:Pk(G,U.dtype))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"spectral":return QN((function(){return function(e,t,n){switch(e.op){case"FFT":return[AC(uP("x",e,t,n))];case"IFFT":return[FC(uP("x",e,t,n))];case"RFFT":return[OC(uP("x",e,t,n))];case"IRFFT":return[_C(uP("x",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"transformation":return QN((function(){return function(e,t,n){switch(e.op){case"Cast":return[Pk(uP("x",e,t,n),uP("dtype",e,t,n))];case"ExpandDims":var r=uP("axis",e,t,n);return[CS(uP("x",e,t,n),r)];case"Squeeze":var a=uP("axis",e,t,n);return[zC(uP("x",e,t,n),a)];case"Reshape":return[OI(uP("x",e,t,n),uP("shape",e,t,n))];case"MirrorPad":return[NT(uP("x",e,t,n),uP("padding",e,t,n),uP("mode",e,t,n))];case"PadV2":case"Pad":return[OT(uP("x",e,t,n),uP("padding",e,t,n),uP("constantValue",e,t,n))];case"SpaceToBatchND":var i=uP("blockShape",e,t,n),o=uP("paddings",e,t,n);return[BT(uP("x",e,t,n),i,o)];case"BatchToSpaceND":var s=uP("blockShape",e,t,n),u=uP("crops",e,t,n);return[UI(uP("x",e,t,n),s,u)];case"DepthToSpace":var l=uP("blockSize",e,t,n),c=uP("dataFormat",e,t,n).toUpperCase();return[fS(uP("x",e,t,n),l,c)];case"BroadcastTo":return[XI(uP("x",e,t,n),uP("shape",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n)}));case"hash_table":return oB(e,t,n,r);case"custom":var a=sP(e.op);if(a&&a.customExecutor)return a.customExecutor(new KP(e,t,n));throw TypeError("Custom op "+e.op+" is not registered.");default:throw TypeError("Unknown op '"+e.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return Rg(a)?a.then((function(e){return[].concat(e)})):[].concat(a)}var uB=function(){function e(e,t,n,r){void 0===e&&(e={}),void 0===t&&(t={}),void 0===n&&(n={}),void 0===r&&(r={}),this.weightMap=e,this.tensorArrayMap=t,this.tensorListMap=n,this.functionMap=r,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}var t=e.prototype;return t.newFrame=function(e,t){return{id:e,frameName:t,iterationId:0}},t.generateCurrentContextIds=function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e},t.contextIdforContexts=function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":e.frameName+"-"+e.iterationId})).join("/"):""},t.enterFrame=function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},t.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},t.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},t.getWeight=function(e){return this.weightMap[e]},t.addTensorArray=function(e){this.tensorArrayMap[e.id]=e},t.getTensorArray=function(e){return this.tensorArrayMap[e]},t.addTensorList=function(e){this.tensorListMap[e.id]=e},t.getTensorList=function(e){return this.tensorListMap[e]},t.dispose=function(e){for(var t in this.tensorArrayMap)this.tensorArrayMap[t].clearAndClose(e);for(var n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)},Rv(e,[{key:"currentContext",set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},get:function(){return this.contexts}},{key:"currentContextId",get:function(){return this._currentContextIds[0]}},{key:"currentContextIds",get:function(){return this._currentContextIds}}]),e}();
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function lB(e,t,n,r){var a=new Set,i=[],o=null,s=null,u=new Set,l=Object.keys(e).map((function(e){return fP(e)[0]})),c=[];null!=r&&(c=r.map((function(e){return fP(e.name)[0]})));for(var p=[].concat(t);p.length>0;){var f=p.pop();(hB(f)||dB(f)||mB(f))&&null==o&&(s=(o=f).children.map((function(e){return e.name})).filter((function(e){return a.has(e)}))),a.add(f.name),null==n[f.name]&&(-1===l.indexOf(f.name)&&-1===c.indexOf(f.name)&&(0!==f.inputs.length?f.inputs.forEach((function(e){u.has(e.name)||(u.add(e.name),p.push(e))})):i.push(f.name)))}return{inputs:e,outputs:t,usedNodes:a,missingInputs:i,dynamicNode:o,syncInputs:s}}var cB=["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"],pB=["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"],fB=["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2"];function hB(e){return cB.indexOf(e.op)>=0}function dB(e){return pB.indexOf(e.op)>=0}function mB(e){return fB.indexOf(e.op)>=0}var vB=function(){function e(t,n){var r=this;this.graph=t,this.parent=n,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this._functions={},this._functionExecutorMap={},this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,null!=t.functions&&Object.keys(t.functions).forEach((function(n){r._functionExecutorMap[n]=new e(t.functions[n],r)}))}var t=e.prototype;return t.getCompilationKey=function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)},t.compile=function(e,t){var n=lB(e,t,this.weightMap,this._initNodes),r=n.missingInputs,a=n.dynamicNode,i=n.syncInputs;if(null!=a)throw new Error("This execution contains the node '"+a.name+"', which has the dynamic op '"+a.op+"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs ["+i+"]");if(r.length>0){var o=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs ["+o+"] from the provided inputs ["+s+"]. Missing the following inputs: ["+r+"]")}return function(e,t,n){var r=n.usedNodes,a=n.inputs,i=[],o=Object.keys(a).map((function(e){return fP(e)[0]})).map((function(t){return e.nodes[t]})),s=e.initNodes;o.forEach((function(e){r.has(e.name)&&i.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&i.push(e)})),null!=s&&s.forEach((function(e){r.has(e.name)&&i.push(e)}));for(var u=new Set,l=[];i.length>0;){var c=i.pop();u.add(c.name),t[c.name]||l.push(c),c.children.forEach((function(e){!u.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return u.has(e.name)}))&&i.push(e)}))}return l}(this.graph,this.weightMap,n)},t.execute=function(e,t){var n=this;e=this.mapInputs(e);var r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),t=this.mapOutputs(t),this.checkOutputs(t);var a=r.map((function(e){return n.graph.nodes[fP(e)[0]]})),i=t.map((function(e){return fP(e)[0]})),o=i.map((function(e){return n.graph.nodes[e]}));0===o.length&&(o=this._outputs);var s=this.getCompilationKey(a,o),u=this.compiledMap.get(s);null==u&&(u=this.compile(e,o),this.compiledMap.set(s,u));var l={},c={};return QN((function(){var r=new uB(n.weightMap,l,c,n.functionExecutorMap),a=Object.assign({},n.weightMap);Object.keys(e).forEach((function(t){var n=fP(t),r=n[0],i=[];i[n[1]]=e[t],a[r]=i}));for(var o=n.getFrozenTensorIds(a),s={},p=0;p<u.length;p++){var f=u[p];if(!a[f.name]){var h=sB(f,a,r,n._resourceManager);if(Rg(h))throw new Error("The execution of the op '"+f.op+"' returned a promise. Please use model.executeAsync() instead.");a[f.name]=h,n.checkTensorForDisposal(f.name,f,a,r,o,i,s)}}return null==n.parent&&r.dispose(o),t.map((function(e){return lP(e,a,r)}))}))},t.getFrozenTensorIds=function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)},t.checkTensorForDisposal=function(e,t,n,r,a,i,o){"control"!==t.category&&-1===i.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(o[e.id]=(o[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var t=function(e,t,n){return t[pP(e,n.currentContextId)]}(e.name,n,r);null!=t&&t.forEach((function(e){if(e&&!a.has(e.id)){var t=o[e.id];1===t?(e.dispose(),delete o[e.id]):null!=t&&o[e.id]--}}))}})))},t.executeAsync=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._executeAsync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t._executeAsync=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n,r,a,i){var o,s,u,l,c,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!1),void 0===a&&(a={}),void 0===i&&(i={}),r||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),n=this.mapOutputs(n),this.checkOutputs(n)),o=new uB(this.weightMap,a,i,this.functionExecutorMap),e.next=7,this.executeWithControlFlow(t,o,n,r);case 7:return s=e.sent,u=n.map((function(e){return lP(e,s,o)})),l=u.map((function(e){return e.id})),c=Object.keys(t).map((function(e){return t[e].id})),p=new Set([].concat(l,c,this.weightIds)),Object.keys(s).forEach((function(e){s[e].forEach((function(e){!e||e.isDisposed||p.has(e.id)||e.dispose()}))})),null==this.parent&&o.dispose(p),e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,i){return e.apply(this,arguments)}}(),t.executeFunctionAsync=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n,r){var a,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.reduce((function(e,t,n){return e[i.inputs[n].name]=t,e}),{}),e.abrupt("return",this._executeAsync(a,this.outputNodes,!0,n,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}(),t.executeWithControlFlow=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n,r,a){var i,o,s,u,l,c,p,f,h,d,m,v,g,y,b,x,w,k=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Object.keys(t),o=i.map((function(e){return k.graph.nodes[fP(e)[0]]})),s=r.map((function(e){return fP(e)[0]})),0===(u=s.map((function(e){return k.graph.nodes[e]}))).length&&(u=this._outputs),l=lB(t,u,this.weightMap,this._initNodes),c=l.usedNodes,p=l.missingInputs,f=l.dynamicNode,h=l.syncInputs,d=[].concat(o,this.graph.weights,this._initNodes||[]).map((function(e){return{node:e,contexts:n.currentContext}})),m=Object.assign({},this.weightMap),Object.keys(t).forEach((function(e){var n=fP(e),r=n[0],a=[];a[n[1]]=t[e],m[r]=a})),v={},g=this.getFrozenTensorIds(m),y={};case 12:if(!(d.length>0)){e.next=18;break}return b=this.processStack(o,d,n,m,y,g,s,v,c),e.next=16,Promise.all(b);case 16:e.next=12;break;case 18:if(null!=f||a||console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),x=u.filter((function(e){return!hB(e)&&!lP(e.name,m,n)})).map((function(e){return e.name})),!(x.length>0)){e.next=24;break}throw w="",null!=f&&(w="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs ["+h+"]"),new Error("Cannot compute the outputs ["+x+"] from the provided inputs ["+i+"]. Consider providing the following inputs: ["+p+"]. "+w);case 24:return e.abrupt("return",m);case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),t.processStack=function(e,t,n,r,a,i,o,s,u){for(var l=this,c=[],p=function(){var e=t.pop();n.currentContext=e.contexts;var p="";if("Enter"===e.node.op&&uP("isConstant",e.node,r,n)){var f=cP(e.node.name,n);p=f[0]}if(null==r[e.node.name]){var h=sB(e.node,r,n,l._resourceManager);if(!p){var d=cP(e.node.name,n);p=d[0]}var m=n.currentContext;Rg(h)?c.push(h.then((function(c){return r[p]=c,n.currentContext=m,l.checkTensorForDisposal(p,e.node,r,n,i,o,s),l.processChildNodes(e.node,t,n,r,a,u),c}))):(r[p]=h,l.checkTensorForDisposal(p,e.node,r,n,i,o,s),l.processChildNodes(e.node,t,n,r,a,u))}else l.processChildNodes(e.node,t,n,r,a,u)};t.length>0;)p();return c},t.processChildNodes=function(e,t,n,r,a,i){e.children.forEach((function(e){var o=cP(e.name,n)[0];!a[o]&&i.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!lP(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!lP(e,r,n)}))&&(a[o]=!0,t.push({contexts:n.currentContext,node:e})))}))},t.dispose=function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))},t.checkInputShapeAndType=function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],a=fP(n)[0],i=t.graph.nodes[a];if(i.attrParams.shape&&i.attrParams.shape.value){var o=i.attrParams.shape.value,s=o.length===r.shape.length&&r.shape.every((function(e,t){return-1===o[t]||o[t]===e}));Kv(s,(function(){return"The shape of dict['"+i.name+"'] provided in model.execute(dict) must be ["+o+"], but was ["+r.shape+"]"}))}i.attrParams.dtype&&i.attrParams.dtype.value&&Kv(r.dtype===i.attrParams.dtype.value,(function(){return"The dtype of dict['"+i.name+"'] provided in model.execute(dict) must be "+i.attrParams.dtype.value+", but was "+r.dtype}))}))},t.mapInputs=function(e){var t={};for(var n in e){if(null!=this._signature&&null!=this._signature.inputs&&null!=this._signature.inputs[n])t[this._signature.inputs[n].name]=e[n];else t[n]=e[n]}return t},t.checkInputs=function(e){var t=this,n=Object.keys(e).filter((function(e){var n=fP(e)[0];return null==t.graph.nodes[n]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+n+"] that are not part of graph")},t.mapOutputs=function(e){var t=this;return e.map((function(e){return null!=t._signature&&null!=t._signature.outputs&&null!=t._signature.outputs[e]?t._signature.outputs[e].name:e}),{})},t.checkOutputs=function(e){var t=this;e.forEach((function(e){var n=fP(e)[0];if(!t.graph.nodes[n])throw new Error("The output '"+e+"' is not found in the graph")}))},Rv(e,[{key:"weightIds",get:function(){return this.parent?this.parent.weightIds:this._weightIds}},{key:"functionExecutorMap",get:function(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}},{key:"weightMap",get:function(){return this.parent?this.parent.weightMap:this._weightMap},set:function(e){var t,n=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this._weightIds=(t=[]).concat.apply(t,n),this._weightMap=e}},{key:"resourceManager",set:function(e){this._resourceManager=e}},{key:"inputs",get:function(){return this._inputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"outputs",get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))}},{key:"inputNodes",get:function(){return this._inputs.map((function(e){return e.signatureKey||e.name}))}},{key:"outputNodes",get:function(){return this._outputs.map((function(e){var t=e.signatureKey||e.name;return e.defaultOutput?t+":"+e.defaultOutput:t}))}},{key:"functions",get:function(){var e=this;return Object.keys(this._functions).reduce((function(t,n){return t[n]=e._functions[n].signature,t}),{})}}]),e}(),gB=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t={}),this.hashTableNameToHandle=e,this.hashTableMap=t}var t=e.prototype;return t.addHashTable=function(e,t){this.hashTableNameToHandle[e]=t.handle,this.hashTableMap[t.id]=t},t.getHashTableHandleByName=function(e){return this.hashTableNameToHandle[e]},t.getHashTableById=function(e){return this.hashTableMap[e]},t.dispose=function(){for(var e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(var t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]},e}(),yB="?tfjs-format=file",bB="model.json",xB=function(){function e(e,t){void 0===t&&(t={}),this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={}),this.resourceManager=new gB}var t=e.prototype;return t.findIOHandler=function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=tN(e,this.loadOptions);else{var t=tk(e,this.loadOptions);if(0===t.length)t.push(tN(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one ("+t.length+") load handlers for URL '"+[e]+"'");this.handler=t[0]}},t.load=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.findIOHandler(),null!=this.handler.load){e.next=3;break}throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");case 3:return e.next=5,this.handler.load();case 5:return t=e.sent,e.abrupt("return",this.loadSync(t));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.loadSync=function(e){this.artifacts=e;var t,n=this.artifacts.modelTopology;t=null!=this.artifacts.userDefinedMetadata&&null!=this.artifacts.userDefinedMetadata.signature?this.artifacts.userDefinedMetadata.signature:this.artifacts.signature,this.signature=t,this.version=n.versions.producer+"."+n.versions.minConsumer;var r=Gw(this.artifacts.weightData,this.artifacts.weightSpecs);if(this.executor=new vB(_P.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),this.executor.resourceManager=this.resourceManager,null!=e.modelInitializer&&null!=e.modelInitializer.node){var a=_P.Instance.transformGraph(e.modelInitializer);this.initializer=new vB(a),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializer.executeAsync({},[])}return!0},t.save=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=9;break}if(0!==(r=ek(t)).length){e.next=6;break}throw new Error("Cannot find any save handlers for URL '"+t+"'");case 6:if(!(r.length>1)){e.next=8;break}throw new Error("Found more than one ("+r.length+") save handlers for URL '"+t+"'");case 8:t=r[0];case 9:if(null!=t.save){e.next=11;break}throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");case 11:return e.abrupt("return",t.save(this.artifacts));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.predict=function(e,t){return this.execute(e,this.outputNodes)},t.normalizeInputs=function(e){if(!(e instanceof aw||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has "+this.inputNodes.length+" placeholders, while there are "+e.length+" input tensors.");return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})},t.normalizeOutputs=function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]},t.execute=function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]},t.executeAsync=function(){var e=Cv(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.normalizeInputs(t),n=this.normalizeOutputs(n),e.next=4,this.executor.executeAsync(t,n);case 4:return r=e.sent,e.abrupt("return",r.length>1?r:r[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})},t.dispose=function(){this.executor.dispose(),this.initializer&&this.initializer.dispose(),this.resourceManager.dispose()},Rv(e,[{key:"modelVersion",get:function(){return this.version}},{key:"inputNodes",get:function(){return this.executor.inputNodes}},{key:"outputNodes",get:function(){return this.executor.outputNodes}},{key:"inputs",get:function(){return this.executor.inputs}},{key:"outputs",get:function(){return this.executor.outputs}},{key:"weights",get:function(){return this.executor.weightMap}},{key:"metadata",get:function(){return this.artifacts.userDefinedMetadata}},{key:"modelSignature",get:function(){return this.signature}}]),e}();function wB(){return wB=Cv(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),null!=t){e.next=3;break}throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");case 3:return null==n&&(n={}),n.fromTFHub&&null==t.load&&(t.endsWith("/")||(t+="/"),t=""+t+bB+yB),r=new xB(t,n),e.next=8,r.load();case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)}))),wB.apply(this,arguments)}
/** @license See the LICENSE file. */var kB="2.8.3";
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function NB(e,t,n,r){if(void 0===n&&(n=new Map),void 0===r&&(r=new Set),null==e)return null;if(r.has(e))throw new Error("Circular references are not supported.");if(n.has(e))return n.get(e);var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep map function may not return both a value and recurse=true.");if(a.recurse){if(RB(e)){var i=Array.isArray(e)?[]:{};for(var o in r.add(e),e){var s=NB(e[o],t,n,r);i[o]=s}return r.delete(e),i}throw new Error("Can't recurse into non-iterable type: "+e)}return n.set(e,a.value),a.value}function IB(e,t){return void 0===t&&(t=TB),SB(e,t)}function SB(e,t,n){void 0===n&&(n=new Set);var r=e[0];if(n.has(r))throw new Error("Circular references are not supported.");var a=t(e);if(a.recurse&&null!==a.value)throw new Error("A deep zip function may not return both a value and recurse=true.");if(a.recurse){if(RB(r)){var i=Array.isArray(r)?[]:{};n.add(r);var o=function(r){var a=SB(e.map((function(e){return e[r]})),t,n);i[r]=a};for(var s in r)o(s);return n.delete(r),i}throw new Error("Can't recurse into non-iterable type: "+r)}return a.value}function TB(e){return null===e?null:RB(e[0])?{value:null,recurse:!0}:{value:e,recurse:!1}}function CB(e,t){return EB.apply(this,arguments)}function EB(){return EB=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new Map,NB(t,n,r),a=0,i=Array.from(r.keys());case 3:if(!(a<i.length)){e.next=14;break}if(o=i[a],!Rg(s=r.get(o))){e.next=11;break}return e.next=9,s;case 9:u=e.sent,r.set(o,u);case 11:a++,e.next=3;break;case 14:return l=NB(t,n,r),e.abrupt("return",l);case 16:case"end":return e.stop()}}),e)}))),EB.apply(this,arguments)}function RB(e){return null!=e&&!ArrayBuffer.isView(e)&&(Array.isArray(e)||"object"==typeof e&&!(e instanceof aw))}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 * =============================================================================
	 */
function AB(e){return function(e,t){return NB(e,t)}(e,FB)}function FB(e){return e instanceof aw?{value:e.clone(),recurse:!1}:RB(e)?{value:null,recurse:!0}:{value:e,recurse:!1}}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 * =============================================================================
	 */var _B=function(){function e(e){if(this.capacity=e,this.begin=0,this.end=0,null==e)throw new RangeError("Can't create a ring buffer of unknown capacity.");if(e<1)throw new RangeError("Can't create ring buffer of capacity < 1.");this.data=new Array(e),this.doubledCapacity=2*e}var t=e.prototype;return t.wrap=function(e){for(;e<0;)e+=this.doubledCapacity;return e%this.doubledCapacity},t.get=function(e){if(e<0)throw new RangeError("Can't get item at a negative index.");return this.data[e%this.capacity]},t.set=function(e,t){if(e<0)throw new RangeError("Can't set item at a negative index.");this.data[e%this.capacity]=t},t.length=function(){var e=this.end-this.begin;return e<0&&(e=this.doubledCapacity+e),e},t.isFull=function(){return this.length()===this.capacity},t.isEmpty=function(){return 0===this.length()},t.push=function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.set(this.end,e),this.end=this.wrap(this.end+1)},t.pushAll=function(e){for(var t,n=Bv(e);!(t=n()).done;){var r=t.value;this.push(r)}},t.pop=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");this.end=this.wrap(this.end-1);var e=this.get(this.end);return this.set(this.end,void 0),e},t.unshift=function(e){if(this.isFull())throw new RangeError("Ring buffer is full.");this.begin=this.wrap(this.begin-1),this.set(this.begin,e)},t.shift=function(){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var e=this.get(this.begin);return this.set(this.begin,void 0),this.begin=this.wrap(this.begin+1),e},t.shuffleExcise=function(e){if(this.isEmpty())throw new RangeError("Ring buffer is empty.");var t=this.wrap(this.begin+e),n=this.get(t);return this.set(t,this.pop()),n},e}(),DB=function(e){function t(){return e.call(this,t.INITIAL_CAPACITY)||this}Av(t,e);var n=t.prototype;return n.isFull=function(){return!1},n.push=function(t){e.prototype.isFull.call(this)&&this.expand(),e.prototype.push.call(this,t)},n.unshift=function(t){e.prototype.isFull.call(this)&&this.expand(),e.prototype.unshift.call(this,t)},n.expand=function(){for(var e=2*this.capacity,t=new Array(e),n=this.length(),r=0;r<n;r++)t[r]=this.get(this.wrap(this.begin+r));this.data=t,this.capacity=e,this.doubledCapacity=2*this.capacity,this.begin=0,this.end=n},t}(_B);function OB(e){return new WB(e)}function MB(e){return new VB(e)}function LB(e,t){return new QB(e,t)}function zB(e,t){return void 0===t&&(t=PB.FAIL),new $B(e,t)}DB.INITIAL_CAPACITY=32;var PB,BB=function(){function e(){}var t=e.prototype;return t.toArray=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,this.next();case 3:n=e.sent;case 4:if(n.done){e.next=11;break}return t.push(n.value),e.next=8,this.next();case 8:n=e.sent,e.next=4;break;case 11:return e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.toArrayForTest=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.prefetch(100),n=[],e.next=4,t.next();case 4:r=e.sent;case 5:if(r.done){e.next=12;break}return n.push(r.value),e.next=9,t.next();case 9:r=e.sent,e.next=5;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.resolveFully=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:t=e.sent;case 3:if(t.done){e.next=9;break}return e.next=6,this.next();case 6:t=e.sent,e.next=3;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.resolveWhile=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:n=e.sent,r=t(n.value);case 4:if(n.done||!r){e.next=11;break}return e.next=7,this.next();case 7:n=e.sent,r=t(n.value),e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.handleErrors=function(e){return new XB(this,e)},t.filter=function(e){return new qB(this,e)},t.map=function(e){return new KB(this,e)},t.mapAsync=function(e){return new YB(this,e)},t.serialMapAsync=function(e){return new YB(this,e).serial()},t.flatmap=function(e){return new ZB(this,e)},t.forEachAsync=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.map(t).resolveFully());case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.serialForEach=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.serialMapAsync(t).resolveWhile((function(e){return!0===e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.rowMajorBatch=function(e,t){return void 0===t&&(t=!0),new HB(this,e,t)},t.columnMajorBatch=function(e,t,n){return void 0===t&&(t=!0),void 0===n&&(n=TB),this.rowMajorBatch(e,t).map((function(e){return IB(e,n)}))},t.concatenate=function(e,t){return new QB(OB([this,e]),t)},t.take=function(e){return e<0||null==e?this:new jB(this,e)},t.skip=function(e){return e<0||null==e?this:new GB(this,e)},t.prefetch=function(e){return new eW(this,e)},t.shuffle=function(e,t){return new tW(this,e,t)},t.serial=function(){return new UB(this)},e}(),WB=function(e){function t(t){var n;return(n=e.call(this)||this).items=t,n.trav=0,n}Av(t,e);var n=t.prototype;return n.summary=function(){return"Array of "+this.items.length+" items"},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.trav>=this.items.length)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=this.items[this.trav],this.trav++,e.abrupt("return",{value:AB(t),done:!1});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(BB),VB=function(e){function t(t){var n;return(n=e.call(this)||this).nextFn=t,n}Av(t,e);var n=t.prototype;return n.summary=function(){return"Function call"},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",this.nextFn());case 4:throw e.prev=4,e.t0=e.catch(0),e.t0.message="Error thrown while iterating through a dataset: "+e.t0.message,e.t0;case 8:case"end":return e.stop()}}),e,this,[[0,4]])})));return function(){return e.apply(this,arguments)}}(),t}(BB),UB=function(e){function t(t){var n;return(n=e.call(this)||this).upstream=t,n.lastRead=Promise.resolve({value:null,done:!1}),n}Av(t,e);var n=t.prototype;return n.summary=function(){return this.upstream.summary()+" -> Serial"},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.serialNext=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.upstream.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(BB),GB=function(e){function t(t,n){var r;return(r=e.call(this)||this).upstream=t,r.maxCount=n,r.count=0,r.lastRead=Promise.resolve({value:null,done:!1}),r}Av(t,e);var n=t.prototype;return n.summary=function(){return this.upstream.summary()+" -> Skip"},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.serialNext=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++<this.maxCount)){e.next=9;break}return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done){e.next=6;break}return e.abrupt("return",t);case 6:$N(t.value),e.next=0;break;case 9:return e.abrupt("return",this.upstream.next());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(BB),jB=function(e){function t(t,n){var r;return(r=e.call(this)||this).upstream=t,r.maxCount=n,r.count=0,r}Av(t,e);var n=t.prototype;return n.summary=function(){return this.upstream.summary()+" -> Take"},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.count++>=this.maxCount)){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.abrupt("return",this.upstream.next());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(BB),HB=function(e){function t(t,n,r){var a;return void 0===r&&(r=!0),(a=e.call(this)||this).upstream=t,a.batchSize=n,a.enableSmallLastBatch=r,a.lastRead=Promise.resolve({value:null,done:!1}),a}Av(t,e);var n=t.prototype;return n.summary=function(){return this.upstream.summary()+" -> RowMajorBatch"},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.serialNext=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[];case 1:if(!(t.length<this.batchSize)){e.next=12;break}return e.next=4,this.upstream.next();case 4:if(!(n=e.sent).done){e.next=9;break}if(!(this.enableSmallLastBatch&&t.length>0)){e.next=8;break}return e.abrupt("return",{value:t,done:!1});case 8:return e.abrupt("return",{value:null,done:!0});case 9:t.push(n.value),e.next=1;break;case 12:return e.abrupt("return",{value:t,done:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(BB),qB=function(e){function t(t,n){var r;return(r=e.call(this)||this).upstream=t,r.predicate=n,r.lastRead=Promise.resolve({value:null,done:!1}),r}Av(t,e);var n=t.prototype;return n.summary=function(){return this.upstream.summary()+" -> Filter"},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.serialNext=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,this.upstream.next();case 3:if(!(t=e.sent).done&&!this.predicate(t.value)){e.next=6;break}return e.abrupt("return",t);case 6:$N(t.value),e.next=0;break;case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(BB),KB=function(e){function t(t,n){var r;return(r=e.call(this)||this).upstream=t,r.transform=n,r}Av(t,e);var n=t.prototype;return n.summary=function(){return this.upstream.summary()+" -> Map"},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:for(n=gw(t.value),r=this.transform(t.value),a=gw(r),i=Bv(n);!(o=i()).done;)vw(s=o.value,a)||s.dispose();return e.abrupt("return",{value:r,done:!1});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(BB),XB=function(e){function t(t,n){var r;return(r=e.call(this)||this).upstream=t,r.handler=n,r.count=0,r.lastRead=Promise.resolve({value:null,done:!1}),r}Av(t,e);var n=t.prototype;return n.summary=function(){return this.upstream.summary()+" -> handleErrors"},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.serialNext=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=1,e.next=4,this.upstream.next();case 4:return e.abrupt("return",e.sent);case 7:if(e.prev=7,e.t0=e.catch(1),this.handler(e.t0)){e.next=11;break}return e.abrupt("return",{value:null,done:!0});case 11:e.next=0;break;case 13:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),t}(BB),YB=function(e){function t(t,n){var r;return(r=e.call(this)||this).upstream=t,r.transform=n,r}Av(t,e);var n=t.prototype;return n.summary=function(){return this.upstream.summary()+" -> AsyncMap"},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:return n=gw(t.value),e.next=8,this.transform(t.value);case 8:for(r=e.sent,a=gw(r),i=Bv(n);!(o=i()).done;)vw(s=o.value,a)||s.dispose();return e.abrupt("return",{value:r,done:!1});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(BB),JB=function(e){function t(){var t;return(t=e.call(this)||this).outputQueue=new DB,t.lastRead=Promise.resolve({value:null,done:!1}),t}Av(t,e);var n=t.prototype;return n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.serialNext=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.outputQueue.length()){e.next=7;break}return e.next=3,this.pump();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",{value:null,done:!0});case 5:e.next=0;break;case 7:return e.abrupt("return",{value:this.outputQueue.shift(),done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(BB),ZB=function(e){function t(t,n){var r;return(r=e.call(this)||this).upstream=t,r.transform=n,r}Av(t,e);var n=t.prototype;return n.summary=function(){return this.upstream.summary()+" -> Flatmap"},n.pump=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=5;break}return e.abrupt("return",!1);case 5:for(n=gw(t.value),r=this.transform(t.value),a=gw(r),this.outputQueue.pushAll(r),i=Bv(n);!(o=i()).done;)vw(s=o.value,a)||s.dispose();return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(JB),QB=function(e){function t(t,n){var r;return(r=e.call(this)||this).baseErrorHandler=n,r.lastRead=null,r.iterator=null,r.moreIterators=t,r}Av(t,e);var n=t.prototype;return n.summary=function(){return"TODO: fill in upstream of chained summaries -> Chained"},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.readFromChain(this.lastRead),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.readFromChain=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(null!=this.iterator){e.next=10;break}return e.next=5,this.moreIterators.next();case 5:if(!(n=e.sent).done){e.next=8;break}return e.abrupt("return",{value:null,done:!0});case 8:this.iterator=n.value,null!=this.baseErrorHandler&&(this.iterator=this.iterator.handleErrors(this.baseErrorHandler));case 10:return e.next=12,this.iterator.next();case 12:if(!(r=e.sent).done){e.next=16;break}return this.iterator=null,e.abrupt("return",this.readFromChain(t));case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(BB);!function(e){e[e.FAIL=0]="FAIL",e[e.SHORTEST=1]="SHORTEST",e[e.LONGEST=2]="LONGEST"}(PB||(PB={}));var $B=function(e){function t(t,n){var r;return void 0===n&&(n=PB.FAIL),(r=e.call(this)||this).iterators=t,r.mismatchMode=n,r.count=0,r.currentPromise=null,r}Av(t,e);var n=t.prototype;return n.summary=function(){return"{TODO: fill in upstream of zip summaries} -> Zip"},n.nextState=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){return e instanceof BB?{value:e.next().then((function(e){return n++,e.done&&r++,e.value})),recurse:!1}:{value:null,recurse:!0}},e.next=3,t;case 3:return n=0,r=0,e.next=7,CB(this.iterators,a);case 7:if(i=e.sent,n!==r){e.next=10;break}return e.abrupt("return",{value:null,done:!0});case 10:if(!(r>0)){e.next=16;break}e.t0=this.mismatchMode,e.next=e.t0===PB.FAIL?14:e.t0===PB.SHORTEST?15:(e.t0,PB.LONGEST,16);break;case 14:throw new Error("Zipped streams should have the same length. Mismatched at element "+this.count+".");case 15:return e.abrupt("return",{value:null,done:!0});case 16:return this.count++,e.abrupt("return",{value:i,done:!1});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentPromise=this.nextState(this.currentPromise),e.abrupt("return",this.currentPromise);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(BB),eW=function(e){function t(t,n){var r;return(r=e.call(this)||this).upstream=t,r.bufferSize=n,r.buffer=new _B(n),r}Av(t,e);var n=t.prototype;return n.summary=function(){return this.upstream.summary()+" -> Prefetch"},n.refill=function(){for(;!this.buffer.isFull();){var e=this.upstream.next();this.buffer.push(e)}},n.next=function(){return this.refill(),this.buffer.shift()},t}(BB),tW=function(e){function t(t,n,r){var a;return(a=e.call(this,t,n)||this).upstream=t,a.windowSize=n,a.upstreamExhausted=!1,a.random=QT(r||Wx().toString()),a.lastRead=Promise.resolve({value:null,done:!1}),a}Av(t,e);var n=t.prototype;return n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.lastRead=this.lastRead.then((function(){return t.serialNext()})),e.abrupt("return",this.lastRead);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.randomInt=function(e){return Math.floor(this.random()*e)},n.chooseIndex=function(){return this.randomInt(this.buffer.length())},n.serialNext=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.upstreamExhausted||this.refill();case 1:if(this.buffer.isEmpty()){e.next=14;break}return t=this.chooseIndex(),e.next=5,this.buffer.shuffleExcise(t);case 5:if(!(n=e.sent).done){e.next=10;break}this.upstreamExhausted=!0,e.next=12;break;case 10:return this.refill(),e.abrupt("return",n);case 12:e.next=1;break;case 14:return e.abrupt("return",{value:null,done:!0});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(eW),nW=function(){function e(){this.size=null}var t=e.prototype;return t.batch=function(e,t){void 0===t&&(t=!0);var n,r=this;return Kv(e>0,(function(){return"batchSize needs to be positive, but it is\n      "+e})),n=this.size===1/0||null==this.size?this.size:t?Math.ceil(this.size/e):Math.floor(this.size/e),rW(Cv(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.iterator();case 2:return n.abrupt("return",n.sent.columnMajorBatch(e,t,aW));case 3:case"end":return n.stop()}}),n)}))),n)},t.concatenate=function(e){var t,n=this;return t=this.size===1/0||e.size===1/0?1/0:null!=this.size&&null!=e.size?this.size+e.size:null,rW(Cv(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.t0=t.sent,t.next=5,e.iterator();case 5:return t.t1=t.sent,t.abrupt("return",t.t0.concatenate.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))),t)},t.filter=function(e){var t,n=this;return t=this.size===1/0?1/0:null,rW(Cv(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.filter((function(t){return QN((function(){return e(t)}))})));case 3:case"end":return t.stop()}}),t)}))),t)},t.forEachAsync=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.iterator();case 2:return e.abrupt("return",e.sent.forEachAsync(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.map=function(e){var t=this;return rW(Cv(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.map((function(t){return QN((function(){return e(t)}))})));case 3:case"end":return n.stop()}}),n)}))),this.size)},t.mapAsync=function(e){var t=this;return rW(Cv(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.mapAsync(e));case 3:case"end":return n.stop()}}),n)}))),this.size)},t.prefetch=function(e){if(null==e)throw new RangeError("`Dataset.prefetch()` requires bufferSize to be specified.");var t=this;return rW(Cv(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.iterator();case 2:return n.abrupt("return",n.sent.prefetch(e));case 3:case"end":return n.stop()}}),n)}))),this.size)},t.repeat=function(e){var t,n=this;return t=null!=this.size&&e>0?this.size*e:0===e?0:null!=this.size&&(void 0===e||e<0)?1/0:null,rW(Cv(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=MB(Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.iterator();case 2:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 4:case"end":return e.stop()}}),e)})))),t.abrupt("return",LB(r.take(e)));case 2:case"end":return t.stop()}}),t)}))),t)},t.skip=function(e){var t,n=this;return t=null!=this.size&&e>=0&&this.size>=e?this.size-e:null!=this.size&&(this.size<e||void 0===e||e<0)?0:null,rW(Cv(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.skip(e));case 3:case"end":return t.stop()}}),t)}))),t)},t.shuffle=function(e,t,n){if(void 0===n&&(n=!0),null==e||e<0)throw null==this.size?new RangeError("`Dataset.shuffle()` requires bufferSize to be specified."):new RangeError("`Dataset.shuffle()` requires bufferSize to be specified.  If your data fits in main memory (for regular JS objects), and/or GPU memory (for `tf.Tensor`s), consider setting bufferSize to the dataset size ("+this.size+" elements)");var r=this,a=QT(t||Wx().toString());return rW(Cv(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.int32(),n&&(i+=a.int32()),t.next=4,r.iterator();case 4:return t.abrupt("return",t.sent.shuffle(e,i.toString()));case 5:case"end":return t.stop()}}),t)}))),this.size)},t.take=function(e){var t,n=this;return t=null!=this.size&&this.size>e?e:null!=this.size&&this.size<=e?this.size:null,rW(Cv(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.iterator();case 2:return t.abrupt("return",t.sent.take(e));case 3:case"end":return t.stop()}}),t)}))),t)},t.toArray=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArray());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.toArrayForTest=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.size!==1/0){e.next=2;break}throw new Error("Can not convert infinite data stream to array.");case 2:return e.next=4,this.iterator();case 4:return e.abrupt("return",e.sent.toArrayForTest());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),e}();function rW(e,t){return void 0===t&&(t=null),new(function(n){function r(){var e;return(e=n.apply(this,arguments)||this).size=t,e}return Av(r,n),r.prototype.iterator=function(){var t=Cv(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e());case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r}(nW))}function aW(e){return null===e?null:function(e){return null==e||null===(t=e)||"object"!=typeof t&&"function"!=typeof t||Array.isArray(e)||"object"==typeof e&&e instanceof aw||pg(e);var t}(e[0])?{value:function(e){if(0===e.length)throw new Error("Can't make a batch of zero elements.");return e[0]instanceof aw?PC(e):Pw(e)}(e),recurse:!1}:{value:null,recurse:!0}}nW.MAX_BUFFER_SIZE=1e4;var iW=function(e){function t(t){var n;return(n=e.call(this)||this).input=t,n}return Av(t,e),t.prototype.iterator=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.input.iterator();case 2:return t=e.sent,n=t.decodeUTF8(),r=n.split("\n").map((function(e){return e.endsWith("\r")&&(e=e.slice(0,-1)),e})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(nW),oW='"',sW=Symbol("out"),uW=Symbol("field"),lW=Symbol("quote"),cW=Symbol("quoteafterquote"),pW=Symbol("quoteinquote"),fW=function(e){function t(t,n){var r;return(r=e.call(this)||this).input=t,r.hasHeader=!0,r.fullColumnNames=null,r.columnNamesValidated=!1,r.columnConfigs=null,r.configuredColumnsOnly=!1,r.delimiter=",",r.delimWhitespace=!1,r.base=new iW(t),n||(n={}),r.hasHeader=!1!==n.hasHeader,r.fullColumnNames=n.columnNames,r.columnConfigs=n.columnConfigs,r.configuredColumnsOnly=n.configuredColumnsOnly,n.delimWhitespace?(Kv(null==n.delimiter,(function(){return"Delimiter should not be provided when delimWhitespace is true."})),r.delimWhitespace=!0,r.delimiter=" "):r.delimiter=n.delimiter?n.delimiter:",",r}Av(t,e);var n=t.prototype;return n.columnNames=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.columnNamesValidated){e.next=3;break}return e.next=3,this.setColumnNames();case 3:return e.abrupt("return",this.configuredColumnsOnly?Object.keys(this.columnConfigs):this.fullColumnNames);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.setColumnNames=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.maybeReadHeaderLine();case 2:if(t=e.sent,this.fullColumnNames||t){e.next=7;break}throw new Error("Column names must be provided if there is no header line.");case 7:this.fullColumnNames&&t&&Kv(t.length===this.fullColumnNames.length,(function(){return"The length of provided columnNames ("+s.fullColumnNames.length.toString()+") does not match the length of the header line read from file ("+t.length.toString()+")."}));case 8:if(this.fullColumnNames||(this.fullColumnNames=t),n=this.fullColumnNames.reduce((function(e,t){return e[t]=e[t]+1||1,e}),{}),Kv(0===(r=Object.keys(n).filter((function(e){return n[e]>1}))).length,(function(){return"Duplicate column names found: "+r.toString()})),!this.columnConfigs){e.next=22;break}a=0,i=Object.keys(this.columnConfigs);case 14:if(!(a<i.length)){e.next=22;break}if(o=i[a],-1!==this.fullColumnNames.indexOf(o)){e.next=19;break}throw new Error('The key "'+o+'" provided in columnConfigs does not match any of the column names ('+this.fullColumnNames.toString()+").");case 19:a++,e.next=14;break;case 22:this.columnNamesValidated=!0;case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.maybeReadHeaderLine=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasHeader){e.next=14;break}return e.next=3,this.base.iterator();case 3:return t=e.sent,e.next=6,t.next();case 6:if(!(n=e.sent).done){e.next=9;break}throw new Error("No data was found for CSV parsing.");case 9:return r=n.value,a=this.parseRow(r,!1),e.abrupt("return",a);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.iterator=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.columnNamesValidated){e.next=3;break}return e.next=3,this.setColumnNames();case 3:return e.next=5,this.base.iterator();case 5:return t=e.sent,this.hasHeader&&(t=t.skip(1)),e.abrupt("return",t.map((function(e){return n.makeDataElement(e)})));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.makeDataElement=function(e){for(var t=this.parseRow(e),n={},r={},a=0;a<this.fullColumnNames.length;a++){var i=this.fullColumnNames[a],o=this.columnConfigs?this.columnConfigs[i]:null;if(!this.configuredColumnsOnly||o){var s=t[a],u=null;if(""===s)if(o&&void 0!==o.default)u=o.default;else{if(o&&(o.required||o.isLabel))throw new Error("Required column "+i+" is empty in this line: "+e);u=void 0}else{var l=Number(s);if(isNaN(l))u=o&&"bool"===o.dtype?this.getBoolean(s):s;else if(o&&o.dtype)switch(o.dtype){case"float32":default:u=l;break;case"int32":u=Math.floor(l);break;case"bool":u=this.getBoolean(s)}else u=l}o&&o.isLabel?r[i]=u:n[i]=u}}return 0===Object.keys(r).length?n:{xs:n,ys:r}},n.getBoolean=function(e){return"1"===e||"true"===e.toLowerCase()?1:0},n.parseRow=function(e,t){void 0===t&&(t=!0);for(var n=[],r=0,a=e.length,i=sW,o=0;o<a;o++)switch(i){case sW:switch(e.charAt(o)){case oW:r=o+1,i=lW;break;case this.delimiter:if(r=o+1," "===this.delimiter&&this.delimWhitespace)break;n.push(""),i=sW;break;default:i=uW,r=o}break;case uW:if(e.charAt(o)===this.delimiter)n.push(e.substring(r,o)),i=sW,r=o+1;break;case lW:if(e.charAt(o)===oW)i=cW;break;case cW:switch(e.charAt(o)){case this.delimiter:n.push(e.substring(r,o-1)),i=sW,r=o+1;break;case oW:i=lW;break;default:i=pW}break;case pW:if(e.charAt(o)===oW)i=lW}if(i===cW?n.push(e.substring(r,a-1)):n.push(e.substring(r)),t&&n.length!==this.fullColumnNames.length)throw new Error("Invalid row in csv file. Should have "+this.fullColumnNames.length+" elements in a row, but got "+n);return n},t}(nW),hW=function(e){function t(t){var n;(n=e.call(this)||this).microphoneConfig=t,n.isClosed=!1,n.fftSize=t.fftSize||1024;var r=Math.log2(n.fftSize);if(n.fftSize<0||r<4||r>14||!Number.isInteger(r))throw new Error("Invalid fftSize: it must be a power of 2 between 2 to 4 and 2 to 14, but got "+n.fftSize);if(n.numFrames=t.numFramesPerSpectrogram||43,n.sampleRateHz=t.sampleRateHz,n.columnTruncateLength=t.columnTruncateLength||n.fftSize,n.audioTrackConstraints=t.audioTrackConstraints,n.smoothingTimeConstant=t.smoothingTimeConstant||0,n.includeSpectrogram=!1!==t.includeSpectrogram,n.includeWaveform=!0===t.includeWaveform,!n.includeSpectrogram&&!n.includeWaveform)throw new Error("Both includeSpectrogram and includeWaveform are false. At least one type of data should be returned.");return n}Av(t,e);var n=t.prototype;return n.summary=function(){return"microphone"},t.create=function(){var e=Cv(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n={}),!Dg().get("IS_NODE")){e.next=3;break}throw new Error("microphone API is only supported in browser environment.");case 3:return r=new t(n),e.next=6,r.start();case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.start=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:null==this.audioTrackConstraints||this.audioTrackConstraints,video:!1});case 3:this.stream=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new Error("Error thrown while initializing video stream: "+e.t0.message);case 9:if(this.stream){e.next=11;break}throw new Error("Could not obtain audio from microphone.");case 11:if(t=window.AudioContext||window.webkitAudioContext,this.audioContext=new t,this.sampleRateHz){e.next=17;break}this.sampleRateHz=this.audioContext.sampleRate,e.next=19;break;case 17:if(this.audioContext.sampleRate===this.sampleRateHz){e.next=19;break}throw new Error("Mismatch in sampling rate: Expected: "+this.sampleRateHz+"; Actual: "+this.audioContext.sampleRate);case 19:return n=this.audioContext.createMediaStreamSource(this.stream),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2*this.fftSize,this.analyser.smoothingTimeConstant=this.smoothingTimeConstant,n.connect(this.analyser),this.freqData=new Float32Array(this.fftSize),this.timeData=new Float32Array(this.fftSize),e.abrupt("return");case 27:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return e.next=4,this.getAudioData();case 4:return r=e.sent,this.includeSpectrogram&&(a=this.flattenQueue(r.freqDataQueue),t=this.getTensorFromAudioDataArray(a,[this.numFrames,this.columnTruncateLength,1])),this.includeWaveform&&(i=this.flattenQueue(r.timeDataQueue),n=this.getTensorFromAudioDataArray(i,[this.numFrames*this.fftSize,1])),e.abrupt("return",{value:{spectrogram:t,waveform:n},done:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.capture=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getAudioData=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=[],r=0,e.abrupt("return",new Promise((function(e){var i=setInterval((function(){a.includeSpectrogram&&(a.analyser.getFloatFrequencyData(a.freqData),a.freqData[0]===-1/0&&e({freqDataQueue:t,timeDataQueue:n}),t.push(a.freqData.slice(0,a.columnTruncateLength))),a.includeWaveform&&(a.analyser.getFloatTimeDomainData(a.timeData),n.push(a.timeData.slice())),++r===a.numFrames&&(clearInterval(i),e({freqDataQueue:t,timeDataQueue:n}))}),a.fftSize/a.sampleRateHz*1e3)})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.stop=function(){this.isClosed||(this.isClosed=!0,this.analyser.disconnect(),this.audioContext.close(),null!=this.stream&&this.stream.getTracks().length>0&&this.stream.getTracks()[0].stop())},n.toArray=function(){throw new Error("Can not convert infinite audio stream to array.")},n.getSampleRate=function(){return this.sampleRateHz},n.flattenQueue=function(e){var t=e[0].length,n=new Float32Array(e.length*t);return e.forEach((function(e,r){return n.set(e,r*t)})),n},n.getTensorFromAudioDataArray=function(e,t){var n=new Float32Array(Zv(t));return n.set(e,n.length-e.length),Pw(n,t)},t}(BB),dW=function(e){function t(t,n){var r;if((r=e.call(this)||this).webcamVideoElement=t,r.webcamConfig=n,r.isClosed=!0,r.resize=!1,r.needToResize())if(r.resize=!0,r.cropSize=[r.webcamConfig.resizeHeight,r.webcamConfig.resizeWidth],r.cropBoxInd=UC([0],"int32"),r.webcamConfig.centerCrop){var a=1*r.webcamConfig.resizeWidth/r.webcamVideoElement.width,i=1*r.webcamConfig.resizeHeight/r.webcamVideoElement.height,o=(1-a)/2,s=(1-i)/2,u=o+a,l=i+s;r.cropBox=GC([s,o,l,u],[1,4])}else r.cropBox=GC([0,0,1,1],[1,4]);return r}Av(t,e);var n=t.prototype;return n.summary=function(){return"webcam"},t.create=function(){var e=Cv(regeneratorRuntime.mark((function e(n,r){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r&&(r={}),!Dg().get("IS_NODE")){e.next=3;break}throw new Error("tf.data.webcam is only supported in browser environment.");case 3:if(n){e.next=9;break}if(n=document.createElement("video"),r.resizeWidth&&r.resizeHeight){e.next=7;break}throw new Error("Please provide webcam video element, or resizeWidth and resizeHeight to create a hidden video element.");case 7:n.width=r.resizeWidth,n.height=r.resizeHeight;case 9:return a=new t(n,r),e.next=12,a.start();case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n.start=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.webcamConfig.facingMode&&Kv("user"===this.webcamConfig.facingMode||"environment"===this.webcamConfig.facingMode,(function(){return"Invalid webcam facing mode: "+t.webcamConfig.facingMode+". Please provide 'user' or 'environment'"})),e.prev=1,e.next=4,navigator.mediaDevices.getUserMedia({video:{deviceId:this.webcamConfig.deviceId,facingMode:this.webcamConfig.facingMode?this.webcamConfig.facingMode:"user",width:this.webcamVideoElement.width,height:this.webcamVideoElement.height}});case 4:this.stream=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),e.t0.message="Error thrown while initializing video stream: "+e.t0.message,e.t0;case 11:if(this.stream){e.next=13;break}throw new Error("Could not obtain video from webcam.");case 13:try{this.webcamVideoElement.srcObject=this.stream}catch(e){console.log(e),this.webcamVideoElement.src=window.URL.createObjectURL(this.stream)}return this.webcamVideoElement.play(),this.isClosed=!1,e.abrupt("return",new Promise((function(e){t.webcamVideoElement.onloadedmetadata=function(){e()}})));case 17:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isClosed){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:e.prev=2,t=fN(this.webcamVideoElement),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new Error("Error thrown converting video to pixels: "+JSON.stringify(e.t0));case 9:if(!this.resize){e.next=22;break}return e.prev=10,e.abrupt("return",{value:this.cropAndResizeFrame(t),done:!1});case 14:throw e.prev=14,e.t1=e.catch(10),new Error("Error thrown cropping the video: "+e.t1.message);case 17:return e.prev=17,t.dispose(),e.finish(17);case 20:e.next=23;break;case 22:return e.abrupt("return",{value:t,done:!1});case 23:case"end":return e.stop()}}),e,this,[[2,6],[10,14,17,20]])})));return function(){return e.apply(this,arguments)}}(),n.needToResize=function(){return!(!this.webcamConfig.resizeWidth||!this.webcamConfig.resizeHeight||this.webcamVideoElement.width===this.webcamConfig.resizeWidth&&this.webcamVideoElement.height===this.webcamConfig.resizeHeight)},n.cropAndResizeFrame=function(e){var t=this;return QN((function(){var n,r=e.toFloat().expandDims(0),a=(n=ER.cropAndResize(r,t.cropBox,t.cropBoxInd,t.cropSize,"bilinear")).shape;return n.reshape(a.slice(1))}))},n.capture=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.next();case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.stop=function(){this.stream.getTracks().forEach((function(e){return e.stop()}));try{this.webcamVideoElement.srcObject=null}catch(e){console.log(e),this.webcamVideoElement.src=null}this.isClosed=!0},n.toArray=function(){throw new Error("Can not convert infinite video stream to array.")},t}(BB),mW=function(){},vW=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.split=function(e){return new gW(this,e)},t}(BB),gW=function(e){function t(t,n){var r;return(r=e.call(this)||this).upstream=t,r.impl=new yW(t,n),r}Av(t,e);var n=t.prototype;return n.summary=function(){return this.impl.summary()},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(vW),yW=function(e){function t(t,n){var r;return(r=e.call(this)||this).upstream=t,r.separator=n,r.carryover="",r}Av(t,e);var n=t.prototype;return n.summary=function(){return this.upstream.summary()+" -> Split('"+this.separator+"')"},n.pump=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=9;break}if(""!==this.carryover){e.next=6;break}return e.abrupt("return",!1);case 6:return this.outputQueue.push(this.carryover),this.carryover="",e.abrupt("return",!0);case 9:for((n=t.value.split(this.separator))[0]=this.carryover+n[0],r=Bv(n.slice(0,-1));!(a=r()).done;)i=a.value,this.outputQueue.push(i);return this.carryover=n[n.length-1],e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(JB),bW=function(e){function t(){return e.apply(this,arguments)||this}return Av(t,e),t.prototype.decodeUTF8=function(){return new xW(this)},t}(BB),xW=function(e){function t(t){var n;return(n=e.call(this)||this).upstream=t,n.impl=new wW(t),n}Av(t,e);var n=t.prototype;return n.summary=function(){return this.impl.summary()},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.impl.next());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(vW),wW=function(e){function t(t){var n;if((n=e.call(this)||this).upstream=t,Dg().get("IS_BROWSER"))n.decoder=new TextDecoder("utf-8");else{var r=require("string_decoder").StringDecoder;n.decoder=new r("utf8")}return n}Av(t,e);var n=t.prototype;return n.summary=function(){return this.upstream.summary()+" -> Utf8"},n.pump=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.upstream.next();case 2:if(!(t=e.sent).done){e.next=7;break}return e.abrupt("return",!1);case 7:n=t.value;case 8:return r=Dg().get("IS_BROWSER")?this.decoder.decode(n,{stream:!0}):this.decoder.write(Buffer.from(n.buffer)),this.outputQueue.push(r),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(JB),kW=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this)||this).file=t,r.options=n,Kv(t instanceof Uint8Array||!!Dg().get("IS_BROWSER")&&(t instanceof File||t instanceof Blob),(function(){return"FileChunkIterator only supports File, Blob and Uint8Array right now."})),r.offset=n.offset||0,r.chunkSize=n.chunkSize||1048576,r}Av(t,e);var n=t.prototype;return n.summary=function(){return"FileChunks "+this.file},n.next=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.offset>=(this.file instanceof Uint8Array?this.file.byteLength:this.file.size))){e.next=2;break}return e.abrupt("return",{value:null,done:!0});case 2:return t=new Promise((function(e,t){var r=n.offset+n.chunkSize;if(n.file instanceof Uint8Array)e(new Uint8Array(n.file.slice(n.offset,r)));else{var a=new FileReader;a.onload=function(n){var r=a.result;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),!(r instanceof Uint8Array))return t(new TypeError("FileReader returned unknown type."));e(r)},a.onabort=function(e){return t(new Error("Aborted"))},a.onerror=function(e){return t(new Error(e.type))};var i=n.file.slice(n.offset,r);a.readAsArrayBuffer(i)}n.offset=r})),e.next=5,t;case 5:return e.t0=e.sent,e.abrupt("return",{value:e.t0,done:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(bW);function NW(e,t){return IW.apply(this,arguments)}function IW(){return(IW=Cv(regeneratorRuntime.mark((function e(t,n){var r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),"string"==typeof t?r=t:(r=t.url,a=SW(t)),e.next=4,Vx(r,a);case 4:if(!(i=e.sent).ok){e.next=14;break}return e.t0=Uint8Array,e.next=9,i.arrayBuffer();case 9:return e.t1=e.sent,o=new e.t0(e.t1),e.abrupt("return",new kW(o,n));case 14:throw new Error(i.statusText);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var SW=function(e){return{method:e.method,headers:e.headers,body:e.body,mode:e.mode,credentials:e.credentials,cache:e.cache,redirect:e.redirect,referrer:e.referrer,integrity:e.integrity}};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 * =============================================================================
	 */function TW(e){return"string"==typeof e&&"file://"===e.substr(0,7)}var CW=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this)||this).input=t,r.options=n,r}return Av(t,e),t.prototype.iterator=function(){var e=Cv(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TW(this.input)&&Dg().get("IS_NODE")&&(t=require("fs"),this.input=t.readFileSync(this.input.substr(7))),e.abrupt("return",new kW(this.input,this.options));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(mW),EW=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this)||this).url=t,r.fileOptions=n,r}return Av(t,e),t.prototype.iterator=function(){var e=Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!TW(this.url)){e.next=4;break}return e.abrupt("return",new CW(this.url,this.fileOptions).iterator());case 4:return e.abrupt("return",NW(this.url,this.fileOptions));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(mW);function RW(){return(RW=Cv(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dW.create(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function AW(){return(AW=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hW.create(t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}
/** @license See the LICENSE file. */var FW="2.8.3",_W={__proto__:null,array:function(e){return rW(Cv(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",OB(e));case 1:case"end":return t.stop()}}),t)}))),e.length)},Dataset:nW,zip:function(e){if(!RB(e))throw new Error("The argument to zip() must be an object or array.");var t;if(Array.isArray(e))for(var n=0;n<e.length;n++)t=null==t?e[n].size:Math.min(t,e[n].size);else if(e instanceof Object)for(var r in e)t=null==t?e[r].size:Math.min(t,e[r].size);return rW(Cv(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,CB(e,(function(e){if(e instanceof nW)return{value:e.iterator(),recurse:!1};if(RB(e))return{value:null,recurse:!0};throw new Error("Leaves of the structure passed to zip() must be Datasets, not primitives.")}));case 2:return n=t.sent,t.abrupt("return",zB(n,PB.SHORTEST));case 4:case"end":return t.stop()}}),t)}))),t)},CSVDataset:fW,TextLineDataset:iW,csv:function(e,t){return void 0===t&&(t={}),new fW(new EW(e),t)},func:function(e){var t=MB(e);return rW(Cv(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t);case 1:case"end":return e.stop()}}),e)}))))},generator:function(e){return rW(Cv(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,t.abrupt("return",MB((function(){return n.next()})));case 4:case"end":return t.stop()}}),t)}))))},microphone:function(e){return AW.apply(this,arguments)},webcam:function(e,t){return RW.apply(this,arguments)},FileDataSource:CW,URLDataSource:EW,version_data:FW};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function DW(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Kv("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors in the CPU backend."}))}))}var OW=JC,MW=function(e){function t(){var t;return(t=e.call(this)||this).blockSize=48,t.firstUse=!0,t.data=new Wv(Lv(t),JN()),t}Av(t,e);var n=t.prototype;return n.write=function(e,t,n){this.firstUse&&(this.firstUse=!1,Dg().get("IS_NODE")&&sA("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================"));var r={};return this.data.set(r,{values:e,dtype:n,refCount:1}),r},n.makeTensorInfo=function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&dg(n[0])){var a=n.map((function(e){return Ux(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return{dataId:r,shape:e,dtype:t}},n.incRef=function(e){this.data.get(e).refCount++},n.decRef=function(e){this.data.has(e)&&this.data.get(e).refCount--},n.move=function(e,t,n,r){this.data.set(e,{values:t,dtype:r,refCount:1})},n.numDataIds=function(){return this.data.numDataIds()},n.read=function(){var e=Cv(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.readSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensorInfos;return"complex64"===n?uA(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},n.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Gx(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return zk(e.shape,e.dtype,n)},n.makeOutput=function(e,t,n){var r=this.write(e,t,n);return JN().makeTensorFromDataId(r,t,n,this)},n.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensorInfos;null!=t&&(this.disposeData(t.real.dataId),this.disposeData(t.imag.dataId)),this.data.delete(e)}},n.disposeIntermediateTensorInfo=function(e){var t=e.dataId;if(this.data.has(t)){var n=this.data.get(t);n.refCount--,n.refCount<1&&this.disposeData(t)}},n.time=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Wx(),t(),r=Wx()-n,e.abrupt("return",{kernelMs:r});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},n.where=function(e){DW([e],"where");var t=this.readSync(e.dataId);return OW(e.shape,t)},n.dispose=function(){},n.floatPrecision=function(){return 32},n.epsilon=function(){return e.prototype.epsilon.call(this)},t}(Vv);
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function LW(e){for(var t=new Float32Array(e.length),n=0;n<e.length;++n)t[n]=Math.abs(e[n]);return t}var zW={kernelName:Lg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs.x,n=e.backend;DW(t,"abs");var r=new Float32Array(Zv(t.shape));return r=LW(n.data.get(t.dataId).values),n.makeOutput(r,t.shape,"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function PW(e){return function(t,n,r,a,i){var o=yS(t,n),s=o.length,u=xg(o),l=og(i,Zv(o)),c=t.length,p=n.length,f=xg(t),h=xg(n),d=vS(t,o),m=vS(n,o);if(d.length+m.length===0)for(var v=0;v<l.length;++v)l[v]=e(r[v%r.length],a[v%a.length]);else for(var g=function(t){var n=Eg(t,s,u),i=n.slice(-c);d.forEach((function(e){return i[e]=0}));var o=Cg(i,c,f),v=n.slice(-p);m.forEach((function(e){return v[e]=0}));var g=Cg(v,p,h);l[t]=e(r[o],a[g])},y=0;y<l.length;++y)g(y);return[l,o]}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function BW(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=n.makeTensorInfo(r.shape,"complex64");return n.data.get(s.dataId).complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(a.shape,"float32",o)},s}var WW={kernelName:sy,backendName:"cpu",kernelFunc:BW};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function VW(e,t,n){if(void 0===n&&(n="float32"),"complex64"===n)return BW({inputs:{real:VW(e,t,"float32"),imag:VW(e,t,"float32")},backend:e});var r=Ig(Zv(t),n);return e.makeTensorInfo(t,n,r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function UW(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var GW={kernelName:Ky,backendName:"cpu",kernelFunc:UW};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function jW(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var HW={kernelName:Pb,backendName:"cpu",kernelFunc:jW};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function qW(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dtype;if("complex64"===i){if("complex64"===a.dtype)return UW({inputs:{x:a},backend:n});var o=VW(n,a.shape,a.dtype),s=qW({inputs:{x:a},backend:n,attrs:{dtype:"float32"}}),u=BW({inputs:{real:s,imag:o},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("complex64"===a.dtype){var l=jW({inputs:{input:a},backend:n}),c=qW({inputs:{x:l},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(l),c}if(!cg(a.dtype,i)){var p=UW({inputs:{x:a},backend:n});return{dataId:p.dataId,shape:p.shape,dtype:i}}if("int32"===i){var f=n.data.get(a.dataId).values,h=Int32Array.from(f);return n.makeTensorInfo(a.shape,"int32",h)}if("bool"===i){var d=n.data.get(a.dataId).values,m=Bx([0],a.dtype),v=PW((function(e,t){return e!==t?1:0}))(a.shape,[],d,m,"bool"),g=v[0],y=v[1];return n.makeTensorInfo(y,"bool",g)}throw new Error("Error in Cast: failed to cast "+a.dtype+" to "+i)}var KW={kernelName:ay,backendName:"cpu",kernelFunc:qW};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function XW(e,t,n,r){return null==n?function(n){var a=n.inputs,i=n.backend,o=a.a,s=a.b,u=i;DW([o,s],e);var l=u.data.get(o.dataId).values,c=u.data.get(s.dataId).values,p=r||o.dtype,f=t(o.shape,s.shape,l,c,p),h=f[0],d=f[1];return u.makeTensorInfo(d,p,h)}:function(e){var a=e.inputs,i=e.backend,o=a.a,s=a.b,u=i;if("complex64"===o.dtype||"complex64"===s.dtype){var l=qW({inputs:{x:o},backend:u,attrs:{dtype:"complex64"}}),c=u.data.get(l.dataId),p=c.complexTensorInfos.real,f=c.complexTensorInfos.imag,h=u.data.get(p.dataId).values,d=u.data.get(f.dataId).values,m=qW({inputs:{x:s},backend:u,attrs:{dtype:"complex64"}}),v=u.data.get(m.dataId),g=v.complexTensorInfos.real,y=v.complexTensorInfos.imag,b=u.data.get(g.dataId).values,x=u.data.get(y.dataId).values,w=n(o.shape,s.shape,h,d,b,x),k=w[0],N=w[1],I=w[2],S=u.makeTensorInfo(I,"float32",k),T=u.makeTensorInfo(I,"float32",N),C=BW({inputs:{real:S,imag:T},backend:u});return u.disposeIntermediateTensorInfo(l),u.disposeIntermediateTensorInfo(m),u.disposeIntermediateTensorInfo(S),u.disposeIntermediateTensorInfo(T),C}var E=u.data.get(o.dataId).values,R=u.data.get(s.dataId).values,A=r||o.dtype,F=t(o.shape,s.shape,E,R,A),_=F[0],D=F[1];return u.makeTensorInfo(D,A,_)}}function YW(e){return function(t,n,r,a,i,o){var s=yS(t,n),u=Zv(s),l=s.length,c=xg(s),p=og("float32",u),f=og("float32",u),h=vS(t,s),d=vS(n,s),m=uA(r,a),v=uA(i,o),g=t.length,y=xg(t),b=n.length,x=xg(n);if(h.length+d.length===0)for(var w=0;w<p.length;w++){var k=w%m.length,N=w%v.length,I=e(m[2*k],m[2*k+1],v[2*N],v[2*N+1]);p[w]=I.real,f[w]=I.imag}else for(var S=function(t){var n=Eg(t,l,c),r=n.slice(-g);h.forEach((function(e){return r[e]=0}));var a=Cg(r,g,y),i=n.slice(-b);d.forEach((function(e){return i[e]=0}));var o=Cg(i,b,x),s=e(m[2*a],m[2*a+1],v[2*o],v[2*o+1]);p[t]=s.real,f[t]=s.imag},T=0;T<p.length;T++)S(T);return[p,f,s]}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var JW=PW((function(e,t){return e+t})),ZW=YW((function(e,t,n,r){return{real:e+n,imag:t+r}})),QW=XW(Bg,JW,ZW),$W={kernelName:Bg,backendName:"cpu",kernelFunc:QW};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function eV(e,t,n,r,a){for(var i=Zv(r),o=Ig(a,n),s=0;s<e.length;s++){var u=e[s];if(u<0)throw new Error("Input x must be non-negative!");u>=a||(o[u]+=i>0?t[s]:1)}return o}function tV(e,t,n,r){void 0===r&&(r=!1);for(var a=e.shape[0],i=e.shape[1],o=zk([a,n],t.dtype),s=0;s<a;s++)for(var u=0;u<i;u++){var l=e.get(s,u);if(l<0)throw new Error("Input x must be non-negative!");l>=n||(r?o.set(1,s,l):t.size>0?o.set(o.get(s,l)+t.get(s,u),s,l):o.set(o.get(s,l)+1,s,l))}return o}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function nV(e){return function(t,n,r){for(var a=og(n,t.length),i=0;i<t.length;++i)a[i]=e(t[i],r);return a}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function rV(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(DW(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");for(var u=o,l=u.data.get(s.dataId).values,c=Zv(s.shape),p=n||s.dtype,f=sg(p,c),h=0;h<c;++h)f[h]=t(l[h],i);return u.makeTensorInfo(s.shape,p,f)}}function aV(e,t,n){return function(r){var a=r.inputs,i=r.attrs,o=r.backend,s=a.x;if(DW(s,e),"string"===s.dtype||"string"===n)throw new Error("unaryKernelFunc does not support string input/output");var u=o,l=u.data.get(s.dataId).values,c=n||s.dtype,p=t(l,c,i);return u.makeTensorInfo(s.shape,c,p)}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var iV=nV((function(e){return Math.ceil(e)})),oV=aV(iy,iV),sV={kernelName:iy,backendName:"cpu",kernelFunc:oV};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function uV(e,t,n,r){var a=sg(n,Zv(t));if(r&&"string"!==n){var i=0;e.forEach((function(e){var t=Zv(e.shape);a.set(e.vals,i),i+=t}))}else{var o=0;e.forEach((function(e){for(var r="string"===n?xA(e.vals):e.vals,i=0,s=0;s<e.shape[0];++s)for(var u=s*t[1]+o,l=0;l<e.shape[1];++l)a[u+l]=r[i++];o+=e.shape[1]}))}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var lV=nV((function(e){return Math.exp(e)})),cV=aV(Oy,lV),pV={kernelName:Oy,backendName:"cpu",kernelFunc:cV},fV=nV((function(e){return Math.expm1(e)})),hV=aV(Ly,fV),dV={kernelName:Ly,backendName:"cpu",kernelFunc:hV},mV=nV((function(e){return Math.floor(e)})),vV=aV(Wy,mV),gV={kernelName:Wy,backendName:"cpu",kernelFunc:vV};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function yV(e,t,n){for(var r=zk(n,e.dtype),a=0;a<r.size;++a){var i=r.indexToLoc(a).slice(),o=i[0],s=i[2],u=t.locToIndex([o,s]);i[2]=t.values[u];var l=e.locToIndex(i);r.values[a]=e.values[l]}return r}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var bV=PW((function(e,t){return e>t?1:0})),xV=XW(Hy,bV,null,"bool"),wV={kernelName:Hy,backendName:"cpu",kernelFunc:xV},kV=PW((function(e,t){return e<t?1:0})),NV=XW(eb,kV,null,"bool"),IV={kernelName:eb,backendName:"cpu",kernelFunc:NV};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function SV(e,t,n){var r=(t-e)/(n-1),a=Ig(n,"float32");a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+r;return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var TV=nV((function(e){return Math.log(e)})),CV=aV(rb,TV),EV={kernelName:rb,backendName:"cpu",kernelFunc:CV};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function RV(e,t,n,r){for(var a=og(r,Zv(n)),i=0;i<a.length;++i){for(var o=i*t,s=e[o],u=0;u<t;++u){var l=e[o+u];l>s&&(s=l)}a[i]=s}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var AV=PW((function(e,t){return Math.max(e,t)})),FV=XW(fb,AV),_V={kernelName:fb,backendName:"cpu",kernelFunc:FV},DV=PW((function(e,t){return Math.min(e,t)})),OV=XW(xb,DV),MV={kernelName:xb,backendName:"cpu",kernelFunc:OV},LV=PW((function(e,t){return e*t})),zV=YW((function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})),PV=XW(Ib,LV,zV),BV={kernelName:Ib,backendName:"cpu",kernelFunc:PV};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function WV(e,t,n){var r=Px(-1,n);return LV([],t,r,e,n)}var VV={kernelName:Sb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x;DW(r,"neg");var a=WV(n.data.get(r.dataId).values,r.shape,r.dtype),i=a[0],o=a[1];return n.makeTensorInfo(o,r.dtype,i)}},UV=PW((function(e,t){return e!==t?1:0})),GV=XW(Tb,UV,null,"bool"),jV={kernelName:Tb,backendName:"cpu",kernelFunc:GV};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function HV(e,t,n,r,a){for(var i=t.length,o=Zv(t),s=xg(t),u=xg(a),l=og(n,Zv(a)),c=0;c<o;++c){for(var p=Eg(c,i,s),f=new Array(p.length),h=0;h<f.length;h++)f[h]=p[r[h]];l[Cg(f,i,u)]=e[c]}return l}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function qV(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.perm;DW(a,"transpose");for(var o=a.shape.length,s=new Array(o),u=0;u<s.length;u++)s[u]=a.shape[i[u]];var l=HV(r.data.get(a.dataId).values,a.shape,a.dtype,i,s);return{dataId:r.write(l,s,a.dtype),shape:s,dtype:a.dtype}}var KV={kernelName:bx,backendName:"cpu",kernelFunc:qV};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function XV(e,t,n,r){for(var a=iT(e,r),i=a[0],o=a[1],s=fw(t,"int32"),u=Ig(Zv(i),s),l=Zv(o),c=0;c<u.length;++c){for(var p=c*l,f=1,h=0;h<l;++h)f*=n[p+h];u[c]=f}return{outVals:u,outShape:i,outDtype:s}}var YV={kernelName:Lb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;DW(a,"prod");var s=a.shape.length,u=ag(i,a.shape),l=uT(u,s),c=u,p=a,f=[];null!=l&&(p=qV({inputs:{x:a},backend:n,attrs:{perm:l}}),f.push(p),c=cT(c.length,s));var h=n.data.get(p.dataId).values,d=XV(p.shape,p.dtype,h,c),m=d.outVals,v=d.outShape,g=d.outDtype,y=v;return o&&(y=oT(v,u)),f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(y,g,m)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function JV(e,t,n,r){if(e===t||e<t&&n<0||t<e&&n>1)return Ig(0,r);var a=Ig(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),a[0]=e;for(var i=1;i<a.length;i++)a[i]=a[i-1]+n;return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ZV=nV((function(e){return 1/Math.sqrt(e)})),QV=aV(Yb,ZV),$V={kernelName:Yb,backendName:"cpu",kernelFunc:QV};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function eU(e,t,n,r,a){var i=_N(r,t,n),o=Zv(n),s=xg(r);if(i){var u=DN(t,s);return"string"===a?e.slice(u,u+o):e.subarray(u,u+o)}for(var l=zk(r,a,"string"===a?xA(e):e),c=zk(n,a),p=0;p<c.size;++p){var f=c.indexToLoc(p),h=f.map((function(e,n){return e+t[n]}));c.set.apply(c,[l.get.apply(l,h)].concat(f))}return"string"===a?wA(c.values):c.values}function tU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.size;DW(a,"slice");var s=ON(a,i,o),u=s[0],l=s[1];xN(a,u,l);var c=eU(n.data.get(a.dataId).values,u,l,a.shape,a.dtype);return n.makeTensorInfo(l,a.dtype,c)}var nU={kernelName:$b,backendName:"cpu",kernelFunc:tU},rU=PW((function(e,t){var n=e-t;return n*n})),aU=XW(cx,rU),iU={kernelName:cx,backendName:"cpu",kernelFunc:aU};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function oU(e,t,n,r){for(var a=zk(e,t.dtype),i=0;i<a.size;i++){for(var o=a.indexToLoc(i),s=new Array(o.length),u=0;u<s.length;u++)s[u]=o[u]*n[u]+r[u];a.set.apply(a,[t.get.apply(t,s)].concat(o))}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var sU=PW((function(e,t){return e-t})),uU=YW((function(e,t,n,r){return{real:e-n,imag:t-r}})),lU=XW(fx,sU,uU),cU={kernelName:fx,backendName:"cpu",kernelFunc:lU};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function pU(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];for(var a=zk(n,e.dtype),i=0;i<a.values.length;++i){for(var o=a.indexToLoc(i),s=new Array(e.rank),u=0;u<s.length;u++)s[u]=o[u]%e.shape[u];var l=e.locToIndex(s);a.values[i]=e.values[l]}return a}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function fU(e,t,n,r,a){for(var i=t[t.length-1],o=e.length/i,s=i,u=og(n,o*r),l=og("int32",o*r),c=0;c<o;c++){for(var p=c*s,f=e.subarray(p,p+s),h=[],d=0;d<f.length;d++)h.push({value:f[d],index:d});h.sort((function(e,t){return t.value-e.value}));for(var m=c*r,v=u.subarray(m,m+r),g=l.subarray(m,m+r),y=0;y<r;y++)v[y]=h[y].value,g[y]=h[y].index}var b=t.slice();return b[b.length-1]=r,[zk(b,n,u),zk(b,"int32",l)]}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function hU(e,t,n,r){for(var a=ag(t,n)[0],i=[1,n[0],1],o=0;o<a;o++)i[0]*=n[o];i[1]=n[a];for(var s=a+1;s<n.length;s++)i[2]*=n[s];for(var u={},l=new Int32Array(n[a]),c=new tw(i,r,e),p=[],f=1===i[0]&&1===i[2],h=0;h<n[a];h++){var d=void 0;if(f)d=e[h].toString();else{for(var m=[],v=0;v<i[0];v++)for(var g=0;g<i[2];g++)m.push(c.get(v,h,g));d=m.join(",")}if(void 0!==u[d])l[h]=u[d];else{var y=Object.keys(u).length;u[d]=y,l[h]=y,p.push(h)}}var b=i.slice();b[1]=Object.keys(u).length;var x=new tw(b,r);p.forEach((function(e,t){for(var n=0;n<i[0];n++)for(var r=0;r<i[2];r++)x.set(c.get(n,e,r),n,t,r)}));var w=n.slice();return w[a]=b[1],{outputValues:x.values,outputShape:w,indices:l}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/** @license See the LICENSE file. */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
nI("cpu",(function(){return new MW}),1);
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var dU=rV(Ay,(function(e){return e>=0?e:Math.exp(e)-1})),mU={kernelName:Ay,backendName:"cpu",kernelFunc:dU};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function vU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha;DW([a],"leakyRelu");for(var o=Zv(a.shape),s=n.data.get(a.dataId).values,u=og("float32",o),l=0;l<s.length;l++)u[l]=s[l]<0?i*s[l]:s[l];return n.makeTensorInfo(a.shape,"float32",u)}var gU={kernelName:$y,backendName:"cpu",kernelFunc:vU},yU=PW((function(e,t){return e<0?t*e:e}));
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function bU(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha;DW([r,a],"prelu");var i=n.data.get(r.dataId).values,o=n.data.get(a.dataId).values,s=yU(r.shape,a.shape,i,o,r.dtype),u=s[0],l=s[1];return n.makeTensorInfo(l,r.dtype,u)}var xU={kernelName:Mb,backendName:"cpu",kernelFunc:bU},wU=rV(Wb,(function(e){return Math.max(0,e)})),kU={kernelName:Wb,backendName:"cpu",kernelFunc:wU},NU=rV(qb,(function(e){return Math.min(Math.max(0,e),6)})),IU={kernelName:qb,backendName:"cpu",kernelFunc:NU};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function SU(e,t,n,r,a){if("linear"===n)return UW({inputs:{x:t},backend:e});if("relu"===n)return wU({inputs:{x:t},backend:e});if("elu"===n)return dU({inputs:{x:t},backend:e});if("relu6"===n)return NU({inputs:{x:t},backend:e});if("prelu"===n)return bU({inputs:{x:t,alpha:r},backend:e});if("leakyrelu"===n)return vU({inputs:{x:t},backend:e,attrs:{alpha:a}});throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function TU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=Zv(a.shape),s=rg(i,o),u=Zv(s);Kv(o===u,(function(){return"The new shape ("+s+") has "+u+" elements and the old shape ("+a.shape+") has "+o+" elements. The new shape and old shape must have the same number of elements."})),n.incRef(a.dataId);var l=n.data.get(a.dataId);if(null!=l.complexTensorInfos){var c=l.complexTensorInfos.real,p=l.complexTensorInfos.imag;c.shape=s,p.shape=s}return{dataId:a.dataId,shape:s,dtype:a.dtype}}var CU={kernelName:Vb,backendName:"cpu",kernelFunc:TU};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function EU(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=r.transposeA,s=r.transposeB;DW([a,i],"matMul");var u=a.shape.length,l=i.shape.length,c=o?a.shape[u-2]:a.shape[u-1],p=s?i.shape[l-1]:i.shape[l-2],f=o?a.shape[u-1]:a.shape[u-2],h=s?i.shape[l-2]:i.shape[l-1],d=a.shape.slice(0,-2),m=i.shape.slice(0,-2),v=Zv(d),g=Zv(m);Kv(u>=2&&l>=2&&(v===g||1===v||1===g),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of ("+d+") and ("+m+")."}));var y=(v>g?a.shape.slice(0,-2):i.shape.slice(0,-2)).concat([f,h]);Kv(c===p,(function(){return"Error in matMul: inner shapes ("+c+") and ("+p+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+o+" and transposeB="+s+" must match."}));for(var b=s?[g,h,p]:[g,p,h],x=TU({inputs:{x:a},backend:n,attrs:{shape:o?[v,c,f]:[v,f,c]}}),w=TU({inputs:{x:i},backend:n,attrs:{shape:b}}),k=o?x.shape[1]:x.shape[2],N=o?x.shape[2]:x.shape[1],I=s?w.shape[1]:w.shape[2],S=Math.max(v,g),T=n.data.get(x.dataId).values,C=n.data.get(w.dataId).values,E=xg(x.shape),R=xg(w.shape),A=o?[E[0],1,E[1]]:[E[0],E[1],1],F=A[0],_=A[1],D=A[2],O=s?[1,R[1],R[0]]:[R[1],1,R[0]],M=O[0],L=O[1],z=O[2],P=N*I,B=zk([S,N,I],x.dtype),W=B.values,V=n.blockSize,U=0;U<S;U++)for(var G=0;G<N;G+=V)for(var j=0;j<I;j+=V)for(var H=0;H<k;H+=V)for(var q=Math.min(G+V,N),K=Math.min(j+V,I),X=Math.min(H+V,k),Y=G;Y<q;Y++)for(var J=j;J<K;J++){for(var Z=0,Q=H;Q<X;Q++){var $=Math.min(U,v-1)*F,ee=Math.min(U,g-1)*z;Z+=T[$+Y*_+Q*D]*C[Q*M+J*L+ee]}W[U*P+(Y*I+J)]+=Z}return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(w),n.makeTensorInfo(y,B.dtype,B.values)}var RU={kernelName:ey,backendName:"cpu",kernelFunc:EU};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var AU={kernelName:Cx,backendName:"cpu",kernelFunc:function(e){var t,n,r,a=e.inputs,i=e.backend,o=e.attrs,s=a.a,u=a.b,l=a.bias,c=a.preluActivationWeights,p=o.transposeA,f=o.transposeB,h=o.activation,d=o.leakyreluAlpha,m=[];t=EU({inputs:{a:s,b:u},attrs:{transposeA:p,transposeB:f},backend:i}),l&&(n=QW({inputs:{a:t,b:l},backend:i}),m.push(t),t=n),h&&(r=SU(i,t,h,c,d),m.push(t),t=r);for(var v=0,g=m;v<g.length;v++){var y=g[v];i.disposeIntermediateTensorInfo(y)}return t}},FU=rV(zg,(function(e){return Math.acos(e)})),_U={kernelName:zg,backendName:"cpu",kernelFunc:FU},DU=rV(Pg,(function(e){return Math.acosh(e)})),OU={kernelName:Pg,backendName:"cpu",kernelFunc:DU};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var MU={kernelName:Wg,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=t;DW(t,"addN");for(var a=r.map((function(e){return n.data.get(e.dataId).values})),i=zk(r[0].shape,r[0].dtype),o=i.values,s=0;s<r.length;s++)for(var u=a[s],l=0;l<o.length;l++)o[l]+=u[l];return n.makeTensorInfo(i.shape,i.dtype,i.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var LU={kernelName:Vg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;DW(a,"all");var s=ag(i,a.shape),u=s,l=uT(u,a.shape.length),c=a;null!=l&&(c=qV({inputs:{x:a},backend:n,attrs:{perm:l}}),u=cT(u.length,a.shape.length)),sT("all",u,c.shape.length);for(var p=iT(c.shape,u),f=p[0],h=Zv(p[1]),d=Ig(Zv(f),c.dtype),m=n.data.get(c.dataId).values,v=0;v<d.length;++v){for(var g=v*h,y=m[g],b=0;b<h;++b){var x=m[g+b];y=y&&x}d[v]=y}null!=l&&n.disposeIntermediateTensorInfo(c);var w=n.makeTensorInfo(f,c.dtype,d);if(o){var k=TU({inputs:{x:w},backend:n,attrs:{shape:oT(f,s)}});return n.disposeIntermediateTensorInfo(w),k}return w}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var zU={kernelName:Ug,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;DW(a,"any");var s=ag(i,a.shape),u=s,l=uT(u,a.shape.length),c=a;null!=l&&(c=qV({inputs:{x:a},backend:n,attrs:{perm:l}}),u=cT(u.length,a.shape.length)),sT("any",u,c.shape.length);for(var p=iT(c.shape,u),f=p[0],h=Zv(p[1]),d=Ig(Zv(f),c.dtype),m=n.data.get(c.dataId).values,v=0;v<d.length;++v){for(var g=v*h,y=m[g],b=0;b<h;++b){var x=m[g+b];y=y||x}d[v]=y}null!=l&&n.disposeIntermediateTensorInfo(c);var w=n.makeTensorInfo(f,c.dtype,d);if(o){var k=TU({inputs:{x:w},backend:n,attrs:{shape:oT(f,s)}});return n.disposeIntermediateTensorInfo(w),k}return w}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var PU={kernelName:Gg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;DW(a,"argMax");var o=ag(i,a.shape),s=uT(o,a.shape.length),u=a,l=[];null!=s&&(u=qV({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=cT(o.length,u.shape.length)),sT("argMax",o=[o[0]],u.shape.length);for(var c=iT(u.shape,o),p=c[0],f=c[1],h=Ig(Zv(p),"int32"),d=Zv(f),m=n.data.get(u.dataId).values,v=0;v<h.length;++v){for(var g=v*d,y=m[g],b=0,x=0;x<d;++x){var w=m[g+x];w>y&&(y=w,b=x)}h[v]=b}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p,"int32",h)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var BU={kernelName:jg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis;DW(a,"argMin");var o=ag(i,a.shape),s=uT(o,a.shape.length),u=a,l=[];null!=s&&(u=qV({inputs:{x:a},backend:n,attrs:{perm:s}}),l.push(u),o=cT(o.length,u.shape.length)),sT("argMin",o=[o[0]],u.shape.length);for(var c=iT(u.shape,o),p=c[0],f=c[1],h=Ig(Zv(p),"int32"),d=Zv(f),m=n.data.get(u.dataId).values,v=0;v<h.length;++v){for(var g=v*d,y=m[g],b=0,x=0;x<d;++x){var w=m[g+x];w<y&&(y=w,b=x)}h[v]=b}return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(p,"int32",h)}},WU=rV(Hg,(function(e){return Math.asin(e)})),VU={kernelName:Hg,backendName:"cpu",kernelFunc:WU},UU=rV(qg,(function(e){return Math.asinh(e)})),GU={kernelName:qg,backendName:"cpu",kernelFunc:UU},jU=rV(Kg,(function(e){return Math.atan(e)})),HU={kernelName:Kg,backendName:"cpu",kernelFunc:jU},qU=PW((function(e,t){return Math.atan2(e,t)})),KU=XW(Yg,qU),XU={kernelName:Yg,backendName:"cpu",kernelFunc:KU},YU=rV(Xg,(function(e){return Math.atanh(e)})),JU={kernelName:Xg,backendName:"cpu",kernelFunc:YU};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function ZU(e,t,n,r,a,i){for(var o=a.strideHeight,s=a.strideWidth,u=a.dilationHeight,l=a.dilationWidth,c=a.effectiveFilterHeight,p=a.effectiveFilterWidth,f=a.padInfo.top,h=a.padInfo.left,d="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=zk(a.outShape,n),v=m.values,g=a.outShape[1]*a.outShape[2]*a.outShape[3],y=a.outShape[2]*a.outShape[3],b=a.outShape[3],x=0;x<a.batchSize;++x)for(var w=x*g,k=x*r[0],N=0;N<a.inChannels;++N)for(var I=0;I<a.outHeight;++I)for(var S=I*o-f,T=Math.max(0,S),C=Math.min(a.inHeight,c+S),E=w+I*y,R=0;R<a.outWidth;++R){for(var A=R*s-h,F=Math.max(0,A),_=Math.min(a.inWidth,p+A),D=d,O=0,M=0,L=T;L<C;L+=u){for(var z=k+L*r[1],P=F;P<_;P+=l){var B=e[z+P*r[2]+N];"max"===i&&B>D?D=B:"avg"===i&&(O+=B,M++)}if(isNaN(D))break}v[E+R*b+N]="avg"===i?O/M:D}return m}function QU(e,t,n,r,a,i){void 0===a&&(a=!1),void 0===i&&(i=!1);for(var o=zk(r.outShape,"int32"),s=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,p=r.effectiveFilterHeight,f=r.effectiveFilterWidth,h=r.padInfo.top,d=r.padInfo.left,m=zk(t,n,e),v=0;v<r.batchSize;++v)for(var g=0;g<r.inChannels;++g)for(var y=0;y<r.outHeight;++y){for(var b=y*s-h,x=b;x<0;)x+=l;for(var w=Math.min(r.inHeight,p+b),k=0;k<r.outWidth;++k){for(var N=k*u-d,I=N;I<0;)I+=c;for(var S=Math.min(r.inWidth,f+N),T=Number.NEGATIVE_INFINITY,C=-1,E=x;E<w;E+=l)for(var R=E-b,A=I;A<S;A+=c){var F=A-N,_=m.get(v,E,A,g);_>T&&(T=_,C=a?i?((v*r.inHeight+E)*r.inWidth+A)*r.inChannels+g:(E*r.inWidth+A)*r.inChannels+g:R*f+F)}o.set(C,v,y,k,g)}}return o}function $U(e,t,n,r,a,i){for(var o=a.strideDepth,s=a.strideHeight,u=a.strideWidth,l=a.dilationDepth,c=a.dilationHeight,p=a.dilationWidth,f=a.effectiveFilterDepth,h=a.effectiveFilterHeight,d=a.effectiveFilterWidth,m=a.padInfo.front,v=a.padInfo.top,g=a.padInfo.left,y="max"===i?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,b=zk(a.outShape,n),x=b.values,w=a.outShape[1]*a.outShape[2]*a.outShape[3]*a.outShape[4],k=a.outShape[2]*a.outShape[3]*a.outShape[4],N=a.outShape[3]*a.outShape[4],I=a.outShape[4],S=0;S<a.batchSize;++S)for(var T=S*w,C=S*r[0],E=0;E<a.inChannels;++E)for(var R=0;R<a.outDepth;++R){for(var A=R*o-m,F=A;F<0;)F+=l;for(var _=Math.min(a.inDepth,f+A),D=T+R*k,O=0;O<a.outHeight;++O){for(var M=O*s-v,L=M;L<0;)L+=c;for(var z=Math.min(a.inHeight,h+M),P=D+O*N,B=0;B<a.outWidth;++B){for(var W=B*u-g,V=W;V<0;)V+=p;for(var U=Math.min(a.inWidth,d+W),G=P+B*I,j=y,H=0,q=0,K=F;K<_;K+=l){for(var X=C+K*r[1],Y=L;Y<z;Y+=c){for(var J=X+Y*r[2],Z=V;Z<U;Z+=p){var Q=e[J+Z*r[3]+E];if("max"===i&&Q>j?j=Q:"avg"===i&&(H+=Q,q++),isNaN(j))break}if(isNaN(j))break}if(isNaN(j))break}x[G+E]="avg"===i?H/q:j}}}return b}var eG={kernelName:Jg,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;DW(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Kv(_I(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+o+" and dilations '1'"}));var l,c=kI(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Qv(c.inShape,c.outShape))l=UW({inputs:{x:a},backend:n});else{var p=n.data.get(a.dataId).values,f=xg(a.shape),h=ZU(p,a.shape,a.dtype,f,c,"avg");l=n.makeTensorInfo(c.outShape,a.dtype,h.values)}return l}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var tG={kernelName:Qg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat,c=r.dilations;DW(a,"avgPool3d");var p=c;null==p&&(p=[1,1,1]);var f=NI(a.shape,i,o,p,s,u,l),h=$U(n.data.get(a.dataId).values,a.shape,a.dtype,xg(a.shape),f,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var nG={kernelName:$g,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dilations,c=r.dimRoundingMode;DW([a,i],"avgPool3DGrad");for(var p=NI(i.shape,o,s,l,u,c),f=p.strideDepth,h=p.strideHeight,d=p.strideWidth,m=p.filterDepth,v=p.filterHeight,g=p.filterWidth,y=p.dilationDepth,b=p.dilationHeight,x=p.dilationWidth,w=p.effectiveFilterDepth,k=p.effectiveFilterHeight,N=p.effectiveFilterWidth,I=w-1-p.padInfo.front,S=N-1-p.padInfo.left,T=k-1-p.padInfo.top,C=zk(i.shape,"float32"),E=1/(m*v*g),R=n.bufferSync(a),A=0;A<p.batchSize;++A)for(var F=0;F<p.inChannels;++F)for(var _=0;_<p.inDepth;++_)for(var D=0;D<p.inHeight;++D)for(var O=0;O<p.inWidth;++O){for(var M=_-I,L=D-T,z=O-S,P=0,B=0;B<w;B+=y){var W=(M+B)/f;if(!(W<0||W>=p.outDepth||Math.floor(W)!==W))for(var V=0;V<k;V+=b){var U=(L+V)/h;if(!(U<0||U>=p.outHeight||Math.floor(U)!==U))for(var G=0;G<N;G+=x){var j=(z+G)/d;if(!(j<0||j>=p.outWidth||Math.floor(j)!==j))P+=R.get(A,W,U,j,F)}}}C.set(P*E,A,_,D,O,F)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var rG={kernelName:Zg,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;DW([a,i],"avgPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,c=kI(o.shape,s,u,1,l),p=c.strideHeight,f=c.strideWidth,h=c.filterHeight,d=c.filterWidth,m=c.dilationHeight,v=c.dilationWidth,g=c.effectiveFilterHeight,y=c.effectiveFilterWidth,b=y-1-c.padInfo.left,x=g-1-c.padInfo.top,w=zk(o.shape,"float32"),k=1/(h*d),N=n.data.get(a.dataId).values,I=zk(a.shape,"float32",N),S=0;S<c.batchSize;++S)for(var T=0;T<c.inChannels;++T)for(var C=0;C<c.inHeight;++C)for(var E=0;E<c.inWidth;++E){for(var R=C-x,A=E-b,F=0,_=0;_<g;_+=m){var D=(R+_)/p;if(!(D<0||D>=c.outHeight||Math.floor(D)!==D))for(var O=0;O<y;O+=v){var M=(A+O)/f;if(!(M<0||M>=c.outWidth||Math.floor(M)!==M))F+=I.get(S,D,M,T)}}w.set(F*k,S,C,E,T)}return n.makeTensorInfo(w.shape,w.dtype,w.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var aG={kernelName:Uy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.scale,o=t.offset,s=t.mean,u=t.variance;Kv(s.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Kv(null==o||s.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Kv(null==i||s.shape.length===i.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),DW([a,s,u,i,o],"batchNorm");var l=r.varianceEpsilon;null==l&&(l=.001);for(var c=n.data.get(a.dataId).values,p=n.data.get(s.dataId).values,f=n.data.get(u.dataId).values,h=i?n.data.get(i.dataId).values:new Float32Array([1]),d=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(c.length),v=d.length,g=h.length,y=f.length,b=p.length,x=0,w=0,k=0,N=0,I=0;I<c.length;++I)m[I]=d[x++]+(c[I]-p[w++])*h[k++]/Math.sqrt(f[N++]+l),x>=v&&(x=0),w>=b&&(w=0),k>=g&&(k=0),N>=y&&(N=0);return n.makeTensorInfo(a.shape,a.dtype,m)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var iG={kernelName:ty,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;DW([a],"batchToSpaceND");var s=i.reduce((function(e,t){return e*t})),u=XR(a.shape,i,s),l=YR(u.length,i.length),c=JR(a.shape,i,s),p=ZR(o,i.length),f=QR(c,o,i.length),h=TU({inputs:{x:a},backend:n,attrs:{shape:u}}),d=qV({inputs:{x:h},backend:n,attrs:{perm:l}}),m=TU({inputs:{x:d},backend:n,attrs:{shape:c}}),v=tU({inputs:{x:m},backend:n,attrs:{begin:p,size:f}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),v}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var oG={kernelName:ny,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=eV(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,s)}},sG=rV(oy,(function(e,t){var n=t;return e>n.clipValueMax?n.clipValueMax:e<n.clipValueMin?n.clipValueMin:e})),uG={kernelName:oy,backendName:"cpu",kernelFunc:sG},lG={kernelName:uy,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs.x,n=e.backend,r=new Float32Array(Zv(t.shape)),a=n.data.get(t.dataId),i=a.complexTensorInfos.real,o=a.complexTensorInfos.imag,s=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,l=0;l<s.length;l++){var c=s[l],p=u[l];r[l]=Math.hypot(c,p)}return n.makeOutput(r,t.shape,"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function cG(e){var t=e.inputs,n=e.backend,r=t.input,a=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(a.dataId).values;return n.makeTensorInfo(a.shape,a.dtype,i)}var pG={kernelName:Yy,backendName:"cpu",kernelFunc:cG};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function fG(e){var t=e.inputs,n=e.backend,r=ag(e.attrs.axis,t[0].shape)[0],a=jR(t.map((function(e){return e.shape})),r);if(0===Zv(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return Zv(e.shape)>0}));if(1===i.length)return UW({inputs:{x:i[0]},backend:n});if(GR(i.map((function(e){return e.shape})),r),"complex64"===i[0].dtype){var o=i.map((function(e){return jW({inputs:{input:e},backend:n})})),s=i.map((function(e){return cG({inputs:{input:e},backend:n})})),u=fG({inputs:o,backend:n,attrs:{axis:r}}),l=fG({inputs:s,backend:n,attrs:{axis:r}}),c=BW({inputs:{real:u,imag:l},backend:n});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),c}var p=i.map((function(e){var t=Zv(e.shape.slice(r));return TU({inputs:{x:e},backend:n,attrs:{shape:[-1,t]}})})),f=p.map((function(e){return{vals:n.data.get(e.dataId).values,shape:e.shape}}));a=jR(p.map((function(e){return e.shape})),1);var h=1===p[0].shape[0],d=uV(f,a,t[0].dtype,h),m=jR(i.map((function(e){return e.shape})),r),v=n.makeTensorInfo(m,t[0].dtype,d);return p.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}var hG={kernelName:ly,backendName:"cpu",kernelFunc:fG};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function dG(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dilations,c=r.dimRoundingMode;DW([a,i],"conv2d");for(var p=DI(u),f=II(a.shape,i.shape,o,l,s,c,!1,p),h=f.filterHeight,d=f.filterWidth,m=f.dilationHeight,v=f.dilationWidth,g=f.padInfo.left,y=f.padInfo.top,b="channelsLast"===f.dataFormat,x=new tw(f.outShape,a.dtype),w=xg(a.shape),k=xg(i.shape),N=w[0],I=b?w[1]:w[2],S=b?w[2]:1,T=b?1:w[1],C=x.strides[0],E=b?x.strides[1]:x.strides[2],R=b?x.strides[2]:1,A=b?1:x.strides[1],F=n.data.get(a.dataId).values,_=n.data.get(i.dataId).values,D=x.values,O=0;O<f.batchSize;++O)for(var M=O*N,L=O*C,z=0;z<f.outHeight;++z)for(var P=L+z*E,B=z*f.strideHeight-y,W=0;W<h;++W){var V=B+W*m;if(!(V<0||V>=f.inHeight))for(var U=W*k[0],G=M+V*I,j=0;j<f.outWidth;++j)for(var H=P+j*R,q=j*f.strideWidth-g,K=0;K<d;++K){var X=q+K*v;if(!(X<0||X>=f.inWidth))for(var Y=G+X*S,J=U+K*k[1],Z=0;Z<f.inChannels;++Z){for(var Q=F[Y+Z*T],$=0;$<f.outChannels;++$)D[H+$*A]+=Q*_[J+$];J+=f.outChannels}}}return n.makeTensorInfo(x.shape,x.dtype,D)}var mG={kernelName:cy,backendName:"cpu",kernelFunc:dG};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var vG={kernelName:py,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=r.filterShape;DW([a,i],"conv2dBackpropFilter");for(var p=DI(u),f=II(a.shape,c,o,1,s,l,!1,p),h=f.strideHeight,d=f.strideWidth,m=f.filterHeight,v=f.filterWidth,g="channelsLast"===f.dataFormat,y=new tw(f.filterShape,"float32"),b=f.padInfo.left,x=f.padInfo.top,w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,N=new tw(a.shape,a.dtype,w),I=new tw(i.shape,i.dtype,k),S=0;S<m;++S)for(var T=Math.max(0,Math.ceil((x-S)/h)),C=Math.min(f.outHeight,(f.inHeight+x-S)/h),E=0;E<v;++E)for(var R=Math.max(0,Math.ceil((b-E)/d)),A=Math.min(f.outWidth,(f.inWidth+b-E)/d),F=0;F<f.inChannels;++F)for(var _=0;_<f.outChannels;++_){for(var D=0,O=0;O<f.batchSize;++O)for(var M=T;M<C;++M)for(var L=S+M*h-x,z=R;z<A;++z){var P=E+z*d-b;D+=g?N.get(O,L,P,F)*I.get(O,M,z,_):N.get(O,F,L,P)*I.get(O,_,M,z)}y.set(D,S,E,F,_)}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var gG={kernelName:fy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,c=r.dimRoundingMode;DW([a,i],"conv2dBackpropInput");var p=xg(i.shape),f=xg(a.shape),h=DI(l),d=II(o,i.shape,s,1,u,c,!1,h),m=new tw(d.inShape,"float32"),v=m.values,g=n.data.get(a.dataId).values,y=n.data.get(i.dataId).values,b=p[0],x=p[1],w=p[2],k=d.batchSize,N=d.filterHeight,I=d.filterWidth,S=d.inChannels,T=d.inHeight,C=d.inWidth,E=d.outChannels,R=d.outHeight,A=d.outWidth,F=d.strideHeight,_=d.strideWidth;h=d.dataFormat;for(var D=N-1-d.padInfo.top,O=I-1-d.padInfo.left,M="channelsLast"===h,L=m.strides[0],z=M?m.strides[1]:m.strides[2],P=M?m.strides[2]:1,B=M?1:m.strides[1],W=f[0],V=M?f[1]:f[2],U=M?f[2]:1,G=M?1:f[1],j=0;j<k;++j)for(var H=0;H<S;++H)for(var q=0;q<T;++q)for(var K=q-D,X=Math.max(0,Math.ceil(K/F)),Y=Math.min(R,(N+K)/F),J=0;J<C;++J){for(var Z=J-O,Q=Math.max(0,Math.ceil(Z/_)),$=Math.min(A,(I+Z)/_),ee=0,te=X;te<Y;++te)for(var ne=te*F-K,re=Q;re<$;++re)for(var ae=W*j+V*te+U*re,ie=b*(N-1-ne)+x*(I-1-(re*_-Z))+w*H,oe=0;oe<E;++oe){ee+=g[ae+G*oe]*y[ie+oe]}v[L*j+z*q+P*J+B*H]=ee}return n.makeTensorInfo(m.shape,m.dtype,m.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var yG={kernelName:hy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations;DW([a,i],"conv3d");for(var l=SI(a.shape,i.shape,o,u,s),c=l.filterDepth,p=l.filterHeight,f=l.filterWidth,h=l.dilationDepth,d=l.dilationHeight,m=l.dilationWidth,v=l.padInfo,g=v.front,y=v.left,b=v.top,x=new tw(l.outShape,a.dtype),w=n.data.get(a.dataId).values,k=n.data.get(i.dataId).values,N=x.values,I=xg(a.shape),S=xg(i.shape),T=0;T<l.batchSize;++T)for(var C=T*I[0],E=T*x.strides[0],R=0;R<l.outDepth;++R)for(var A=E+R*x.strides[1],F=R*l.strideDepth-g,_=0;_<c;++_){var D=F+_*h;if(!(D<0||D>=l.inDepth))for(var O=_*S[0],M=C+D*I[1],L=0;L<l.outHeight;++L)for(var z=A+L*x.strides[2],P=L*l.strideHeight-b,B=0;B<p;++B){var W=P+B*d;if(!(W<0||W>=l.inHeight))for(var V=O+B*S[1],U=M+W*I[2],G=0;G<l.outWidth;++G)for(var j=z+G*l.outChannels,H=G*l.strideWidth-y,q=0;q<f;++q){var K=H+q*m;if(!(K<0||K>=l.inWidth))for(var X=V+q*S[2],Y=U+K*l.inChannels,J=X,Z=0;Z<l.inChannels;++Z){for(var Q=w[Y+Z],$=0;$<l.outChannels;++$)N[j+$]+=Q*k[J+$];J+=l.outChannels}}}}return n.makeTensorInfo(x.shape,x.dtype,x.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var bG={kernelName:dy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape;DW([a,i],"conv3dBackpropFilterV2");for(var l=xg(a.shape),c=xg(i.shape),p=SI(a.shape,u,o,1,s),f=p.strideDepth,h=p.strideHeight,d=p.strideWidth,m=p.filterDepth,v=p.filterHeight,g=p.filterWidth,y=new tw(p.filterShape,"float32"),b=y.values,x=y.strides,w=x[0],k=x[1],N=x[2],I=x[3],S=n.data.get(i.dataId).values,T=c[0],C=c[1],E=c[2],R=c[3],A=n.data.get(a.dataId).values,F=l[0],_=l[1],D=l[2],O=l[3],M=p.padInfo.front,L=p.padInfo.left,z=p.padInfo.top,P=0;P<m;++P)for(var B=Math.max(0,Math.ceil((M-P)/f)),W=Math.min(p.outDepth,(p.inDepth+M-P)/f),V=P*w,U=0;U<v;++U)for(var G=Math.max(0,Math.ceil((z-U)/h)),j=Math.min(p.outHeight,(p.inHeight+z-U)/h),H=U*k+V,q=0;q<g;++q)for(var K=Math.max(0,Math.ceil((L-q)/d)),X=Math.min(p.outWidth,(p.inWidth+L-q)/d),Y=q*N+H,J=0;J<p.inChannels;++J)for(var Z=J*I+Y,Q=0;Q<p.outChannels;++Q){for(var $=0,ee=0;ee<p.batchSize;++ee)for(var te=ee*F,ne=ee*T,re=B;re<W;++re)for(var ae=(P+re*f-M)*_+te,ie=re*C+ne,oe=G;oe<j;++oe)for(var se=(U+oe*h-z)*D+ae,ue=oe*E+ie,le=K;le<X;++le){var ce=le*R+ue;$+=A[(q+le*d-L)*O+se+J]*S[ce+Q]}b[Z+Q]=$}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var xG={kernelName:my,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=r.inputShape;DW([a],"conv3dBackpropInputV2");for(var l=xg(a.shape),c=xg(i.shape),p=SI(u,i.shape,s,1,o),f=new tw(p.inShape,"float32"),h=f.values,d=f.strides,m=d[0],v=d[1],g=d[2],y=d[3],b=n.data.get(a.dataId).values,x=l[0],w=l[1],k=l[2],N=l[3],I=n.data.get(i.dataId).values,S=c[0],T=c[1],C=c[2],E=c[3],R=p.batchSize,A=p.filterDepth,F=p.filterHeight,_=p.filterWidth,D=p.inChannels,O=p.inDepth,M=p.inHeight,L=p.inWidth,z=p.outChannels,P=p.outDepth,B=p.outHeight,W=p.outWidth,V=p.strideDepth,U=p.strideHeight,G=p.strideWidth,j=A-1-p.padInfo.front,H=F-1-p.padInfo.top,q=_-1-p.padInfo.left,K=0;K<R;++K)for(var X=0;X<D;++X)for(var Y=0;Y<O;++Y)for(var J=Y-j,Z=Math.max(0,Math.ceil(J/V)),Q=Math.min(P,(A+J)/V),$=0;$<M;++$)for(var ee=$-H,te=Math.max(0,Math.ceil(ee/U)),ne=Math.min(B,(F+ee)/U),re=0;re<L;++re){for(var ae=re-q,ie=Math.max(0,Math.ceil(ae/G)),oe=Math.min(W,(_+ae)/G),se=0,ue=Z;ue<Q;++ue)for(var le=ue*V-J,ce=te;ce<ne;++ce)for(var pe=ce*U-ee,fe=ie;fe<oe;++fe)for(var he=x*K+w*ue+k*ce+N*fe,de=S*(A-1-le)+T*(F-1-pe)+C*(_-1-(fe*G-ae))+E*X,me=0;me<z;++me){se+=b[he+me]*I[de+me]}h[m*K+v*Y+g*$+y*re+X]=se}return n.makeTensorInfo(f.shape,f.dtype,f.values)}},wG=rV(vy,(function(e){return Math.cos(e)})),kG={kernelName:vy,backendName:"cpu",kernelFunc:wG},NG=rV(gy,(function(e){return Math.cosh(e)})),IG={kernelName:gy,backendName:"cpu",kernelFunc:NG};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var SG={kernelName:by,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,c=a.shape,p=c[0],f=c[1],h=c[2],d=c[3],m=i.shape[0],v=s[0],g=s[1],y=zk([m,v,g,d],"float32"),b=n.data.get(i.dataId).values,x=n.data.get(o.dataId).values,w=n.data.get(a.dataId).values,k=xg(a.shape),N=xg(y.shape),I=0;I<m;I++){var S=4*I,T=b[S],C=b[S+1],E=b[S+2],R=b[S+3],A=x[I];if(!(A>=p))for(var F=v>1?(E-T)*(f-1)/(v-1):0,_=g>1?(R-C)*(h-1)/(g-1):0,D=0;D<v;D++){var O=v>1?T*(f-1)+D*F:.5*(T+E)*(f-1);if(O<0||O>f-1)for(var M=0;M<g;M++)for(var L=0;L<d;L++){var z=L+M*N[2]+D*N[1]+I*N[0];y.values[z]=l}else if("bilinear"===u)for(var P=Math.floor(O),B=Math.ceil(O),W=O-P,V=0;V<g;V++){var U=g>1?C*(h-1)+V*_:.5*(C+R)*(h-1);if(U<0||U>h-1)for(var G=0;G<d;G++){var j=G+V*N[2]+D*N[1]+I*N[0];y.values[j]=l}else for(var H=Math.floor(U),q=Math.ceil(U),K=U-H,X=0;X<d;X++){var Y=X+H*k[2]+P*k[1]+A*k[0],J=w[Y],Z=w[Y=X+q*k[2]+P*k[1]+A*k[0]],Q=w[Y=X+H*k[2]+B*k[1]+A*k[0]],$=J+(Z-J)*K,ee=Q+(w[Y=X+q*k[2]+B*k[1]+A*k[0]]-Q)*K;Y=X+V*N[2]+D*N[1]+I*N[0],y.values[Y]=$+(ee-$)*W}}else for(var te=0;te<g;++te){var ne=g>1?C*(h-1)+te*_:.5*(C+R)*(h-1);if(ne<0||ne>h-1)for(var re=0;re<d;re++){var ae=re+te*N[2]+D*N[1]+I*N[0];y.values[ae]=l}else for(var ie=Math.round(ne),oe=Math.round(O),se=0;se<d;se++){var ue=se+ie*k[2]+oe*k[1]+A*k[0],le=se+te*N[2]+D*N[1]+I*N[0];y.values[le]=w[ue]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var TG={kernelName:yy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse;DW(a,"cumsum");var u=uT([i],a.shape.length),l=a;null!=u&&(l=qV({inputs:{x:a},backend:n,attrs:{perm:u}}));var c=cT(1,a.shape.length)[0];if(c!==l.shape.length-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(l.shape.length-1)+" but got axis="+c);for(var p=fw(l.dtype,"int32"),f=Ig(Zv(l.shape),p),h=n.data.get(l.dataId).values,d=l.shape[l.shape.length-1],m=s?function(e,t){return e+d-t-1}:function(e,t){return e+t},v=0;v<h.length;v+=d)for(var g=0;g<d;g++){var y=m(v,g);if(0===g)f[y]=o?0:h[y];else{var b=m(v,g-1);f[y]=o?h[b]+f[b]:h[y]+f[b]}}var x=n.makeTensorInfo(l.shape,p,f);if(null!=u){var w=qV({inputs:{x},backend:n,attrs:{perm:lT(u)}});return n.disposeIntermediateTensorInfo(x),n.disposeIntermediateTensorInfo(l),w}return x}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var CG={kernelName:xy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=eV(n.data.get(a.dataId).values,n.data.get(i.dataId).values,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}if(2===a.shape.length){var l=tV(n.bufferSync(a),n.bufferSync(i),o,s);return n.makeTensorInfo(l.shape,i.dtype,l.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+a.shape.length+".")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var EG={kernelName:wy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;Kv("NHWC"===o,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+o})),Kv(i>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+i}));for(var s=a.shape[0],u=a.shape[1],l=a.shape[2],c=a.shape[3],p=u*i,f=l*i,h=c/(i*i),d=n.data.get(a.dataId).values,m=new Float32Array(s*p*f*h),v=0,g=0;g<s;++g)for(var y=0;y<p;++y)for(var b=Math.floor(y/i),x=y%i,w=0;w<f;++w)for(var k=Math.floor(w/i),N=(x*i+w%i)*h,I=0;I<h;++I){var S=I+N+c*(k+l*(b+u*g));m[v++]=d[S]}return n.makeTensorInfo([s,p,f,h],a.dtype,m)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function RG(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode;DW([a,i],"depthwiseConv2DNative");var c=xg(a.shape),p=xg(i.shape),f=u;null==f&&(f=[1,1]),Kv(_I(o,f),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+f+"'"}));for(var h=II(a.shape,i.shape,o,f,s,l,!0),d=h.filterHeight,m=h.filterWidth,v=h.dilationHeight,g=h.dilationWidth,y=h.padInfo,b=y.left,x=y.top,w=h.outChannels/h.inChannels,k=new tw(h.outShape,a.dtype),N=n.data.get(a.dataId).values,I=n.data.get(i.dataId).values,S=k.values,T=0;T<h.batchSize;++T)for(var C=T*c[0],E=T*k.strides[0],R=0;R<h.outHeight;++R)for(var A=E+R*k.strides[1],F=R*h.strideHeight-b,_=0;_<d;++_){var D=F+_*v;if(!(D<0||D>=h.inHeight))for(var O=_*p[0],M=C+D*c[1],L=0;L<h.outWidth;++L)for(var z=A+L*k.strides[2],P=L*h.strideWidth-x,B=0;B<m;++B){var W=P+B*g;if(!(W<0||W>=h.inWidth))for(var V=O+B*p[1],U=M+W*h.inChannels,G=z,j=V,H=0;H<h.inChannels;++H){for(var q=N[U+H],K=0;K<w;++K)S[G+K]+=q*I[j+K];G+=w,j+=w}}}return n.makeTensorInfo(k.shape,k.dtype,k.values)}var AG={kernelName:ky,backendName:"cpu",kernelFunc:RG};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var FG={kernelName:Ny,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.filterShape;DW([a,i],"depthwiseConv2dNativeBackpropFilter");for(var p=II(a.shape,c,o,s,u,l,!0),f=p.strideHeight,h=p.strideWidth,d=p.filterHeight,m=p.filterWidth,v=new tw(p.filterShape,"float32"),g=p.padInfo.left,y=p.padInfo.top,b=p.outChannels/p.inChannels,x=n.data.get(a.dataId).values,w=new tw(a.shape,a.dtype,x),k=n.data.get(i.dataId).values,N=new tw(i.shape,i.dtype,k),I=0;I<d;++I)for(var S=Math.max(0,Math.ceil((y-I)/f)),T=Math.min(p.outHeight,(p.inHeight+y-I)/f),C=0;C<m;++C)for(var E=Math.max(0,Math.ceil((g-C)/h)),R=Math.min(p.outWidth,(p.inWidth+g-C)/h),A=0;A<p.outChannels;++A){for(var F=Math.trunc(A/b),_=A%b,D=0,O=0;O<p.batchSize;++O)for(var M=S;M<T;++M)for(var L=I+M*f-y,z=E;z<R;++z){var P=C+z*h-g;D+=w.get(O,L,P,F)*N.get(O,M,z,A)}v.set(D,I,C,F,_)}return n.makeTensorInfo(v.shape,v.dtype,v.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var _G={kernelName:Iy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.inputShape;DW([a,i],"depthwiseConv2DNativeBackpropInput");for(var p=xg(a.shape),f=xg(i.shape),h=II(c,i.shape,o,s,u,l,!0),d=new tw(h.inShape,"float32"),m=d.values,v=d.strides,g=v[0],y=v[1],b=v[2],x=n.data.get(a.dataId).values,w=p[0],k=p[1],N=p[2],I=n.data.get(i.dataId).values,S=f[0],T=f[1],C=f[2],E=h.batchSize,R=h.filterHeight,A=h.filterWidth,F=h.inChannels,_=h.inHeight,D=h.inWidth,O=h.outChannels,M=h.outHeight,L=h.outWidth,z=h.strideHeight,P=h.strideWidth,B=R-1-h.padInfo.top,W=A-1-h.padInfo.left,V=O/F,U=0;U<E;++U)for(var G=0;G<F;++G)for(var j=0;j<_;++j)for(var H=j-B,q=Math.max(0,Math.ceil(H/z)),K=Math.min(M,(R+H)/z),X=0;X<D;++X){for(var Y=X-W,J=Math.max(0,Math.ceil(Y/P)),Z=Math.min(L,(A+Y)/P),Q=0,$=q;$<K;++$)for(var ee=$*z-H,te=J;te<Z;++te)for(var ne=w*U+k*$+N*te,re=S*(R-1-ee)+T*(A-1-(te*P-Y))+C*G,ae=0;ae<V;++ae){Q+=x[ne+(G*V+ae)]*I[re+ae]}m[g*U+y*j+b*X+G]=Q}return n.makeTensorInfo(d.shape,d.dtype,d.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var DG={kernelName:Sy,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=t.x,a=Zv(r.shape),i=n.data.get(r.dataId).values,o=zk([a,a],r.dtype),s=o.values,u=0;u<i.length;u++)s[u*a+u]=i[u];var l=[].concat(r.shape,r.shape);return n.makeTensorInfo(l,o.dtype,o.values)}},OG={kernelName:Ty,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=n,c=l.data.get(a.dataId).values,p=a.shape.length,f=l.data.get(i.dataId).values,h=i.shape.length,d=wI(a.shape,i.shape,o,s,"NHWC",u),m=d.batchSize,v=d.inHeight,g=d.inWidth,y=d.inChannels,b=d.outHeight,x=d.outWidth,w=d.padInfo,k=d.strideHeight,N=d.strideWidth,I=d.filterHeight,S=d.filterWidth,T=d.dilationHeight,C=d.dilationWidth,E=d.outShape,R=Zv(E),A=E.length,F=sg(a.dtype,R),_=0;_<m;++_)for(var D=0;D<b;++D)for(var O=D*k-w.top,M=0;M<x;++M)for(var L=M*N-w.left,z=0;z<y;++z){for(var P=Number.MIN_SAFE_INTEGER,B=0;B<I;++B){var W=O+B*T;if(W>=0&&W<v)for(var V=0;V<S;++V){var U=L+V*C;if(U>=0&&U<g){var G=Cg([_,W,U,z],p,xg(a.shape)),j=Cg([B,V,z],h,xg(i.shape)),H=c[G]+f[j];H>P&&(P=H)}}}F[Cg([_,D,M,z],A,xg(E))]=P}return{dataId:l.write(Bx(F,a.dtype),E,a.dtype),shape:E,dtype:a.dtype}}},MG={kernelName:Ey,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,l=r.dilations,c=n,p=kg(a.shape,c.data.get(a.dataId).values),f=kg(i.shape,c.data.get(i.dataId).values),h=wI(a.shape,i.shape,s,u,"NHWC",l),d=h.batchSize,m=h.inHeight,v=h.inWidth,g=h.inChannels,y=h.outHeight,b=h.outWidth,x=h.padInfo,w=h.strideHeight,k=h.strideWidth,N=h.filterHeight,I=h.filterWidth,S=h.dilationHeight,T=h.dilationWidth,C=h.outShape;Kv(o.rank===C.length,(function(){return"Error in "+Ey+", dy must have the same rank as output "+C.length+", but got "+o.rank}));for(var E=kg(C,c.data.get(o.dataId).values),R=Sg(i.shape,i.dtype),A=0;A<d;++A)for(var F=0;F<y;++F)for(var _=F*w-x.top,D=0;D<b;++D)for(var O=D*k-x.left,M=0;M<g;++M){for(var L=Number.MIN_SAFE_INTEGER,z=0,P=0,B=0;B<N;++B){var W=_+B*S;if(W>=0&&W<m)for(var V=0;V<I;++V){var U=O+V*T;if(U>=0&&U<v){var G=p[A][W][U][M]+f[B][V][M];G>L&&(L=G,z=B,P=V)}}}R[z][P][M]+=E[A][F][D][M]}return{dataId:c.write(Bx(R,a.dtype),i.shape,i.dtype),shape:i.shape,dtype:i.dtype}}},LG={kernelName:Cy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.dy,s=r.strides,u=r.pad,l=r.dilations,c=n,p=kg(a.shape,c.data.get(a.dataId).values),f=kg(i.shape,c.data.get(i.dataId).values),h=wI(a.shape,i.shape,s,u,"NHWC",l),d=h.batchSize,m=h.inHeight,v=h.inWidth,g=h.inChannels,y=h.outHeight,b=h.outWidth,x=h.padInfo,w=h.strideHeight,k=h.strideWidth,N=h.filterHeight,I=h.filterWidth,S=h.dilationHeight,T=h.dilationWidth,C=h.outShape;Kv(o.rank===C.length,(function(){return"Error in "+Cy+", dy must have the same rank as output "+C.length+", but got "+o.rank}));for(var E=kg(C,c.data.get(o.dataId).values),R=Sg(a.shape,a.dtype),A=0;A<d;++A)for(var F=0;F<y;++F)for(var _=F*w-x.top,D=0;D<b;++D)for(var O=D*k-x.left,M=0;M<g;++M){for(var L=Number.MIN_SAFE_INTEGER,z=_<0?0:_,P=O<0?0:O,B=0;B<N;++B){var W=_+B*S;if(W>=0&&W<m)for(var V=0;V<I;++V){var U=O+V*T;if(U>=0&&U<v){var G=p[A][W][U][M]+f[B][V][M];G>L&&(L=G,z=W,P=U)}}}R[A][z][P][M]+=E[A][F][D][M]}return{dataId:c.write(Bx(R,a.dtype),a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var zG={kernelName:Fy,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y;DW([r,a],"eluGrad");for(var i=new Float32Array(Zv(a.shape)),o=n.data.get(a.dataId).values,s=n.data.get(r.dataId).values,u=0;u<o.length;++u){var l=o[u];i[u]=l>=1?s[u]:s[u]*(l+1)}return n.makeTensorInfo(a.shape,"float32",i)}},PG=PW((function(e,t){return e===t?1:0})),BG=XW(Dy,PG,null,"bool"),WG={kernelName:Dy,backendName:"cpu",kernelFunc:BG},VG=rV(_y,(function(e){var t=Math.sign(e),n=Math.abs(e),r=1/(1+.3275911*n);return t*(1-((((1.061405429*r-1.453152027)*r+1.421413741)*r-.284496736)*r+.254829592)*r*Math.exp(-n*n))})),UG={kernelName:_y,backendName:"cpu",kernelFunc:VG};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function GG(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.input,i=r.dim,o=a.shape.length,s=a.shape.slice(),u=i;return i<0&&(Kv(-(o+1)<=i,(function(){return"Axis must be in the interval ["+-(o+1)+", "+o+"]"})),u=o+i+1),s.splice(u,0,1),TU({inputs:{x:a},backend:n,attrs:{shape:s}})}var jG={kernelName:My,backendName:"cpu",kernelFunc:GG},HG=PW((function(e,t){return e/t})),qG=XW(Ry,HG),KG={kernelName:Ry,backendName:"cpu",kernelFunc:qG};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function XG(e,t,n){for(var r=e.shape,a=r[0],i=r[1],o=n.data.get(e.dataId),s=o.complexTensorInfos.real,u=o.complexTensorInfos.imag,l=[a,i],c=Zv(l),p=og("float32",c),f=og("float32",c),h=0;h<a;h++){for(var d=tU({inputs:{x:s},backend:n,attrs:{begin:[h,0],size:[1,i]}}),m=tU({inputs:{x:u},backend:n,attrs:{begin:[h,0],size:[1,i]}}),v=BW({inputs:{real:d,imag:m},backend:n}),g=YG(v,t,n),y=uA(g.real,g.imag),b=0;b<i;b++){var x=fA(y,b);p[h*i+b]=x.real,f[h*i+b]=x.imag}n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v)}var w=n.makeTensorInfo(l,"float32",p),k=n.makeTensorInfo(l,"float32",f),N=BW({inputs:{real:w,imag:k},backend:n});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(k),N}function YG(e,t,n){var r=Zv(e.shape),a=n.data.get(e.dataId),i=n.data.get(a.complexTensorInfos.real.dataId).values,o=n.data.get(a.complexTensorInfos.imag.dataId).values;if(0==((g=r)&g-1)){var s=JG(i,o,r,t,n),u=[e.shape[0],e.shape[1]];if(t){var l=n.makeTensorInfo(u,"float32",s.real),c=n.makeTensorInfo(u,"float32",s.imag),p=n.makeTensorInfo([],"float32",Px(r,"float32")),f=UW({inputs:{x:p},backend:n}),h=KG.kernelFunc({inputs:{a:l,b:p},backend:n}),d=KG.kernelFunc({inputs:{a:c,b:f},backend:n}),m=n.data.get(h.dataId).values,v=n.data.get(d.dataId).values;return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),{real:m,imag:v}}return s}var g,y=function(e,t,n){for(var r=new Float32Array(2*t),a=0;a<t;a++){for(var i=0,o=0,s=0;s<t;s++){var u=mA(a*s,t,n),l=fA(e,s);i+=l.real*u.real-l.imag*u.imag,o+=l.real*u.imag+l.imag*u.real}n&&(i/=t,o/=t),hA(r,i,o,a)}return r}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */(uA(i,o),r,t);return lA(y)}function JG(e,t,n,r,a){if(1===n)return{real:e,imag:t};var i=uA(e,t),o=n/2,s=cA(i),u=s.real,l=s.imag,c=[u.length],p=a.makeTensorInfo(c,"float32",u),f=a.makeTensorInfo(c,"float32",l),h=BW({inputs:{real:p,imag:f},backend:a}),d=pA(i),m=d.real,v=d.imag,g=[m.length],y=a.makeTensorInfo(g,"float32",m),b=a.makeTensorInfo(g,"float32",v),x=BW({inputs:{real:y,imag:b},backend:a}),w=JG(u,l,o,r,a),k=w.real,N=w.imag,I=[k.length],S=a.makeTensorInfo(I,"float32",k),T=a.makeTensorInfo(I,"float32",N),C=BW({inputs:{real:S,imag:T},backend:a}),E=JG(m,v,o,r,a),R=E.real,A=E.imag,F=[R.length],_=a.makeTensorInfo(F,"float32",R),D=a.makeTensorInfo(F,"float32",A),O=BW({inputs:{real:_,imag:D},backend:a}),M=dA(n,r),L=[M.real.length],z=a.makeTensorInfo(L,"float32",M.real),P=a.makeTensorInfo(L,"float32",M.imag),B=BW({inputs:{real:z,imag:P},backend:a}),W=PV({inputs:{a:B,b:O},backend:a}),V=QW({inputs:{a:C,b:W},backend:a}),U=lU({inputs:{a:C,b:W},backend:a}),G=jW({inputs:{input:V},backend:a}),j=jW({inputs:{input:U},backend:a}),H=cG({inputs:{input:V},backend:a}),q=cG({inputs:{input:U},backend:a}),K=fG({inputs:[G,j],backend:a,attrs:{axis:0}}),X=fG({inputs:[H,q],backend:a,attrs:{axis:0}}),Y=a.data.get(K.dataId).values,J=a.data.get(X.dataId).values;return a.disposeIntermediateTensorInfo(p),a.disposeIntermediateTensorInfo(f),a.disposeIntermediateTensorInfo(h),a.disposeIntermediateTensorInfo(y),a.disposeIntermediateTensorInfo(b),a.disposeIntermediateTensorInfo(x),a.disposeIntermediateTensorInfo(S),a.disposeIntermediateTensorInfo(T),a.disposeIntermediateTensorInfo(C),a.disposeIntermediateTensorInfo(_),a.disposeIntermediateTensorInfo(D),a.disposeIntermediateTensorInfo(O),a.disposeIntermediateTensorInfo(z),a.disposeIntermediateTensorInfo(P),a.disposeIntermediateTensorInfo(B),a.disposeIntermediateTensorInfo(W),a.disposeIntermediateTensorInfo(V),a.disposeIntermediateTensorInfo(U),a.disposeIntermediateTensorInfo(G),a.disposeIntermediateTensorInfo(H),a.disposeIntermediateTensorInfo(j),a.disposeIntermediateTensorInfo(q),a.disposeIntermediateTensorInfo(K),a.disposeIntermediateTensorInfo(X),{real:Y,imag:J}}var ZG={kernelName:zy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.input,a=Zv(r.shape),i=r.shape[r.shape.length-1],o=TU({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=XG(o,!1,n),u=TU({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function QG(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype||gg(a),o=sg(i,Zv(r));return function(e,t,n){e.fill(t)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */(o,a),t.makeTensorInfo(r,i,o)}var $G={kernelName:Py,backendName:"cpu",kernelFunc:QG};var ej={kernelName:By,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=(e.attrs,e.backend),r=t.image,a=n,i=og(r.dtype,Zv(r.shape)),o=r.shape,s=o[0],u=o[1],l=o[2],c=o[3],p=a.data.get(r.dataId).values,f=0;f<s;f++)for(var h=f*l*u*c,d=0;d<u;d++)for(var m=d*(l*c),v=0;v<l;v++)for(var g=v*c,y=0;y<c;y++){var b=[s,d,v,y][2],x=Math.round(l-b),w=h+m+g+y,k=p[w];if(x>=0&&x<l)k=p[h+m+x*c+y];i[w]=k}return{dataId:a.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},tj=PW((function(e,t){return Math.floor(e/t)})),nj=XW(Vy,tj,null,"int32"),rj={kernelName:Vy,backendName:"cpu",kernelFunc:nj};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var aj={kernelName:Ex,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,p=r.dilations,f=r.dimRoundingMode,h=r.activation,d=r.leakyreluAlpha,m=dG({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:p,dimRoundingMode:f}});if(o){var v=m;m=QW({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(h){var g=m;m=SU(n,m,h,s,d),n.disposeIntermediateTensorInfo(g)}return m}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var ij={kernelName:Rx,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dataFormat,p=r.dilations,f=r.dimRoundingMode,h=r.activation,d=r.leakyreluAlpha,m=RG({inputs:{x:a,filter:i},backend:n,attrs:{strides:u,pad:l,dataFormat:c,dilations:p,dimRoundingMode:f}});if(o){var v=m;m=QW({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(v)}if(h){var g=m;m=SU(n,m,h,s,d),n.disposeIntermediateTensorInfo(g)}return m}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var oj={kernelName:jy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=Zv(r.shape),o=a.shape,s=o[o.length-1],u=dN(r,a),l=u[0],c=u[1],p=u[2],f=u[3];if(0===c)return n.makeTensorInfo(l,r.dtype,[]);for(var h=zk([c,p],r.dtype),d=n.data.get(a.dataId).values,m=n.data.get(r.dataId).values,v=0;v<c;v++){for(var g=[],y=0,b=0;b<s;b++){var x=d[v*s+b];y+=x*f[b],g.push(x)}if(y<0||y>=i/p)throw new Error("Invalid indices: "+g+" does not index into "+r.shape);for(var w=0;w<p;w++)h.values[v*p+w]=m[y*p+w]}return n.makeTensorInfo(l,h.dtype,h.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var sj={kernelName:Gy,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims;DW([a,i],"gatherV2");var u=s;null==s&&(u=0);var l=Zv(i.shape),c=bA(a,i,ag(o,a.shape)[0],u),p=TU({inputs:{x:a},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=TU({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,l/c.batchSize]}}),h=[c.batchSize,c.outerSize,l/c.batchSize,c.sliceSize],d=n.bufferSync(f),m=yV(n.bufferSync(p),d,h);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.makeTensorInfo(c.outputShape,m.dtype,m.values)}},uj=PW((function(e,t){return e>=t?1:0})),lj=XW(qy,uj,null,"bool"),cj={kernelName:qy,backendName:"cpu",kernelFunc:lj};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var pj={kernelName:Xy,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=t.input,a=Zv(r.shape),i=r.shape[r.shape.length-1],o=TU({inputs:{x:r},backend:n,attrs:{shape:[a/i,i]}}),s=XG(o,!0,n),u=TU({inputs:{x:s},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}},fj=rV(Jy,(function(e){return Number.isFinite(e)?1:0}),"bool"),hj={kernelName:Jy,backendName:"cpu",kernelFunc:fj},dj=rV(Zy,(function(e){return Math.abs(e)===1/0?1:0}),"bool"),mj={kernelName:Zy,backendName:"cpu",kernelFunc:dj},vj=rV(Qy,(function(e){return Number.isNaN(e)?1:0}),"bool"),gj={kernelName:Qy,backendName:"cpu",kernelFunc:vj},yj=PW((function(e,t){return e<=t?1:0})),bj=XW(tb,yj,null,"bool"),xj={kernelName:tb,backendName:"cpu",kernelFunc:bj};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var wj={kernelName:nb,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.backend,n=e.attrs,r=SV(n.start,n.stop,n.num);return t.makeTensorInfo([r.length],"float32",r)}},kj=rV(ab,(function(e){return Math.log1p(e)})),Nj={kernelName:ab,backendName:"cpu",kernelFunc:kj},Ij=PW((function(e,t){return e&&t})),Sj=XW(ib,Ij,null,"bool"),Tj={kernelName:ib,backendName:"cpu",kernelFunc:Sj},Cj=rV(ob,(function(e){return e?0:1}),"bool"),Ej={kernelName:ob,backendName:"cpu",kernelFunc:Cj},Rj=PW((function(e,t){return e||t})),Aj=XW(sb,Rj,null,"bool"),Fj={kernelName:sb,backendName:"cpu",kernelFunc:Aj};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var _j={kernelName:lb,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta;DW(a,"LRN");var l=a.shape[3],c=l-1,p=n.data.get(a.dataId).values,f=Zv(a.shape),h=new Float32Array(f);function d(e){for(var t=e%l,n=e-t+Math.max(0,t-i),r=e-t+Math.min(t+i,c),a=0;n<=r;n++){var o=p[n];a+=o*o}return a}for(var m=0;m<f;m++){var v=d(m),g=p[m]*Math.pow(o+s*v,-u);h[m]=g}return n.makeTensorInfo(a.shape,a.dtype,h)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Dj={kernelName:cb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,c=r.beta;DW(o,"LRNGrad");for(var p=Zv(o.shape),f=o.shape[3],h=n.data.get(o.dataId).values,d=n.data.get(a.dataId).values,m=n.data.get(i.dataId).values,v=new Float32Array(p),g=p,y=0;y<g;y++){for(var b=y%f,x=y-b+Math.max(0,b-s),w=y-b+Math.min(f,b+s+1),k=0,N=x;N<w;N++)k+=Math.pow(d[N],2);k=l*k+u;for(var I=x;I<w;I++){var S=-2*l*c*d[I]*m[y]/k;y===I&&(S+=Math.pow(k,-c)),S*=h[y],v[I]+=S}}return n.makeTensorInfo(o.shape,a.dtype,v)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Oj(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=n,u=a.shape,l=u.length,c=ag(i,u),p=c,f=uT(p,l),h=s.data.get(a.dataId).values;if(null!=f){for(var d=new Array(l),m=0;m<d.length;m++)d[m]=u[f[m]];h=HV(h,u,a.dtype,f,d),p=cT(p.length,l),u=d}DW(a,"max"),sT("max",p,l);var v=iT(u,p),g=v[0],y=RV(h,Zv(v[1]),g,a.dtype),b=s.write(y,g,a.dtype),x=g;o&&(x=oT(g,c));return{dataId:b,shape:x,dtype:a.dtype}}var Mj={kernelName:pb,backendName:"cpu",kernelFunc:Oj};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Lj={kernelName:hb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;DW(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Kv(_I(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+o+" and dilations '1'"}));var l,c=kI(a.shape,i,o,1,s,u);if(1===c.filterWidth&&1===c.filterHeight&&Qv(c.inShape,c.outShape))l=UW({inputs:{x:a},backend:n});else{var p=n.data.get(a.dataId).values,f=xg(a.shape),h=ZU(p,a.shape,a.dtype,f,c,"max");l=n.makeTensorInfo(c.outShape,a.dtype,h.values)}return l}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var zj={kernelName:mb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat,c=r.dilations;DW(a,"maxPool3d");var p=c;null==p&&(p=[1,1,1]);var f=NI(a.shape,i,o,p,s,u,l),h=$U(n.data.get(a.dataId).values,a.shape,a.dtype,xg(a.shape),f,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Pj={kernelName:vb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dilations,c=r.dimRoundingMode;DW([a,i],"maxPool3DGrad");for(var p=NI(i.shape,o,s,l,u,c),f=function(e,t){for(var n=zk(t.outShape,"int32"),r=t.strideDepth,a=t.strideHeight,i=t.strideWidth,o=t.dilationDepth,s=t.dilationHeight,u=t.dilationWidth,l=t.effectiveFilterDepth,c=t.effectiveFilterHeight,p=t.effectiveFilterWidth,f=t.padInfo.front,h=t.padInfo.top,d=t.padInfo.left,m=0;m<t.batchSize;++m)for(var v=0;v<t.inChannels;++v)for(var g=0;g<t.outDepth;++g){for(var y=g*r-f,b=y;b<0;)b+=o;for(var x=Math.min(t.inDepth,l+y),w=0;w<t.outHeight;++w){for(var k=w*a-h,N=k;N<0;)N+=s;for(var I=Math.min(t.inHeight,c+k),S=0;S<t.outWidth;++S){for(var T=S*i-d,C=T;C<0;)C+=u;for(var E=Math.min(t.inWidth,p+T),R=Number.NEGATIVE_INFINITY,A=-1,F=b;F<x;F+=o)for(var _=F-y,D=N;D<I;D+=s)for(var O=D-k,M=C;M<E;M+=u){var L=M-T,z=e.get(m,F,D,M,v);z>=R&&(R=z,A=_*c*p+O*c+L)}n.set(A,m,g,w,S,v)}}}return n}(n.bufferSync(i),p),h=p.strideDepth,d=p.strideHeight,m=p.strideWidth,v=p.dilationDepth,g=p.dilationHeight,y=p.dilationWidth,b=p.effectiveFilterDepth,x=p.effectiveFilterHeight,w=p.effectiveFilterWidth,k=b-1-p.padInfo.front,N=w-1-p.padInfo.left,I=x-1-p.padInfo.top,S=zk(i.shape,"float32"),T=n.bufferSync(a),C=0;C<p.batchSize;++C)for(var E=0;E<p.inChannels;++E)for(var R=0;R<p.inDepth;++R)for(var A=0;A<p.inHeight;++A)for(var F=0;F<p.inWidth;++F){for(var _=R-k,D=A-I,O=F-N,M=0,L=0;L<b;L+=v){var z=(_+L)/h;if(!(z<0||z>=p.outDepth||Math.floor(z)!==z))for(var P=0;P<x;P+=g){var B=(D+P)/d;if(!(B<0||B>=p.outHeight||Math.floor(B)!==B))for(var W=0;W<w;W+=y){var V=(O+W)/m;if(!(V<0||V>=p.outWidth||Math.floor(V)!==V)){var U=b*x*w-1-f.get(C,z,B,V,E)===L*x*w+P*w+W?1:0;if(0!==U)M+=T.get(C,z,B,V,E)*U}}}}S.set(M,C,R,A,F,E)}return n.makeTensorInfo(S.shape,S.dtype,S.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Bj={kernelName:db,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;DW([i,t.output],"maxPoolGrad");for(var s=r.filterSize,u=r.strides,l=r.pad,c=r.dimRoundingMode,p=kI(o.shape,s,u,1,l,c),f=n.data.get(o.dataId).values,h=zk(p.outShape,o.dtype,QU(f,o.shape,o.dtype,p).values),d=p.strideHeight,m=p.strideWidth,v=p.dilationHeight,g=p.dilationWidth,y=p.effectiveFilterHeight,b=p.effectiveFilterWidth,x=b-1-p.padInfo.left,w=y-1-p.padInfo.top,k=zk(o.shape,"float32"),N=n.data.get(a.dataId).values,I=zk(a.shape,"float32",N),S=0;S<p.batchSize;++S)for(var T=0;T<p.inChannels;++T)for(var C=0;C<p.inHeight;++C)for(var E=0;E<p.inWidth;++E){for(var R=C-w,A=E-x,F=0,_=0;_<y;_+=v){var D=(R+_)/d;if(!(D<0||D>=p.outHeight||Math.floor(D)!==D))for(var O=0;O<b;O+=g){var M=(A+O)/m;if(!(M<0||M>=p.outWidth||Math.floor(M)!==M)){var L=y*b-1-h.get(S,D,M,T)===_*b+O?1:0;if(0!==L)F+=I.get(S,D,M,T)*L}}}k.set(F,S,C,E,T)}return n.makeTensorInfo(k.shape,k.dtype,k.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var Wj={kernelName:gb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,l=r;DW(a,"MaxPoolWithArgmax");var c=l.data.get(a.dataId).values,p=kI(a.shape,i,o,[1,1],s),f=function(e,t,n,r,a){var i=ZU(e,0,n,xg(t),a,"max"),o=QU(e,t,n,a,!0,r);return[i.values,o.values]}(c,a.shape,a.dtype,u,p),h=f[0],d=f[1],m=l.write(h,p.outShape,a.dtype),v=l.write(d,p.outShape,a.dtype);return[{dataId:m,shape:p.outShape,dtype:a.dtype},{dataId:v,shape:p.outShape,dtype:"int32"}]}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Vj(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims;DW(i,"sum");var u=(t="bool"===i.dtype?qW({inputs:{x:i},backend:r,attrs:{dtype:"int32"}}):UW({inputs:{x:i},backend:r})).shape.length,l=ag(o,t.shape),c=uT(l,u),p=l,f=t;null!=c&&(f=qV({inputs:{x:t},backend:r,attrs:{perm:c}}),p=cT(p.length,u)),sT("sum",p,f.shape.length);for(var h=iT(f.shape,p),d=h[0],m=h[1],v=VW(r,d,fw(f.dtype,"int32")),g=Zv(m),y=r.data.get(v.dataId).values,b=r.data.get(f.dataId).values,x=0;x<y.length;++x){for(var w=x*g,k=0,N=0;N<g;++N)k+=b[w+N];y[x]=k}if(s){var I=v;v=TU({inputs:{x:v},backend:r,attrs:{shape:oT(v.shape,l)}}),r.disposeIntermediateTensorInfo(I)}return r.disposeIntermediateTensorInfo(t),null!=c&&r.disposeIntermediateTensorInfo(f),v}var Uj={kernelName:ox,backendName:"cpu",kernelFunc:Vj};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Gj={kernelName:yb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=ag(i,a.shape),u=Zv(iT(a.shape,s)[1]),l=[],c=n.makeTensorInfo([],"float32",new Float32Array([u]));l.push(c);var p=qW({inputs:{x:a},backend:n,attrs:{dtype:"float32"}});l.push(p);var f=qG({inputs:{a:p,b:c},backend:n});l.push(f);var h=Vj({inputs:{x:f},backend:n,attrs:{axis:i,keepDims:o}});return l.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),h}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var jj={kernelName:bb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims;DW(a,"min");var s=ag(i,a.shape),u=s,l=uT(u,a.shape.length),c=a;null!=l&&(c=qV({inputs:{x:a},backend:n,attrs:{perm:l}}),u=cT(u.length,a.shape.length)),sT("min",u,c.shape.length);for(var p=iT(c.shape,u),f=p[0],h=Zv(p[1]),d=Ig(Zv(f),c.dtype),m=n.data.get(c.dataId).values,v=0;v<d.length;++v){for(var g=v*h,y=m[g],b=0;b<h;++b){var x=m[g+b];x<y&&(y=x)}d[v]=y}null!=l&&n.disposeIntermediateTensorInfo(c);var w=n.makeTensorInfo(f,c.dtype,d);if(o){var k=TU({inputs:{x:w},backend:n,attrs:{shape:oT(f,s)}});return n.disposeIntermediateTensorInfo(w),k}return w}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Hj={kernelName:wb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode;DW(a,"mirrorPad");for(var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),l=i.map((function(e,t){return e[0]+a.shape[t]})),c="reflect"===o?0:1,p=n.data.get(a.dataId).values,f=a.shape.length,h=xg(a.shape),d=Zv(s),m=s.length,v=xg(s),g=og(a.dtype,d),y=0;y<d;y++){for(var b=Eg(y,m,v),x=0;x<m;x++)b[x]<u[x]?b[x]=2*u[x]-b[x]-c:b[x]>=l[x]&&(b[x]=2*(l[x]-1)-b[x]+c);b=b.map((function(e,t){return e-u[t]}));var w=Cg(b,f,h);g[y]=p[w]}return{dataId:n.write(g,s,a.dtype),shape:s,dtype:a.dtype}}},qj=PW((function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t})),Kj=XW(kb,qj),Xj={kernelName:kb,backendName:"cpu",kernelFunc:Kj};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Yj(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.dim,o=a.shape.length,s=i;if(-1===s&&(s=o-1),s!==o-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+o+" and dim was "+s);var u=ag([s],a.shape),l=Oj({inputs:{x:a},backend:n,attrs:{reductionIndices:u,keepDims:!1}}),c=oT(l.shape,u),p=TU({inputs:{x:l},backend:n,attrs:{shape:c}}),f=lU({inputs:{a,b:p},backend:n}),h=cV({inputs:{x:f},backend:n}),d=Vj({inputs:{x:h},backend:n,attrs:{axis:u,keepDims:!1}}),m=TU({inputs:{x:d},backend:n,attrs:{shape:c}}),v=qG({inputs:{a:h,b:m},backend:n});return n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),v}var Jj={kernelName:lx,backendName:"cpu",kernelFunc:Yj};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Zj={kernelName:Nb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized;DW(a,"multinomial");for(var u=s?a:Yj({inputs:{logits:a},backend:n,attrs:{dim:-1}}),l=u.shape[0],c=u.shape[1],p=n.data.get(u.dataId).values,f=[l,i],h=Ig(Zv(f),"int32"),d=0;d<l;++d){var m=d*c,v=new Float32Array(c-1);v[0]=p[m];for(var g=1;g<v.length;++g)v[g]=v[g-1]+p[m+g];for(var y=QT(o.toString()),b=d*i,x=0;x<i;++x){var w=y();h[b+x]=v.length;for(var k=0;k<v.length;k++)if(w<v[k]){h[b+x]=k;break}}}return s||n.disposeIntermediateTensorInfo(u),n.makeTensorInfo(f,"int32",h)}},Qj=YE;
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var $j={kernelName:Cb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold;DW(a,"NonMaxSuppression");var l=n.data.get(a.dataId).values,c=n.data.get(i.dataId).values,p=Qj(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}},eH=JE;
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var tH={kernelName:Eb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize;DW(a,"NonMaxSuppressionPadded");var c=n.data.get(a.dataId).values,p=n.data.get(i.dataId).values,f=eH(c,p,o,s,u,l),h=f.selectedIndices,d=f.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},nH=ZE;
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var rH={kernelName:Rb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma;DW(a,"NonMaxSuppressionWithScore");var c=n.data.get(a.dataId).values,p=n.data.get(i.dataId).values,f=nH(c,p,o,s,u,l),h=f.selectedIndices,d=f.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([d.length],"float32",new Float32Array(d))]}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var aH={kernelName:Fb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue;DW(a,"oneHot");var u=Zv(a.shape),l=new Float32Array(u*i);l.fill(s);for(var c=n.data.get(a.dataId).values,p=0;p<u;++p)c[p]>=0&&c[p]<i&&(l[p*i+c[p]]=o);return n.makeTensorInfo([].concat(a.shape,[i]),"int32",l)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function iH(e){var t=e.inputs,n=e.backend,r=t.x;if("string"===r.dtype)throw new Error("zerosLike is not supported for string tensors");if("complex64"===r.dtype){var a=jW({inputs:{input:r},backend:n}),i=iH({inputs:{x:a},backend:n}),o=cG({inputs:{input:r},backend:n}),s=iH({inputs:{x:o},backend:n}),u=BW({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return QG({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}var oH={kernelName:Nx,backendName:"cpu",kernelFunc:iH};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var sH={kernelName:Ab,backendName:"cpu",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported for string tensors");if("complex64"===a.dtype){var i=jW({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=cG({inputs:{input:a},backend:r}),u=iH({inputs:{x:s},backend:r}),l=BW({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}return QG({backend:r,attrs:{shape:a.shape,value:1,dtype:a.dtype}})}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function uH(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return GG({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Xv(a,e.shape,"All tensors passed to stack must have matching shapes"),Kv(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=fG({inputs:t.map((function(e){var t=GG({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}var lH={kernelName:_b,backendName:"cpu",kernelFunc:uH};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var cH={kernelName:Db,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue;DW(a,"pad");var s=i.map((function(e,t){return e[0]+a.shape[t]+e[1]})),u=i.map((function(e){return e[0]})),l=n.data.get(a.dataId).values,c=Zv(a.shape),p=a.shape.length,f=xg(a.shape),h=Zv(s),d=s.length,m=xg(s),v=og(a.dtype,h);0!==o&&v.fill(o);for(var g=0;g<c;g++){v[Cg(Eg(g,p,f).map((function(e,t){return e+u[t]})),d,m)]=l[g]}return{dataId:n.write(v,s,a.dtype),shape:s,dtype:a.dtype}}},pH=PW((function(e,t){return Math.pow(e,t)})),fH=XW(Ob,pH),hH={kernelName:Ob,backendName:"cpu",kernelFunc:fH};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var dH={kernelName:zb,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.dtype,o=JV(r,a,n.step,i);return t.makeTensorInfo([o.length],i,o)}},mH=rV(Bb,(function(e){return 1/e})),vH={kernelName:Bb,backendName:"cpu",kernelFunc:mH};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var gH={kernelName:jb,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;DW(a,"resizeBilinear");for(var u=xg(a.shape),l=s[0],c=s[1],p=a.shape,f=p[0],h=p[1],d=p[2],m=p[3],v=n.data.get(a.dataId).values,g=new Float32Array(Zv([f,l,c,m])),y=[i&&l>1?h-1:h,i&&c>1?d-1:d],b=[i&&l>1?l-1:l,i&&c>1?c-1:c],x=0,w=y[0]/b[0],k=y[1]/b[1],N=0;N<f;N++)for(var I=0;I<l;I++){var S=void 0;S=o?w*(I+.5)-.5:w*I;for(var T=Math.max(0,Math.floor(S)),C=S-T,E=Math.min(h-1,Math.ceil(S)),R=N*u[0]+T*u[1],A=N*u[0]+E*u[1],F=0;F<c;F++){var _=void 0;_=o?k*(F+.5)-.5:k*F;for(var D=Math.max(0,Math.floor(_)),O=_-D,M=Math.min(d-1,Math.ceil(_)),L=R+D*u[2],z=A+D*u[2],P=R+M*u[2],B=A+M*u[2],W=0;W<m;W++){var V=v[L+W],U=v[z+W],G=V+(v[P+W]-V)*O,j=G+(U+(v[B+W]-U)*O-G)*C;g[x++]=j}}}return n.makeTensorInfo([f,l,c,m],"float32",g)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var yH={kernelName:Hb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;DW([i,a],"resizeBilinearGrad");for(var s=xg(a.shape),u=a.shape,l=u[0],c=u[1],p=u[2],f=u[3],h=i.shape,d=h[1],m=h[2],v=new Float32Array(l*c*p*f),g=[o&&d>1?c-1:c,o&&m>1?p-1:p],y=[o&&d>1?d-1:d,o&&m>1?m-1:m],b=g[0]/y[0],x=g[1]/y[1],w=n.data.get(i.dataId).values,k=0,N=0;N<l;N++)for(var I=N*s[0],S=0;S<d;S++)for(var T=S*b,C=Math.floor(T),E=Math.min(Math.ceil(T),c-1),R=I+C*s[1],A=I+E*s[1],F=T-C,_=1-F,D=0;D<m;D++)for(var O=D*x,M=Math.floor(O),L=Math.min(Math.ceil(O),p-1),z=O-M,P=1-z,B=R+M*s[2],W=R+L*s[2],V=A+M*s[2],U=A+L*s[2],G=_*P,j=_*z,H=F*P,q=F*z,K=0;K<f;K++){var X=w[k++];v[B+K]+=X*G,v[W+K]+=X*j,v[V+K]+=X*H,v[U+K]+=X*q}return n.makeTensorInfo([l,p,c,f],"float32",v)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var bH={kernelName:Ub,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size;DW(a,"resizeNearestNeighbor");for(var u=xg(a.shape),l=s[0],c=s[1],p=a.shape,f=p[0],h=p[1],d=p[2],m=p[3],v=n.data.get(a.dataId).values,g=new Float32Array(f*l*c*m),y=[i&&l>1?h-1:h,i&&c>1?d-1:d],b=[i&&l>1?l-1:l,i&&c>1?c-1:c],x=y[0]/b[0],w=y[1]/b[1],k=0,N=0;N<f;N++)for(var I=N*u[0],S=0;S<l;S++){var T=o?x*(S+.5):x*S,C=Math.min(h-1,i?Math.round(T):Math.floor(T));o&&(C=Math.max(0,C));for(var E=I+C*u[1],R=0;R<c;R++){var A=o?w*(R+.5):w*R,F=Math.min(d-1,i?Math.round(A):Math.floor(A));o&&(F=Math.max(0,F));for(var _=E+F*u[2],D=0;D<m;D++){var O=v[_+D];g[k++]=O}}}return n.makeTensorInfo([f,l,c,m],a.dtype,g)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var xH={kernelName:Gb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners;DW([i,a],"resizeNearestNeighborGrad");for(var s=xg(a.shape),u=xg(i.shape),l=a.shape,c=l[0],p=l[1],f=l[2],h=l[3],d=i.shape,m=d[1],v=d[2],g=new Float32Array(c*p*f*h),y=n.data.get(i.dataId).values,b=[o&&m>1?p-1:p,o&&v>1?f-1:f],x=[o&&m>1?m-1:m,o&&v>1?v-1:v],w=b[0]/x[0],k=b[1]/x[1],N=1/w,I=1/k,S=2*Math.ceil(N)+2,T=2*Math.ceil(I)+2,C=0;C<c;C++)for(var E=C*s[0],R=0;R<p;R++)for(var A=E+R*s[1],F=Math.floor(R*N),_=Math.floor(F-S/2),D=0;D<f;D++)for(var O=A+D*s[2],M=Math.floor(D*I),L=Math.floor(M-T/2),z=0;z<h;z++){for(var P=0,B=0;B<S;B++){var W=B+_;if(!(W<0||W>=m)){var V=E+W*u[1],U=W*w;if(R===Math.min(p-1,o?Math.round(U):Math.floor(U)))for(var G=0;G<T;G++){var j=G+L;if(!(j<0||j>=v)){var H=V+j*u[2],q=j*k;D===Math.min(f-1,o?Math.round(q):Math.floor(q))&&(P+=y[H+z])}}}}g[O+z]=P}return n.makeTensorInfo(a.shape,a.dtype,g)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var wH={kernelName:Kb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims;DW(a,"reverse");var o=a.shape.length,s=ag(i,a.shape);if(0===o)return UW({inputs:{x:a},backend:n});for(var u=new tw(a.shape,a.dtype),l=n.bufferSync(a),c=function(e){var t=u.indexToLoc(e),n=t.slice();s.forEach((function(e){return n[e]=a.shape[e]-1-n[e]})),u.set.apply(u,[l.get.apply(l,n)].concat(t))},p=0;p<u.size;p++)c(p);return n.makeTensorInfo(u.shape,u.dtype,u.values)}},kH={kernelName:Tx,backendName:"cpu",kernelFunc:function(e){for(var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,l=og(a.dtype,Zv(a.shape)),c=a.shape,p=c[0],f=c[1],h=c[2],d=c[3],m=KR(s,f,h),v=m[0],g=m[1],y=Math.sin(i),b=Math.cos(i),x=u.data.get(a.dataId).values,w=0;w<p;w++)for(var k=w*h*f*d,N=0;N<f;N++)for(var I=N*(h*d),S=0;S<h;S++)for(var T=S*d,C=0;C<d;C++){var E=[p,N,S,C],R=E[2],A=E[1],F=(R-v)*b-(A-g)*y,_=(R-v)*y+(A-g)*b;F=Math.round(F+v),_=Math.round(_+g);var D=o;if("number"!=typeof o&&(D=3===C?255:o[C]),F>=0&&F<h&&_>=0&&_<f)D=x[k+_*(h*d)+F*d+C];l[k+I+T+C]=D}return{dataId:u.write(l,a.shape,a.dtype),shape:a.shape,dtype:a.dtype}}},NH=rV(Xb,(function(e){var t=Math.floor(e);return e-t<.5?Math.floor(e):e-t>.5?Math.ceil(e):t%2==0?t:t+1})),IH={kernelName:Xb,backendName:"cpu",kernelFunc:NH};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function SH(e,t,n,r,a,i,o,s,u,l){var c=[r/a,a],p=e.values,f=t.values;if(0===r)return zk(n,t.dtype);var h=zk(c,t.dtype);h.values.fill(u);for(var d=0;d<i;d++){for(var m=[],v=0,g=0;g<o;g++){var y=p[d*o+g];m.push(y),v+=y*s[g]}if(v<0||v>=r/a)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<a;b++)l?h.values[v*a+b]+=f[d*a+b]:h.values[v*a+b]=0===t.rank?f[0]:f[d*a+b]}return h}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var TH={kernelName:Jb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=yN(0,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,p=s.strides,f=s.outputSize,h=SH(n.bufferSync(a),n.bufferSync(i),o,f,c,l,u,p,0,!0);return n.makeTensorInfo(o,h.dtype,h.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var CH={kernelName:Zb,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e;DW([r,a,i],"select");for(var o=r.shape.length,s=n.data.get(r.dataId).values,u=n.data.get(a.dataId).values,l=n.data.get(i.dataId).values,c=fw(a.dtype,i.dtype),p=Ig(Zv(a.shape),c),f=0,h=0===o||o>1||1===a.shape.length?1:Zv(a.shape.slice(1)),d=0;d<s.length;d++)for(var m=0;m<h;m++)1===s[d]?p[f++]=u[d]:p[f++]=l[d];return n.makeTensorInfo(a.shape,c,p)}},EH=rV(Qb,(function(e){return e>=0?1.0507009873554805*e:1.7580993408473768*(Math.exp(e)-1)})),RH={kernelName:Qb,backendName:"cpu",kernelFunc:EH},AH=rV(rx,(function(e){return 1/(1+Math.exp(-e))})),FH={kernelName:rx,backendName:"cpu",kernelFunc:AH},_H=rV(nx,(function(e){return e<0?-1:e>0?1:0})),DH={kernelName:nx,backendName:"cpu",kernelFunc:_H},OH=rV(ex,(function(e){return Math.sin(e)})),MH={kernelName:ex,backendName:"cpu",kernelFunc:OH},LH=rV(tx,(function(e){return Math.sinh(e)})),zH={kernelName:tx,backendName:"cpu",kernelFunc:LH},PH=Math.log(1.1920928955078125e-7)+2,BH=rV(ax,(function(e){var t=e>-PH,n=e<PH,r=Math.exp(e);return n?r:t?e:Math.log(1+r)})),WH={kernelName:ax,backendName:"cpu",kernelFunc:BH};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var VH={kernelName:sx,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;DW([a],"spaceToBatchND");var s=Zv(i),u=[[0,0]];u.push.apply(u,o);for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=cH.kernelFunc({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),p=XR(c.shape,i,s,!1),f=YR(p.length,i.length,!1),h=JR(c.shape,i,s,!1),d=TU({inputs:{x:c},backend:n,attrs:{shape:p}}),m=qV({inputs:{x:d},backend:n,attrs:{perm:f}}),v=TU({inputs:{x:m},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),v}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var UH={kernelName:hx,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=yN(0,a,s),l=u.sliceRank,c=u.numUpdates,p=u.sliceSize,f=u.strides,h=u.outputSize,d=SH(n.bufferSync(a),n.bufferSync(i),s,h,p,c,l,f,n.data.get(o.dataId).values[0],!1);return n.makeTensorInfo(s,d.dtype,d.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var GH={kernelName:ux,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=ag(r.axis,a.shape)[0],s=vA(a,i,o),u=new Array(a.shape.length).fill(0),l=a.shape.slice();return s.map((function(e){var t=[].concat(l);t[o]=e;var r=tU({inputs:{x:a},backend:n,attrs:{begin:u,size:t}});return u[o]+=e,r}))}},jH=rV(ix,(function(e){return Math.sqrt(e)})),HH={kernelName:ix,backendName:"cpu",kernelFunc:jH},qH={kernelName:px,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n;DW(r,"square");for(var i=a.data.get(r.dataId).values,o=new Float32Array(i.length),s=0;s<i.length;++s){var u=i[s];o[s]=u*u}return{dataId:a.write(o,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},KH=rV(Ix,(function(e,t){var n=t;return isNaN(e)?NaN:e>0?1:n.alpha})),XH={kernelName:Ix,backendName:"cpu",kernelFunc:KH};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var YH={kernelName:dx,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.begin,o=r.end,s=r.strides,u=r.beginMask,l=r.endMask,c=r.ellipsisMask,p=r.newAxisMask,f=r.shrinkAxisMask;DW(a,"stridedSlice");var h,d=MN(a.shape,i,o,s,u,l,c,p,f),m=d.nonStrided,v=d.$begin,g=d.$strides,y=d.size,b=d.newShape,x=d.outShape,w=TU({inputs:{x:a},backend:n,attrs:{shape:b}});if(m){var k=tU({inputs:{x:w},backend:n,attrs:{begin:v,size:y}});h=TU({inputs:{x:k},backend:n,attrs:{shape:x}}),n.disposeIntermediateTensorInfo(k)}else if(x.some((function(e){return 0===e})))h=n.makeTensorInfo(x,a.dtype,[]);else{var N=oU(x,n.bufferSync(w),g,v);h=n.makeTensorInfo(N.shape,N.dtype,N.values)}var I=TU({inputs:{x:h},backend:n,attrs:{shape:x}});return n.disposeIntermediateTensorInfo(w),n.disposeIntermediateTensorInfo(h),I}},JH=rV(mx,(function(e){return Math.tan(e)})),ZH={kernelName:mx,backendName:"cpu",kernelFunc:JH},QH=rV(vx,(function(e){return Math.tanh(e)}));
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var $H={kernelName:gx,backendName:"cpu",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;DW(a,"tile");var o=pU(n.bufferSync(a),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var eq={kernelName:yx,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k;r.sorted,DW(a,"topk");var o=fU(n.data.get(a.dataId).values,a.shape,a.dtype,i),s=o[0],u=o[1];return[n.makeTensorInfo(s.shape,s.dtype,s.values),n.makeTensorInfo(u.shape,u.dtype,u.values)]}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var tq={kernelName:xx,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;DW(i,"unique");var o=hU(r.data.get(i.dataId).values,a,i.shape,i.dtype),s=o.outputValues,u=o.outputShape,l=o.indices;return[r.makeTensorInfo(u,i.dtype,s),r.makeTensorInfo([l.length],"int32",l)]}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var nq={kernelName:wx,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a.shape.length,s=a.shape[i],u=new Array(o-1),l=0,c=0;c<o;c++)c!==i&&(u[l++]=a.shape[c]);var p=new Array(o).fill(0),f=a.shape.slice();f[i]=1;for(var h=new Array(s),d=0;d<h.length;d++){p[i]=d;var m=tU({inputs:{x:a},backend:n,attrs:{begin:p,size:f}});h[d]=TU({inputs:{x:m},backend:n,attrs:{shape:u}}),n.disposeIntermediateTensorInfo(m)}return h}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */for(var rq={kernelName:kx,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments;DW(a,"unsortedSegmentSum");for(var s=[],u=[],l=a.shape.length-i.shape.length,c=i,p=0;p<l;++p){var f=GG({inputs:{input:c},backend:n,attrs:{dim:p+1}});c=f,u.push(f)}for(var h=0;h<o;++h){var d=Px(h,"int32"),m=n.makeTensorInfo([],"int32",d),v=BG({inputs:{a:m,b:c},backend:n}),g=qW({inputs:{x:v},backend:n,attrs:{dtype:"float32"}}),y=PV({inputs:{a:g,b:a},backend:n}),b=Vj({inputs:{x:y},backend:n,attrs:{axis:0,keepDims:!1}});s.push(b),u.push(m),u.push(v),u.push(g),u.push(y),u.push(b)}var x=uH({inputs:s,backend:n,attrs:{axis:0}});return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),x}},aq=0,iq=[AU,zW,_U,OU,$W,MU,LU,zU,PU,BU,VU,GU,HU,XU,JU,eG,tG,nG,rG,RU,aG,iG,oG,KW,sV,uG,WW,lG,hG,vG,gG,mG,bG,xG,yG,kG,IG,SG,TG,CG,EG,AG,FG,_G,DG,OG,LG,MG,KG,mU,zG,WG,UG,pV,jG,dV,ZG,$G,ej,gV,rj,aj,ij,oj,sj,wV,cj,GW,pj,pG,hj,mj,gj,gU,IV,xj,wj,EV,Nj,Tj,Ej,Fj,_j,Dj,_V,Lj,zj,Pj,Bj,Wj,Mj,Gj,jj,MV,Hj,Xj,Zj,BV,VV,$j,tH,rH,jV,aH,sH,lH,cH,hH,xU,YV,dH,HW,vH,kU,IU,CU,gH,yH,bH,xH,wH,kH,IH,$V,TH,CH,RH,FH,DH,MH,zH,nU,Jj,WH,VH,UH,GH,HH,qH,iU,XH,YH,cU,Uj,ZH,{kernelName:vx,backendName:"cpu",kernelFunc:QH},$H,eq,KV,tq,nq,rq,oH]
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;aq<iq.length;aq++){Mx(iq[aq])}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var oq,sq,uq,lq={},cq={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function pq(e){if(!(e in lq)){var t=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=function(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(e);if(t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete lq[e]}),!1),1===e)return t.getContext("webgl",cq)||t.getContext("experimental-webgl",cq);return t.getContext("webgl2",cq)}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */(e);if(null===t)return console.log("Could not get context for WebGL version",e),null;lq[e]=t}var n=lq[e];return n.isContextLost()?(delete lq[e],pq(e)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),lq[e])}function fq(e,t){return[t,e]}function hq(e){var t=Zv(e);return eg(Math.ceil(t/4))}function dq(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function mq(e,t){var n,r,a,i,o,s,u,l,c,p=e;return 2===Dg().getNumber("WEBGL_VERSION")?(n=p.R32F,r=p.R16F,a=p.RGBA16F,i=p.RGBA32F,o=p.RED,s=4,u=1,l=p.HALF_FLOAT,c=p.FLOAT):(n=e.RGBA,r=e.RGBA,a=e.RGBA,i=p.RGBA,o=e.RGBA,s=4,u=4,l=null!=t?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function vq(e,t){var n=t();return Dg().getBool("DEBUG")&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+function(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}(e,t))}(e),n}!function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"}(oq||(oq={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(sq||(sq={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(uq||(uq={}));function gq(e){return!!(Dg().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function yq(e,t){return Rq(e,(function(){return e.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function bq(e,t){var n=Rq(e,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(vq(e,(function(){return e.shaderSource(n,t)})),vq(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw function(e,t){var n=kq.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],a=e.split("\n"),i=a.length.toString().length+2,o=a.map((function(e,t){return tg((t+1).toString(),i)+e})),s=0,u=0;u<o.length;u++)s=Math.max(o[u].length,s);var l=o.slice(0,r-1),c=o.slice(r-1,r),p=o.slice(r);console.log(l.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+tg(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(p.join("\n"))}(t,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var xq,wq,kq=/ERROR: [0-9]+:([0-9]+):/g;function Nq(e,t){if(vq(e,(function(){return e.validateProgram(t)})),!1===e.getProgramParameter(t,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function Iq(e,t,n,r,a,i,o){var s=e.getAttribLocation(t,n);return-1!==s&&(vq(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),vq(e,(function(){return e.vertexAttribPointer(s,a,e.FLOAT,!1,i,o)})),vq(e,(function(){return e.enableVertexAttribArray(s)})),!0)}function Sq(e,t,n,r){vq(e,(function(){return function(e,t,n){Aq(e,n),vq(e,(function(){return e.activeTexture(e.TEXTURE0+n)})),vq(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)}))}(e,t,r)})),vq(e,(function(){return e.uniform1i(n,r)}))}function Tq(e,t,n){vq(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),vq(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}))}function Cq(e,t){vq(e,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,t)})),vq(e,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function Eq(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+function(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}(e,t))}function Rq(e,t,n){var r=vq(e,(function(){return t()}));if(null==r)throw new Error(n);return r}function Aq(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function Fq(e,t){return void 0===t&&(t=2),Zv(e.slice(0,e.length-t))}function _q(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Dq(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[Fq(e)].concat(_q(e))),t}function Oq(e){return e%2==0}function Mq(e,t){if(Qv(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(Oq(n)&&Oq(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&Oq(e[0])&&Oq(t[0])}function Lq(e,t){return null!=e.getExtension(t)}function zq(e){try{if(null!=pq(e))return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function Pq(e){if(0===e)return!1;var t=pq(e);if(1!==e){if(Lq(t,"EXT_color_buffer_float"))return Bq(t);var n="EXT_color_buffer_half_float";if(Lq(t,n)){var r=t.getExtension(n);return function(e,t){var n=mq(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);var a=1,i=1;e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,a,i,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(o),s}(t,r)}return!1}return!!Lq(t,"OES_texture_float")&&(!!Lq(t,"WEBGL_color_buffer_float")&&Bq(t))}function Bq(e){var t=mq(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n);e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var a=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),a}function Wq(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&Kv("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors in the WebGL backend."}))}))}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Vq=Dg();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Uq(){var e,t,n,r,a,i,o,s,u,l;return 2===Dg().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",a="texture",i="outputColor",o="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",a="texture2D",i="gl_FragColor",o="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:a,output:i,defineOutput:o,defineSpecialNaN:s,defineSpecialInf:u,defineRound:l}}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function Gq(e,t,n){void 0===n&&(n="index");var r=xg(t);return r.map((function(t,a){return"int "+e[a]+" = "+n+" / "+t+"; "+(a===r.length-1?"int "+e[a+1]+" = "+n+" - "+e[a]+" * "+t:"index -= "+e[a]+" * "+t)+";"})).join("")}function jq(e){var t=xg(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}Vq.registerFlag("HAS_WEBGL",(function(){return Vq.getNumber("WEBGL_VERSION")>0})),Vq.registerFlag("WEBGL_VERSION",(function(){return zq(2)?2:zq(1)?1:0})),Vq.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",(function(){return!1})),Vq.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===Vq.get("WEBGL_VERSION")})),Vq.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),Vq.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),Vq.registerFlag("WEBGL_PACK",(function(){return Vq.getBool("HAS_WEBGL")})),Vq.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return Vq.getBool("WEBGL_PACK")})),Vq.registerFlag("WEBGL_PACK_CLIP",(function(){return Vq.getBool("WEBGL_PACK")})),Vq.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),Vq.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return Vq.getBool("WEBGL_PACK")})),Vq.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return Vq.getBool("WEBGL_PACK")})),Vq.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return Vq.getBool("WEBGL_PACK")})),Vq.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return Vq.getBool("WEBGL_PACK")})),Vq.registerFlag("WEBGL_PACK_REDUCE",(function(){return Vq.getBool("WEBGL_PACK")})),Vq.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return Vq.getBool("WEBGL_PACK")})),Vq.registerFlag("WEBGL_CONV_IM2COL",(function(){return Vq.getBool("WEBGL_PACK")})),Vq.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return function(e){if(null==xq){var t=pq(e);xq=t.getParameter(t.MAX_TEXTURE_SIZE)}return xq}(Vq.getNumber("WEBGL_VERSION"))})),Vq.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return function(e){if(null==wq){var t=pq(e);wq=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,wq)}(Vq.getNumber("WEBGL_VERSION"))})),Vq.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=Vq.getNumber("WEBGL_VERSION");return 0===e?0:function(e){if(0===e)return 0;var t=pq(e);return Lq(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:Lq(t,"EXT_disjoint_timer_query")?1:0}(e)})),Vq.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return Vq.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!Sw()})),Vq.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return function(e){if(0===e)return!1;var t=pq(e);if(1===e){if(!Lq(t,"OES_texture_float"))return!1}else if(!Lq(t,"EXT_color_buffer_float"))return!1;return Bq(t)}(Vq.getNumber("WEBGL_VERSION"))})),Vq.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!Vq.getBool("WEBGL_FORCE_F16_TEXTURES")&&Vq.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),Vq.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Pq(Vq.getNumber("WEBGL_VERSION"))})),Vq.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return 2===(e=Vq.getNumber("WEBGL_VERSION"))&&null!=pq(e).fenceSync;var e})),Vq.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return Vq.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),Vq.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",(function(){return-1}),(function(e){if(e<0&&-1!==e)throw new Error("WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got "+e+".")}));var Hq="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n",qq=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=oq.DENSE;var t=hq(e),n=Uq();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Gq(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},Kq=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=oq.DENSE;var t=hq(e),n=Uq();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+Gq(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},Xq=function(e){this.variableNames=["A"],this.outTexUsage=sq.DOWNLOAD;var t=Uq();this.outputShape=e,this.userCode="\n      "+Hq+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},Yq=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=sq.DOWNLOAD;var t=Uq();this.outputShape=e,this.userCode="\n      "+Hq+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},Jq=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=Uq(),a=t[0],i=t[1];this.outputShape=e;var o="result";n&&(o="floor(result * 255. + 0.5)"),this.userCode="\n      "+jq(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n\n        int r = flatIndex / "+i+";\n        int c = imod(flatIndex, "+i+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+a+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+o+", 0., 0., 0.);\n      }\n    "},Zq=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=Uq(),a=t[0],i=t[1];this.outputShape=e;var o="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;o+="\n          localCoords = coords;\n          if(localCoords[2] + "+l+" < "+e[2]+") {\n            localCoords[2] += "+l+";\n            if(localCoords[1] + "+u+" < "+e[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n\n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+i+";\n              c = imod(flatIndex, "+i+");\n              uv = (vec2(c, r) + halfCR) / vec2("+i+".0, "+a+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+c+"] = values[0];\n              } else if(offset == 1) {\n                result["+c+"] = values[1];\n              } else if(offset == 2) {\n                result["+c+"] = values[2];\n              } else {\n                result["+c+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+jq(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n\n        "+o+"\n\n        "+r.output+" = "+s+";\n      }\n    "};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function Qq(e){var t=Uq();return function(e,t){var n=Rq(e,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(vq(e,(function(){return e.shaderSource(n,t)})),vq(e,(function(){return e.compileShader(n)})),!1===e.getShaderParameter(n,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}(e,t.version+"\n    precision highp float;\n    "+t.attribute+" vec3 clipSpacePos;\n    "+t.attribute+" vec2 uv;\n    "+t.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function $q(e){return function(e,t){var n=Rq(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return vq(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),vq(e,(function(){return e.bufferData(e.ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function eK(e){return function(e,t){var n=Rq(e,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return vq(e,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)})),vq(e,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,t,e.STATIC_DRAW)})),n}(e,new Uint16Array([0,1,2,2,1,3]))}function tK(e,t,n,r,a,i){!function(e,t){var n=Dg().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0)throw new Error("Requested texture size ["+e+"x"+t+"] is invalid.");if(e>n||t>n)throw new Error("Requested texture size ["+e+"x"+t+"] greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}(t,n);var o=function(e){return Rq(e,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}(e),s=e.TEXTURE_2D;return vq(e,(function(){return e.bindTexture(s,o)})),vq(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),vq(e,(function(){return e.texParameteri(s,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),vq(e,(function(){return e.texParameteri(s,e.TEXTURE_MIN_FILTER,e.NEAREST)})),vq(e,(function(){return e.texParameteri(s,e.TEXTURE_MAG_FILTER,e.NEAREST)})),vq(e,(function(){return e.texImage2D(s,0,r,t,n,0,a,i,null)})),vq(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),o}function nK(e){return e.internalFormatFloat}function rK(e){return e.internalFormatHalfFloat}function aK(e){return e.downloadTextureFormat}function iK(e){return e.internalFormatPackedFloat}function oK(e){return e.internalFormatPackedHalfFloat}function sK(e,t,n,r,a,i,o,s){var u=e,l=new Float32Array(function(e,t){var n=dq(e,t);return n[0]*n[1]*4}(i,o));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}var uK=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=Dg().getNumber("WEBGL_VERSION");null!=e?(this.gl=e,function(e,t){lq[e]=t}(t,e)):this.gl=pq(t);var n="WEBGL_color_buffer_float",r="EXT_color_buffer_half_float";if(1===Dg().getNumber("WEBGL_VERSION")){var a="OES_texture_half_float";if(this.textureFloatExtension=yq(this.gl,"OES_texture_float"),Lq(this.gl,a))this.textureHalfFloatExtension=yq(this.gl,a);else if(Dg().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),Lq(this.gl,r))this.colorBufferHalfFloatExtension=yq(this.gl,r);else if(Dg().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",Lq(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!Lq(this.gl,r))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension(r)}this.vertexBuffer=$q(this.gl),this.indexBuffer=eK(this.gl),this.framebuffer=function(e){return Rq(e,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}(this.gl),this.textureConfig=mq(this.gl,this.textureHalfFloatExtension)}var t=e.prototype;return t.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;vq(t,(function(){return t.finish()})),vq(t,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),vq(t,(function(){return t.deleteFramebuffer(e.framebuffer)})),vq(t,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),vq(t,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),vq(t,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},t.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=fq(t,n);return tK(e,a[0],a[1],nK(r),r.textureFormatFloat,e.FLOAT)}(this.gl,e,t,this.textureConfig)},t.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=fq(t,n);return tK(e,a[0],a[1],rK(r),r.textureFormatFloat,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)},t.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=fq(t,n);return tK(e,a[0],a[1],aK(r),e.RGBA,e.UNSIGNED_BYTE)}(this.gl,e,t,this.textureConfig)},t.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),function(e,t,n){vq(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),n.data instanceof Uint8Array?vq(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)})):vq(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)})),vq(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t)},t.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),function(e,t,n,r,a,i){var o,s,u;vq(e,(function(){return e.bindTexture(e.TEXTURE_2D,t)})),a instanceof Uint8Array?(o=new Uint8Array(n*r*4),s=e.UNSIGNED_BYTE,u=e.RGBA):(o=new Float32Array(n*r*4),s=e.FLOAT,u=i.internalFormatPackedFloat),o.set(a),vq(e,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,n,r,0,e.RGBA,s,o)})),vq(e,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}(this.gl,e,t,n,r,this.textureConfig)},t.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=dq(t,n);return tK(e,a[0],a[1],oK(r),e.RGBA,r.textureTypeHalfFloat)}(this.gl,e,t,this.textureConfig)},t.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),function(e,t,n,r){var a=dq(t,n);return tK(e,a[0],a[1],iK(r),e.RGBA,e.FLOAT)}(this.gl,e,t,this.textureConfig)},t.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(Cq(this.gl,this.framebuffer),this.outputTexture=null),vq(this.gl,(function(){return t.gl.deleteTexture(e)}))},t.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n,r){var a=fq(t,n),i=a[0],o=a[1],s=new Uint8Array(t*n*4);return vq(e,(function(){return e.readPixels(0,0,i,o,r.downloadTextureFormat,e.UNSIGNED_BYTE,s)})),new Float32Array(s.buffer)}(r.gl,t,n,r.textureConfig)}))},t.downloadPackedMatrixFromBuffer=function(e,t,n,r,a,i){return sK(this.gl,e,0,0,0,a,i,this.textureConfig)},t.downloadFloat32MatrixFromBuffer=function(e,t){return function(e,t,n){var r=e,a=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}(this.gl,e,t)},t.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=function(e,t,n,r){var a=e.createBuffer();vq(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)}));var i=16*t*n;return vq(e,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)})),vq(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,0)})),vq(e,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),a}(this.gl,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},t.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.createFence=function(e){var t,n,r=this;if(Dg().getBool("WEBGL_FENCE_API_ENABLED")){var a=e,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=a.clientWaitSync(i,0,0);return e===a.ALREADY_SIGNALED||e===a.CONDITION_SATISFIED},t=i}else Dg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,Dg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},t.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return function(e,t,n){var r=new Float32Array(t*n*4);return vq(e,(function(){return e.readPixels(0,0,n,t,e.RGBA,e.FLOAT,r)})),r}(r.gl,t,n)}))},t.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=bq(t,e),r=Qq(t),a=function(e){return Rq(e,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}(t);return vq(t,(function(){return t.attachShader(a,r)})),vq(t,(function(){return t.attachShader(a,n)})),function(e,t){if(vq(e,(function(){return e.linkProgram(t)})),!1===e.getProgramParameter(t,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}(t,a),this.debug&&Nq(t,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=function(e,t,n){return vq(e,(function(){return e.bindBuffer(e.ARRAY_BUFFER,n)})),Iq(e,t,"clipSpacePos",n,3,20,0)&&Iq(e,t,"uv",n,2,20,12)}(t,this.program,this.vertexBuffer)),a},t.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&vq(this.gl,(function(){return t.gl.deleteProgram(e)}))},t.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&Nq(this.gl,this.program),vq(this.gl,(function(){return t.gl.useProgram(e)}))},t.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?function(e,t,n){return Rq(e,(function(){return e.getUniformLocation(t,n)}),'uniform "'+n+'" not present in program.')}(this.gl,e,t):function(e,t,n){return e.getUniformLocation(t,n)}(this.gl,e,t)},t.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),vq(this.gl,(function(){return n.gl.getAttribLocation(e,t)}))},t.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},t.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),Sq(this.gl,e,t,n)},t.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},t.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=dq(t,n),a=r[0],i=r[1];this.setOutputMatrixTextureDriver(e,a,i)},t.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},t.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.debugValidate=function(){null!=this.program&&Nq(this.gl,this.program),Eq(this.gl)},t.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),vq(e,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},t.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),vq(this.gl,(function(){return e.gl.finish()}))},t.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=yq(this.gl,2===Dg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.beginQuery=function(){if(2===Dg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),a=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,a),a},t.endQuery=function(){if(2!==Dg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},t.waitForQueryAndGetTime=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ng((function(){return n.disposed||n.isQueryAvailable(t,Dg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}));case 2:return e.abrupt("return",this.getQueryTime(t,Dg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},t.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),a=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),a&&!this.disjoint}var i=this.getQueryTimerExtensionWebGL1(),o=i.getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},t.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length;++t){if(!e[t]())break}return t-1}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t){(0,this.itemsToPoll[t].resolveFn)()}this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||ng((function(){return n.pollItems(),0===n.itemsToPoll.length}))},t.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Tq(this.gl,e,this.framebuffer),this.debug&&Eq(this.gl)},t.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(Tq(this.gl,this.outputTexture,this.framebuffer),this.debug&&Eq(this.gl)):Cq(this.gl,this.framebuffer)},t.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},t.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;Tq(r,e,this.framebuffer),this.debug&&Eq(r),this.outputTexture=e,vq(r,(function(){return r.viewport(0,0,t,n)})),vq(r,(function(){return r.scissor(0,0,t,n)}))},t.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var a=this;this.throwIfDisposed(),vq(this.gl,(function(){return a.gl.scissor(e,t,n,r)}))},t.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},Rv(e,[{key:"debug",get:function(){return Dg().getBool("DEBUG")}}]),e}();var lK=vS;function cK(e,t,n,r){var a=[];e.forEach((function(e){var t=Zv(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?a.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(a.push("uniform sampler2D "+e.name+";"),a.push("uniform int offset"+e.name+";"))}));var i,o,s=a.join("\n"),u=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?fK(e):pK(e);var a=e.shapeInfo.logicalShape,i=t.logicalShape;a.length<=i.length&&(r+=n?function(e,t){var n,r=e.name,a=r.charAt(0).toUpperCase()+r.slice(1),i="get"+a+"AtOutCoords",o=e.shapeInfo.logicalShape.length,s=t.logicalShape.length,u=lK(e.shapeInfo.logicalShape,t.logicalShape),l=bK(s),c=s-o,p=["x","y","z","w","u","v"];n=0===o?"":s<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords."+p[e+c]+" = 0;"})).join("\n");var f="";f=s<2&&o>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+p[t+c]})).join(", ");var h="return outputValue;",d=1===Zv(e.shapeInfo.logicalShape),m=Zv(t.logicalShape),v=1===m;if(1!==o||d||v){if(d&&!v)h=1===s?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=o-2,y=o-1;u.indexOf(g)>-1&&u.indexOf(y)>-1?h="return vec4(outputValue.x);":u.indexOf(g)>-1?h="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(y)>-1&&(h="return vec4(outputValue.xx, outputValue.zz);")}}else h="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+i+"() {\n      "+l+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+a+"("+f+");\n      "+h+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),a="get"+r+"AtOutCoords",i=t.texShape,o=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,u=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===u&&null==e.shapeInfo.flatOffset&&Qv(o,i))return"\n      float "+a+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var l,c=bK(u),p=lK(e.shapeInfo.logicalShape,t.logicalShape),f=u-s,h=["x","y","z","w","u","v"];l=0===s?"":u<2&&p.length>=1?"coords = 0;":p.map((function(e){return"coords."+h[e+f]+" = 0;"})).join("\n");var d="";d=u<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+h[t+f]})).join(", ");return"\n    float "+a+"() {\n      "+c+" coords = getOutputCoords();\n      "+l+"\n      return get"+r+"("+d+");\n    }\n  "}(e,t));return r}(e,t,r)})).join("\n"),l=t.texShape,c=Uq(),p=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(c),f=function(e){var t=e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+hK+"\n    "+dK+"\n    "+mK+"\n  ";return t}(c);return t.isPacked?(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(1===n[0])return"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ";if(1===n[1])return"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(Qv(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Math.ceil(n[2]/2),o=i*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+a[0]+", "+a[1]+"));\n      int index = resTexRC.x * "+a[1]+" + resTexRC.y;\n\n      int b = index / "+o+";\n      index -= b * "+o+";\n\n      int r = 2 * (index / "+i+");\n      int c = imod(index, "+i+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),a=r*Math.ceil(e[e.length-2]/2),i=a,o="",s="b, r, c",u=2;u<e.length-1;u++)o="\n      int b"+u+" = index / "+(i*=e[e.length-u-1])+";\n      index -= b"+u+" * "+i+";\n    "+o,s="b"+u+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+o+"\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,a,i,o}(t.logicalShape,l),o=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(c)):(i=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){if(1===t[0])return"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ";if(1===t[1])return"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ";return"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){if(Qv(e,t))return"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ";if(1===e[1])return"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ";if(1===e[0])return"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ";return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=Gq(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=Gq(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=Gq(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=Gq(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,l),o=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(c)),r&&(f+=vK),[f,p,o,s,i,u,n].join("\n")}function pK(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,a=r[0],i=r[1];if(1===a&&1===i)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=e.shapeInfo.texShape,s=o[0],u=o[1],l=gK(t);return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+s+", "+u+", "+l+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+yK(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,a=r[0],i=r[1];if(1===i&&1===a)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var o=gK(t);if(1===i)return"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+o+") + 0.5) / "+a+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ";if(1===a)return"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+o+") + 0.5) / "+i+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ";return"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+a+", "+i+", index + "+o+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape;if(null!=a&&Qv(t,a)){var i=a[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+a[1]+".0, "+i+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var o=ig(t),s=o.newShape,u=o.keptDims,l=s;if(l.length<t.length){var c=["row","col"];return"\n      "+pK(xK(e,l))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+wK(c,u)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+yK(e)+"\n      }\n    ";var p=a[0],f=a[1],h=gK(n);if(1===f)return"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+p+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ";if(1===p)return"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+f+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ";return"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+h+";\n    vec2 uv = uvFromFlat("+p+", "+f+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[1]*t[2],i=t[2],o=ig(t),s=o.newShape,u=o.keptDims,l=s;if(l.length<t.length){var c=["row","col","depth"];return"\n        "+pK(xK(e,l))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+wK(c,u)+");\n        }\n      "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+a+", "+i+", 1)));\n        "+yK(e)+"\n      }\n    ";var p=e.shapeInfo.texShape,f=p[0],h=p[1],d=e.shapeInfo.flatOffset;if(h===a&&null==d)return"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+i+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+f+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ";if(h===i&&null==d)return"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+f+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ";var m=gK(n);return"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+a+" + col * "+i+" + depth + "+m+";\n        vec2 uv = uvFromFlat("+f+", "+h+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[3],i=t[2]*a,o=t[1]*i,s=ig(t),u=s.newShape,l=s.keptDims;if(u.length<t.length){var c=["row","col","depth","depth2"];return"\n      "+pK(xK(e,u))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+wK(c,l)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+o+", "+i+", "+a+", 1)));\n        "+yK(e)+"\n      }\n    ";var p=e.shapeInfo.flatOffset,f=e.shapeInfo.texShape,h=f[0],d=f[1];if(d===o&&null==p)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+i+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+d+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ";if(d===a&&null==p)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+d+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ";var m=gK(n);return"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+o+" + col * "+i+" +\n          depth * "+a+" + depth2;\n      vec2 uv = uvFromFlat("+h+", "+d+", index + "+m+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=t[4],i=t[3]*a,o=t[2]*i,s=t[1]*o,u=ig(t),l=u.newShape,c=u.keptDims;if(l.length<t.length){var p=["row","col","depth","depth2","depth3"];return"\n      "+pK(xK(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+wK(p,c)+");\n      }\n    "}if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+o+", "+i+", "+a+")) +\n          depth3;\n        "+yK(e)+"\n      }\n    ";var f=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,d=h[0],m=h[1];if(m===s&&null==f)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+o+", "+i+", "+a+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ";if(m===a&&null==f)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+d+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ";var v=gK(n);return"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+o+" + depth * "+i+" +\n          depth2 * "+a+" + depth3 + "+v+";\n      vec2 uv = uvFromFlat("+d+", "+m+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=ig(t),i=a.newShape,o=a.keptDims;if(i.length<t.length){var s=["row","col","depth","depth2","depth3","depth4"];return"\n      "+pK(xK(e,i))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+wK(s,o)+");\n      }\n    "}var u=t[5],l=t[4]*u,c=t[3]*l,p=t[2]*c,f=t[1]*p;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+f+", "+p+", "+c+", "+l+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+u+", 1)));\n        "+yK(e)+"\n      }\n    ";var h=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,m=d[0],v=d[1];if(v===f&&null==h)return"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+p+", "+c+", "+l+", "+u+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+v+".0, "+m+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ";if(v===u&&null==h)return"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+v+".0, "+m+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ";var g=gK(n);return"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+f+" + col * "+p+" + depth * "+c+" +\n          depth2 * "+l+" + depth3 * "+u+" + depth4 + "+g+";\n      vec2 uv = uvFromFlat("+m+", "+v+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function fK(e){var t,n,r;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=Uq(),"\n    vec4 "+n+"() {\n      return "+r.texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,a=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],i=Uq();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+a[0]+", "+a[1]+", index);\n      return "+i.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=a[0],o=a[1],s=Uq();if(null!=a&&Qv(t,a))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+o+".0, "+i+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],l=Math.ceil(t[1]/2);return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+l+", "+u[0]+", "+u[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),a=e.shapeInfo.texShape,i=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)];if(1===t[0]){var o=[1,2],s=["b","row","col"];return"\n        "+fK(xK(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+wK(s,o)+");\n        }\n      "}var u=i[0],l=i[1],c=Math.ceil(t[2]/2),p=c*Math.ceil(t[1]/2),f=Uq();return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+u+", "+l+", "+p+", "+c+", b, row, col);\n      return "+f.texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],s=o[0],u=o[1],l=Math.ceil(t[n-1]/2),c=l*Math.ceil(t[n-2]/2),p="int b, int row, int col",f="b * "+c+" + (row / 2) * "+l+" + (col / 2)",h=2;h<n-1;h++)p="int b"+h+", "+p,f="b"+h+" * "+(c*=t[n-h-1])+" + "+f;var d=Uq();return"\n    vec4 "+a+"("+p+") {\n      int index = "+f+";\n      int texR = index / "+u+";\n      int texC = index - texR * "+u+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+u+", "+s+");\n      return "+d.texture2D+"("+r+", uv);\n    }\n  "}(e)}}var hK="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",dK="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",mK="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",vK="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function gK(e){return"offset"+e}function yK(e){var t=e.name,n=Zv(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function bK(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function xK(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function wK(e,t){return t.map((function(t){return e[t]})).join(", ")}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function kK(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,a=t[n],i=a.shape;if(!Qv(r,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+i+" must match");if(!e.isUniform||!a.isUniform){var o=e.texShape,s=a.isUniform?null:a.texData.texShape;if(!Qv(o,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+o+" and "+s+" must match")}}))}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var NK=JW,IK=eV,SK=tV,TK=iV,CK=uV,EK=lV,RK=fV,AK=mV,FK=yV,_K=bV,DK=kV,OK=SV,MK=TV,LK=RV,zK=AV,PK=DV,BK=LV,WK=WV,VK=XV,UK=JV,GK=ZV,jK=LW,HK=eU,qK=oU,KK=sU,XK=pU,YK=fU,JK=HV,ZK=hU;
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function QK(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function $K(e,t){return 1===t?[e]:QK(e,t)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var eX=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=$K("rc",t),r=bK(t),a=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",a=e-2;a<e;a++)r+=n[a]+" >= "+t[a],a<e-1&&(r+="||");return r}(t,e,n),i=function(e,t,n,r){if(1===e)return"";var a=r.slice(-2);return"\n    int r = "+a[0]+";\n    int c = "+a[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),o=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var a=0;a<=1;a++){for(var i=(0===r?"r":"rp1")+", "+(0===a?"c":"cp1"),o=2;o<e;o++)i=t[t.length-1-o]+","+i;n.push(i)}return n}(n,t);if(1===n)return"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0";return"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+a+") {\n            setOutput(vec4(0));\n          } else {\n            "+i+"\n\n            setOutput(vec4("+o+"));\n          }\n        }\n      "}};var tX=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),n+="\n        "+a+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      "+("\n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+Gq(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      ")+jq(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "};var nX=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}var t=e.prototype;return t.acquireTexture=function(e,t,n){var r=aX(t,n),a=iX(e,r,n);a in this.freeTextures||(this.freeTextures[a]=[]),a in this.usedTextures||(this.usedTextures[a]=[]);var i,o=rX(e,r,this.gpgpu.gl,this.gpgpu.textureConfig,n);if(this.freeTextures[a].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();var s=this.freeTextures[a].shift();return this.usedTextures[a].push(s),s}return r===uq.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):r===uq.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):r===uq.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):r===uq.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):r===uq.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[a].push(i),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),i},t.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var a=aX(n,r),i=iX(t,a,r);i in this.freeTextures||(this.freeTextures[i]=[]);var o=rX(t,a,this.gpgpu.gl,this.gpgpu.textureConfig,r),s=Dg().get("WEBGL_DELETE_TEXTURE_THRESHOLD");-1!==s&&this._numBytesAllocated>s?(this.gpgpu.deleteMatrixTexture(e),this._numBytesAllocated-=o):(this.freeTextures[i].push(e),this.numFreeTextures++,this._numBytesFree+=o),this.numUsedTextures--;var u=this.usedTextures[i],l=u.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(l,1),this.log()}},t.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")");var t=this._numBytesFree/this._numBytesAllocated;console.log("Bytes allocated: "+this._numBytesAllocated),console.log("Bytes unused: "+this._numBytesFree+" ("+Math.round(100*t)+"%)")}},t.getNumUsedTextures=function(){return this.numUsedTextures},t.getNumFreeTextures=function(){return this.numFreeTextures},t.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var n in this.usedTextures)this.usedTextures[n].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}},Rv(e,[{key:"numBytesAllocated",get:function(){return this._numBytesAllocated}},{key:"numBytesFree",get:function(){return this._numBytesFree}}]),e}();function rX(e,t,n,r,a){var i,o=function(e,t){switch(e){case uq.PACKED_2X2_FLOAT32:return iK(t);case uq.PACKED_2X2_FLOAT16:return oK(t);case uq.UNPACKED_FLOAT32:return nK(t);case uq.UNPACKED_FLOAT16:return rK(t);case uq.PACKED_4X1_UNSIGNED_BYTE:return aK(t);default:throw new Error("Unknown physical texture type "+e)}}(t,r);if(a){var s=dq(e[0],e[1]);i=s[0]*s[1]}else{var u=fq(e[0],e[1]);i=u[0]*u[1]}var l=function(e,t){var n=e;if(t===n.R32F)return 4;if(t===n.R16F)return 2;if(t===n.RGBA32F)return 16;if(t===e.RGBA)return 16;if(t===n.RGBA16F)return 8;throw new Error("Unknown internal format "+t)}(n,o);return i*l}function aX(e,t){if(e===sq.UPLOAD)return uq.PACKED_2X2_FLOAT32;if(e===sq.RENDER||null==e)return function(e){return Dg().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?uq.PACKED_2X2_FLOAT32:uq.UNPACKED_FLOAT32:e?uq.PACKED_2X2_FLOAT16:uq.UNPACKED_FLOAT16}(t);if(e===sq.DOWNLOAD||e===sq.PIXELS)return uq.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function iX(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var oX=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},sX="if (isnan(x)) return x;",uX="return x;",lX="return abs(x);";var cX="return (x >= 0.0) ? x : (exp(x) - 1.0);",pX=sX+"\n  return (x < 0.0) ? 0.0 : x;\n",fX=sX+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",hX="return x;",dX="return x;",mX="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",vX="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",gX="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",yX=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},bX=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=$K("rc",t),r=bK(t),a=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),i=n.slice(-2),o=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+a+");\n\n        setOutput(getChannel(packedInput, "+o+"));\n      }\n    "},xX=JC,wX={};var kX=function(e){function t(t){var n,r;if((n=e.call(this)||this).pendingRead=new WeakMap,n.pendingDisposal=new WeakSet,n.dataRefCount=new WeakMap,n.numBytesInGPU=0,n.uploadWaitMs=0,n.downloadWaitMs=0,n.warnedAboutMemory=!1,n.warnedAboutCPUBackend=!1,n.pendingDeletes=0,n.disposed=!1,!Dg().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==t){var a=pq(Dg().getNumber("WEBGL_VERSION"));n.binaryCache=((r=Dg().getNumber("WEBGL_VERSION"))in wX||(wX[r]={}),wX[r]),n.gpgpu=new uK(a),n.canvas=a.canvas,n.gpgpuCreatedLocally=!0}else n.gpgpu=t,n.binaryCache={},n.gpgpuCreatedLocally=!1,n.canvas=t.gl.canvas;return n.textureManager=new nX(n.gpgpu),n.numMBBeforeWarning=null==Dg().global.screen?1024:Dg().global.screen.height*Dg().global.screen.width*window.devicePixelRatio*600/1024/1024,n.texData=new Wv(Lv(n),JN()),n}Av(t,e);var n=t.prototype;return n.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},n.write=function(e,t,n){if((Dg().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||Dg().getBool("DEBUG"))&&this.checkNumericalProblems(e),"complex64"===n&&null!=e)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var r={};return this.texData.set(r,{shape:t,dtype:n,values:e,usage:sq.UPLOAD,refCount:1,complexParentRefCount:0}),r},n.incRef=function(e){this.texData.get(e).refCount++},n.decRef=function(e){this.texData.has(e)&&this.texData.get(e).refCount--},n.move=function(e,t,n,r){if(Dg().getBool("DEBUG")&&this.checkNumericalProblems(t),"complex64"===r)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:n,dtype:r,values:t,usage:sq.UPLOAD,refCount:1,complexParentRefCount:0})},n.disposeIntermediateTensorInfo=function(e){var t=e.dataId;if(this.texData.has(t)){var n=this.texData.get(t);n.refCount--,n.refCount<1&&this.disposeData(t)}},n.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,a=t.complexTensorInfos,i=t.slice,o=t.shape,s=t.isPacked;if(null!=i){var u;u=s?new yX(o,hX):new oX(o,hX);var l=this.runWebGLProgram(u,[{dataId:e,shape:o,dtype:r}],r),c=this.readSync(l.dataId);return this.disposeIntermediateTensorInfo(l),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var p,f,h=null!=this.activeTimers;(h&&(p=Wx()),"complex64"===r)?f=uA(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):f=this.getValuesFromTexture(e);return h&&(this.downloadWaitMs+=Wx()-p),this.convertAndCacheOnCPU(e,f)},n.read=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,s,u,l,c,p,f,h,d,m,v,g,y,b,x,w,k,N;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.pendingRead.has(t)){e.next=3;break}return n=this.pendingRead.get(t),e.abrupt("return",new Promise((function(e){return n.push(e)})));case 3:if(r=this.texData.get(t),a=r.values,i=r.shape,o=r.slice,s=r.dtype,u=r.complexTensorInfos,l=r.isPacked,null==o){e.next=11;break}return c=l?new yX(i,hX):new oX(i,hX),p=this.runWebGLProgram(c,[{dataId:t,shape:i,dtype:s}],s),f=this.read(p.dataId),this.disposeIntermediateTensorInfo(p),e.abrupt("return",f);case 11:if(null==a){e.next=13;break}return e.abrupt("return",this.convertAndCacheOnCPU(t));case 13:if(Dg().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")||2!==Dg().getNumber("WEBGL_VERSION")){e.next=15;break}throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");case 15:if(h=null,"complex64"!==s&&Dg().get("WEBGL_BUFFER_SUPPORTED")&&(d=this.decode(t),v=this.texData.get(d.dataId),h=(m=this.gpgpu).createBufferFromTexture.apply(m,[v.texture].concat(hq(i)))),this.pendingRead.set(t,[]),"complex64"===s){e.next=21;break}return e.next=21,this.gpgpu.createAndWaitForFence();case 21:if("complex64"!==s){e.next=30;break}return e.next=24,Promise.all([this.read(u.real.dataId),this.read(u.imag.dataId)]);case 24:y=e.sent,b=y[0],x=y[1],g=uA(b,x),e.next=31;break;case 30:null==h?g=this.getValuesFromTexture(t):(w=Zv(i),g=this.gpgpu.downloadFloat32MatrixFromBuffer(h,w));case 31:return null!=d&&this.disposeIntermediateTensorInfo(d),k=this.convertAndCacheOnCPU(t,g),N=this.pendingRead.get(t),this.pendingRead.delete(t),N.forEach((function(e){return e(k)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),e.abrupt("return",k);case 38:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return Gx(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return zk(e.shape,e.dtype,n)},n.checkNumericalProblems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var n=e[t];if(!gq(n)){if(Dg().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+n+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+n+" cannot be represented on this device.")}}},n.getValuesFromTexture=function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.isPacked,i=Zv(n);if(Dg().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var o,s=this.decode(e),u=this.texData.get(s.dataId),l=(o=this.gpgpu).downloadMatrixFromPackedTexture.apply(o,[u.texture].concat(hq(n))).subarray(0,i);return this.disposeIntermediateTensorInfo(s),l}var c=Dg().getBool("WEBGL_PACK")&&!0===a,p=c?Dq(n):n,f=c?new Yq(p):new Xq(p),h=this.runWebGLProgram(f,[{shape:p,dtype:r,dataId:e}],"float32"),d=this.texData.get(h.dataId),m=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(d.texture,d.texShape[0],d.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(h),m},n.time=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n,r,a,i,o,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.activeTimers,r=[],a=!1,null==this.programTimersStack?(this.programTimersStack=r,a=!0):this.activeTimers.push(r),this.activeTimers=r,t(),i=Jv(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=Jv(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=n,a&&(this.programTimersStack=null),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},!(Dg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=19;break}return e.next=14,Promise.all(i);case 14:u=e.sent,s.kernelMs=qv(u),s.getExtraProfileInfo=function(){return u.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},e.next=20;break;case 19:s.kernelMs={error:"WebGL query timers are not supported in this environment."};case 20:return this.uploadWaitMs=0,this.downloadWaitMs=0,e.abrupt("return",s);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}},n.startTimer=function(){return Dg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Wx(),endMs:null}},n.endTimer=function(e){return Dg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=Wx(),e)},n.getQueryTime=function(){var e=Cv(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Dg().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)){e.next=2;break}return e.abrupt("return",this.gpgpu.waitForQueryAndGetTime(t));case 2:return n=t,e.abrupt("return",n.endMs-n.startMs);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))return this.pendingDisposal.add(e),void this.pendingDeletes++;if(this.texData.has(e))if(this.texData.get(e).complexParentRefCount>0)this.texData.get(e).refCount--;else{this.releaseGPUData(e);var t=this.texData.get(e).complexTensorInfos;null!=t&&(this.texData.get(t.real.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(t.real),this.texData.get(t.imag.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(t.imag)),this.texData.delete(e)}}},n.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,a=t.texShape,i=t.usage,o=t.isPacked,s=t.slice,u=s&&s.origDataId||e,l=this.dataRefCount.get(u);l>1?this.dataRefCount.set(u,l-1):(this.dataRefCount.delete(u),null!=n&&(this.numBytesInGPU-=this.computeBytes(a,r),this.textureManager.releaseTexture(n,a,i,o)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null},n.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},n.getDataInfo=function(e){return this.texData.get(e)},n.getCPUBackend=function(){return Dg().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=JN().findBackend("cpu")),this.cpuBackend):null},n.shouldExecuteOnCPU=function(e,t){var n=this;void 0===t&&(t=128);var r=this.getCPUBackend();return Dg().getBool("IS_TEST")||this.warnedAboutCPUBackend||null!=r||(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),null!=r&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&Zv(e.shape)<t}))},n.getGPGPUContext=function(){return this.gpgpu},n.where=function(e){sA("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return xX(e.shape,t)},n.packedUnaryOp=function(e,t,n){var r=new yX(e.shape,t);return this.compileAndRun(r,[e],n)},n.abs=function(e){if(this.shouldExecuteOnCPU([e])&&"complex64"!==e.dtype){var t=jK(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,t)}if(Dg().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,lX,e.dtype);var n=new oX(e.shape,lX);return this.compileAndRun(n,[e])},n.makeTensorInfo=function(e,t,n){var r;if("string"===t&&null!=n&&n.length>0&&dg(n[0])){var a=n.map((function(e){return Ux(e)}));r=this.write(a,e,t)}else r=this.write(n,e,t);return this.texData.get(r).usage=null,{dataId:r,shape:e,dtype:t}},n.makeOutput=function(e,t,n){var r=this.makeTensorInfo(e,t,n).dataId;return JN().makeTensorFromDataId(r,e,t,this)},n.unpackTensor=function(e){var t=new bX(e.shape);return this.runWebGLProgram(t,[e],e.dtype)},n.packTensor=function(e){var t=new eX(e.shape);return this.runWebGLProgram(t,[e],e.dtype,null,!0)},n.packedReshape=function(e,t){var n=[Fq(e.shape)].concat(_q(e.shape)),r={dtype:e.dtype,shape:n,dataId:e.dataId},a=[Fq(t)].concat(_q(t)),i=new tX(a,n),o=this.runWebGLProgram(i,[r],e.dtype,null,!0);return{dataId:o.dataId,shape:t,dtype:o.dtype}},n.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,a=n.shape,i=n.dtype,o=Dq(a);t=r?new Kq(o):new qq(o);return{dtype:i,shape:a,dataId:this.runWebGLProgram(t,[{shape:o,dtype:i,dataId:e}],i,null,!0).dataId}},n.runWebGLProgram=function(e,t,n,r,a){var i=this;void 0===a&&(a=!1);var o=this.makeTensorInfo(e.outputShape,n),s=this.texData.get(o.dataId);if(e.packedOutput&&(s.isPacked=!0),e.outPackingScheme===oq.DENSE){var u=hq(e.outputShape);s.texShape=u.map((function(e){return 2*e}))}if(null!=e.outTexUsage&&(s.usage=e.outTexUsage),0===Zv(o.shape))return s.values=og(o.dtype,0),o;var l=[],c=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=i.texData.get(t.dataId);if(null==n.texture){if(!e.packedInputs&&Zv(t.shape)<=Dg().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.packedInputs&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.packedInputs)t=n.isPacked?i.unpackTensor(t):i.packTensor(t),l.push(t),n=i.texData.get(t.dataId);else if(n.isPacked&&!Mq(n.shape,t.shape)){var r=t,a=t.shape;t.shape=n.shape,t=i.packedReshape(t,a),l.push(t),n=i.texData.get(t.dataId),r.shape=a}return i.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(o.dataId);var p,f={shape:o.shape,texData:s,isUniform:!1},h=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var a=e.userCode,i=e.constructor.name;return i+"_"+r+"_"+a}(e,c,f),d=this.getAndSaveBinary(h,(function(){return function(e,t,n,r){var a=t.userCode,i=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),o=i.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},u=cK(i,s,a,t.packedInputs),l=e.createProgram(u),c=null,p=e.getUniformLocation(l,"NAN",!1);1===Dg().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(l,"INFINITY",!1));for(var f={},h=0;h<t.variableNames.length;h++){var d=t.variableNames[h];f[d]=e.getUniformLocation(l,d,!1),f["offset"+d]=e.getUniformLocation(l,"offset"+d,!1)}return{program:t,source:u,webGLProgram:l,uniformLocations:f,inShapeInfos:o,outShapeInfo:s,infLoc:c,nanLoc:p}}(i.gpgpu,e,c,f)})),m=null!=this.activeTimers;if(m&&(p=this.startTimer()),function(e,t,n,r,a){kK(t.inShapeInfos,n),kK([t.outShapeInfo],[r]);var i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(i,o[0],o[1]):e.setOutputMatrixTexture(i,o[0],o[1]),e.setProgram(t.webGLProgram),1===Dg().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var a=t.program.variableNames[r],i=t.uniformLocations[a],o=t.uniformLocations["offset"+a];if(null!=i)if(n.isUniform)if(Zv(n.shape)<2)e.gl.uniform1f(i,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(i,s)}else null!=n.texData.slice&&null!=o&&e.gl.uniform1i(o,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,i,r)})),null!=a&&a(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,d,c,f,r),l.forEach((function(e){return i.disposeIntermediateTensorInfo(e)})),m&&(p=this.endTimer(p),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(p)})),!Dg().getBool("WEBGL_LAZILY_UNPACK")&&s.isPacked&&!1===a){var v=this.unpackTensor(o);return this.disposeIntermediateTensorInfo(o),v}return o},n.compileAndRun=function(e,t,n,r,a){void 0===a&&(a=!1),n=n||t[0].dtype;var i=this.runWebGLProgram(e,t,n,r,a);return JN().makeTensorFromDataId(i.dataId,i.shape,i.dtype)},n.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},n.getTextureManager=function(){return this.textureManager},n.dispose=function(){var e=this;if(!this.disposed){if(!Dg().getBool("IS_TEST"))Object.keys(this.binaryCache).forEach((function(t){e.gpgpu.deleteProgram(e.binaryCache[t].webGLProgram),delete e.binaryCache[t]}));this.textureManager.dispose(),null!=this.canvas&&"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0}},n.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=QN((function(){if(!Dg().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=Dg().getBool("DEBUG");Dg().set("DEBUG",!1);var n=e.abs(gC(1e-8)).dataSync()[0];if(Dg().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},n.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},n.uploadToGPU=function(e){var t=this.texData.get(e),n=t.shape,r=t.dtype,a=t.values,i=t.texture,o=t.usage,s=t.isPacked;if(null==i){var u,l=null!=this.activeTimers;l&&(u=Wx());var c=t.texShape;if(null==c&&(c=function(e,t){void 0===t&&(t=!1);var n=Dg().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,1===(e=e.map((function(t,n){return n>=e.length-2?Hv(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var r=ig(e);e=r.newShape}var a=Zv(e);if(e.length<=1&&a<=n)return[1,a];if(2===e.length&&e[0]<=n&&e[1]<=n)return e;if(3===e.length&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var i=Fq(e),o=2,s=2;if(e.length){var u=_q(e);o=u[0],s=u[1]}return eg(a=i*(o/2)*(s/2)).map((function(e){return 2*e}))}return eg(a)}(n,s),t.texShape=c),null!=a){var p,f=Dq(n),h=c[1],d=c[0],m=a instanceof Uint8Array;if(s){var v=dq(c[0],c[1]);h=v[0],d=v[1],p=new Zq(f,[d,h],m)}else p=new Jq(f,[d,h],m);var g=this.makeTensorInfo([d,h],r);this.texData.get(g.dataId).usage=m?sq.PIXELS:sq.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(g.dataId),h,d,a);var y=this.runWebGLProgram(p,[g],r,null,!0),b=this.texData.get(y.dataId);t.texture=b.texture,t.texShape=b.texShape,t.isPacked=b.isPacked,t.usage=b.usage,this.disposeIntermediateTensorInfo(g),this.texData.delete(y.dataId),t.values=null,l&&(this.uploadWaitMs+=Wx()-u)}else{var x=this.acquireTexture(c,o,r,s);t.texture=x}}},n.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}
/** @license See the LICENSE file. */(t,r)),n.values},n.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var a=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+a+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},n.computeBytes=function(e,t){return e[0]*e[1]*fg(t)},t}(Vv);
/**
	 * @license
	 * Copyright 2020 Google Inc. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
Tw()&&nI("webgl",(function(){return new kX}),2);var NX="\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n",IX=function(e,t,n){this.variableNames=["A","B"],this.outputShape=yS(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},SX="\n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n",TX=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=yS(t,n);var a=this.outputShape.length,i="";if(r)if(0===a||1===Zv(this.outputShape))i="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(i="\n          "+bK(a)+" coords = getOutputCoords();\n        ",1===a)i+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var o=$K("coords",a);i+="\n            bool nextRowOutOfBounds =\n              ("+o[a-2]+" + 1) >= "+this.outputShape[a-2]+";\n            bool nextColOutOfBounds =\n              ("+o[a-1]+" + 1) >= "+this.outputShape[a-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+i+"\n\n        setOutput(result);\n      }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function CX(e){var t=e.inputs,n=e.backend,r=t.x;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}var EX={kernelName:Ky,backendName:"webgl",kernelFunc:CX};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function RX(e){var t=e.inputs,n=e.backend,r=t.real,a=t.imag,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),s=CX({inputs:{x:r},backend:n});n.texData.get(s.dataId).complexParentRefCount++;var u=CX({inputs:{x:a},backend:n});return n.texData.get(u.dataId).complexParentRefCount++,o.complexTensorInfos={real:s,imag:u},i}var AX={kernelName:sy,backendName:"webgl",kernelFunc:RX},FX="return (a < 0.) ? b * a : a;",_X="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var DX={kernelName:$y,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.alpha,o=n.makeTensorInfo([],"float32",Px(i,"float32")),s=Dg().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TX(_X,a.shape,o.shape):new IX(FX,a.shape,o.shape),u=n.runWebGLProgram(s,[a,o],a.dtype);return n.disposeIntermediateTensorInfo(o),u}},OX="return (a < 0.) ? b * a : a;",MX="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n";
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var LX={kernelName:Mb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=t.alpha,i=Dg().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TX(MX,r.shape,a.shape):new IX(OX,r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},zX="if (isnan(x)) return x;";
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function PX(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.cpuKernelImpl,a=e.dtype;return function(e){var i,o=e.inputs,s=e.backend,u=o.x,l=s,c=a||u.dtype;if(l.shouldExecuteOnCPU([u])&&null!=r){var p=l.texData.get(u.dataId),f=r(p.values,c);return l.makeTensorInfo(u.shape,c,f)}return i=Dg().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&null!=n?new yX(u.shape,n):new oX(u.shape,t),l.runWebGLProgram(i,[u],c)}}function BX(e){var t=e.opSnippet,n=e.packedOpSnippet,r=e.checkOutOfBounds,a=void 0!==r&&r,i=e.supportsComplex,o=void 0!==i&&i,s=e.cpuKernelImpl,u=e.dtype;return function(e){var r=e.inputs,i=e.backend,l=r.a,c=r.b,p=i;if(o&&"complex64"===l.dtype){var f=p.texData.get(l.dataId),h=p.texData.get(c.dataId),d=[[f.complexTensorInfos.real,h.complexTensorInfos.real],[f.complexTensorInfos.imag,h.complexTensorInfos.imag]].map((function(e){var n=e[0],r=e[1],a={dataId:n.dataId,dtype:n.dtype,shape:l.shape},i={dataId:r.dataId,dtype:r.dtype,shape:c.shape},o=new IX(t,l.shape,c.shape);return p.runWebGLProgram(o,[a,i],fw(n.dtype,r.dtype))})),m=d[0],v=d[1],g=RX({inputs:{real:m,imag:v},backend:p});return p.disposeIntermediateTensorInfo(m),p.disposeIntermediateTensorInfo(v),g}var y,b=u||fw(l.dtype,c.dtype);if(p.shouldExecuteOnCPU([l,c])&&null!=s){var x=p.texData.get(l.dataId),w=p.texData.get(c.dataId),k=s(l.shape,c.shape,x.values,w.values,b),N=k[0],I=k[1],S=p.makeTensorInfo(I,b);return p.texData.get(S.dataId).values=N,S}return y=Dg().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&null!=n?new TX(n,l.shape,c.shape,a):new IX(t,l.shape,c.shape),p.runWebGLProgram(y,[l,c],b)}}function WX(e,t){if(void 0===t&&(t=!1),"linear"===e)return t?dX:uX;if("relu"===e)return t?vX:pX;if("elu"===e)return t?mX:cX;if("relu6"===e)return t?gX:fX;if("prelu"===e)return t?MX:OX;if("leakyrelu"===e)return t?_X:FX;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var VX=function(e,t,n,r,a,i,o,s,u){void 0===r&&(r=!1),void 0===a&&(a=!1),void 0===i&&(i=!1),void 0===o&&(o=null),void 0===s&&(s=!1),void 0===u&&(u=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;var l=r?e[1]:e[2],c=Math.ceil(l/2),p=r?"i * 2, rc.y":"rc.y, i * 2",f=a?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=a?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],m="",v="";o&&(m=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+o+"\n        }":u?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          "+o+"\n        }":"vec4 activation(vec4 x) {\n          "+o+"\n        }",v="result = activation(result);");var g=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),u&&this.variableNames.push("leakyreluAlpha");var y="rc.x",b="rc.x";e[0]<t[0]?y="int(min(float(rc.x), "+(e[0]-1)+".))":t[0]<e[0]&&(b="int(min(float(rc.x), "+(t[0]-1)+".))"),this.userCode="\n      "+m+"\n\n      const float sharedDimension = "+c+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+c+"; i++) {\n          int batchA = "+y+";\n          int batchB = "+b+";\n          vec4 a = getMatrixA(batchA, "+p+");\n          vec4 b = getMatrixB(batchB, "+f+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+h[0]+" * "+d[0]+");\n          result += ("+h[1]+" * "+d[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+g+"\n\n        "+v+"\n\n        setOutput(result);\n      }\n    "},UX={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"},GX=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=yS(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},jX="return a * b;";
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function HX(e){var t,n=e.inputs,r=e.backend,a=n.a,i=n.b,o=fw(a.dtype,i.dtype);if("complex64"===a.dtype){var s=r.texData.get(a.dataId),u=r.texData.get(i.dataId),l=new GX(UX.REAL,a.shape,i.shape),c=new GX(UX.IMAG,a.shape,i.shape),p=[{dataId:s.complexTensorInfos.real.dataId,dtype:s.complexTensorInfos.real.dtype,shape:a.shape},{dataId:s.complexTensorInfos.imag.dataId,dtype:s.complexTensorInfos.imag.dtype,shape:a.shape},{dataId:u.complexTensorInfos.real.dataId,dtype:u.complexTensorInfos.real.dtype,shape:i.shape},{dataId:u.complexTensorInfos.imag.dataId,dtype:u.complexTensorInfos.imag.dtype,shape:i.shape}],f=r.runWebGLProgram(l,p,"float32"),h=r.runWebGLProgram(c,p,"float32"),d=RX({inputs:{real:f,imag:h},backend:r});return r.disposeIntermediateTensorInfo(f),r.disposeIntermediateTensorInfo(h),d}if(r.shouldExecuteOnCPU([a,i])){var m=r.texData.get(a.dataId),v=r.texData.get(i.dataId),g=BK(a.shape,i.shape,m.values,v.values,o),y=g[0],b=g[1],x=r.makeTensorInfo(b,o);return r.texData.get(x.dataId).values=y,x}return t=Dg().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TX(jX,a.shape,i.shape):new IX(jX,a.shape,i.shape),r.runWebGLProgram(t,[a,i],o)}var qX={kernelName:Ib,backendName:"webgl",kernelFunc:HX};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function KX(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.shape,o=n,s=Zv(a.shape),u=rg(i,s),l=Zv(u);Kv(s===l,(function(){return"The new shape ("+u+") has "+l+" elements and the old shape ("+a.shape+") has "+s+" elements. The new shape and old shape must have the same number of elements."}));var c=o.texData.get(a.dataId);return!c.isPacked||Mq(a.shape,u)||null!==c.texture&&Mq(c.shape,u)?(o.incRef(a.dataId),{dataId:a.dataId,shape:u,dtype:a.dtype}):function(e,t,n){var r=[Fq(e.shape)].concat(_q(e.shape)),a={dtype:e.dtype,shape:r,dataId:e.dataId},i=[Fq(t)].concat(_q(t)),o=new tX(i,r),s=n.runWebGLProgram(o,[a],e.dtype,null,!0);return{dataId:s.dataId,shape:t,dtype:s.dtype}}(a,u,o)}var XX={kernelName:Vb,backendName:"webgl",kernelFunc:KX},YX=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.outSize;this.outputShape=[r,i];var o=4*Math.floor(n/4),s=n%4,u="sumValue += dot(values, ones);";if(null!=t){var l=1/t;u="sumValue += dot(values * "+($v(l)?l.toPrecision(2):l)+", ones);"}var c="";a%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return 0.0;\n        }\n      "),this.userCode="\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+o+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+u+"\n        }\n\n        int inIdx = inOffset + "+o+";\n        if ("+(1===s)+") {\n          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);\n\n          "+u+"\n        } else if ("+(2===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1), 0.0, 0.0);\n\n          "+u+"\n        } else if ("+(3===s)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2), 0.0);\n\n          "+u+"\n        }\n        setOutput(sumValue);\n      }\n    "},JX=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.outSize;this.outputShape=[r,i];var o="0.0",s="";"prod"===t?o="1.0":"min"===t?(o="1.0 / 1e-20",s="min"):"max"===t&&(o="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?u="sumValue":"prod"===t?u="prodValue":"all"===t?u="allValue":"any"===t&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,p="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",f="vec4";"all"===t?(o="1.0",p="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",f="bvec4"):"any"===t&&(o="0.0",p="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",f="bvec4");var h="";a%n>0&&(h="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+o+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+h+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+o+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+p+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(1===c)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+p+"\n        } else if ("+(2===c)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+p+"\n        } else if ("+(3===c)+") {\n          "+f+" values = "+f+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+p+"\n        }\n        setOutput("+u+");\n      }\n    "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function ZX(e,t,n,r){for(var a=
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){for(var t=[];0===t.length||1!==t[t.length-1].outSize;){var n=t.length?t[t.length-1].outSize:e[1],r=qR(n);t.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return t}(e.shape),i=e,o=0;o<a.length;o++){var s,u=a[o],l=u.inSize,c=u.windowSize,p=u.outSize,f=void 0;f="mean"===n?0===o?new YX({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:p},l):new YX({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:p}):new JX({windowSize:c,inSize:l,batchSize:e.shape[0],outSize:p},n),s=i,i=r.runWebGLProgram(f,[i],t),s.dataId!==e.dataId&&r.disposeIntermediateTensorInfo(s)}return i}
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var QX=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var a=bK(this.rank),i=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),a=0;a<e.length;a++)r[e[a]]=n[a];return r.join()}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */(t);this.userCode="\n    void main() {\n      "+a+" resRC = getOutputCoords();\n      setOutput(getA("+i+"));\n    }\n    "};var $X=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");for(var a=bK(this.rank),i=QK("rc",this.rank),o=new Array(this.rank),s=0;s<t.length;s++)o[t[s]]=i[s];var u="vec2("+o.slice(-2).join()+")",l="++"+i[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+o.join()+"), "+u+")";this.userCode="\n    void main() {\n      "+a+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+c+";\n      if("+l+") {\n        result[1] = "+c+";\n      }\n      --"+i[this.rank-1]+";\n      if(++"+i[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+c+";\n        if("+l+") {\n          result[3] = "+c+";\n        }\n      }\n      setOutput(result);\n    }\n    "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function eY(e,t,n){var r=Dg().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $X(e.shape,t):new QX(e.shape,t);return n.runWebGLProgram(r,[e],e.dtype)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function tY(e){var t=e.inputs,n=e.backend,r=e.attrs;return function(e,t,n,r){var a=t,i=e.shape.length,o=ag(a,e.shape),s=o,u=uT(s,i),l=null!=u,c=e;l&&(c=eY(e,u,r),s=cT(s.length,i)),sT("sum",s,i);var p=iT(c.shape,s),f=p[0],h=p[1],d=f;n&&(d=oT(f,o));var m=Zv(h),v=KX({inputs:{x:c},attrs:{shape:[Zv(e.shape)/m,m]},backend:r}),g=ZX(v,hw(e.dtype),"sum",r),y=KX({inputs:{x:g},attrs:{shape:d},backend:r});return r.disposeIntermediateTensorInfo(v),r.disposeIntermediateTensorInfo(g),l&&r.disposeIntermediateTensorInfo(c),y}(t.x,r.axis,r.keepDims,n)}var nY={kernelName:ox,backendName:"webgl",kernelFunc:tY};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function rY(e){for(var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.perm,s=r,u=i.shape.length,l=new Array(u),c=0;c<l.length;c++)l[c]=i.shape[o[c]];if(s.shouldExecuteOnCPU([i])){var p=s.texData.get(i.dataId).values,f=JK(p,i.shape,i.dtype,o,l);t=s.makeTensorInfo(l,i.dtype),s.texData.get(t.dataId).values=f}else t=eY(i,o,s);return t}var aY={kernelName:bx,backendName:"webgl",kernelFunc:rY},iY=1e3;
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function oY(e){var t=e.a,n=e.b,r=e.transposeA,a=e.transposeB,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,l=void 0===u?null:u,c=e.leakyreluAlpha,p=void 0===c?0:c,f=e.activation,h=void 0===f?null:f,d=t.shape.length,m=n.shape.length,v=r?t.shape[d-2]:t.shape[d-1],g=a?n.shape[m-1]:n.shape[m-2],y=r?t.shape[d-1]:t.shape[d-2],b=a?n.shape[m-2]:n.shape[m-1],x=t.shape.slice(0,-2),w=n.shape.slice(0,-2),k=Zv(x),N=Zv(w);Kv(d>=2&&m>=2&&(k===N||1===k||1===N),(function(){return"Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of ("+x+") and ("+w+")."}));var I=(k>N?t.shape.slice(0,-2):n.shape.slice(0,-2)).concat([y,b]);Kv(v===g,(function(){return"Error in matMul: inner shapes ("+v+") and ("+g+") of Tensors with shapes "+t.shape+" and "+n.shape+" and transposeA="+r+" and transposeB="+a+" must match."}));var S,T=r?[k,v,y]:[k,y,v],C=a?[N,b,g]:[N,g,b],E=KX({inputs:{x:t},backend:i,attrs:{shape:T}}),R=KX({inputs:{x:n},backend:i,attrs:{shape:C}}),A=[E,R],F=Math.max(k,N),_=r?E.shape[1]:E.shape[2],D=null!=s,O=null!=l,M="leakyrelu"===h,L=null!=h?WX(h,!0):null;if((1===y||1===b)&&_>iY&&!1===(D||O||M||null!=L)){var z=E,P=R;r&&(z=rY({inputs:{x:E},backend:i,attrs:{perm:[0,2,1]}}),A.push(z)),a&&(P=rY({inputs:{x:R},backend:i,attrs:{perm:[0,2,1]}}),A.push(P));var B=1===b,W=z;1!==b&&(W=KX({inputs:{x:z},backend:i,attrs:{shape:[F,_,1]}}),A.push(W));var V=1===b?2:1,U=P;B&&(U=KX({inputs:{x:P},backend:i,attrs:{shape:[F,1,_]}}),A.push(U));var G=HX({inputs:{a:W,b:U},backend:i});S=tY({inputs:{x:G},backend:i,attrs:{axis:V,keepDims:!0}}),A.push(G)}else{var j=fw(t.dtype,n.dtype),H=new VX(T,C,[F,y,b],r,a,D,L,O,M),q=[E,R];if(null!=s&&q.push(s),O&&q.push(l),M){var K=i.makeTensorInfo([],"float32",Px(p,"float32"));q.push(K),A.push(K)}S=i.runWebGLProgram(H,q,j)}var X=KX({inputs:{x:S},backend:i,attrs:{shape:I}});A.push(S);for(var Y=0,J=A;Y<J.length;Y++){var Z=J[Y];i.disposeIntermediateTensorInfo(Z)}return X}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var sY={kernelName:Cx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.a,i=t.b,o=t.bias,s=t.preluActivationWeights,u=r.transposeA,l=r.transposeB,c=r.activation;return oY({a,b:i,transposeA:u,transposeB:l,backend:n,bias:o,preluActivationWeights:s,leakyreluAlpha:r.leakyreluAlpha,activation:c})}},uY="return abs(x);";
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var lY={kernelName:Lg,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])&&"complex64"!==a.dtype){var i=r.texData.get(a.dataId),o=jK(i.values);return r.makeTensorInfo(a.shape,a.dtype,o)}return t=Dg().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new yX(a.shape,uY):new oX(a.shape,uY),r.runWebGLProgram(t,[a],a.dtype)}},cY=PX({opSnippet:sX+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n"}),pY={kernelName:zg,backendName:"webgl",kernelFunc:cY},fY=PX({opSnippet:sX+"\n  if (x < 1.0) return NAN;\nreturn log(x + sqrt(x * x - 1.0));"}),hY={kernelName:Pg,backendName:"webgl",kernelFunc:fY},dY="return a + b;",mY=BX({opSnippet:dY,packedOpSnippet:dY,supportsComplex:!0,cpuKernelImpl:NK}),vY={kernelName:Bg,backendName:"webgl",kernelFunc:mY},gY=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},yY=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var bY={kernelName:Wg,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function e(t){var n=t.inputs,r=t.backend,a=n;if(1===a.length)return CX({inputs:{x:a[0]},backend:r});if(a.length>Dg().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(a.length/2),o=e({inputs:a.slice(0,i),backend:r}),s=e({inputs:a.slice(i),backend:r});return e({inputs:[o,s],backend:r})}var u=a.map((function(e){return e.dtype})).reduce((function(e,t){return fw(e,t)})),l=a.map((function(e){return e.shape})),c=Dg().getBool("WEBGL_PACK")?new yY(a[0].shape,l):new gY(a[0].shape,l);return r.runWebGLProgram(c,a,u)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var xY={kernelName:Vg,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=ag(i,a.shape),l=u,c=uT(l,s),p=a;null!=c&&(p=rY({inputs:{x:a},backend:n,attrs:{perm:c}}),l=cT(l.length,s)),sT("all",l,s);var f,h=iT(p.shape,l),d=h[0],m=KX({inputs:{x:p},backend:n,attrs:{shape:[-1,Zv(h[1])]}}),v=ZX(m,m.dtype,"all",n);return f=KX(o?{inputs:{x:v},backend:n,attrs:{shape:oT(d,u)}}:{inputs:{x:v},backend:n,attrs:{shape:d}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),null!=c&&n.disposeIntermediateTensorInfo(p),f}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var wY={kernelName:Ug,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=ag(i,a.shape),l=u,c=uT(l,s),p=a;null!=c&&(p=rY({inputs:{x:a},backend:n,attrs:{perm:c}}),l=cT(l.length,s)),sT("any",l,s);var f,h=iT(p.shape,l),d=h[0],m=KX({inputs:{x:p},backend:n,attrs:{shape:[-1,Zv(h[1])]}}),v=ZX(m,m.dtype,"any",n);return f=KX(o?{inputs:{x:v},backend:n,attrs:{shape:oT(d,u)}}:{inputs:{x:v},backend:n,attrs:{shape:d}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),null!=c&&n.disposeIntermediateTensorInfo(p),f}},kY=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,a=e.batchSize,i=e.outSize;n||this.variableNames.push("bestIndicesA"),this.outputShape=[a,i];var o="max"===t?">":"<",s=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+s+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+o+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "},NY=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,Kv(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var a=e[e.length-1],i=Math.ceil(a/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),r||this.variableNames.push("bestIndicesA");var o,s,u=this.outputShape,l=u.length,c=bK(l),p=$K("coords",l);if(1===i){var f=bK(s=l+1);o="\n        "+f+" sourceLocR = "+f+"("+p.join()+", 0);\n        ++"+p[l-1]+";\n        "+f+" sourceLocG = "+f+"("+p.join()+", 0);\n        ++"+p[l-2]+";\n        "+f+" sourceLocA = "+f+"("+p.join()+", 0);\n        --"+p[l-1]+";\n        "+f+" sourceLocB = "+f+"("+p.join()+", 0);\n        --"+p[l-2]+";"}else s=l,o="\n        "+c+" sourceLocR = coords;\n        ++"+p[l-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+p[l-2]+";\n        "+c+" sourceLocA = coords;\n        --"+p[l-1]+";\n        "+c+" sourceLocB = coords;\n        --"+p[l-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),d="."+h[s-1],m=h.map((function(e){return"int "+e})),v=$K("sourceLocR",s-1).concat("inIdx.r"),g=$K("sourceLocG",s-1).concat("inIdx.g"),y=$K("sourceLocB",s-1).concat("inIdx.b"),b=$K("sourceLocA",s-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",k="vec4(\n            getAChannel("+v.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",N=r?"":"\n      float getBestIndicesAChannel("+m.join()+") {\n        return getChannel(getBestIndicesA("+h.join()+"),\n                                          vec2("+h.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+m.join()+") {\n        return getChannel(getA("+h.join()+"),\n                               vec2("+h.slice(-2).join()+"));\n      }\n      "+N+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+p[l-1]+" < "+(u[l-1]-1)+";\n        bool hasNextRow = "+p[l-2]+" < "+(u[l-2]-1)+";\n        "+o+"\n        ivec4 srcIdx = ivec4(sourceLocR"+d+", sourceLocG"+d+",\n          sourceLocB"+d+", sourceLocA"+d+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+k+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+k+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function IY(e,t,n,r){void 0===r&&(r=null);var a=t.shape[0],i=t.shape[1];null!=r&&(a=r.shape[0],i=r.shape[1]);var o=qR(i),s={windowSize:o,inSize:i,batchSize:a,outSize:Math.ceil(i/o)},u=new kY(s,n,null==r),l=[t];null!=r&&l.push(r);var c=e.runWebGLProgram(u,l,"int32");if(1===c.shape[1])return c;var p=IY(e,t,n,c);return e.disposeIntermediateTensorInfo(c),p}function SY(e,t,n,r){void 0===r&&(r=null);var a=null!=r?r.shape:t.shape,i=qR(a[a.length-1]),o=new NY(a,i,n,null==r),s=null==r?[t]:[t,r],u=e.runWebGLProgram(o,s,"int32");if(u.shape.length===t.shape.length){var l=SY(e,t,n,u);return e.disposeIntermediateTensorInfo(u),l}return u}function TY(e,t,n,r){var a=[n];if(sT("arg"+r.charAt(0).toUpperCase()+r.slice(1),a,t.shape.length),!Dg().getBool("WEBGL_PACK_REDUCE")||t.shape.length<=2){var i=[],o=iT(t.shape,a),s=o[0],u=Zv(o[1]),l=KX({inputs:{x:t},backend:e,attrs:{shape:[-1,u]}});i.push(l);var c=IY(e,l,r);i.push(c);var p=KX({inputs:{x:c},backend:e,attrs:{shape:s}});return i.forEach((function(t){return e.disposeIntermediateTensorInfo(t)})),p}return SY(e,t,r)}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var CY={kernelName:Gg,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=ag(r.axis,a.shape),o=uT(i,a.shape.length),s=a,u=[];null!=o&&(s=rY({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=cT(i.length,s.shape.length)),sT("argMax",[i[0]],s.shape.length);var l=TY(n,s,i[0],"max");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var EY={kernelName:jg,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=ag(r.axis,a.shape),o=uT(i,a.shape.length),s=a,u=[];null!=o&&(s=rY({inputs:{x:a},backend:n,attrs:{perm:o}}),u.push(s),i=cT(i.length,s.shape.length)),sT("argMin",[i[0]],s.shape.length);var l=TY(n,s,i[0],"min");return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),l}},RY=PX({opSnippet:sX+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n"}),AY={kernelName:Hg,backendName:"webgl",kernelFunc:RY},FY=PX({opSnippet:sX+"return log(x + sqrt(x * x + 1.0));"}),_Y={kernelName:qg,backendName:"webgl",kernelFunc:FY},DY=PX({opSnippet:sX+"\n  return atan(x);\n"}),OY={kernelName:Kg,backendName:"webgl",kernelFunc:DY},MY=BX({opSnippet:"\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",packedOpSnippet:"\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n"}),LY={kernelName:Yg,backendName:"webgl",kernelFunc:MY},zY=PX({opSnippet:sX+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\nreturn (log(1.0 + x) - log(1.0 - x)) / 2.0;"}),PY={kernelName:Xg,backendName:"webgl",kernelFunc:zY},BY=function(e,t,n,r,a){if(void 0===r&&(r=!1),void 0===a&&(a=!1),this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var i=e.filterWidth,o=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,p=e.effectiveFilterWidth,f=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;var d="avg"===t,m="((batch  * "+e.inHeight+" + xR) * "+e.inWidth+" + xC) * "+e.inChannels+" + d",v="(xR * "+e.inWidth+" + xC) * "+e.inChannels+" + d",g="0.0";if(d||(g="-1.0 / 1e-20"),n){this.userCode="\n        const ivec2 strides = ivec2("+o+", "+s+");\n        const ivec2 pads = ivec2("+f+", "+h+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+c+";\n              wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+p+";\n                wC += "+l+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = "+(r?a?m:v:"wR * "+p+" + wC")+";\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "}else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var b=4*Math.floor(i/4),x=i%4,w="\n      if ("+d+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+o+", "+s+");\n      const ivec2 pads = ivec2("+f+", "+h+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+c+";\n            wR += "+u+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+b+"; wC += 4) {\n            int xC = xCCorner + wC * "+l+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+l+", d),\n              getValue(batch, xR, xC + 2 * "+l+", d),\n              getValue(batch, xR, xC + 3 * "+l+", d)\n            );\n\n            "+w+"\n          }\n\n          int xC = xCCorner + "+b+";\n          if ("+(1===x)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+w+"\n          } else if ("+(2===x)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+l+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+w+"\n          } else if ("+(3===x)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+l+", d),\n              getValue(batch, xR, xC + 2 * "+l+", d),\n              initializationValue\n            );\n\n            "+w+"\n          }\n        }\n        setOutput("+y+");\n      }\n    "}},WY=function(e,t,n,r,a){if(void 0===r&&(r=!1),void 0===a&&(a=!1),this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var i=e.filterWidth,o=e.strideDepth,s=e.strideHeight,u=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,p=e.dilationWidth,f=e.effectiveFilterDepth,h=e.effectiveFilterHeight,d=e.effectiveFilterWidth,m=e.padInfo.front,v=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;var y="avg"===t,b="0.0";if(y||(b="-1.0 / 1e-20"),n){this.userCode="\n        const ivec3 strides =\n            ivec3("+o+", "+s+", "+u+");\n        const ivec3 pads = ivec3("+m+", "+v+", "+g+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+f+";\n              wD += "+l+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+h+";\n                wR += "+c+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+d+";\n                  wC += "+p+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition = "+(r?a?"(((batch * "+e.inDepth+" + xD) * "+e.inHeight+" + xR) * "+e.inWidth+" + xC) * "+e.inChannels+" + ch":"((xD * "+e.inHeight+" + xR) * "+e.inWidth+" + xC) * "+e.inChannels+" + ch":"wD * "+h+" * "+d+" +\n                      wR * "+d+" + wC")+";\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      "}else{var x=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(x="avgValue / count");var w=4*Math.floor(i/4),k=i%4,N="\n      if ("+y+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+o+", "+s+", "+u+");\n      const ivec3 pads = ivec3("+m+", "+v+", "+g+");\n      const float initializationValue = "+b+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+b+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+f+";\n            wD += "+l+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+h+";\n            wR += "+c+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+w+"; wC += 4) {\n              int xC = xCCorner + wC * "+p+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+p+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+p+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+p+", ch)\n              );\n\n              "+N+"\n            }\n\n            int xC = xCCorner + "+w+";\n            if ("+(1===k)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+N+"\n            } else if ("+(2===k)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+p+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+N+"\n            } else if ("+(3===k)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+p+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+p+", ch),\n                initializationValue\n              );\n\n              "+N+"\n            }\n          }\n          setOutput("+x+");\n        }\n      }\n    "}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var VY={kernelName:Jg,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Wq(a,"avgPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Kv(_I(o,1),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+o+" and dilations '1'"}));var l=kI(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Qv(l.inShape,l.outShape))return CX({inputs:{x:a},backend:n});var c=new BY(l,"avg",!1);return n.runWebGLProgram(c,[a],"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var UY={kernelName:Qg,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode,l=r.dataFormat,c=NI(a.shape,i,o,[1,1,1],s,u,l),p=new WY(c,"avg",!1);return n.runWebGLProgram(p,[a],"float32")}},GY=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,l=s-1-e.padInfo.top,c=u-1-e.padInfo.left,p=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+l+", "+c+");\n      const float avgMultiplier = float("+p+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+i+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+o+") {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},jY=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,p=e.effectiveFilterHeight,f=e.effectiveFilterWidth,h=c-1-e.padInfo.front,d=p-1-e.padInfo.top,m=f-1-e.padInfo.left,v=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+h+", "+d+", "+m+");\n      const float avgMultiplier = float("+v+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+a+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+p+";\n              wR += "+u+") {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+f+";\n                wC += "+l+") {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var HY={kernelName:$g,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,c=NI(i.shape,o,s,[1,1,1],u,l),p=new jY(c);return n.runWebGLProgram(p,[a],i.dtype)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var qY={kernelName:Zg,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;Wq([a,i],"avgPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,c=kI(o.shape,s,u,1,l),p=new GY(c);return n.runWebGLProgram(p,[a],o.dtype)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var KY={kernelName:ey,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;return oY({a:t.a,b:t.b,transposeA:r.transposeA,transposeB:r.transposeB,backend:n})}},XY=function(e,t,n,r,a,i){this.outputShape=[],this.variableNames=["x","mean","variance"],yS(e,t),yS(e,n);var o="0.0";null!=r&&(yS(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="1.0";null!=a&&(yS(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+o+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+i+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},YY=function(e,t,n,r,a,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],yS(e,t),yS(e,n);var o="vec4(0.0)";null!=r&&(yS(e,r),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=a&&(yS(e,a),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+o+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+i+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},JY={kernelName:Uy,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.mean,o=t.variance,s=t.offset,u=t.scale;Kv(i.shape.length===o.shape.length,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),Kv(null==s||i.shape.length===s.shape.length,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),Kv(null==u||i.shape.length===u.shape.length,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}));var l=r.varianceEpsilon;null==l&&(l=.001);var c=[a,i,o],p=null;null!=s&&(p=s.shape,c.push(s));var f=null;null!=u&&(f=u.shape,c.push(u));var h=Dg().getBool("WEBGL_PACK_NORMALIZATION")?new YY(a.shape,i.shape,o.shape,p,f,l):new XY(a.shape,i.shape,o.shape,p,f,l);return n.runWebGLProgram(h,c,c[0].dtype)}},ZY=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=bK(this.rank),r="uniform int start["+this.rank+"];",a=function(e){if(1===e)return"sourceLoc";if(e<=6)return QY.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+QY[t]+" = start["+t+"] + coords."+QY[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+a+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),QY=["x","y","z","w","u","v"];
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var $Y=function(){function e(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=bK(this.rank),n=$K("coords",this.rank),r=$K("sourceLoc",this.rank),a=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",i="getChannel(getSource("+r.join()+"), "+a+")",o="\n      result.x = "+i+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+i+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+i+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+i+";\n        }\n      }\n    ",u=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+u+"\n        vec4 result = vec4(0.);\n        "+o+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}();
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function eJ(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=ON(a,r.begin,r.size),o=i[0],s=i[1];if(xN(a,o,s),0===Zv(s))return n.makeTensorInfo(s,a.dtype,[]);if(n.shouldExecuteOnCPU([a])||"string"===a.dtype){var u=n.texData.get(a.dataId),l=HK(u.values,o,s,a.shape,a.dtype);return n.makeTensorInfo(s,a.dtype,l)}var c=n.texData.get(a.dataId).isPacked,p=_N(a.shape,o,s);if(c||!p){var f=Dg().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new $Y(s):new ZY(s),h=f.getCustomSetupFunc(o);return n.runWebGLProgram(f,[a],a.dtype,h)}return n.uploadToGPU(a.dataId),function(e,t,n,r){var a=r.texData.get(e.dataId),i=r.makeTensorInfo(n,e.dtype),o=r.texData.get(i.dataId);Object.assign(o,a),o.shape=n,o.dtype=e.dtype;var s=DN(t,xg(e.shape));a.slice&&(s+=a.slice.flatOffset),o.slice={flatOffset:s,origDataId:a.slice&&a.slice.origDataId||e.dataId};var u=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,u+1),i}(a,o,s,n)}var tJ={kernelName:$b,backendName:"webgl",kernelFunc:eJ},nJ={kernelName:ty,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.crops;Kv(a.shape.length<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=XR(a.shape,i,s),l=YR(u.length,i.length),c=JR(a.shape,i,s),p=ZR(o,i.length),f=QR(c,o,i.length),h=[],d=KX({inputs:{x:a},backend:n,attrs:{shape:u}}),m=rY({inputs:{x:d},backend:n,attrs:{perm:l}}),v=KX({inputs:{x:m},backend:n,attrs:{shape:c}}),g=eJ({inputs:{x:v},backend:n,attrs:{begin:p,size:f}});return h.push(d),h.push(m),h.push(v),h.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var rJ={kernelName:ny,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=n.readSync(a.dataId),u=n.readSync(i.dataId),l=IK(s,u,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,l)}},aJ=BX({opSnippet:"return float(a != b);",dtype:"bool"}),iJ={kernelName:Tb,backendName:"webgl",kernelFunc:aJ};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function oJ(e){var t=e.inputs,n=e.backend,r=t.input;return CX({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.real},backend:n})}var sJ={kernelName:Pb,backendName:"webgl",kernelFunc:oJ},uJ="return float(int(x));";
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var lJ={kernelName:ay,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function e(t){var n=t.inputs,r=t.backend,a=t.attrs,i=n.x,o=a.dtype;if("complex64"===o){if("complex64"===i.dtype)return CX({inputs:{x:i},backend:r});var s=AT(i.shape),u=e({inputs:{x:i},backend:r,attrs:{dtype:"float32"}}),l=RX({inputs:{real:u,imag:s},backend:r});return s.dispose(),r.disposeIntermediateTensorInfo(u),l}if("complex64"===i.dtype){var c=oJ({inputs:{input:i},backend:r}),p=e({inputs:{x:c},backend:r,attrs:{dtype:o}});return r.disposeIntermediateTensorInfo(c),p}if(!cg(i.dtype,o)){var f=CX({inputs:{x:i},backend:r});return{dataId:f.dataId,shape:f.shape,dtype:o}}if("int32"===o)return function(e,t){var n=new oX(e.shape,uJ),r=t.runWebGLProgram(n,[e],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}(i,r);if("bool"===o){var h=r.makeTensorInfo([],"bool",og("bool",1)),d=aJ({inputs:{a:i,b:h},backend:r});return r.disposeIntermediateTensorInfo(h),d}throw new Error("Error in Cast: failed to cast "+i.dtype+" to "+o)}},cJ="return ceil(x);",pJ=PX({opSnippet:cJ,packedOpSnippet:cJ,cpuKernelImpl:TK}),fJ={kernelName:iy,backendName:"webgl",kernelFunc:pJ},hJ=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),dJ=function(){function e(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,a){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(a,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(a,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}();
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var mJ={kernelName:oy,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.clipValueMin,s=a.clipValueMax,u=(t=Dg().getBool("WEBGL_PACK_CLIP")?new dJ(i.shape):new hJ(i.shape)).getCustomSetupFunc(o,s);return r.runWebGLProgram(t,[i],i.dtype,u)}},vJ=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function gJ(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}}var yJ={kernelName:uy,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,a=n.texData.get(r.dataId),i=new vJ(r.shape),o=[gJ(r,a.complexTensorInfos.real),gJ(r,a.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}},bJ=function(e){this.outputShape=[],this.outputShape=jR(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];for(var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"],a=1;a<t.length;a++){var i=t[a-1];r.push("else if (yC < "+t[a]+") setOutput(getT"+a+"(yR, yC-"+i+"));")}var o=t.length,s=t[t.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+s+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},xJ=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=jR(e,t);var n=this.outputShape,r=n.length,a=bK(r),i=$K("coords",r),o=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];for(var l=o[t],c=o.slice(-2),p=o.join(),f="if ("+l+" < "+s[0]+") {\n        return getChannel(\n            getT0("+p+"), vec2("+c.join()+"));\n        }",h=1;h<s.length;h++){var d=s[h-1];f+="\n        if ("+l+" < "+s[h]+"  && "+l+" >= "+s[h-1]+") {\n          return getChannel(\n            getT"+h+"("+wJ(o,l,d)+"),\n            vec2("+wJ(c,l,d)+"));\n        }"}var m=s.length,v=s[s.length-1];f+="\n        return getChannel(\n          getT"+m+"("+wJ(o,l,v)+"),\n          vec2("+wJ(c,l,v)+"));",this.userCode="\n      float getValue("+o.map((function(e){return"int "+e}))+") {\n        "+f+"\n      }\n\n      void main() {\n        "+a+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+i+"), 0., 0., 0.);\n\n        "+i[r-1]+" = "+i[r-1]+" + 1;\n        if ("+i[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+i+");\n        }\n\n        "+i[r-2]+" = "+i[r-2]+" + 1;\n        if ("+i[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+i+");\n        }\n\n        "+i[r-1]+" = "+i[r-1]+" - 1;\n        if ("+i[r-2]+" < "+n[r-2]+" &&\n            "+i[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+i+");\n        }\n        setOutput(result);\n      }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function wJ(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function kJ(e){var t=e.inputs,n=e.backend,r=t.input;return CX({inputs:{x:n.texData.get(r.dataId).complexTensorInfos.imag},backend:n})}var NJ={kernelName:Yy,backendName:"webgl",kernelFunc:kJ};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function IJ(e,t,n){var r=e[0].dtype;if("complex64"===r){var a=e.map((function(e){return oJ({inputs:{input:e},backend:n})})),i=e.map((function(e){return kJ({inputs:{input:e},backend:n})})),o=IJ(a,t,n),s=IJ(i,t,n),u=RX({inputs:{real:o,imag:s},backend:n});return a.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),i.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}if("string"===r){var l=SJ(e,t,n),c=l.tensors2D,p=l.outShape,f=c.map((function(e){return{vals:n.readSync(e.dataId),shape:e.shape}})),h=1===c[0].shape[0],d=CK(f,p,r,h),m=jR(e.map((function(e){return e.shape})),t),v=n.makeTensorInfo(m,r,d);return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),v}if(e.length>Dg().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var g=Math.floor(e.length/2),y=IJ(e.slice(0,g),t,n),b=IJ(e.slice(g),t,n),x=IJ([y,b],t,n);return n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),x}if(Dg().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].shape.length>1){var w=new xJ(e.map((function(e){return e.shape})),t);return n.runWebGLProgram(w,e,r)}var k=SJ(e,t,n),N=k.tensors2D,I=k.outShape,S=new bJ(N.map((function(e){return e.shape}))),T=n.runWebGLProgram(S,N,r);N.forEach((function(e){return n.disposeIntermediateTensorInfo(e)}));var C=KX({inputs:{x:T},attrs:{shape:I},backend:n});return n.disposeIntermediateTensorInfo(T),C}function SJ(e,t,n){var r=jR(e.map((function(e){return e.shape})),t);return{tensors2D:e.map((function(e){return KX({inputs:{x:e},attrs:{shape:[-1,Zv(e.shape.slice(t))]},backend:n})})),outShape:r}}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function TJ(e){var t=e.inputs,n=e.backend,r=ag(e.attrs.axis,t[0].shape)[0],a=jR(t.map((function(e){return e.shape})),r);if(0===Zv(a))return n.makeTensorInfo(a,t[0].dtype,[]);var i=t.filter((function(e){return Zv(e.shape)>0}));return 1===i.length?CX({inputs:{x:i[0]},backend:n}):(GR(i.map((function(e){return e.shape})),r),IJ(i,r,n))}var CJ={kernelName:ly,backendName:"webgl",kernelFunc:TJ},EJ=function(e,t,n,r,a){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),void 0===a&&(a=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.padInfo.top,o=e.padInfo.left,s=e.strideHeight,u=e.strideWidth,l=e.dilationHeight,c=e.dilationWidth,p=e.filterHeight,f=e.filterWidth,h=4*Math.floor(e.inChannels/4),d=e.inChannels%4,m="channelsLast"===e.dataFormat,v=m?1:2,g=m?2:3,y=m?3:1,b="",x="";n&&(b=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":a?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",x="result = activation(result);");var w=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      "+b+"\n\n      const ivec2 strides = ivec2("+s+", "+u+");\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+y+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+v+"], coords["+g+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+p+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+c+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+m+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===d)+") {\n\n              if ("+m+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+h+") *\n                    getW(wR, wC, "+h+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+h+", xR, xC) *\n                    getW(wR, wC, "+h+", d2);\n              }\n\n            } else if ("+(2===d)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2)\n              );\n\n              if ("+m+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===d)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2),\n                getW(wR, wC, "+h+" + 2, d2)\n              );\n\n              if ("+m+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1),\n                  getX(batch, xR, xC, "+h+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC),\n                  getX(batch, "+h+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+w+"\n        "+x+"\n        setOutput(result);\n      }\n    "},RJ=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,l=e.dilationWidth,c=e.filterDepth,p=e.filterHeight,f=e.filterWidth,h=4*Math.floor(e.inChannels/4),d=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+a+", "+i+", "+o+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+c+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+p+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+f+"; wC++) {\n              int xC = xCCorner + wC * "+l+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===d)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+h+") *\n                  getW(wF, wR, wC, "+h+", d2);\n              } else if ("+(2===d)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+h+"),\n                  getX(batch, xF, xR, xC, "+h+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+h+", d2),\n                  getW(wF, wR, wC, "+h+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===d)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+h+"),\n                  getX(batch, xF, xR, xC, "+h+" + 1),\n                  getX(batch, xF, xR, xC, "+h+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+h+", d2),\n                  getW(wF, wR, wC, "+h+" + 1, d2),\n                  getW(wF, wR, wC, "+h+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},AJ=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,a=n.inChannels,i=n.strideWidth,o=n.strideHeight,s=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,p=n.dataFormat,f=s.left,h=s.top,d=a*r,m=Uq(),v="channelsLast"===p,g=v?0:1,y=v?1:2,b="",x=0;x<=1;x++)for(var w=0;w<=1;w++)b+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+x+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+o+" - "+h+";\n            d0 = offsetY + "+c+" * (pos / "+d+");\n\n            if(d0 < "+t[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+i+". - "+f+".);\n              d1 = offsetX + "+l+" * (int(mod(float(pos), "+d+".) / "+a+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+a+".));\n\n                if ("+v+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+m.output+" = result;\n      }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function FJ(e){var t,n=e.x,r=e.filter,a=e.convInfo,i=e.backend,o=e.bias,s=void 0===o?null:o,u=e.preluActivationWeights,l=void 0===u?null:u,c=e.leakyreluAlpha,p=void 0===c?0:c,f=e.activation,h=void 0===f?null:f,d=n.shape,m=i.texData.get(n.dataId),v=a.inChannels,g=d[0]*d[1]*d[2],y=a.outChannels,b="channelsLast"===a.dataFormat,x=[],w=(1===g||1===y)&&v>iY,k=d[2]%2!=0&&!!m.isPacked;if(!w&&Dg().getBool("WEBGL_LAZILY_UNPACK")&&Dg().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&k){var N=b?d[0]*d[1]*(d[2]+1):d[0]*d[2]*(d[3]+1),I={dataId:n.dataId,shape:[1,N,a.inChannels],dtype:n.dtype},S=m.shape;m.shape=m.shape.slice(),m.shape[m.shape.length-2]++,Kv(Mq(m.shape,I.shape),(function(){return"packed reshape "+m.shape+" to "+I.shape+" isn't free"}));var T=KX({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}});x.push(T);var C=oY({a:I,b:T,backend:i,transposeA:false,transposeB:false,bias:s,activation:h,preluActivationWeights:l,leakyreluAlpha:p}),E=i.texData.get(C.dataId);Kv(E.isPacked,(function(){return"batchMatMul result is expected to be packed"})),m.shape=S,E.shape=a.outShape,(t=CX({inputs:{x:C},backend:i})).shape=a.outShape,x.push(C)}else{var R=KX({inputs:{x:n},backend:i,attrs:{shape:[1,b?d[0]*d[1]*d[2]:d[0]*d[2]*d[3],a.inChannels]}}),A=KX({inputs:{x:r},backend:i,attrs:{shape:[1,a.inChannels,a.outChannels]}}),F=oY({a:R,b:A,transposeA:false,transposeB:false,backend:i,bias:s,activation:h,preluActivationWeights:l,leakyreluAlpha:p});t=KX({inputs:{x:F},backend:i,attrs:{shape:a.outShape}}),x.push(R),x.push(A),x.push(F)}for(var _=0,D=x;_<D.length;_++){var O=D[_];i.disposeIntermediateTensorInfo(O)}return t}function _J(e){var t=e.x,n=e.filter,r=e.convInfo,a=e.backend,i=e.bias,o=void 0===i?null:i,s=e.preluActivationWeights,u=void 0===s?null:s,l=e.leakyreluAlpha,c=void 0===l?0:l,p=e.activation,f=void 0===p?null:p,h=r.filterWidth,d=r.filterHeight,m=r.inChannels,v=r.outWidth,g=r.outHeight,y="channelsLast"===r.dataFormat,b=h*d*m,x=g*v,w=[b,x],k=[],N=KX({inputs:{x:t},backend:a,attrs:{shape:t.shape.slice(1)}}),I=KX({inputs:{x:n},backend:a,attrs:{shape:[1,b,Zv(n.shape)/b]}});k.push(N),k.push(I);var S=new AJ(w,N.shape,r),T=a.runWebGLProgram(S,[N],"float32"),C=KX({inputs:{x:T},backend:a,attrs:{shape:[1,w[0],w[1]]}});k.push(T),k.push(C);var E=null!=o,R=null!=u,A="leakyrelu"===f,F=f?WX(f,!0):null,_=new VX(C.shape,I.shape,[1,x,r.outChannels],!0,!1,E,F,R,A),D=[C,I];if(o&&D.push(o),R&&D.push(u),A){var O=a.makeTensorInfo([],"float32",Px(c,"float32"));D.push(O),k.push(O)}var M=a.runWebGLProgram(_,D,"float32"),L=KX({inputs:{x:M},backend:a,attrs:{shape:y?[1,g,v,r.outChannels]:[1,r.outChannels,g,v]}});k.push(M);for(var z=0,P=k;z<P.length;z++){var B=P[z];a.disposeIntermediateTensorInfo(B)}return L}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var DJ={kernelName:cy,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,l=a.dataFormat,c=a.dilations,p=a.dimRoundingMode,f=DI(l),h=II(i.shape,o.shape,s,c,u,p,!1,f);if(1!==h.filterHeight||1!==h.filterWidth||1!==h.dilationHeight||1!==h.dilationWidth||1!==h.strideHeight||1!==h.strideWidth||"SAME"!==h.padInfo.type&&"VALID"!==h.padInfo.type)if(Dg().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=_J({x:i,filter:o,convInfo:h,backend:r});else{var d=new EJ(h);t=r.runWebGLProgram(d,[i,o],"float32")}else t=FJ({x:i,filter:o,convInfo:h,backend:r});var m=KX({inputs:{x:t},backend:r,attrs:{shape:h.outShape}});return r.disposeIntermediateTensorInfo(t),m}},OJ=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+i+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},MJ=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i="channelsLast"===e.dataFormat,o=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=i?1:2,l=i?2:3,c=i?3:1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+c+"];\n\n        ivec2 dyCorner = ivec2(coords["+u+"], coords["+l+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+i+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},LJ=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+a+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+i+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+o+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},zJ=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,a=e.strideDepth,i=e.strideHeight,o=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,l=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+u+", "+l+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+a+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+i+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+o+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var PJ={kernelName:py,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=r.filterShape,p=DI(u),f=II(a.shape,c,o,1,s,l,!1,p),h=new OJ(f);return n.runWebGLProgram(h,[a,i],"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var BJ={kernelName:fy,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.inputShape,s=r.strides,u=r.pad,l=r.dataFormat,c=r.dimRoundingMode,p=DI(l),f=II(o,i.shape,s,1,u,c,!1,p),h=new MJ(f);return n.runWebGLProgram(h,[a,i],"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var WJ={kernelName:hy,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=SI(a.shape,i.shape,o,u,s),c=new RJ(l);return n.runWebGLProgram(c,[a,i],"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var VJ={kernelName:dy,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.pad,u=r.filterShape,l=SI(a.shape,u,o,1,s),c=new LJ(l);return n.runWebGLProgram(c,[a,i],"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var UJ={kernelName:my,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.pad,s=r.strides,u=SI(r.inputShape,i.shape,s,1,o),l=new zJ(u);return n.runWebGLProgram(l,[a,i],"float32")}},GJ=PX({opSnippet:zX+"\n  return cos(x);\n"}),jJ={kernelName:vy,backendName:"webgl",kernelFunc:GJ},HJ=PX({opSnippet:"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n"}),qJ={kernelName:gy,backendName:"webgl",kernelFunc:HJ},KJ=function(e,t,n,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],s=e[2],u=e[3],l=t[0],c=n[0],p=n[1];this.outputShape=[l,c,p,u];var f="bilinear"===r?1:0,h=o-1+".0",d=s-1+".0",m=c>1?[""+(o-1)/(c-1),"(y2-y1) * height_ratio","y1*"+h+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+h],v=m[0],g=m[1],y=m[2],b=p>1?[""+(s-1)/(p-1),"(x2-x1) * width_ratio","x1*"+d+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+d],x=b[0],w=b[1],k=b[2];this.userCode="\n      const float height_ratio = float("+v+");\n      const float width_ratio = float("+x+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+i+") {\n          return;\n        }\n\n        float height_scale = "+g+";\n        float width_scale = "+w+";\n\n        float in_y = "+y+";\n        if( in_y < 0.0 || in_y > "+h+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n        float in_x = "+k+";\n        if( in_x < 0.0 || in_x > "+d+" ) {\n          setOutput(float("+a+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+f+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},XJ={kernelName:by,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.image,i=t.boxes,o=t.boxInd,s=r.cropSize,u=r.method,l=r.extrapolationValue,c=new KJ(a.shape,i.shape,s,u,l);return n.runWebGLProgram(c,[a,i,o],"float32")}},YJ=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,a=t?"0.0":"getX("+JJ(r,"coords")+")",i=e[e.length-1],o="",s="";t?(o=n?"end != "+(i-1):"end != 0",s=n?"end + 1":"end - 1"):(o=n?"end + pow2 < "+i:"end >= pow2",s=n?"end + pow2":"end - pow2"),this.userCode="\n      uniform float index;\n      void main() {\n        "+bK(r)+" coords = getOutputCoords();\n        int end = "+ZJ(r,"coords")+";\n        float val = "+a+";\n        int pow2 = int(pow(2.0, index));\n        if ("+o+") {\n          int idx = "+s+";\n          "+ZJ(r,"coords")+" = idx;\n          val += getX("+JJ(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.index&&(t.index=n.getUniformLocation(r,"index")),n.gl.uniform1f(t.index,e)}},e}();
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function JJ(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}function ZJ(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var QJ={kernelName:yy,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.exclusive,s=r.reverse,u=a.shape.length,l=uT([i],u),c=a;null!=l&&(c=rY({inputs:{x:a},backend:n,attrs:{perm:l}}));var p=cT(1,u)[0];if(p!==u-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(a.shape.length-1)+" but got axis="+i);for(var f=a.shape[p],h=CX({inputs:{x:c},backend:n}),d=0;d<=Math.ceil(Math.log2(f))-1;d++){var m=new YJ(c.shape,!1,s),v=m.getCustomSetupFunc(d),g=h;h=n.runWebGLProgram(m,[h],h.dtype,v),n.disposeIntermediateTensorInfo(g)}if(o){var y=new YJ(c.shape,o,s),b=h;h=n.runWebGLProgram(y,[h],h.dtype),n.disposeIntermediateTensorInfo(b)}if(null!=l){var x=rY({inputs:{x:h},backend:n,attrs:{perm:lT(l)}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(c),x}return h}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var $J={kernelName:xy,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.weights,o=r.size,s=r.binaryOutput;if(1===a.shape.length){var u=n.readSync(a.dataId),l=n.readSync(i.dataId),c=IK(u,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}if(2===a.shape.length){var p=n.bufferSync(a),f=n.bufferSync(i),h=SK(p,f,o,s);return n.makeTensorInfo(h.shape,i.dtype,h.values)}throw new Error("Error in denseBincount: input must be at most rank 2, but got rank"+a.shape.length+".")}},eZ=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}var t=e.prototype;return t.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},t.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},t.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},t.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},t.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}();
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var tZ={kernelName:wy,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockSize,o=r.dataFormat;Kv(i>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+i}));var s=a.shape[0],u="NHWC"===o?a.shape[1]:a.shape[2],l="NHWC"===o?a.shape[2]:a.shape[3],c="NHWC"===o?a.shape[3]:a.shape[1],p=u*i,f=l*i,h=c/(i*i),d=new eZ("NHWC"===o?[s,p,f,h]:[s,h,p,f],i,o);return n.runWebGLProgram(d,[a],a.dtype)}},nZ=function(e,t,n,r,a){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),void 0===a&&(a=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.inHeight,o=e.inWidth,s=e.padInfo.top,u=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,p=e.dilationHeight,f=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,m=e.outChannels/e.inChannels,v="",g="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":a?"float activation(float a) {\n          float b = getLeakyreluAlphaAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",g="result = activation(result);");var y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      "+v+"\n\n      const ivec2 strides = ivec2("+l+", "+c+");\n      const ivec2 pads = ivec2("+s+", "+u+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+m+";\n        int q = d2 - d1 * "+m+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+h+"; wR++) {\n          int xR = xRCorner + wR * "+p+";\n\n          if (xR < 0 || xR >= "+i+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+f+";\n\n            if (xC < 0 || xC >= "+o+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+y+"\n        "+g+"\n        setOutput(result);\n      }\n    "},rZ=function(e,t,n,r,a){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),void 0===a&&(a=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var i=e.inHeight,o=e.inWidth,s=e.padInfo.top,u=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,p=e.dilationHeight,f=e.dilationWidth,h=e.filterHeight,d=e.filterWidth,m=d,v="int xR; int xC; int xCOffset;",g=0;g<h;g++)for(var y=0;y<d;y++)v+="\n          vec4 xTexelR"+g+"C"+2*y+" = vec4(0.);\n          vec4 wR"+g+"C"+y+" = vec4(0.);\n          vec4 xR"+g+"C"+y+" = vec4(0.);";for(var b=0;b<h;b++)for(var x=0;x<m;x++){var w=2*x;if(v+="\n          xR = xRCorner + "+b*p+";\n          xC = xCCorner + "+w*f+";\n        ",1===c){if(w<d&&(v+=u%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+b+"C"+w+" = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+o+") {\n                    xTexelR"+b+"C"+w+".zw = vec2(0.);\n                  }\n                } else {\n                  xTexelR"+b+"C"+w+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n\n                  // Need to manually clear unused channels in case\n                  // we're reading from recycled texture.\n                  if(xCOffset + 1 >= "+o+") {\n                    previous.zw = vec2(0.);\n                  }\n\n                  xR"+b+"C"+w+" = vec4(previous.zw, xTexelR"+b+"C"+w+".xy);\n                } else {\n                  xR"+b+"C"+w+" = vec4(0, 0, xTexelR"+b+"C"+w+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+i+" && xC >= 0 && xC < "+o+") {\n                  xTexelR"+b+"C"+w+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+b+"C"+w+" = vec4(0.);\n                }\n\n                xR"+b+"C"+w+" = xTexelR"+b+"C"+w+";\n              ",w+1<d)){var k=u%2==0?Hv(f):f;f%2==0&&u%2==1||f%2!=0&&u%2!=1?(v+="\n                  xCOffset = xC + "+u%2+" + "+k+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+b+"C"+(w+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",f>1&&(v+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+i+" &&\n                      xCOffset >= 0 && xCOffset < "+o+") {\n                      xTexelR"+b+"C"+w+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+b+"C"+w+" = vec4(0.);\n                    }\n                  "),v+="\n                  xR"+b+"C"+(w+1)+" = vec4(\n                    xTexelR"+b+"C"+w+".zw, xTexelR"+b+"C"+(w+2)+".xy);\n                "):v+="\n                  xCOffset = xC + "+k+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+b+"C"+(w+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+b+"C"+(w+1)+" = xTexelR"+b+"C"+(w+2)+";\n                "}}else w<d&&(v+="\n              if(xR >= 0 && xR < "+i+") {\n            ",u%2==1?(v+="\n                xCOffset = xC + 1 - "+c+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+b+"C"+w+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+b+"C"+w+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+o+") {\n                  xTexelR"+b+"C"+(w+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+b+"C"+(w+2)+" = vec4(0.);\n                }\n\n                xR"+b+"C"+w+" = vec4(\n                  xTexelR"+b+"C"+w+".zw, xTexelR"+b+"C"+(w+2)+".zw);\n              ",w+1<d&&(v+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+c+";\n                  if(xCOffset >= 0 && xCOffset < "+o+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+b+"C"+(w+1)+" = vec4(xTexelR"+b+"C"+(w+2)+".xy, final.xy);\n                ")):(v+="\n                if(xC >= 0 && xC < "+o+") {\n                  xTexelR"+b+"C"+w+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+b+"C"+w+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+c+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+b+"C"+(w+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+b+"C"+(w+2)+" = vec4(0.);\n                }\n\n                xR"+b+"C"+w+" = vec4(\n                  xTexelR"+b+"C"+w+".xy, xTexelR"+b+"C"+(w+2)+".xy);\n              ",w+1<d&&(v+="\n                  xR"+b+"C"+(w+1)+" = vec4(\n                    xTexelR"+b+"C"+w+".zw, xTexelR"+b+"C"+(w+2)+".zw);\n                ")),v+="}");w<d&&(v+="\n            vec4 wTexelR"+b+"C"+w+" = getW("+b+", "+w+", d1, q);\n            wR"+b+"C"+w+" = vec4(wTexelR"+b+"C"+w+".xz, wTexelR"+b+"C"+w+".xz);\n          ",w+1<d&&(v+="\n              vec4 wTexelR"+b+"C"+(w+1)+" = getW("+b+", "+(w+1)+", d1, q);\n              wR"+b+"C"+(w+1)+" =\n                vec4(wTexelR"+b+"C"+(w+1)+".xz, wTexelR"+b+"C"+(w+1)+".xz);"))}for(var N=0;N<h;N++)for(var I=0;I<d;I++)v+="dotProd += xR"+N+"C"+I+" * wR"+N+"C"+I+";";var S="",T="";n&&(S=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":a?"vec4 activation(vec4 a) {\n          vec4 b = getLeakyreluAlphaAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",T="result = activation(result);");var C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),a&&this.variableNames.push("leakyreluAlpha"),this.userCode="\n      "+S+"\n\n      const ivec2 strides = ivec2("+l+", "+c+");\n      const ivec2 pads = ivec2("+s+", "+u+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+v+"\n\n        vec4 result = dotProd;\n        "+C+"\n        "+T+"\n        setOutput(result);\n      }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var aZ={kernelName:ky,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=r.strides,s=r.pad,u=r.dilations,l=r.dimRoundingMode,c=u;null==c&&(c=[1,1]),Kv(_I(o,c),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+c+"'"}));var p,f=II(a.shape,i.shape,o,c,s,l,!0);return p=Dg().getBool("WEBGL_PACK_DEPTHWISECONV")&&f.strideWidth<=2&&f.outChannels/f.inChannels==1?new rZ(f):new nZ(f),n.runWebGLProgram(p,[a,i],"float32")}},iZ=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,a=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+i+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+a+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},oZ=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,a=e.strideWidth,i=t-1-e.padInfo.top,o=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+a+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var sZ={kernelName:Ny,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.dy,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=r.filterShape,p=II(a.shape,c,o,s,u,l,!0),f=new iZ(p);return n.runWebGLProgram(f,[a,i],"float32")}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var uZ={kernelName:Iy,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.filter,o=r.strides,s=r.dilations,u=r.pad,l=r.dimRoundingMode,c=II(r.inputShape,i.shape,o,s,u,l,!0),p=new oZ(c);return n.runWebGLProgram(p,[a,i],"float32")}},lZ=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "};
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var cZ={kernelName:Sy,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=t.x,a=[].concat(r.shape,r.shape),i=Zv(r.shape),o=KX({inputs:{x:r},backend:n,attrs:{shape:[i]}}),s=new lZ(i),u=n.runWebGLProgram(s,[o],o.dtype),l=KX({inputs:{x:u},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),l}},pZ=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.inHeight,n=e.inWidth,r=e.padInfo,a=e.strideHeight,i=e.strideWidth,o=e.filterHeight,s=e.filterWidth,u=e.dilationHeight,l=e.dilationWidth,c=r.top,p=r.left;this.userCode="\n      const ivec2 strides = ivec2("+a+", "+i+");\n      const ivec2 pads = ivec2("+c+", "+p+");\n      const float neg_infinity = -3.4e38;\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.w;\n        ivec2 outTopLeftCorner =\n            coords.yz * strides - pads;\n        int hBeg = outTopLeftCorner.x;\n        int wBeg = outTopLeftCorner.y;\n\n        float curVal = neg_infinity;\n        for (int h = 0; h < "+o+"; h++) {\n          int hIn = hBeg + h * "+u+";\n\n          if (hIn >= 0 && hIn < "+t+") {\n            for (int w = 0; w < "+s+"; w++) {\n              int wIn = wBeg + w * "+l+";\n\n              if (wIn >= 0 && wIn < "+n+") {\n                float xVal = getX(batch, hIn, wIn, d1);\n                float wVal = getW(h, w, d1);\n\n                float val = xVal + wVal;\n                if (val > curVal) {\n                  curVal = val;\n                }\n              }\n            }\n          }\n        }\n\n        float result = curVal;\n        setOutput(result);\n      }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var fZ={kernelName:Ty,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=a.strides,u=a.pad,l=a.dilations,c=wI(i.shape,o.shape,s,u,"NHWC",l),p=new pZ(c),f=KX({inputs:{x:t=r.runWebGLProgram(p,[i,o],"float32")},backend:r,attrs:{shape:c.outShape}});return r.disposeIntermediateTensorInfo(t),f}},hZ=PX({opSnippet:"return (x >= 0.0) ? x : (exp(x) - 1.0);",packedOpSnippet:"\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n"}),dZ={kernelName:Ay,backendName:"webgl",kernelFunc:hZ},mZ={kernelName:Fy,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.dy,a=t.y,i=Dg().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new TX("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",r.shape,a.shape):new IX("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,a.shape);return n.runWebGLProgram(i,[r,a],r.dtype)}},vZ=BX({opSnippet:"return float(a == b);",packedOpSnippet:"\n  return vec4(equal(a, b));\n",dtype:"bool"}),gZ={kernelName:Dy,backendName:"webgl",kernelFunc:vZ},yZ=PX({opSnippet:'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = '+tA+";\n  float a1 = "+nA+";\n  float a2 = "+rA+";\n  float a3 = "+aA+";\n  float a4 = "+iA+";\n  float a5 = "+oA+";\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n"}),bZ={kernelName:_y,backendName:"webgl",kernelFunc:yZ},xZ="return exp(x);",wZ=PX({opSnippet:xZ,packedOpSnippet:xZ,cpuKernelImpl:EK}),kZ={kernelName:Oy,backendName:"webgl",kernelFunc:wZ};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function NZ(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.dim,i=t.input,o=i.shape.length,s=i.shape.slice(),u=a;return a<0&&(Kv(-(o+1)<=a,(function(){return"Axis must be in the interval ["+-(o+1)+", "+o+"]"})),u=o+a+1),s.splice(u,0,1),KX({inputs:{x:i},backend:r,attrs:{shape:s}})}var IZ={kernelName:My,backendName:"webgl",kernelFunc:NZ},SZ="return exp(x) - 1.0;",TZ=PX({opSnippet:SZ,packedOpSnippet:SZ,cpuKernelImpl:RK}),CZ={kernelName:Ly,backendName:"webgl",kernelFunc:TZ},EZ=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var a,i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";if("real"===e)a="return real * expR - imag * expI;";else{if("imag"!==e)throw new Error('FFT component must be either "real" or "imag", got '+e+".");a="return real * expI + imag * expR;"}this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+a+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+o+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function RZ(e,t,n){var r=n.texData.get(e.dataId),a=Zv(e.shape),i=e.shape[e.shape.length-1],o=KX({inputs:{x:e},backend:n,attrs:{shape:[a/i,i]}}).shape,s=new EZ("real",o,t),u=new EZ("imag",o,t),l=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:o},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:o}],c=n.runWebGLProgram(s,l,"float32"),p=n.runWebGLProgram(u,l,"float32"),f=RX({inputs:{real:c,imag:p},backend:n});n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p);var h=KX({inputs:{x:f},backend:n,attrs:{shape:e.shape}});return n.disposeIntermediateTensorInfo(h),h}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var AZ={kernelName:zy,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend;return RZ(t.input,!1,n)}},FZ=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}();
/**
	 * @license
	 * Copyright 2019 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function _Z(e){var t=e.backend,n=e.attrs,r=n.shape,a=n.value,i=n.dtype;if("string"===(i=i||gg(a))){var o=sg(i,Zv(r));return o.fill(a),t.makeTensorInfo(r,i,o)}var s=new FZ(r,a),u=s.getCustomSetupFunc(a);return t.runWebGLProgram(s,[],i,u)}var DZ,OZ={kernelName:Py,backendName:"webgl",kernelFunc:_Z},MZ=function(e){this.variableNames=["Image"],this.outputShape=[];var t=e[2];this.outputShape=e,this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n\n          int coordX = "+t+" - x;\n          float outputValue;\n          if(coordX >= 0 && coordX < "+t+") {\n            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);\n          } else {\n            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    "},LZ={kernelName:By,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.image,a=n,i=new MZ(r.shape);return a.runWebGLProgram(i,[r],r.dtype)}},zZ="return floor(x);",PZ=PX({opSnippet:zZ,packedOpSnippet:zZ,cpuKernelImpl:AK}),BZ={kernelName:Wy,backendName:"webgl",kernelFunc:PZ},WZ=BX({opSnippet:"\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",packedOpSnippet:"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n",dtype:"int32"}),VZ={kernelName:Vy,backendName:"webgl",kernelFunc:WZ},UZ=function(e){this.variableNames=["A"];var t=Uq(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},GZ=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=Uq(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) /\n                       vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},jZ={kernelName:Sx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.pixels,i=r.numChannels,o="undefined"!=typeof HTMLVideoElement&&a instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement,u="undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap,l=o?[a.videoWidth,a.videoHeight]:[a.width,a.height],c=l[0],p=l[1],f=[p,c],h=[p,c,i];(s||o||u)&&(null==DZ&&(DZ=document.createElement("canvas").getContext("2d")),DZ.canvas.width=c,DZ.canvas.height=p,DZ.drawImage(a,0,0,c,p),a=DZ.canvas);var d=n.makeTensorInfo(f,"int32");n.texData.get(d.dataId).usage=sq.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(d.dataId),a);var m=Dg().getBool("WEBGL_PACK")?new GZ(h):new UZ(h),v=n.runWebGLProgram(m,[d],"int32");return n.disposeData(d.dataId),v}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var HZ={kernelName:Ex,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=n.filter,s=n.bias,u=n.preluActivationWeights,l=a.strides,c=a.pad,p=a.dataFormat,f=a.dilations,h=a.dimRoundingMode,d=a.activation,m=a.leakyreluAlpha,v=DI(p),g=II(i.shape,o.shape,l,f,c,h,!1,v),y=[];if(1!==g.filterHeight||1!==g.filterWidth||1!==g.dilationHeight||1!==g.dilationWidth||1!==g.strideHeight||1!==g.strideWidth||"SAME"!==g.padInfo.type&&"VALID"!==g.padInfo.type)if(Dg().getBool("WEBGL_CONV_IM2COL")&&1===i.shape[0])t=_J({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:d,preluActivationWeights:u,leakyreluAlpha:m});else{var b=null!=s,x=null!=u,w="leakyrelu"===d,k=d?WX(d,!1):null,N=new EJ(g,b,k,x,w),I=[i,o];if(s&&I.push(s),u&&I.push(u),w){var S=r.makeTensorInfo([],"float32",Px(m,"float32"));I.push(S),y.push(S)}t=r.runWebGLProgram(N,I,"float32")}else t=FJ({x:i,filter:o,convInfo:g,backend:r,bias:s,activation:d,preluActivationWeights:u,leakyreluAlpha:m});var T=KX({inputs:{x:t},backend:r,attrs:{shape:g.outShape}});return y.push(t),y.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),T}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var qZ={kernelName:Rx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.filter,o=t.bias,s=t.preluActivationWeights,u=r.strides,l=r.pad,c=r.dilations,p=r.dimRoundingMode,f=r.activation,h=r.leakyreluAlpha,d=[],m=c;null==m&&(m=[1,1]),Kv(_I(u,m),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+u+" and dilations '"+m+"'"}));var v,g=II(a.shape,i.shape,u,m,l,p,!0),y=Dg().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels==1,b=f?WX(f,y):null,x=[a,i],w=null!=o,k=null!=s,N="leakyrelu"===f;if(w&&x.push(o),k&&x.push(s),N){var I=n.makeTensorInfo([],"float32",Px(h,"float32"));x.push(I),d.push(I)}v=y?new rZ(g,w,b,k,N):new nZ(g,w,b,k,N);var S=n.runWebGLProgram(v,x,"float32");return d.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),S}},KZ=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=bK(t.length),a=bK(n.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+a+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+i+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};var XZ={kernelName:jy,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=t.params,a=t.indices,i=a.shape,o=i[i.length-1],s=dN(r,a),u=s[0],l=s[1],c=s[2],p=s[3],f=KX({inputs:{x:a},backend:n,attrs:{shape:[l,o]}}),h=KX({inputs:{x:r},backend:n,attrs:{shape:[Zv(r.shape)/c,c]}}),d=new KZ(o,p,[l,c]),m=n.runWebGLProgram(d,[h,f],h.dtype),v=KX({inputs:{x:m},backend:n,attrs:{shape:u}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(m),v}},YZ=function(e,t){this.variableNames=["A","indices"],this.outputShape=t,this.rank=t.length;var n=bK(this.rank),r=function(e,t){for(var n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[],a=0;a<e.length;a++)2===a?r.push("int(getIndices(resRC.x, resRC.z))"):r.push(""+n[a]);return r.join()}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */(e);this.userCode="\n      void main() {\n        "+n+" resRC = getOutputCoords();\n        setOutput(getA("+r+"));\n      }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var JZ={kernelName:Gy,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.indices,o=r.axis,s=r.batchDims,u=bA(a,i,ag(o,a.shape)[0],s),l=Zv(i.shape),c=[],p=KX({inputs:{x:a},backend:n,attrs:{shape:[u.batchSize,u.outerSize,u.dimSize,u.sliceSize]}}),f=KX({inputs:{x:i},backend:n,attrs:{shape:[u.batchSize,l/u.batchSize]}});c.push(p),c.push(f);var h=[u.batchSize,u.outerSize,l/u.batchSize,u.sliceSize];if(n.shouldExecuteOnCPU([a,i])||"string"===a.dtype){var d=n.bufferSync(f),m=n.bufferSync(p),v=FK(m,d,h);return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),n.makeTensorInfo(u.outputShape,v.dtype,v.values)}var g=new YZ(p.shape,h),y=n.runWebGLProgram(g,[p,f],p.dtype);c.push(y);var b=KX({inputs:{x:y},backend:n,attrs:{shape:u.outputShape}});return c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),b}},ZZ=BX({opSnippet:"return float(a > b);",packedOpSnippet:"\n  return vec4(greaterThan(a, b));\n",cpuKernelImpl:_K,dtype:"bool"}),QZ={kernelName:Hy,backendName:"webgl",kernelFunc:ZZ},$Z=BX({opSnippet:"return float(a >= b);",packedOpSnippet:"\n  return vec4(greaterThanEqual(a, b));\n",dtype:"bool"}),eQ={kernelName:qy,backendName:"webgl",kernelFunc:$Z};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var tQ={kernelName:Xy,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend;return RZ(t.input,!0,n)}},nQ=PX({opSnippet:"return float(!isnan(x) && !isinf(x));",dtype:"bool"}),rQ={kernelName:Jy,backendName:"webgl",kernelFunc:nQ},aQ=PX({opSnippet:"return float(isinf(x));",dtype:"bool"}),iQ={kernelName:Zy,backendName:"webgl",kernelFunc:aQ},oQ=PX({opSnippet:"return float(isnan(x));",dtype:"bool"}),sQ={kernelName:Qy,backendName:"webgl",kernelFunc:oQ},uQ=BX({opSnippet:"return float(a < b);",packedOpSnippet:"\n  return vec4(lessThan(a, b));\n",cpuKernelImpl:DK,dtype:"bool"}),lQ={kernelName:eb,backendName:"webgl",kernelFunc:uQ},cQ=BX({opSnippet:"return float(a <= b);",packedOpSnippet:"\n  return vec4(lessThanEqual(a, b));\n",dtype:"bool"}),pQ={kernelName:tb,backendName:"webgl",kernelFunc:cQ};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var fQ={kernelName:nb,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.num,o=OK(r,a,i);return t.makeTensorInfo([o.length],"float32",o)}},hQ=PX({opSnippet:"if (x < 0.0) return NAN;\n  return log(x);",packedOpSnippet:"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",cpuKernelImpl:MK}),dQ={kernelName:rb,backendName:"webgl",kernelFunc:hQ},mQ=PX({opSnippet:"return log(1.0 + x);"}),vQ={kernelName:ab,backendName:"webgl",kernelFunc:mQ},gQ=BX({opSnippet:"return float(a >= 1.0 && b >= 1.0);",packedOpSnippet:"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n",dtype:"bool"}),yQ={kernelName:ib,backendName:"webgl",kernelFunc:gQ},bQ=PX({opSnippet:"return float(!(x >= 1.0));"}),xQ={kernelName:ob,backendName:"webgl",kernelFunc:bQ},wQ=BX({opSnippet:"return float(a >= 1.0 || b >= 1.0);",packedOpSnippet:"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n",dtype:"bool"}),kQ={kernelName:sb,backendName:"webgl",kernelFunc:wQ},NQ=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[];var i,o=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=.5===a?"inversesqrt("+u+")":1===a?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+o+"; j <= "+o+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+i+";\n        setOutput(val);\n      }\n    "},IQ=function(e,t,n,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";i=.5===a?"inversesqrt("+u+")":1===a?"1.0/("+u+")":"exp(log("+u+") * float(-"+a+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+o+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+o+"; j <= "+o+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+i+";\n        setOutput(result);\n      }\n    "},SQ={kernelName:lb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.depthRadius,o=r.bias,s=r.alpha,u=r.beta,l=Dg().getBool("WEBGL_PACK_NORMALIZATION")?new IQ(a.shape,i,o,s,u):new NQ(a.shape,i,o,s,u);return n.runWebGLProgram(l,[a],a.dtype)}},TQ=function(e,t,n,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=a,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+a+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+a+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},CQ={kernelName:cb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.y,o=t.dy,s=r.depthRadius,u=r.bias,l=r.alpha,c=r.beta,p=new TQ(a.shape,s,u,l,c);return n.runWebGLProgram(p,[a,i,o],a.dtype)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function EQ(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reductionIndices,o=r.keepDims,s=a.shape.length,u=ag(i,a.shape),l=u,c=uT(l,s),p=null!=c,f=n.shouldExecuteOnCPU([a]),h=a;if(p){if(f){for(var d=n.texData.get(h.dataId).values,m=new Array(s),v=0;v<m.length;v++)m[v]=a.shape[c[v]];var g=JK(d,a.shape,a.dtype,c,m);h=n.makeTensorInfo(m,a.dtype),n.texData.get(h.dataId).values=g}else h=eY(a,c,n);l=cT(l.length,s)}sT("max",l,s);var y,b=iT(h.shape,l),x=b[0],w=b[1],k=x;if(o&&(k=oT(x,u)),f){var N=n.texData.get(h.dataId).values,I=LK(N,Zv(w),k,a.dtype);y=n.makeTensorInfo(k,a.dtype),n.texData.get(y.dataId).values=I}else y=
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e,t,n,r){var a=Zv(t),i=KX({inputs:{x:e},attrs:{shape:[Zv(e.shape)/a,a]},backend:r}),o=ZX(i,e.dtype,"max",r),s=KX({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(h,w,k,n);return p&&n.disposeIntermediateTensorInfo(h),y}var RQ={kernelName:pb,backendName:"webgl",kernelFunc:EQ},AQ=BX({opSnippet:NX+"\n  return max(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+SX+"\n  return result;\n",cpuKernelImpl:zK}),FQ={kernelName:fb,backendName:"webgl",kernelFunc:AQ};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var _Q={kernelName:hb,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x;Wq(a,"maxPool");var i=r.filterSize,o=r.strides,s=r.pad,u=r.dimRoundingMode;Kv(_I(o,1),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+o+" and dilations '1'"}));var l=kI(a.shape,i,o,1,s,u);if(1===l.filterWidth&&1===l.filterHeight&&Qv(l.inShape,l.outShape))return CX({inputs:{x:a},backend:n});var c=new BY(l,"max",!1);return n.runWebGLProgram(c,[a],a.dtype)}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var DQ={kernelName:mb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.filterSize,o=r.strides,s=r.pad,u=r.dataFormat,l=r.dimRoundingMode,c=NI(a.shape,i,o,[1,1,1],s,l,u),p=new WY(c,"max",!1);return n.runWebGLProgram(p,[a],a.dtype)}},OQ=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,a=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=a-1-e.padInfo.top,s=i-1-e.padInfo.left,u=a*i-1;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+i+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+i+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},MQ=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,a=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,l=e.effectiveFilterWidth,c=s-1-e.padInfo.front,p=u-1-e.padInfo.top,f=l-1-e.padInfo.left,h=s*u*l-1;this.userCode="\n      const ivec3 pads = ivec3("+c+", "+p+", "+f+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+a+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+i+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+o+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+h+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+l+" +\n                  wR * "+l+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var LQ={kernelName:vb,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=r.filterSize,s=r.strides,u=r.pad,l=r.dimRoundingMode,c=NI(i.shape,o,s,[1,1,1],u,l),p=new WY(c,"max",!0),f=n.runWebGLProgram(p,[i],i.dtype),h=new MQ(c),d=n.runWebGLProgram(h,[a,f],i.dtype);return n.disposeIntermediateTensorInfo(f),d}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var zQ={kernelName:db,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.dy,i=t.input,o=i;Wq([i,t.output],"maxPoolGrad");var s=r.filterSize,u=r.strides,l=r.pad,c=r.dimRoundingMode,p=kI(o.shape,s,u,1,l,c),f=new BY(p,"max",!0),h=n.runWebGLProgram(f,[o],o.dtype),d=new OQ(p),m=n.runWebGLProgram(d,[a,h],o.dtype);return n.disposeIntermediateTensorInfo(h),m}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var PQ={kernelName:gb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.filterSize,o=n.strides,s=n.pad,u=n.includeBatchInIndex,l=r;Kv(4===a.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank "+a.shape.length+"."}));var c=[1,1];Kv(_I(o,c),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+c+"'"}));var p=kI(a.shape,i,o,c,s),f=function(e,t,n,r){var a=new BY(n,"max",!1),i=r.runWebGLProgram(a,[e],"float32");return a=new BY(n,"max",!0,!0,t),[i,r.runWebGLProgram(a,[e],"float32")]}(a,u,p,l);return[f[0],f[1]]}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
var BQ={kernelName:yb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=n.keepDims,o=n.axis,s=r,u=a.shape.length,l=ag(o,a.shape),c=l,p=uT(c,u),f=null!=p,h=s.shouldExecuteOnCPU([a]),d=[],m=a;if(f){if(h){for(var v=s.texData.get(m.dataId).values,g=new Array(u),y=0;y<g.length;y++)g[y]=a.shape[p[y]];var b=JK(v,a.shape,a.dtype,p,g);m=s.makeTensorInfo(g,a.dtype),s.texData.get(m.dataId).values=b}else m=eY(a,p,s);d.push(m),c=cT(c.length,u)}sT("sum",c,u);var x=iT(m.shape,c),w=x[0],k=x[1],N=w;i&&(N=oT(w,l));for(var I=function(e,t,n,r){var a=Zv(t),i=KX({inputs:{x:e},attrs:{shape:[Zv(e.shape)/a,a]},backend:r}),o=ZX(i,"float32","mean",r),s=KX({inputs:{x:o},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),s}(m,k,N,s),S=0,T=d;S<T.length;S++){var C=T[S];s.disposeIntermediateTensorInfo(C)}return I}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var WQ={kernelName:bb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.axis,o=r.keepDims,s=a.shape.length,u=ag(i,a.shape),l=u,c=uT(l,s),p=a;null!=c&&(p=rY({inputs:{x:a},backend:n,attrs:{perm:c}}),l=cT(l.length,a.shape.length)),sT("min",l,s);var f,h=iT(p.shape,l),d=h[0],m=KX({inputs:{x:p},backend:n,attrs:{shape:[-1,Zv(h[1])]}}),v=ZX(m,m.dtype,"min",n);return f=KX(o?{inputs:{x:v},backend:n,attrs:{shape:oT(d,u)}}:{inputs:{x:v},backend:n,attrs:{shape:d}}),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(v),null!=c&&n.disposeIntermediateTensorInfo(p),f}},VQ=BX({opSnippet:NX+"\n  return min(a, b);\n",packedOpSnippet:"\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  "+SX+"\n  return result;\n",cpuKernelImpl:PK}),UQ={kernelName:xb,backendName:"webgl",kernelFunc:VQ},GQ=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,a=bK(r),i=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r),u="reflect"===n?0:1;this.userCode=1!==r?"\n      "+a+" start = "+a+"("+i+");\n      "+a+" end = "+a+"("+o+");\n\n      void main() {\n        "+a+" outC = getOutputCoords();\n        for (int i = 0; i < "+r+"; i++) {\n          if (outC[i] < start[i]) {\n            outC[i] = start[i] * 2 - outC[i] - "+u+";\n          } else if(outC[i] >= end[i]) {\n            outC[i] = (end[i] - 1) * 2 - outC[i] + "+u+";\n          }\n        }\n        "+a+" coords = outC - start;\n        setOutput(getX("+s+"));\n      }\n    ":"\n        int start = "+i+";\n        int end = "+o+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start) {\n            outC = start * 2 - outC - "+u+";\n          } else if(outC >= end) {\n            outC = (end - 1) * 2 - outC + "+u+";\n          }\n          setOutput(getX(outC - start));\n        }\n      "},jQ=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,a=bK(r),i=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=$K("rc",r),u=$K("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=1===r?"source":"vec2("+u.slice(-2).join()+")",p="reflect"===n?0:1,f="";if(1===r){var h="\n        "+a+" source = rc;\n        if (source < start) {\n          source = start * 2 - source - "+p+";\n        } else if (source >= end) {\n          source = (end - 1) * 2 - source + "+p+";\n        }\n        source -= start;\n      ";f="\n        "+a+" rc = outputLoc;\n        "+h+"\n        result[0] = getChannel(getX("+u.join()+"), "+c+");\n        "+s[r-1]+" += 1;\n        if("+l+") {\n          "+h+"\n          result[1] = getChannel(getX("+u.join()+"), "+c+");\n        }\n      "}else{var d="\n        "+a+" source = rc;\n        "+a+" lt = "+a+"(lessThan(source, start));\n        "+a+" gte = "+a+"(greaterThanEqual(source, end));\n        "+a+" orig = 1 - (lt + gte);\n        source = orig * source +\n                lt * (start * 2 - source - "+p+") +\n                gte * ((end - 1) * 2 - source + "+p+");\n        source -= start;\n      ";f="\n        "+a+" rc = outputLoc;\n        "+d+"\n        result[0] = getChannel(getX("+u.join()+"), "+c+");\n        "+s[r-1]+" += 1;\n        if("+l+") {\n          "+d+"\n          result[1] = getChannel(getX("+u.join()+"), "+c+");\n        }\n        rc = outputLoc;\n        "+s[r-2]+" += 1;\n        if("+s[r-2]+" < "+this.outputShape[r-2]+") {\n          "+d+"\n          result[2] = getChannel(getX("+u.join()+"), "+c+");\n          "+s[r-1]+" += 1;\n          if("+l+") {\n            "+d+"\n            result[3] = getChannel(getX("+u.join()+"), "+c+");\n          }\n        }\n      "}this.userCode="\n      const "+a+" start = "+a+"("+i+");\n      const "+a+" end = "+a+"("+o+");\n\n      void main() {\n        "+a+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+f+"\n        setOutput(result);\n      }\n    "},HQ={kernelName:wb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.mode,s=Dg().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new jQ(a.shape,i,o):new GQ(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)}},qQ=BX({opSnippet:"if (b == 0.0) return NAN;\n  return mod(a, b);",packedOpSnippet:"\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  "+SX+"\n  return result;\n"}),KQ={kernelName:kb,backendName:"webgl",kernelFunc:qQ},XQ=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),YQ=BX({opSnippet:"\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",packedOpSnippet:"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n",checkOutOfBounds:!0}),JQ={kernelName:Ry,backendName:"webgl",kernelFunc:YQ},ZQ="return a - b;",QQ=BX({opSnippet:ZQ,packedOpSnippet:ZQ,supportsComplex:!0,cpuKernelImpl:KK}),$Q={kernelName:fx,backendName:"webgl",kernelFunc:QQ};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function e$(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=ag([r.dim],a.shape),o=EQ({inputs:{x:a},backend:n,attrs:{reductionIndices:i,keepDims:!1}}),s=oT(o.shape,i),u=KX({inputs:{x:o},backend:n,attrs:{shape:s}}),l=QQ({inputs:{a,b:u},backend:n}),c=wZ({inputs:{x:l},backend:n}),p=tY({inputs:{x:c},backend:n,attrs:{axis:i,keepDims:!1}}),f=KX({inputs:{x:p},backend:n,attrs:{shape:s}}),h=YQ({inputs:{a:c,b:f},backend:n});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(l),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(f),h}var t$={kernelName:lx,backendName:"webgl",kernelFunc:e$};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var n$={kernelName:Nb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.logits,i=r.numSamples,o=r.seed,s=r.normalized,u=s?a:e$({inputs:{logits:a},backend:n,attrs:{dim:a.shape.length-1}}),l=u.shape[0],c=u.shape[1],p=new XQ(l,c,i),f=p.getCustomSetupFunc(o),h=n.runWebGLProgram(p,[u],"int32",f);return s||n.disposeIntermediateTensorInfo(u),h}},r$="return -x;";
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var a$={kernelName:Sb,backendName:"webgl",kernelFunc:function(e){var t,n=e.inputs,r=e.backend,a=n.x;if(r.shouldExecuteOnCPU([a])){var i=r.texData.get(a.dataId),o=WK(i.values,a.shape,a.dtype),s=o[0],u=o[1];return r.makeTensorInfo(u,a.dtype,s)}return t=Dg().getBool("WEBGL_PACK_UNARY_OPERATIONS")?new yX(a.shape,r$):new oX(a.shape,r$),r.runWebGLProgram(t,[a],a.dtype)}},i$=YE;
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var o$={kernelName:Cb,backendName:"webgl",kernelFunc:function(e){sA("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=n.readSync(a.dataId),c=n.readSync(i.dataId),p=i$(l,c,o,s,u).selectedIndices;return n.makeTensorInfo([p.length],"int32",new Int32Array(p))}},s$=JE;
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var u$={kernelName:Eb,backendName:"webgl",kernelFunc:function(e){sA("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.padToMaxOutputSize,c=n.readSync(a.dataId),p=n.readSync(i.dataId),f=s$(c,p,o,s,u,l),h=f.selectedIndices,d=f.validOutputs;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([d]))]}},l$=ZE;
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var c$={kernelName:Rb,backendName:"webgl",kernelFunc:function(e){sA("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var t=e.inputs,n=e.backend,r=e.attrs,a=t.boxes,i=t.scores,o=r.maxOutputSize,s=r.iouThreshold,u=r.scoreThreshold,l=r.softNmsSigma,c=n.readSync(a.dataId),p=n.readSync(i.dataId),f=l$(c,p,o,s,u,l),h=f.selectedIndices,d=f.selectedScores;return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([d.length],"float32",new Float32Array(d))]}},p$=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},f$={kernelName:Fb,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=r.depth,o=r.onValue,s=r.offValue,u=Zv(a.shape),l=new p$(u,i,o,s),c=KX({inputs:{x:a},backend:n,attrs:{shape:[u]}}),p=n.runWebGLProgram(l,[c],a.dtype);n.disposeIntermediateTensorInfo(c);var f=KX({inputs:{x:p},backend:n,attrs:{shape:[].concat(a.shape,[i])}});return n.disposeIntermediateTensorInfo(p),f}};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function h$(e){var t=e.inputs,n=e.backend,r=t.x;if("complex64"===r.dtype){var a=oJ({inputs:{input:r},backend:n}),i=h$({inputs:{x:a},backend:n}),o=kJ({inputs:{input:r},backend:n}),s=h$({inputs:{x:o},backend:n}),u=RX({inputs:{real:i,imag:s},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(s),u}return _Z({attrs:{shape:r.shape,dtype:r.dtype,value:"string"===r.dtype?"":0},backend:n})}var d$={kernelName:Nx,backendName:"webgl",kernelFunc:h$};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var m$={kernelName:Ab,backendName:"webgl",kernelFunc:function e(t){var n=t.inputs,r=t.backend,a=n.x;if("string"===a.dtype)throw new Error("onesLike is not supported under string dtype");if("complex64"===a.dtype){var i=oJ({inputs:{input:a},backend:r}),o=e({inputs:{x:i},backend:r}),s=kJ({inputs:{input:a},backend:r}),u=h$({inputs:{x:s},backend:r}),l=RX({inputs:{real:o,imag:u},backend:r});return r.disposeIntermediateTensorInfo(i),r.disposeIntermediateTensorInfo(o),r.disposeIntermediateTensorInfo(s),r.disposeIntermediateTensorInfo(u),l}return _Z({attrs:{shape:a.shape,dtype:a.dtype,value:1},backend:r})}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var v$={kernelName:_b,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs.axis;if(1===t.length)return NZ({inputs:{input:t[0]},backend:n,attrs:{dim:r}});var a=t[0].shape,i=t[0].dtype;t.forEach((function(e){Xv(a,e.shape,"All tensors passed to stack must have matching shapes"),Kv(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var o=[],s=TJ({inputs:t.map((function(e){var t=NZ({inputs:{input:e},backend:n,attrs:{dim:r}});return o.push(t),t})),backend:n,attrs:{axis:r}});return o.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),s}},g$=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,a=bK(r),i=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+a+" start = "+a+"("+i+");\n      "+a+" end = "+a+"("+o+");\n\n      void main() {\n        "+a+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+a+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+i+";\n        int end = "+o+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},y$=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,a=bK(r),i=t.map((function(e){return e[0]})).join(","),o=t.map((function(t,n){return t[0]+e[n]})).join(","),s=$K("rc",r),u=$K("source",r),l=s[r-1]+" < "+this.outputShape[r-1],c=1===r?"source":"vec2("+u.slice(-2).join()+")",p=[a+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+l+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+l+") {"],f=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",d=0,m=1===r?2:4;d<m;d++)h+="\n        "+p[d]+"\n        if ("+f+") {\n          result["+d+"] = float("+n+");\n        } else {\n          "+a+" source = rc - start;\n          result["+d+"] = getChannel(getX("+u.join()+"), "+c+");\n        }\n      ";h+=1===r?"} ":"}}",this.userCode="\n      const "+a+" start = "+a+"("+i+");\n      const "+a+" end = "+a+"("+o+");\n\n      void main() {\n        "+a+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+h+"\n        setOutput(result);\n      }\n    "},b$=function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.paddings,o=r.constantValue,s=Dg().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new y$(a.shape,i,o):new g$(a.shape,i,o);return n.runWebGLProgram(s,[a],a.dtype)},x$={kernelName:Db,backendName:"webgl",kernelFunc:b$},w$=BX({opSnippet:"\n  if(a < 0.0 && floor(b) < b){\n    return NAN;\n  }\n  if (b == 0.0) {\n    return 1.0;\n  }\n  return (round(mod(b, 2.0)) != 1) ?\n      pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",packedOpSnippet:"\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  "+SX+"\n  return result;\n"}),k$={kernelName:Ob,backendName:"webgl",kernelFunc:w$};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var N$={kernelName:Lb,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.axis,s=a.keepDims,u=i.shape.length,l=[],c=ag(o,i.shape),p=c,f=uT(p,u),h=i;if(null!=f&&(h=rY({inputs:{x:i},backend:r,attrs:{perm:f}}),p=cT(p.length,u),l.push(h)),sT("prod",p,u),r.shouldExecuteOnCPU([h])){var d=r.texData.get(h.dataId).values,m=VK(h.shape,h.dtype,d,p),v=m.outVals,g=m.outShape,y=m.outDtype;t=r.makeTensorInfo(g,y,v)}else{var b=iT(h.shape,p),x=b[0],w=Zv(b[1]),k=KX({inputs:{x:h},backend:r,attrs:{shape:[-1,w]}}),N=ZX(k,hw(i.dtype),"prod",r);t=KX({inputs:{x:N},backend:r,attrs:{shape:x}}),l.push(k),l.push(N)}if(s){l.push(t);var I=oT(t.shape,c);t=KX({inputs:{x:t},backend:r,attrs:{shape:I}})}return l.forEach((function(e){return r.disposeIntermediateTensorInfo(e)})),t}},I$=function(e){var t=e.backend,n=e.attrs,r=n.start,a=n.stop,i=n.step,o=n.dtype,s=UK(r,a,i,o);return t.makeTensorInfo([s.length],o,s)},S$={kernelName:zb,backendName:"webgl",kernelFunc:I$},T$=PX({opSnippet:"return 1.0 / x;"}),C$={kernelName:Bb,backendName:"webgl",kernelFunc:T$},E$=PX({opSnippet:sX+"\n  return (x < 0.0) ? 0.0 : x;\n",packedOpSnippet:"\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),R$={kernelName:Wb,backendName:"webgl",kernelFunc:E$},A$=PX({opSnippet:sX+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",packedOpSnippet:"\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n"}),F$={kernelName:qb,backendName:"webgl",kernelFunc:A$},_$=function(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];var i=e[0],o=e[1],s=e[2],u=e[3];this.outputShape=[i,t,n,u];var l,c=[r&&t>1?o-1:o,r&&n>1?s-1:s],p=[r&&t>1?t-1:t,r&&n>1?n-1:n];l=a?"(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+c[0]/p[0]+",\n          "+c[1]/p[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+s+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = "+l+";\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},D$=function(e,t,n,r,a){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var i=e[0],o=e[1],s=e[2],u=e[3];this.outputShape=[i,t,n,u];var l,c=[r&&t>1?o-1:o,r&&n>1?s-1:s],p=[r&&t>1?t-1:t,r&&n>1?n-1:n];l=a?"(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":"vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+c[0]/p[0]+",\n          "+c[1]/p[1]+",\n          "+c[1]/p[1]+");\n      const vec3 inputShapeRC = vec3("+o+".0, "+s+".0,\n                                     "+s+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = "+l+";\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(u-1)+";\n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var O$={kernelName:jb,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=s[0],l=s[1],c=Dg().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new D$(a.shape,u,l,i,o):new _$(a.shape,u,l,i,o);return n.runWebGLProgram(c,[a],"float32")}},M$=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;var r=t[1],a=t[2],i=e[1],o=e[2],s=[n&&i>1?r-1:r,n&&o>1?a-1:a],u=[n&&i>1?i-1:i,n&&o>1?o-1:o],l=s[0]/u[0],c=s[1]/u[1],p=1/l,f=1/c,h=2*Math.ceil(p)+2,d=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+l+");\n        const float widthScale = float("+c+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+h+");\n        const int winWidth = int("+d+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+i+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+o+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(r-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(a-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var L$={kernelName:Hb,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new M$(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},z$=function(e,t,n,r,a){this.variableNames=["A"],this.outputShape=[];var i=e[0],o=e[1],s=e[2],u=e[3];this.outputShape=[i,t,n,u];var l,c=[r&&t>1?o-1:o,r&&n>1?s-1:s],p=[r&&t>1?t-1:t,r&&n>1?n-1:n],f=r?"0.5":"0.0";l=a?"max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":"vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+c[0]/p[0]+",\n          "+c[1]/p[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+s+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = "+l+";\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+f+")));\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var P$={kernelName:Ub,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=r.alignCorners,o=r.halfPixelCenters,s=r.size,u=s[0],l=s[1],c=new z$(a.shape,u,l,i,o);return n.runWebGLProgram(c,[a],a.dtype)}},B$=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t;var r=t[1],a=t[2],i=e[1],o=e[2],s=[n&&i>1?r-1:r,n&&o>1?a-1:a],u=[n&&i>1?i-1:i,n&&o>1?o-1:o],l=s[0]/u[0],c=s[1]/u[1],p=1/l,f=1/c,h=2*Math.ceil(p)+2,d=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+l+");\n        const float widthScale = float("+c+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+h+");\n        const int winWidth = int("+d+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+i+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+o+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+s[0]+") *\n                (float(dyR) / float("+u[0]+"));\n\n            float sourceFracCol =\n                float("+s[1]+") *\n                  (float(dyC) / float("+u[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+r+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+a+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var W$={kernelName:Gb,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.images,i=t.dy,o=r.alignCorners,s=new B$(i.shape,a.shape,o);return n.runWebGLProgram(s,[i],i.dtype)}},V$=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),a=bK(n);this.userCode="\n      void main() {\n        "+a+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},U$=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=$K("rc",n),a=r[n-1]+" + 1 < "+this.outputShape[n-1],i=r[n-2]+" + 1 < "+this.outputShape[n-2],o=bK(n);function s(n){var r=e.map((function(r,a){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(a,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+a+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+o+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+a+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+i+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+a+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var G$={kernelName:Kb,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.dims,o=a.shape.length,s=ag(i,a.shape);if(0===o)return CX({inputs:{x:a},backend:n});var u=Dg().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new U$(a.shape,s):new V$(a.shape,s);return n.runWebGLProgram(u,[a],a.dtype)}},j$=function(e,t,n,r){this.variableNames=["Image"],this.outputShape=[];var a=e[1],i=e[2],o=Math.sin(t).toFixed(3),s=Math.cos(t).toFixed(3);this.outputShape=e;var u=KR(r,a,i),l=u[0],c=u[1],p=l.toFixed(3),f=c.toFixed(3),h="";h="number"==typeof n?"float outputValue = "+n.toFixed(2)+";":"\n        vec3 fill = vec3("+n.join(",")+");\n        float outputValue = fill[coords[3]];",this.userCode="\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int x = coords[2];\n          int y = coords[1];\n          float coordXFloat = (float(x) - "+p+") * "+s+" - (float(y) - "+f+") * "+o+";\n          float coordYFloat = (float(x) - "+p+") * "+o+" + (float(y) - "+f+") * "+s+";\n          int coordX = int(round(coordXFloat + "+p+"));\n          int coordY = int(round(coordYFloat + "+f+"));\n          "+h+"\n          if(coordX >= 0 && coordX < "+i+" && coordY >= 0 && coordY < "+a+") {\n            outputValue = getImage(coords[0], coordY, coordX, coords[3]);\n          }\n          setOutput(outputValue);\n        }\n    "},H$={kernelName:Tx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.image,i=n.radians,o=n.fillValue,s=n.center,u=r,l=new j$(a.shape,i,o,s);return u.runWebGLProgram(l,[a],a.dtype)}},q$=PX({opSnippet:"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n"}),K$={kernelName:Xb,backendName:"webgl",kernelFunc:q$},X$=PX({opSnippet:"return inversesqrt(x);",cpuKernelImpl:GK}),Y$={kernelName:Yb,backendName:"webgl",kernelFunc:X$},J$=function(e,t,n,r,a,i,o){void 0===o&&(o=!0),this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var s=bK(a.length),u=bK(i.length),l="";1===n?l="i":2===n&&(l="i, j");var c="getIndices("+l+")",p="";1===r?p="i":2===r&&(p="i, coords[1]");var f="getUpdates("+p+")",h=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+a+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+c+");\n              flattenedIndex += index * "+h+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+f+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var Z$={kernelName:Jb,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.indices,i=t.updates,o=r.shape,s=yN(0,a,o),u=s.sliceRank,l=s.numUpdates,c=s.sliceSize,p=s.strides,f=s.outputSize,h=[f/c,c];if(0===f)return n.makeTensorInfo(o,a.dtype);var d=KX({inputs:{x:a},backend:n,attrs:{shape:[l,u]}}),m=KX({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),v=n.makeTensorInfo([],"float32",new Float32Array([0])),g=new J$(l,u,d.shape.length,m.shape.length,p,h),y=n.runWebGLProgram(g,[m,d,v],m.dtype),b=KX({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(v),b}},Q$=function(e,t,n){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)a="resRC",r="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],s=[],u=0;u<t.length;u++)s.push(""+i[u]),u<e&&o.push(""+i[u]);r=o.join(),a=s.join()}var l=bK(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+a+"));\n        } else {\n          setOutput(getB("+a+"));\n        }\n      }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var $$={kernelName:Zb,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=t.condition,a=t.t,i=t.e,o=new Q$(r.shape.length,a.shape,a.shape.length);return n.runWebGLProgram(o,[r,a,i],fw(a.dtype,i.dtype))}},e0=PX({opSnippet:"\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+$R+";\n  float scale = "+eA+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n"}),t0={kernelName:Qb,backendName:"webgl",kernelFunc:e0},n0=PX({opSnippet:"return 1.0 / (1.0 + exp(-1.0 * x));"}),r0={kernelName:rx,backendName:"webgl",kernelFunc:n0},a0=PX({opSnippet:"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n"}),i0={kernelName:nx,backendName:"webgl",kernelFunc:a0},o0=PX({opSnippet:zX+"\n  return sin(x);\n"}),s0={kernelName:ex,backendName:"webgl",kernelFunc:o0},u0=PX({opSnippet:"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n"}),l0={kernelName:tx,backendName:"webgl",kernelFunc:u0},c0=PX({opSnippet:"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n"}),p0={kernelName:ax,backendName:"webgl",kernelFunc:c0},f0={kernelName:sx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.blockShape,o=r.paddings;Kv(a.shape.length<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var s=i.reduce((function(e,t){return e*t})),u=[[0,0]];u.push.apply(u,o);for(var l=1+i.length;l<a.shape.length;++l)u.push([0,0]);var c=[],p=b$({inputs:{x:a},backend:n,attrs:{paddings:u,constantValue:0}}),f=XR(p.shape,i,s,!1),h=YR(f.length,i.length,!1),d=JR(p.shape,i,s,!1),m=KX({inputs:{x:p},backend:n,attrs:{shape:f}}),v=rY({inputs:{x:m},backend:n,attrs:{perm:h}}),g=KX({inputs:{x:v},backend:n,attrs:{shape:d}});return c.push(p),c.push(m),c.push(v),c.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var h0={kernelName:hx,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.sparseIndices,i=t.sparseValues,o=t.defaultValue,s=r.outputShape,u=yN(0,a,s),l=u.sliceRank,c=u.numUpdates,p=u.strides,f=u.outputSize,h=new J$(c,l,a.shape.length,i.shape.length,p,[f,1],!1),d=n.runWebGLProgram(h,[i,a,o],i.dtype),m=KX({inputs:{x:d},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(d),m}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var d0={kernelName:ux,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.numOrSizeSplits,o=ag(r.axis,a.shape)[0],s=vA(a,i,o),u=a.shape.length,l=new Array(u).fill(0),c=a.shape.slice();return s.map((function(e){var t=[].concat(c);t[o]=e;var r=eJ({inputs:{x:a},backend:n,attrs:{begin:l,size:t}});return l[o]+=e,r}))}},m0=PX({opSnippet:"return sqrt(x);"}),v0={kernelName:ix,backendName:"webgl",kernelFunc:m0},g0={kernelName:px,backendName:"webgl",kernelFunc:PX({opSnippet:"return x * x;"})},y0="return (a - b) * (a - b);",b0=BX({opSnippet:y0,packedOpSnippet:y0}),x0={kernelName:cx,backendName:"webgl",kernelFunc:b0};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var w0={kernelName:Ix,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=t.x,i=sX+"\n    return x > 0.0 ? 1.0 : float("+n.alpha+");\n  ",o=new oX(a.shape,i);return r.runWebGLProgram(o,[a],a.dtype)}},k0=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=bK(n.length),i=bK(n.length),o="";if(1===r)o="coords * strides + begin";else{var s=0;o=n.map((function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+a+" begin = "+a+"("+e+");\n      "+a+" strides = "+a+"("+t+");\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+o+"));\n      }\n    "};
/**
	 * @license
	 * Copyright 2017 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var N0={kernelName:dx,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t,n=e.inputs,r=e.backend,a=e.attrs,i=n.x,o=a.begin,s=a.end,u=a.strides,l=a.beginMask,c=a.endMask,p=a.ellipsisMask,f=a.newAxisMask,h=a.shrinkAxisMask,d=MN(i.shape,o,s,u,l,c,p,f,h),m=d.nonStrided,v=d.$begin,g=d.$strides,y=d.size,b=d.newShape,x=d.outShape,w=KX({inputs:{x:i},backend:r,attrs:{shape:b}});if(m){var k=eJ({inputs:{x:w},backend:r,attrs:{begin:v,size:y}});t=KX({inputs:{x:k},backend:r,attrs:{shape:x}}),r.disposeIntermediateTensorInfo(k)}else if(x.some((function(e){return 0===e})))t=r.makeTensorInfo(x,i.dtype,[]);else{if(r.shouldExecuteOnCPU([w])){var N=r.texData.get(w.dataId).values,I=zk(w.shape,w.dtype,N),S=qK(x,I,g,v);t=r.makeTensorInfo(x,w.dtype,S.values)}else{var T=new k0(v,g,x);t=r.runWebGLProgram(T,[w],w.dtype)}}var C=KX({inputs:{x:t},backend:r,attrs:{shape:x}});return r.disposeIntermediateTensorInfo(w),r.disposeIntermediateTensorInfo(t),C}},I0=PX({opSnippet:"return tan(x);"}),S0={kernelName:mx,backendName:"webgl",kernelFunc:I0},T0=PX({opSnippet:"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n"}),C0=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var a=bK(this.rank),i=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],a=0;a<e.length;a++)r.push("imod("+n[a]+", "+e[a]+")");return r.join()}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */(e);this.userCode="\n      void main() {\n        "+a+" resRC = getOutputCoords();\n        setOutput(getA("+i+"));\n      }\n    "};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */function E0(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.reps;if("string"===a.dtype){var o=n.readSync(a.dataId).map((function(e){return Gx(e)})),s=zk(a.shape,a.dtype,o),u=XK(s,i);return n.makeTensorInfo(u.shape,u.dtype,u.values)}var l=new C0(a.shape,i);return n.runWebGLProgram(l,[a],a.dtype)}var R0={kernelName:yx,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=r.k,o=r.sorted,s=n.readSync(a.dataId),u=YK(s,a.shape,a.dtype,i,o),l=u[0],c=u[1];return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the License);
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an AS IS BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var A0={kernelName:xx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.attrs,r=e.backend,a=n.axis,i=t.x;Wq(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");var o=r.readSync(i.dataId),s=ZK(o,a,i.shape,i.dtype),u=s.outputValues,l=s.outputShape,c=s.indices;return[r.makeTensorInfo(l,i.dtype,u),r.makeTensorInfo([c.length],"int32",c)]}};
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */var F0={kernelName:wx,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.value,i=r.axis;i<0&&(i+=a.shape.length);for(var o=a,s=o.shape.length,u=a.shape[i],l=new Array(s-1),c=0,p=0;p<s;p++)p!==i&&(l[c++]=o.shape[p]);var f=[],h=new Array(s).fill(0),d=o.shape.slice();d[i]=1;for(var m=new Array(u),v=0;v<m.length;v++){h[i]=v;var g=eJ({inputs:{x:o},backend:n,attrs:{begin:h,size:d}}),y=KX({inputs:{x:g},backend:n,attrs:{shape:l}});m[v]=y,f.push(g)}return f.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),m}},_0=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,a=e.inSize,i=e.numSegments,o=i*Math.ceil(a/n);this.outputShape=[r,o];var s=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, segFilter);\n    ",c="";a%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return initializationValue;\n        }\n      ");var p="";a%n>0&&(p="\n        if (inIdx < 0 || inIdx >= "+a+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+p+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+i+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+i+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(2===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(3===u)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */for(var D0={kernelName:kx,backendName:"webgl",kernelFunc:
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(e){var t=e.inputs,n=e.backend,r=e.attrs,a=t.x,i=t.segmentIds,o=r.numSegments,s=a.shape.length,u=[],l=0,c=uT([l],s),p=a;null!=c&&(p=rY({inputs:{x:a},backend:n,attrs:{perm:c}}),u.push(p),l=cT(1,s)[0]);var f=yA(p.shape,l,o),h=Zv([p.shape[l]]),d=KX({inputs:{x:p},backend:n,attrs:{shape:[-1,h]}});u.push(d);var m=function e(t,r,a,i,o){var s=t.shape[0],l=t.shape[1],c=gA(l,o),p=new _0({windowSize:c,inSize:l,batchSize:s,numSegments:o},r),f=n.compileAndRun(p,[t,a],i);if(u.push(f),f.shape[1]===o)return f;var h=I$({backend:n,attrs:{start:0,stop:o,step:1,dtype:"float32"}}),d=E0({inputs:{x:h},backend:n,attrs:{reps:[l/c]}});return u.push(h),u.push(d),e(f,r,d,i,o)}(d,"unsortedSegmentSum",i,hw(a.dtype),o),v=KX({inputs:{x:m},backend:n,attrs:{shape:f}}),g=v;if(null!=c){u.push(v);var y=lT(c);g=rY({inputs:{x:g},backend:n,attrs:{perm:y}})}return u.forEach((function(e){return n.disposeIntermediateTensorInfo(e)})),g}},O0=0,M0=[SQ,CQ,sY,lY,pY,hY,vY,bY,xY,wY,CY,EY,AY,_Y,LY,OY,PY,UY,VY,HY,qY,KY,JY,nJ,rJ,lJ,fJ,mJ,yJ,AX,CJ,PJ,BJ,DJ,VJ,UJ,WJ,jJ,qJ,XJ,QJ,$J,tZ,sZ,uZ,aZ,cZ,fZ,dZ,mZ,gZ,bZ,kZ,IZ,CZ,AZ,OZ,LZ,BZ,VZ,jZ,HZ,qZ,XZ,JZ,QZ,eQ,EX,tQ,NJ,rQ,iQ,sQ,DX,lQ,pQ,fQ,vQ,dQ,yQ,xQ,kQ,RQ,DQ,_Q,LQ,zQ,PQ,FQ,BQ,WQ,UQ,HQ,KQ,n$,qX,a$,o$,u$,c$,iJ,f$,m$,v$,x$,k$,LX,N$,S$,sJ,JQ,C$,F$,R$,XX,O$,L$,P$,W$,G$,H$,K$,Y$,Z$,$$,t0,r0,i0,s0,l0,tJ,t$,p0,f0,h0,d0,v0,g0,x0,w0,N0,$Q,nY,S0,{kernelName:vx,backendName:"webgl",kernelFunc:T0},{kernelName:gx,backendName:"webgl",kernelFunc:E0},R0,aY,A0,F0,D0,d$]
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */;O0<M0.length;O0++){Mx(M0[O0])}
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/** @license See the LICENSE file. */var L0={"tfjs-core":XN,"tfjs-backend-cpu":"2.8.3","tfjs-backend-webgl":"2.8.3","tfjs-data":FW,"tfjs-layers":HO,"tfjs-converter":kB,tfjs:"2.8.3"};
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
/**
	 * @license
	 * Copyright 2020 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
e.Abs=Lg,e.Acos=zg,e.Acosh=Pg,e.AdadeltaOptimizer=_R,e.AdagradOptimizer=DR,e.AdamOptimizer=OR,e.AdamaxOptimizer=MR,e.Add=Bg,e.AddN=Wg,e.All=Vg,e.Any=Ug,e.ArgMax=Gg,e.ArgMin=jg,e.Asin=Hg,e.Asinh=qg,e.Atan=Kg,e.Atan2=Yg,e.Atanh=Xg,e.AvgPool=Jg,e.AvgPool3D=Qg,e.AvgPool3DGrad=$g,e.AvgPoolGrad=Zg,e.BatchMatMul=ey,e.BatchToSpaceND=ty,e.Bincount=ny,e.BroadcastTo=ry,e.Callback=$z,e.CallbackList=rO,e.Cast=ay,e.Ceil=iy,e.ClipByValue=oy,e.Complex=sy,e.ComplexAbs=uy,e.Concat=ly,e.Conv2D=cy,e.Conv2DBackpropFilter=py,e.Conv2DBackpropInput=fy,e.Conv3D=hy,e.Conv3DBackpropFilterV2=dy,e.Conv3DBackpropInputV2=my,e.Cos=vy,e.Cosh=gy,e.CropAndResize=by,e.Cumsum=yy,e.CustomCallback=oO,e.DataStorage=Wv,e.DenseBincount=xy,e.DepthToSpace=wy,e.DepthwiseConv2dNative=ky,e.DepthwiseConv2dNativeBackpropFilter=Ny,e.DepthwiseConv2dNativeBackpropInput=Iy,e.Diag=Sy,e.Dilation2D=Ty,e.Dilation2DBackpropFilter=Ey,e.Dilation2DBackpropInput=Cy,e.EarlyStopping=nP,e.Elu=Ay,e.EluGrad=Fy,e.Environment=_g,e.Equal=Dy,e.Erf=_y,e.Exp=Oy,e.ExpandDims=My,e.Expm1=Ly,e.FFT=zy,e.Fill=Py,e.FlipLeftRight=By,e.Floor=Wy,e.FloorDiv=Vy,e.FromPixels=Sx,e.FusedBatchNorm=Uy,e.FusedConv2D=Ex,e.FusedDepthwiseConv2D=Rx,e.GatherNd=jy,e.GatherV2=Gy,e.GraphModel=xB,e.Greater=Hy,e.GreaterEqual=qy,e.History=iO,e.IFFT=Xy,e.Identity=Ky,e.Imag=Yy,e.InputSpec=GD,e.IsFinite=Jy,e.IsInf=Zy,e.IsNan=Qy,e.KernelBackend=Vv,e.LRN=lb,e.LRNGrad=cb,e.LayerVariable=WD,e.LayersModel=RM,e.LeakyRelu=$y,e.Less=eb,e.LessEqual=tb,e.LinSpace=nb,e.Log=rb,e.Log1p=ab,e.LogSoftmax=ub,e.LogicalAnd=ib,e.LogicalNot=ob,e.LogicalOr=sb,e.Max=pb,e.MaxPool=hb,e.MaxPool3D=mb,e.MaxPool3DGrad=vb,e.MaxPoolGrad=db,e.MaxPoolWithArgmax=gb,e.Maximum=fb,e.Mean=yb,e.Min=bb,e.Minimum=xb,e.MirrorPad=wb,e.Mod=kb,e.MomentumOptimizer=zR,e.Multinomial=Nb,e.Multiply=Ib,e.Neg=Sb,e.NonMaxSuppressionV3=Cb,e.NonMaxSuppressionV4=Eb,e.NonMaxSuppressionV5=Rb,e.NotEqual=Tb,e.OP_SCOPE_SUFFIX=Ow,e.OneHot=Fb,e.OnesLike=Ab,e.Optimizer=FR,e.Pack=_b,e.PadV2=Db,e.Pool="Pool",e.Pow=Ob,e.Prelu=Mb,e.Prod=Lb,e.RMSPropOptimizer=PR,e.RNN=ML,e.Range=zb,e.Real=Pb,e.RealDiv=Ry,e.Reciprocal=Bb,e.Relu=Wb,e.Relu6=qb,e.Reshape=Vb,e.ResizeBilinear=jb,e.ResizeBilinearGrad=Hb,e.ResizeNearestNeighbor=Ub,e.ResizeNearestNeighborGrad=Gb,e.Reverse=Kb,e.RotateWithOffset=Tx,e.Round=Xb,e.Rsqrt=Yb,e.SGDOptimizer=LR,e.ScatterNd=Jb,e.Select=Zb,e.Selu=Qb,e.Sequential=LM,e.Sigmoid=rx,e.Sign=nx,e.Sin=ex,e.Sinh=tx,e.Slice=$b,e.Softmax=lx,e.Softplus=ax,e.SpaceToBatchND=sx,e.SparseToDense=hx,e.SplitV=ux,e.Sqrt=ix,e.Square=px,e.SquaredDifference=cx,e.Step=Ix,e.StridedSlice=dx,e.Sub=fx,e.Sum=ox,e.SymbolicTensor=jD,e.Tan=mx,e.Tanh=vx,e.Tensor=aw,e.TensorBuffer=tw,e.Tile=gx,e.TopK=yx,e.Transpose=bx,e.Unique=xx,e.Unpack=wx,e.UnsortedSegmentSum=kx,e.Variable=cw,e.ZerosLike=Nx,e._FusedMatMul=Cx,e.abs=uI,e.acos=lI,e.acosh=cI,e.add=aI,e.addN=pI,e.addStrict=sE,e.all=fI,e.any=hI,e.argMax=dI,e.argMin=mI,e.asin=vI,e.asinh=gI,e.atan=yI,e.atan2=bI,e.atanh=xI,e.avgPool=MI,e.avgPool3d=LI,e.backend=rI,e.backend_util=kA,e.basicLSTMCell=VI,e.batchNorm=GI,e.batchNorm2d=jI,e.batchNorm3d=HI,e.batchNorm4d=qI,e.batchToSpaceND=UI,e.bincount=KI,e.booleanMaskAsync=eE,e.broadcastTo=XI,e.browser=hN,e.buffer=zk,e.callbacks=iP,e.cast=Pk,e.ceil=YI,e.clipByValue=JI,e.clone=Bk,e.complex=Lw,e.concat=zI,e.concat1d=ZI,e.concat2d=QI,e.concat3d=$I,e.concat4d=eS,e.constraints=N_,e.conv1d=nS,e.conv2d=tS,e.conv2dTranspose=aS,e.conv3d=iS,e.conv3dTranspose=sS,e.copyRegisteredKernels=function(e,t){Ox(e).forEach((function(e){Mx(Object.assign({},e,{backendName:t}))}))},e.cos=uS,e.cosh=lS,e.cosineWindow=IE,e.cumsum=cS,e.customGrad=XS,e.data=_W,e.denseBincount=pS,e.deprecationWarn=YN,e.depthToSpace=fS,e.depthwiseConv2d=hS,e.deregisterOp=function(e){delete oP[e]},e.device_util=Cw,e.diag=dS,e.dilation2d=mS,e.disableDeprecationWarnings=function(){Dg().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")},e.dispose=$N,e.disposeVariables=function(){Nw.disposeVariables()},e.div=oI,e.divNoNan=kS,e.divStrict=uE,e.dot=NS,e.dropout=kE,e.elu=IS,e.enableDebugMode=function(){Dg().set("DEBUG",!0)},e.enableProdMode=
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */
function(){Dg().set("PROD",!0)},e.enclosingPowerOfTwo=NE,e.engine=JN,e.env=Dg,e.equal=bS,e.equalStrict=tE,e.erf=SS,e.exp=TS,e.expandDims=CS,e.expm1=ES,e.eye=AS,e.fft=AC,e.fill=FS,e.findBackend=function(e){return Nw.findBackend(e)},e.findBackendFactory=function(e){return Nw.findBackendFactory(e)},e.floor=_S,e.floorDiv=iI,e.fused=zE,e.gather=DS,e.gatherND=wE,e.gather_util=mN,e.getBackend=function(){return Nw.backendName},e.getGradient=Dx,e.getKernel=_x,e.getKernelsForBackend=Ox,e.grad=function(e){return Kv(yg(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=_w(t,"x","tf.grad","string_or_numeric"),a=null!=n?_w(n,"dy","tf.grad"):null;return Nw.tidy((function(){var t=Nw.gradients((function(){return e(r)}),[r],a),n=t.value,i=t.grads;return null!=a&&Xv(n.shape,a.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),YS(i),i[0]}))}},e.grads=function(e){return Kv(yg(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){Kv(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var r=Dw(t,"args","tf.grads","string_or_numeric"),a=null!=n?_w(n,"dy","tf.grads"):null;return Nw.tidy((function(){var t=Nw.gradients((function(){return e.apply(void 0,r)}),r,a),n=t.value,i=t.grads;return null!=a&&Xv(n.shape,a.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),YS(i),i}))}},e.greater=OS,e.greaterEqual=MS,e.greaterEqualStrict=nE,e.greaterStrict=rE,e.ifft=FC,e.imag=LS,e.image=ER,e.inTopKAsync=TE,e.initializers=RD,e.input=zM,e.io=aN,e.irfft=_C,e.isFinite=zS,e.isInf=PS,e.isNaN=BS,e.keep=eI,e.kernel_impls=NA,e.layers=Yz,e.leakyRelu=WS,e.less=VS,e.lessEqual=US,e.lessEqualStrict=aE,e.lessStrict=iE,e.linalg=RR,e.linspace=GS,e.loadGraphModel=function(e,t){return wB.apply(this,arguments)},e.loadLayersModel=function(e,t){return null==t&&(t={}),function(e,t){return _M.apply(this,arguments)}(e,t)},e.localResponseNormalization=jS,e.log=HS,e.log1p=qS,e.logSigmoid=QS,e.logSoftmax=nT,e.logSumExp=pT,e.logicalAnd=fT,e.logicalNot=hT,e.logicalOr=dT,e.logicalXor=mT,e.losses=AR,e.matMul=iN,e.math=lN,e.max=$S,e.maxPool=vT,e.maxPool3d=gT,e.maxPoolWithArgmax=yT,e.maximum=bT,e.maximumStrict=lE,e.mean=xT,e.memory=ZN,e.metrics=Jz,e.min=wT,e.minimum=kT,e.minimumStrict=cE,e.mirrorPad=NT,e.mod=IT,e.modStrict=pE,e.model=
/**
	 * @license
	 * Copyright 2018 Google LLC
	 *
	 * Use of this source code is governed by an MIT-style
	 * license that can be found in the LICENSE file or at
	 * https://opensource.org/licenses/MIT.
	 * =============================================================================
	 */
function(e){return new RM(e)},e.models=Zz,e.moments=TT,e.movingAverage=yE,e.mul=sI,e.mulStrict=fE,e.multiRNNCell=CT,e.multinomial=ET,e.neg=JS,e.nextFrame=UR,e.norm=gE,e.notEqual=RT,e.notEqualStrict=oE,e.oneHot=oN,e.ones=FT,e.onesLike=_T,e.op=Mw,e.outerProduct=DT,e.pad=OT,e.pad1d=MT,e.pad2d=LT,e.pad3d=zT,e.pad4d=PT,e.pool=WT,e.pow=VT,e.powStrict=hE,e.prelu=UT,e.print=Wk,e.prod=GT,e.profile=function(e){return Nw.profile(e)},e.rand=jT,e.randomGamma=nC,e.randomNormal=rC,e.randomUniform=aC,e.range=iC,e.ready=function(){return Nw.ready()},e.real=oC,e.reciprocal=sC,e.registerBackend=nI,e.registerCallbackConstructor=function(e,t){uO.registerCallbackConstructor(e,t)},e.registerGradient=Lx,e.registerKernel=Mx,e.registerOp=function(e,t){var n={tfOpName:e,category:"custom",inputs:[],attrs:[],customExecutor:t};oP[e]=n},e.regularizers=Qz,e.relu=uC,e.relu6=lC,e.removeBackend=function(e){Nw.removeBackend(e)},e.reshape=OI,e.reverse=cC,e.reverse1d=pC,e.reverse2d=fC,e.reverse3d=hC,e.reverse4d=dC,e.rfft=OC,e.round=mC,e.rsqrt=vC,e.scalar=gC,e.scatterND=bE,e.scatter_util=bN,e.selu=yC,e.separableConv2d=bC,e.sequential=function(e){return new LM(e)},e.serialization=WN,e.setBackend=tI,e.setPlatform=function(e,t){Dg().setPlatform(e,t)},e.setdiff1dAsync=wC,e.sigmoid=PI,e.sign=kC,e.signal=CR,e.sin=NC,e.sinh=IC,e.slice=BI,e.slice1d=SC,e.slice2d=TC,e.slice3d=CC,e.slice4d=EC,e.slice_util=LN,e.softmax=RC,e.softplus=ZS,e.spaceToBatchND=BT,e.sparseToDense=xE,e.spectral=TR,e.split=DC,e.sqrt=MC,e.square=ST,e.squaredDifference=LC,e.squaredDifferenceStrict=dE,e.squeeze=zC,e.stack=PC,e.step=BC,e.stridedSlice=WC,e.sub=eT,e.subStrict=mE,e.sum=tT,e.sumOutType=hw,e.tan=VC,e.tanh=WI,e.tensor=Pw,e.tensor1d=UC,e.tensor2d=GC,e.tensor3d=cN,e.tensor4d=function(e,t,n){if(Yv(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=Rw(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return zw(e,t,r,n)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */,e.tensor5d=function(e,t,n){if(Yv(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=Rw(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return zw(e,t,r,n)}
/**
	 * @license
	 * Copyright 2018 Google LLC. All Rights Reserved.
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 * =============================================================================
	 */,e.tensor6d=function(e,t,n){if(Yv(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=Rw(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return zw(e,t=t||r,r,n)},e.tensor_util=bw,e.test_util=KN,e.tidy=QN,e.tile=RS,e.time=function(e){return Nw.time(e)},e.topk=jC,e.train=WR,e.transpose=sN,e.truncatedNormal=HC,e.unique=qC,e.unregisterGradient=function(e){if(!Fx.has(e))throw new Error("The gradient '"+e+"' for backend is not registered");Fx.delete(e)},e.unregisterKernel=function(e,t){var n=zx(e,t);if(!Ax.has(n))throw new Error("The kernel '"+e+"' for backend '"+t+"' is not registered");Ax.delete(n)},e.unsortedSegmentSum=KC,e.unstack=XC,e.upcastType=fw,e.util=jx,e.valueAndGrad=function(e){return Kv(yg(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){Kv(t instanceof aw,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),Kv(null==n||n instanceof aw,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=Nw.gradients((function(){return e(t)}),[t],n),a=r.grads,i=r.value;return YS(a),{grad:a[0],value:i}}},e.valueAndGrads=function(e){return Kv(yg(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){Kv(Array.isArray(t)&&t.every((function(e){return e instanceof aw})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),Kv(null==n||n instanceof aw,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var r=Nw.gradients((function(){return e.apply(void 0,t)}),t,n);return null!=n&&Xv(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),YS(r.grads),r}},e.variable=YC,e.variableGrads=KS,e.version=L0,e.version_converter=kB,e.version_core=XN,e.version_layers=HO,e.where=xS,e.whereAsync=QC,e.zeros=AT,e.zerosLike=wS,Object.defineProperty(e,"__esModule",{value:!0})}));