!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).loadPyodide={})}(this,(function(e){"use strict";var t,r,i,n,o={exports:{}},a=(o.exports=function(){function e(e){return e.charAt(0).toUpperCase()+e.substring(1)}function t(e){return function(){return this[e]}}var r=["isConstructor","isEval","isNative","isToplevel"],i=["columnNumber","lineNumber"],n=["fileName","functionName","source"],o=r.concat(i,n,["args"],["evalOrigin"]);function a(t){if(t)for(var r=0;r<o.length;r++)void 0!==t[o[r]]&&this["set"+e(o[r])](t[o[r]])}a.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof a)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new a(e)}},toString:function(){var e=this.getFileName()||"",t=this.getLineNumber()||"",r=this.getColumnNumber()||"",i=this.getFunctionName()||"";return this.getIsEval()?e?"[eval] ("+e+":"+t+":"+r+")":"[eval]:"+t+":"+r:i?i+" ("+e+":"+t+":"+r+")":e+":"+t+":"+r}},a.fromString=function(e){var t,r,i,n=e.indexOf("("),o=e.lastIndexOf(")"),s=e.substring(0,n);n=e.substring(n+1,o).split(",");return 0===(e=e.substring(o+1)).indexOf("@")&&(t=(o=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e,""))[1],r=o[2],i=o[3]),new a({functionName:s,args:n||void 0,fileName:t,lineNumber:r||void 0,columnNumber:i||void 0})};for(var s=0;s<r.length;s++)a.prototype["get"+e(r[s])]=t(r[s]),a.prototype["set"+e(r[s])]=function(e){return function(t){this[e]=Boolean(t)}}(r[s]);for(var l=0;l<i.length;l++)a.prototype["get"+e(i[l])]=t(i[l]),a.prototype["set"+e(i[l])]=function(e){return function(t){if(r=t,isNaN(parseFloat(r))||!isFinite(r))throw new TypeError(e+" must be a Number");var r;this[e]=Number(t)}}(i[l]);for(var c=0;c<n.length;c++)a.prototype["get"+e(n[c])]=t(n[c]),a.prototype["set"+e(n[c])]=function(e){return function(t){this[e]=String(t)}}(n[c]);return a}(),t=o.exports,r=/(^|@)\S+:\d+/,i=/^\s*at .*(\S+:\d+|\(native\))/m,n=/^(eval@)?(\[native code])?$/,{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(i))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){return-1===e.indexOf(":")?[e]:[(e=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,"")))[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(i)}),this).map((function(e){var r=(n=(r=(e=-1<e.indexOf("(eval ")?e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(,.*$)/g,""):e).replace(/^\s+/,"").replace(/\(eval code/g,"(").replace(/^.*?\s+/,"")).match(/ (\(.+\)$)/))?r.replace(n[0],""):r,i=this.extractLocation(n?n[1]:r),n=n&&r||void 0;r=-1<["eval","<anonymous>"].indexOf(i[0])?void 0:i[0];return new t({functionName:n,fileName:r,lineNumber:i[1],columnNumber:i[2],source:e})}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(n)}),this).map((function(e){if(-1===(e=-1<e.indexOf(" > eval")?e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1"):e).indexOf("@")&&-1===e.indexOf(":"))return new t({functionName:e});var r=/((.*".+"[^@]*)?[^@]*)(?:@)/,i=(i=e.match(r))&&i[1]?i[1]:void 0;r=this.extractLocation(e.replace(r,""));return new t({functionName:i,fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e})}),this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,i=e.message.split("\n"),n=[],o=2,a=i.length;o<a;o+=2){var s=r.exec(i[o]);s&&n.push(new t({fileName:s[2],lineNumber:s[1],source:i[o]}))}return n},parseOpera10:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,i=e.stacktrace.split("\n"),n=[],o=0,a=i.length;o<a;o+=2){var s=r.exec(i[o]);s&&n.push(new t({functionName:s[3]||void 0,fileName:s[2],lineNumber:s[1],source:i[o]}))}return n},parseOpera11:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(r)&&!e.match(/^Error created at/)}),this).map((function(e){var r,i=e.split("@"),n=this.extractLocation(i.pop()),o=(i=i.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;i=void 0===(r=i.match(/\(([^)]*)\)/)?i.replace(/^[^(]+\(([^)]*)\)$/,"$1"):r)||"[arguments not available]"===r?void 0:r.split(",");return new t({functionName:o,args:i,fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:e})}),this)}});const s="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&void 0===process.browser;let l,c,d,u,p,f,m,y,h;if(f=s?function(e,t){return d.resolve(t||".",e)}:function(e,t){return void 0===t&&(t=location),new URL(e,t).toString()},s||(m="/"),y=s?async function(e,t){if((e=e.startsWith("file://")?e.slice(7):e).includes("://")){let t=await c(e);if(t.ok)return new Uint8Array(await t.arrayBuffer());throw new Error(`Failed to load '${e}': request failed.`)}return e=await p.readFile(e),new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}:async function(e,t){e=new URL(e,location);let r=t?{integrity:t}:{},i=await fetch(e,r);if(i.ok)return new Uint8Array(await i.arrayBuffer());throw new Error(`Failed to load '${e}': request failed.`)},globalThis.document)h=async e=>import(e);else if(globalThis.importScripts)h=async e=>{try{globalThis.importScripts(e)}catch(t){if(!(t instanceof TypeError))throw t;await import(e)}};else{if(!s)throw new Error("Cannot determine runtime environment");h=async function(e){(e=e.startsWith("file://")?e.slice(7):e).includes("://")?u.runInThisContext(await(await c(e)).text()):await import(l.pathToFileURL(e).href)}}const g=async e=>{const t=[],r=(await async function e(r){var i,n;try{for(var o,a=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&i>=e.length?void 0:e)&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise((function(i,n){var o,a;o=i,i=n,a=(t=e[r](t)).done,n=t.value,Promise.resolve(n).then((function(e){o({value:e,done:a})}),i)}))}}}(r.values());!(o=await a.next()).done;){var s=o.value;t.push(s),"directory"===s.kind&&await e(s)}}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=a.return)&&await n.call(a)}finally{if(i)throw i.error}}}(e),new Map);r.set(".",e);for(const n of t){var i=(await e.resolve(n)).join("/");r.set(i,n)}return r};async function v(e={}){if(s&&(l=(await import("url")).default,p=await import("fs/promises"),c=globalThis.fetch?fetch:(await import("node-fetch")).default,u=(await import("vm")).default,d=await import("path"),m=d.sep,"undefined"==typeof require)){const e={fs:await import("fs"),crypto:await import("crypto"),ws:await import("ws"),child_process:await import("child_process")};globalThis.require=function(t){return e[t]}}await 0;let t=e.indexURL||function(){if("string"==typeof __dirname)return __dirname;let e;try{throw new Error}catch(t){e=t}let t=a.parse(e)[0].fileName;var r=t.lastIndexOf(m);if(-1===r)throw new Error("Could not extract indexURL path from pyodide module location");return t.slice(0,r)}();(t=f(t)).endsWith("/")||(t+="/"),e.indexURL=t;const r={fullStdLib:!1,jsglobals:globalThis,stdin:globalThis.prompt||void 0,homedir:"/home/pyodide",lockFileURL:t+"repodata.json",args:[],_node_mounts:[]},i=Object.assign(r,e),n=function(){let e={noImageDecoding:!0,noAudioDecoding:!0,noWasmDecoding:!1,preRun:[],quit:(t,r)=>{throw e.exited={status:t,toThrow:r},r}};return e}(),o=(n.print=i.stdout,n.printErr=i.stderr,n.arguments=i.args,{config:i});if(n.API=o,function(e,t){var r,i,n,o,a=null!=t.stdLibURL?t.stdLibURL:t.indexURL+"python_stdlib.zip";{var s=e;const t=y(a);s.preRun.push((()=>{const e=s._py_version_major(),r=s._py_version_minor();s.FS.mkdirTree("/lib"),s.FS.mkdirTree(`/lib/python${e}.${r}/site-packages`),s.addRunDependency("install-stdlib"),t.then((t=>{s.FS.writeFile(`/lib/python${e}${r}.zip`,t)})).catch((e=>{console.error("Error occurred while installing the standard library:"),console.error(e)})).finally((()=>{s.removeRunDependency("install-stdlib")}))}))}n=e,o=t.homedir,n.preRun.push((function(){try{n.FS.mkdirTree(o)}catch(e){console.error(`Error occurred while making a home directory '${o}':`),console.error(e),console.error("Using '/' for a home directory instead"),o="/"}n.ENV.HOME=o,n.FS.chdir(o)})),r=e,i=t._node_mounts,r.preRun.push((()=>{for(const e of i)r.FS.mkdirTree(e),r.FS.mount(r.FS.filesystems.NODEFS,{root:e},e)})),e.preRun.push((()=>{{var t=e;const r=t.FS,i=t.FS.filesystems.MEMFS,n=t.PATH,o={DIR_MODE:16895,FILE_MODE:33279,mount:function(e){if(e.opts.fileSystemHandle)return i.mount.apply(null,arguments);throw new Error("opts.fileSystemHandle is required")},syncfs:async(e,t,r)=>{try{var i=o.getLocalSet(e),n=await o.getRemoteSet(e),a=t?n:i,s=t?i:n;await o.reconcile(e,a,s),r(null)}catch(e){r(e)}},getLocalSet:e=>{let t=Object.create(null);function i(e){return"."!==e&&".."!==e}function o(e){return t=>n.join2(e,t)}let a=r.readdir(e.mountpoint).filter(i).map(o(e.mountpoint));for(;a.length;){var s=a.pop(),l=r.stat(s);r.isDir(l.mode)&&a.push.apply(a,r.readdir(s).filter(i).map(o(s))),t[s]={timestamp:l.mtime,mode:l.mode}}return{type:"local",entries:t}},getRemoteSet:async e=>{const t=Object.create(null),r=await g(e.opts.fileSystemHandle);for(var[i,a]of r)"."!==i&&(t[n.join2(e.mountpoint,i)]={timestamp:"file"===a.kind?(await a.getFile()).lastModifiedDate:new Date,mode:"file"===a.kind?o.FILE_MODE:o.DIR_MODE});return{type:"remote",entries:t,handles:r}},loadLocalEntry:e=>{const t=r.lookupPath(e).node,n=r.stat(e);if(r.isDir(n.mode))return{timestamp:n.mtime,mode:n.mode};if(r.isFile(n.mode))return t.contents=i.getFileDataAsTypedArray(t),{timestamp:n.mtime,mode:n.mode,contents:t.contents};throw new Error("node type not supported")},storeLocalEntry:(e,t)=>{if(r.isDir(t.mode))r.mkdirTree(e,t.mode);else{if(!r.isFile(t.mode))throw new Error("node type not supported");r.writeFile(e,t.contents,{canOwn:!0})}r.chmod(e,t.mode),r.utime(e,t.timestamp,t.timestamp)},removeLocalEntry:e=>{var t=r.stat(e);r.isDir(t.mode)?r.rmdir(e):r.isFile(t.mode)&&r.unlink(e)},loadRemoteEntry:async e=>{if("file"===e.kind){const t=await e.getFile();return{contents:new Uint8Array(await t.arrayBuffer()),mode:o.FILE_MODE,timestamp:t.lastModifiedDate}}if("directory"===e.kind)return{mode:o.DIR_MODE,timestamp:new Date};throw new Error("unknown kind: "+e.kind)},storeRemoteEntry:async(e,t,i)=>{const o=e.get(n.dirname(t)),a=r.isFile(i.mode)?await o.getFileHandle(n.basename(t),{create:!0}):await o.getDirectoryHandle(n.basename(t),{create:!0});if("file"===a.kind){const e=await a.createWritable();await e.write(i.contents),await e.close()}e.set(t,a)},removeRemoteEntry:async(e,t)=>{const r=e.get(n.dirname(t));await r.removeEntry(n.basename(t)),e.delete(t)},reconcile:async(e,t,i)=>{let a=0;const s=[],l=(Object.keys(t.entries).forEach((function(e){const n=t.entries[e],o=i.entries[e];(!o||r.isFile(n.mode)&&n.timestamp.getTime()>o.timestamp.getTime())&&(s.push(e),a++)})),s.sort(),[]);if(Object.keys(i.entries).forEach((function(e){t.entries[e]||(l.push(e),a++)})),l.sort().reverse(),a){const r=("remote"===t.type?t:i).handles;for(const t of s){var c,d=n.normalize(t.replace(e.mountpoint,"/")).substring(1);"local"===i.type?(c=r.get(d),c=await o.loadRemoteEntry(c),o.storeLocalEntry(t,c)):(c=o.loadLocalEntry(t),await o.storeRemoteEntry(r,d,c))}for(const t of l){var u;"local"===i.type?o.removeLocalEntry(t):(u=n.normalize(t.replace(e.mountpoint,"/")).substring(1),await o.removeRemoteEntry(r,u))}}}};return void(t.FS.filesystems.NATIVEFS_ASYNC=o)}}))}(n,i),e=new Promise((e=>n.postRun=e)),n.locateFile=e=>i.indexURL+e,"function"!=typeof _createPyodideModule&&(v=i.indexURL+"pyodide.asm.js",await h(v)),await _createPyodideModule(n),await e,n.exited)throw n.exited.toThrow;if("0.23.2"!==o.version)throw new Error(`Pyodide version does not match: '0.23.2' <==> '${o.version}'. If you updated the Pyodide version, make sure you also updated the 'indexURL' parameter passed to loadPyodide.`);n.locateFile=e=>{throw new Error("Didn't expect to load any more file_packager files!")};var[v,e]=o.rawRun("import _pyodide_core");v&&n.API.fatal_loading_error("Failed to import _pyodide_core\n",e);const w=function(e,t){e.runPythonInternal_dict=e._pyodide._base.eval_code("{}"),e.importlib=e.runPythonInternal("import importlib; importlib");let r=e.importlib.import_module;e.sys=r("sys"),e.sys.path.insert(0,t.homedir),e.os=r("os");var i,n=e.runPythonInternal("import __main__; __main__.__dict__"),o=e.runPythonInternal("import builtins; builtins.__dict__");e.globals=(i=o,new Proxy(n,{get:(e,t)=>"get"===t?t=>{let r=e.get(t);return void 0===r?i.get(t):r}:"has"===t?t=>e.has(t)||i.has(t):Reflect.get(e,t)}));let a=e._pyodide._importhook,s=(a.register_js_finder(),a.register_js_module("js",t.jsglobals),e.makePublicAPI());return a.register_js_module("pyodide_js",s),e.pyodide_py=r("pyodide"),e.pyodide_code=r("pyodide.code"),e.pyodide_ffi=r("pyodide.ffi"),e.package_loader=r("pyodide._package_loader"),e.sitepackages=e.package_loader.SITE_PACKAGES.__str__(),e.dsodir=e.package_loader.DSO_DIR.__str__(),e.defaultLdLibraryPath=[e.dsodir,e.sitepackages],e.os.environ.__setitem__("LD_LIBRARY_PATH",e.defaultLdLibraryPath.join(":")),s.pyodide_py=e.pyodide_py,s.globals=e.globals,s}(o,i);if(w.version.includes("dev")||o.setCdnUrl(`https://cdn.jsdelivr.net/pyodide/v${w.version}/full/`),await o.packageIndexReady,o._pyodide._importhook.register_module_not_found_hook(o._import_name_to_package_name,o.repodata_unvendored_stdlibs_and_test),"0.23.2"!==o.repodata_info.version)throw new Error("Lock file version doesn't match Pyodide version");return o.package_loader.init_loaded_packages(),i.fullStdLib&&await w.loadPackage(o.repodata_unvendored_stdlibs),o.initializeStreams(i.stdin,i.stdout,i.stderr),w}globalThis.loadPyodide=v,e.loadPyodide=v,e.version="0.23.2",Object.defineProperty(e,"__esModule",{value:!0})}));